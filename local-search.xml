<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>JS数据类型&amp;&amp;堆栈&amp;&amp;JS的基本规范</title>
    <link href="/2021/07/01/JS%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B&amp;&amp;%E5%A0%86%E6%A0%88&amp;&amp;JS%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%A7%84%E8%8C%83/"/>
    <url>/2021/07/01/JS%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B&amp;&amp;%E5%A0%86%E6%A0%88&amp;&amp;JS%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%A7%84%E8%8C%83/</url>
    
    <content type="html"><![CDATA[<p>JS数据类型&amp;&amp;堆栈&amp;&amp;JS的基本规范</p><hr><h3 id="介绍-js-的基本数据类型"><a href="#介绍-js-的基本数据类型" class="headerlink" title="介绍 js 的基本数据类型"></a>介绍 js 的基本数据类型</h3><p>js 一共有六种基本数据类型，分别是 <code>Undefined、Null、Boolean、Number、String</code>，还有在 ES6 中新增的 Symbol 和 ES10 中新增的 BigInt 类型。</p><p>Symbol 代表创建后独一无二且不可变的数据类型，它的出现我认为主要是为了解决可能出现的<strong>全局变量冲突的问题</strong>。</p><p>BigInt 是一种数字类型的数据，它可以表示任意精度格式的整数，使用 BigInt 可以<strong>安全地存储和操作大整数</strong>，即使这个数已经超出了 Number 能够表示的安全整数范围。</p><h3 id="JavaScript-有几种类型的值？你能画一下他们的内存图吗？"><a href="#JavaScript-有几种类型的值？你能画一下他们的内存图吗？" class="headerlink" title="JavaScript 有几种类型的值？你能画一下他们的内存图吗？"></a>JavaScript 有几种类型的值？你能画一下他们的内存图吗？</h3><p>涉及知识点：</p><ul><li>栈：原始数据类型（Undefined、Null、Boolean、Number、String）</li><li>堆：引用数据类型（对象、数组和函数）</li></ul><p>两种类型的区别是：存储位置不同。<br>原始数据类型直接存储在栈（stack）中的简单数据段，占据空间小、大小固定，属于被频繁使用数据，所以放入栈中存储。</p><p>引用数据类型存储在堆（heap）中的对象，占据空间大、大小不固定。如果存储在栈中，将会影响程序运行的性能；引用数据类型在栈中存储了指针，该指针指向堆中该实体的起始地址。当解释器寻找引用值时，会首先检索其在栈中的地址，取得地址后从堆中获得实体。</p><h4 id="回答"><a href="#回答" class="headerlink" title="回答"></a>回答</h4><p>js 可以分为两种类型的值，一种是基本数据类型，一种是复杂数据类型。</p><p>基本数据类型 <code>Undefined、Null、Boolean、Number、String</code></p><p>复杂数据类型指的是 Object 类型，所有其他的如 Array、Date 等数据类型都可以理解为 Object 类型的子类。</p><p>两种类型间的主要区别是它们的存储位置不同，基本数据类型的值直接保存在栈中，而复杂数据类型的值保存在堆中，通过使用在栈中保存对应的指针来获取堆中的值。</p><p><img src="/imageO/16.png" alt="栈"></p><p><img src="/imageO/17.png" alt="堆"></p><h3 id="什么是堆？什么是栈？它们之间有什么区别和联系？"><a href="#什么是堆？什么是栈？它们之间有什么区别和联系？" class="headerlink" title="什么是堆？什么是栈？它们之间有什么区别和联系？"></a>什么是堆？什么是栈？它们之间有什么区别和联系？</h3><p>堆和栈的概念存在于数据结构中和操作系统内存中。</p><p>在数据结构中，栈中数据的存取方式为先进后出。而堆是一个优先队列，是按优先级来进行排序的，优先级可以按照大小来规定。完全<br>二叉树是堆的一种实现方式。</p><p>在操作系统中，内存被分为栈区和堆区。</p><p>栈区内存由编译器自动分配释放，存放函数的参数值，局部变量的值等。其操作方式类似于数据结构中的栈。</p><p>堆区内存一般由程序员分配释放，若程序员不释放，程序结束时可能由垃圾回收机制回收。</p><h3 id="说几条写-JavaScript-的基本规范？"><a href="#说几条写-JavaScript-的基本规范？" class="headerlink" title="说几条写 JavaScript 的基本规范？"></a>说几条写 JavaScript 的基本规范？</h3><p>在平常项目开发中，我们遵守一些这样的基本规范，比如说：</p><p>（1）一个函数作用域中所有的变量声明应该尽量提到函数首部，用一个 var 声明，不允许出现两个连续的 var 声明，声明时<br>    如果变量没有值，应该给该变量赋值对应类型的初始值，便于他人阅读代码时，能够一目了然的知道变量对应的类型值。</p><p>（2）代码中出现地址、时间等字符串时需要使用常量代替。</p><p>（3）在进行比较的时候吧，尽量使用’===’, ‘!==’代替’==’, ‘!=’。</p><p>（4）不要在内置对象的原型上添加方法，如 Array, Date。</p><p>（5）switch 语句必须带有 default 分支。</p><p>（6）for 循环必须使用大括号。</p><p>（7）if 语句必须使用大括号。</p><h5 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h5><p><a href="https://blog.csdn.net/jiangjuanjaun/article/details/80327342">JavaScript有几种类型的值？能否画一下它们的内存图；</a></p>]]></content>
    
    
    <categories>
      
      <category>JS进阶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>JS进阶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CSS绘制三角形—border法</title>
    <link href="/2021/06/27/CSS%E7%BB%98%E5%88%B6%E4%B8%89%E8%A7%92%E5%BD%A2%E2%80%94border%E6%B3%95/"/>
    <url>/2021/06/27/CSS%E7%BB%98%E5%88%B6%E4%B8%89%E8%A7%92%E5%BD%A2%E2%80%94border%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="1-画三角形"><a href="#1-画三角形" class="headerlink" title="1. 画三角形"></a>1. 画三角形</h3><p>利用元素的 border 绘制三角形，先来看一下宽高均为 0，border 有宽度的效果是啥样的：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">  <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">0px</span>;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">0px</span>;</span><br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">50px</span> solid transparent;</span><br><span class="css">    <span class="hljs-attribute">border-color</span>: red blue chartreuse black;</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>效果：</p><p><img src="/imageO/10.png" alt="如图"></p><p>然后我们可以通过给任意三边的颜色设置为 transparent 即可分别实现任一方向的三角形。<br>通过设置某条边的宽度比其它边宽，来调整三角形的高度。</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima"><span class="hljs-built_in">border</span>-<span class="hljs-built_in">color</span>: <span class="hljs-built_in">transparent</span> <span class="hljs-built_in">transparent</span> chartreuse <span class="hljs-built_in">transparent</span>;<br></code></pre></td></tr></table></figure><h4 id="向上的箭头"><a href="#向上的箭头" class="headerlink" title="向上的箭头"></a>向上的箭头</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs css">  <span class="hljs-selector-tag">div</span>&#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;<br>        <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">/* 上 ，左右  下 */</span><br>        <span class="hljs-attribute">border-width</span>: <span class="hljs-number">0</span>  <span class="hljs-number">50px</span>  <span class="hljs-number">50px</span>;<br>        <span class="hljs-attribute">border-style</span>: solid;<br>        <span class="hljs-attribute">border-color</span>: transparent  transparent chartreuse;    <br>  &#125;<br>&lt;/style&gt;<br>&lt;<span class="hljs-selector-tag">div</span>&gt;&lt;/<span class="hljs-selector-tag">div</span>&gt;<br></code></pre></td></tr></table></figure><p><img src="/imageO/11.png" alt="如图"></p><h4 id="向右的箭头"><a href="#向右的箭头" class="headerlink" title="向右的箭头"></a>向右的箭头</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;<br>      <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;<br>      <span class="hljs-attribute">border-width</span>: <span class="hljs-number">50px</span> <span class="hljs-number">0</span> <span class="hljs-number">50px</span> <span class="hljs-number">50px</span>;<br>      <span class="hljs-attribute">border-style</span>: solid;<br>      <span class="hljs-attribute">border-color</span>: transparent chartreuse transparent;    <br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/imageO/12.png" alt="如图"></p><h4 id="向下的箭头"><a href="#向下的箭头" class="headerlink" title="向下的箭头"></a>向下的箭头</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span>&#123;<br>   <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;<br>       <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;<br>       <span class="hljs-attribute">border-width</span>: <span class="hljs-number">50px</span>  <span class="hljs-number">50px</span> <span class="hljs-number">0</span>;<br>       <span class="hljs-attribute">border-style</span>: solid;<br>       <span class="hljs-attribute">border-color</span>:chartreuse transparent  transparent;    <br> &#125;<br></code></pre></td></tr></table></figure><p><img src="/imageO/13.png" alt="如图"></p><h4 id="向左的箭头"><a href="#向左的箭头" class="headerlink" title="向左的箭头"></a>向左的箭头</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;<br>      <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;<br>      <span class="hljs-attribute">border-width</span>:  <span class="hljs-number">50px</span>  <span class="hljs-number">50px</span>  <span class="hljs-number">50px</span> <span class="hljs-number">0</span>;<br>      <span class="hljs-attribute">border-style</span>: solid;<br>      <span class="hljs-attribute">border-color</span>: transparent chartreuse transparent;    <br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/imageO/14.png" alt="如图"></p><h4 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h4><p><a href="https://www.cnblogs.com/lou-0820/p/10558799.html">博客园</a></p>]]></content>
    
    
    <categories>
      
      <category>CSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>CSS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vue中的scoped坑点</title>
    <link href="/2021/06/23/vue%E4%B8%AD%E7%9A%84scoped%E5%9D%91%E7%82%B9%20/"/>
    <url>/2021/06/23/vue%E4%B8%AD%E7%9A%84scoped%E5%9D%91%E7%82%B9%20/</url>
    
    <content type="html"><![CDATA[<p>上午遇到一个scoped的坑，在覆盖elementUI的走马灯(轮播图)组件，就是无法覆盖组件原有的样式。最后想要改变标签样式，唯有去掉scoped了</p><p>尤大的话：</p><p>scoped设计的初衷就是不能让当前组件的样式修改其他任何地方的样式，因为设计如此</p><hr><h3 id="何为scoped？"><a href="#何为scoped？" class="headerlink" title="何为scoped？"></a>何为scoped？</h3><p>在vue文件中的style标签上，有一个特殊的属性：scoped。当一个style标签拥有scoped属性时，它的CSS样式就只能作用于当前的组件，也就是说，该样式只能适用于当前组件元素。通过该属性，可以使得组件之间的样式不互相污染。如果一个项目中的所有style标签全部加上了scoped，相当于实现了样式的模块化。</p><h3 id="scoped的实现原理"><a href="#scoped的实现原理" class="headerlink" title="scoped的实现原理"></a>scoped的实现原理</h3><p>vue中的scoped属性的效果主要通过PostCSS转译实现，如下是转译前的vue代码：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><br>.example &#123;<br><span class="css">  <span class="hljs-attribute">color</span>: red;</span><br>&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;example&quot;</span>&gt;</span>hi<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure><p>转译后：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css"><span class="hljs-selector-class">.example</span><span class="hljs-selector-attr">[data-v-5558831a]</span> &#123;</span><br><span class="css">  <span class="hljs-attribute">color</span>: red;</span><br>&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;example&quot;</span> <span class="hljs-attr">data-v-5558831a</span>&gt;</span>hi<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure><p>即：PostCSS给一个组件中的所有dom添加了一个独一无二的动态属性，然后，给CSS选择器额外添加一个对应的属性选择器来选择该组件中dom，这种做法使得样式只作用于含有该属性的dom——组件内部dom。</p><h3 id="为什么需要穿透scoped？"><a href="#为什么需要穿透scoped？" class="headerlink" title="为什么需要穿透scoped？"></a>为什么需要穿透scoped？</h3><p>scoped看起来很美，但是，在很多项目中，会出现这么一种情况，即：引用了第三方组件，需要在组件中局部修改第三方组件的样式，而又不想去除scoped属性造成组件之间的样式污染。此时只能通过特殊的方式，穿透scoped。</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span></span><br><span class="xml">    外层 &gt;&gt;&gt; 第三方组件 </span><span class="hljs-template-variable">&#123;</span><br><span class="hljs-template-variable">        样式</span><br><span class="hljs-template-variable">    &#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>通过 &gt;&gt;&gt; 可以使得在使用scoped属性的情况下，穿透scoped，修改其他组件的值。</p><h3 id="曲线救国的方法"><a href="#曲线救国的方法" class="headerlink" title="曲线救国的方法"></a>曲线救国的方法</h3><p>其实，还拥有一种曲线救国的方法，即在定义一个含有scoped属性的style标签之外，再定义一个不含有scoped属性的style标签，即在一个vue组件中定义一个全局的style标签，一个含有作用域的style标签：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css"><span class="hljs-comment">/* global styles */</span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><br><span class="css"><span class="hljs-comment">/* local styles */</span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>上面是给vue组件的根元素加个id，然后这个id是每个组件唯一的，通过这种方式在全局style修改第三方组件样式。</p><p>可以在全局style里只改第三方的，其他的还是放到scoped的style里面，稍微方便点</p><h5 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h5><p><a href="https://www.cnblogs.com/karthuslorin/p/9038854.html">博客园</a></p>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>offsetHeight、scrollHeight、clientHeight</title>
    <link href="/2021/06/20/offsetHeight%E3%80%81scrollHeight%E3%80%81clientHeight/"/>
    <url>/2021/06/20/offsetHeight%E3%80%81scrollHeight%E3%80%81clientHeight/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="offsetXXX"><a href="#offsetXXX" class="headerlink" title="offsetXXX"></a>offsetXXX</h3><blockquote><p>offsetWidth/offsetHeight 是指一个元素的 CSS 「标准宽高」，它包含了边框、内边距、元素内容以及滚动条（如果存在的话）。</p></blockquote><p>借助 MDN 上的图片可以看到元素的 offsetWidth，这就是这个元素在页面中「实际占用的空间」，同时当元素的形状发生变化时（比如说放大或缩小），offsetWidth 就表示元素的布局宽高，并不代表实际渲染出来的宽高，如需获取渲染的宽高请使用 getBoundingClientRect() 方法计算得到真正的 offsetWidth</p><p><img src="/imageO/6.png" alt="offsewidth"></p><h3 id="clientXXX"><a href="#clientXXX" class="headerlink" title="clientXXX"></a>clientXXX</h3><blockquote><p>clientWidth/clientHeight 就表示一个元素的「内容宽高」，包含元素内容以及内边距</p></blockquote><p>也就是说如果你只想要获取「显示内容区域的大小」就是用 clientWidth</p><p><img src="/imageO/6.png" alt="clientwidth"></p><h3 id="scrollXXX"><a href="#scrollXXX" class="headerlink" title="scrollXXX"></a>scrollXXX</h3><blockquote><p>scrollWidth/scrollHeight 表示一个元素内容区域的实际大小，包括不在页面中的可滚动部分（内容和内边距）</p></blockquote><p>它可以理解为 clientXXX 的增强版，是整个内容的大小</p><p><img src="/imageO/8.png" alt="scrollxxx"></p><h3 id="xxxTop"><a href="#xxxTop" class="headerlink" title="xxxTop"></a>xxxTop</h3><ol><li><p>offsetTop 是当前元素顶部距离最近父元素顶部的距离,和有没有滚动条没有关系</p></li><li><p>scrollTop 在有滚动条的情况下，为元素可视区域距离元素顶部的像素，也就是已经滚动了多少距离</p></li></ol><p><img src="/imageO/9.png" alt="xxxtop"></p><h4 id="区别与联系"><a href="#区别与联系" class="headerlink" title="区别与联系"></a>区别与联系</h4><ol><li>offsetXXX 可以看作是 clientXXX + 外边框 border + 滚动条（有的话）</li><li>scrollXXX 可以看作是 clientXXX + 隐藏区域大小（如果有滚动的话）</li></ol>]]></content>
    
    
    <categories>
      
      <category>CSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>CSS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>axios拦截器</title>
    <link href="/2021/06/17/Vue&amp;&amp;axios%E6%8B%A6%E6%88%AA%E5%99%A8/"/>
    <url>/2021/06/17/Vue&amp;&amp;axios%E6%8B%A6%E6%88%AA%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="基本思想"><a href="#基本思想" class="headerlink" title="基本思想"></a>基本思想</h3><p>首先要知道登录不仅仅是拿着用户名和密码通过接口发给后端就大功告成了,要从几个方面考虑</p><ul><li>异步登录，通过登录接口拿到token</li><li>利用vuex的state管理token、用户信息等</li><li>利用axios拦截器，拦截每一次请求/响应来处理token</li></ul><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gauss"><span class="hljs-built_in">token</span>是用户登录成功的标识，每一次请求数据时都要发送<span class="hljs-built_in">token</span>给后端验证 &amp; 接收后端返回状态码判断当前用户登录状态<br><br></code></pre></td></tr></table></figure><h4 id="登录的基本实现"><a href="#登录的基本实现" class="headerlink" title="登录的基本实现"></a>登录的基本实现</h4><p>点击按钮触发事件Login.vue文件中</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript">methods: &#123;<br>  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">submitHandler</span>(<span class="hljs-params">e</span>)</span> &#123;<br>    e.preventDefault();<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.$http.get(<span class="hljs-string">&quot;/api/login&quot;</span>, &#123;<br>        params: <span class="hljs-built_in">this</span>.model,<br>      &#125;);<br>     <span class="hljs-keyword">if</span>(result.code==<span class="hljs-string">&#x27;0&#x27;</span>)&#123;<br>       <span class="hljs-built_in">this</span>.$store.commit(<span class="hljs-string">&#x27;settoken&#x27;</span>,result.token)<br>       <span class="hljs-built_in">window</span>.localStorage.setItem(<span class="hljs-string">&#x27;token&#x27;</span>,result.token)<br>     &#125;<span class="hljs-keyword">else</span>&#123;<br>       alert(result.messages)<br>     &#125;<br>    &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>      <span class="hljs-built_in">console</span>.log(error);<br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure><p>Vuex中 store中代码</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs pf">export <span class="hljs-keyword">default</span> new Vuex.Store(&#123;<br>  <span class="hljs-keyword">state</span>: &#123;<br>    token: &#x27;&#x27;<br>  &#125;,<br>  mutations: &#123;<br>    // 设置vuex的token<br>    settoken(<span class="hljs-keyword">state</span>, token) &#123;<br>      <span class="hljs-keyword">state</span>.token = token<br>    &#125;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="axios拦截器"><a href="#axios拦截器" class="headerlink" title="axios拦截器"></a>axios拦截器</h4><p>我的拦截器目录是 src\setaxios.js</p><p>main.js中全局注册使用</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import  setaxios  from  <span class="hljs-string">&#x27;./setaxios&#x27;</span><br><span class="hljs-function"><span class="hljs-title">setaxios</span><span class="hljs-params">()</span></span><br></code></pre></td></tr></table></figure><p>setaxios.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span>  axios  <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br><span class="hljs-keyword">import</span>  store  <span class="hljs-keyword">from</span>  <span class="hljs-string">&#x27;./store/index&#x27;</span><br><span class="hljs-keyword">import</span>  router  <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router/index&#x27;</span><br><br><span class="hljs-comment">// http全局拦截</span><br><span class="hljs-comment">// token要放在我们请求的header上面带回去的后端</span><br><br><br><span class="hljs-keyword">export</span>  <span class="hljs-keyword">default</span>  <span class="hljs-function"><span class="hljs-keyword">function</span>  <span class="hljs-title">setAxios</span>(<span class="hljs-params"></span>)</span>&#123;<br>  <span class="hljs-comment">// 请求拦截</span><br>  axios.interceptors.request.use(<br>    config=&gt;&#123;<br>      <span class="hljs-keyword">if</span>(store.state.token)&#123;<br>        config.headers.token=store.state.token;<br>      &#125;<br>      <span class="hljs-keyword">return</span>  config<br>    &#125;<br>)<br><span class="hljs-comment">// 每次的请求都是有返回的，都是先经过这个拦截器的</span><br>axios.interceptors.response.use(<br>  response=&gt;&#123;<br>    <span class="hljs-keyword">if</span>(response.status==<span class="hljs-number">200</span>)&#123;<br>      <span class="hljs-keyword">const</span>  data=response.data<br>      <span class="hljs-keyword">if</span>(data.code==-<span class="hljs-number">1</span>)&#123;<br>        <span class="hljs-comment">// 登录过期  需要重新登录，清空vuex的token和localstorage的token</span><br>        store.commit(<span class="hljs-string">&#x27;settoken&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>)<br>        <span class="hljs-built_in">localStorage</span>.removeItem(<span class="hljs-string">&#x27;token&#x27;</span>)<br>        <span class="hljs-comment">// 跳转到login页面</span><br>        router.replace(&#123;<span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/login&#x27;</span>&#125;)<br>      &#125;<br>      <span class="hljs-keyword">return</span>  data<br>    &#125;<br>    <span class="hljs-keyword">return</span>  response<br>  &#125;<br>)<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/imageO/5.png" alt="token存储成功"></p><h4 id="为什么要使用vuex"><a href="#为什么要使用vuex" class="headerlink" title="为什么要使用vuex"></a>为什么要使用vuex</h4><p>因为通过登录得到的用户信息在多个组件中都会用到，使用vuex直接通过state或getter访问变量很方便。但不要为了使用vuex而使用vuex</p><h4 id="既然用了vuex为什么还要将token存放到localStorage-sessionStorage-cookie中去"><a href="#既然用了vuex为什么还要将token存放到localStorage-sessionStorage-cookie中去" class="headerlink" title="既然用了vuex为什么还要将token存放到localStorage/sessionStorage/cookie中去"></a>既然用了vuex为什么还要将token存放到localStorage/sessionStorage/cookie中去</h4><p>因为刷新会导致vuex的state中的变量重置为初始值（「变量值会丢失」）</p>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cookie、localStorage、sessionStorage&amp;&amp;token</title>
    <link href="/2021/06/16/cookie%E3%80%81localStorage%E3%80%81sessionStorage&amp;token/"/>
    <url>/2021/06/16/cookie%E3%80%81localStorage%E3%80%81sessionStorage&amp;token/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="什么是认证（Authentication）"><a href="#什么是认证（Authentication）" class="headerlink" title="什么是认证（Authentication）"></a>什么是认证（Authentication）</h3><p>通俗地讲就是验证当前用户的身份，证明“你是你自己”（比如：你每天上下班打卡，都需要通过指纹打卡，当你的指纹和系统里录入的指纹相匹配时，就打卡成功）</p><p>互联网中的认证：</p><ol><li>用户名密码登录</li><li>邮箱发送登录链接</li><li>手机号接收验证码</li><li>只要你能收到邮箱/验证码，就默认你是账号的主人</li></ol><h3 id="什么是授权（Authorization）"><a href="#什么是授权（Authorization）" class="headerlink" title="什么是授权（Authorization）"></a>什么是授权（Authorization）</h3><p>用户授予第三方应用访问该用户某些资源的权限</p><p>你在安装手机应用的时候，APP 会询问是否允许授予权限（访问相册、地理位置等权限）</p><p>你在访问微信小程序时，当登录时，小程序会询问是否允许授予权限（获取昵称、头像、地区、性别等个人信息）</p><blockquote><p>实现授权的方式有：cookie、session、token、OAuth</p></blockquote><h3 id="cookie、localStorage、sessionStorage"><a href="#cookie、localStorage、sessionStorage" class="headerlink" title="cookie、localStorage、sessionStorage"></a>cookie、localStorage、sessionStorage</h3><h4 id="相同点：都保存在浏览器端"><a href="#相同点：都保存在浏览器端" class="headerlink" title="相同点：都保存在浏览器端"></a>相同点：都保存在浏览器端</h4><h3 id="不同点"><a href="#不同点" class="headerlink" title="不同点"></a>不同点</h3><ol><li>传递方式不同</li></ol><ul><li>cookie数据始终在同源的http请求中携带（即使不需要），即cookie在浏览器和服务器间来回传递。</li><li>sessionStorage和localStorage不会自动把数据发给服务器，仅在本地保存。</li></ul><ol start="2"><li>数据大小不同</li></ol><ul><li>（cookie数据还有路径（path）的概念，可以限制cookie只属于某个路径下。）  存储大小限制也不同，cookie数据不能超过4k，同时因为每次http请求都会携带cookie，所以cookie只适合保存很小的数据，如会话标识。</li><li>sessionStorage和localStorage 虽然也有存储大小的限制，但比cookie大得多，可以达到5M或更大。</li></ul><ol start="3"><li>数据有效期不同</li></ol><ul><li>sessionStorage：仅在当前浏览器窗口关闭前有效，自然也就不可能持久保持；</li><li>localStorage：始终有效，窗口或浏览器关闭也一直保存，因此用作持久数据；</li><li>cookie只在设置的cookie过期时间之前一直有效，即使窗口或浏览器关闭。</li></ul><ol start="4"><li>作用域不同</li></ol><ul><li>sessionStorage不在不同的浏览器窗口中共享，即使是同一个页面；</li><li>localStorage在所有同源窗口中都是共享的；</li><li>cookie也是在所有同源窗口中都是共享的。</li></ul><h3 id="Token"><a href="#Token" class="headerlink" title="Token"></a>Token</h3><p><strong>Token的引入</strong>：Token是在客户端频繁向服务端请求数据，服务端频繁的去数据库查询用户名和密码并进行对比，判断用户名和密码正确与否，并作出相应提示，在这样的背景下，Token便应运而生。</p><p><strong>Token的定义</strong>：Token是服务端生成的一串字符串，以作客户端进行请求的一个令牌，当第一次登录后，服务器生成一个Token便将此Token返回给客户端，以后客户端只需带上这个Token前来请求数据即可，无需再次带上用户名和密码。最简单的token组成:uid(用户唯一的身份标识)、time(当前时间的时间戳)、sign(签名，由token的前几位+盐以哈希算法压缩成一定长的十六进制字符串，可以防止恶意第三方拼接token请求服务器)。</p><p><strong>使用Token的目的</strong>：Token的目的是为了减轻服务器的压力，减少频繁的查询数据库，使服务器更加健壮。</p><p><strong>Token 是在服务端产生的</strong>。如果前端使用用户名/密码向服务端请求认证，服务端认证成功，那么在服务端会返回 Token 给前端。前端可以在每次请求的时候带上 Token 证明自己的合法地位</p><h4 id="为什么要用-Token？"><a href="#为什么要用-Token？" class="headerlink" title="为什么要用 Token？"></a>为什么要用 Token？</h4><p>可以解决哪些问题呢？</p><ol><li><p>Token 完全由应用管理，所以它可以避开同源策略</p></li><li><p>Token 可以避免 CSRF 攻击(<a href="http://dwz.cn/7joLzx">http://dwz.cn/7joLzx</a>)</p></li><li><p>Token 可以是无状态的，可以在多个服务间共享</p></li></ol><h4 id="基于-Token-的身份验证"><a href="#基于-Token-的身份验证" class="headerlink" title="基于 Token 的身份验证"></a>基于 Token 的身份验证</h4><p>使用基于 Token 的身份验证方法，在服务端不需要存储用户的登录记录。大概的流程是这样的：</p><ol><li>客户端使用用户名跟密码请求登录</li><li>服务端收到请求，去验证用户名与密码</li><li>验证成功后，服务端会签发一个 Token，再把这个 Token 发送给客户端</li><li>客户端收到 Token 以后可以把它存储起来，比如放在 Cookie 里或者 Local Storage 里</li><li>客户端每次向服务端请求资源的时候需要带着服务端签发的 Token</li><li>服务端收到请求，然后去验证客户端请求里面带着的 Token，如果验证成功，就向客户端返回请求的数据</li></ol><h5 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h5><p><a href="https://juejin.cn/post/6844904009061367821#heading-7">一文彻底搞懂Cookie、Session、Token到底是什么</a></p><p><a href="https://juejin.cn/post/6844904034181070861#heading-6">傻傻分不清之 Cookie、Session、Token、JWT</a></p><p><a href="https://www.cnblogs.com/xuxinstyle/p/9675541.html">深入理解token</a></p>]]></content>
    
    
    <categories>
      
      <category>计算机网络</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>计算机网络</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Css单位px，rem，em，vw，vh的区别</title>
    <link href="/2021/06/16/Css%E5%8D%95%E4%BD%8Dpx%EF%BC%8Crem%EF%BC%8Cem%EF%BC%8Cvw%EF%BC%8Cvh%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <url>/2021/06/16/Css%E5%8D%95%E4%BD%8Dpx%EF%BC%8Crem%EF%BC%8Cem%EF%BC%8Cvw%EF%BC%8Cvh%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="px"><a href="#px" class="headerlink" title="px"></a>px</h3><p>px就是pixel像素的缩写，相对长度单位，网页设计常用的基本单位。像素px是相对于显示器屏幕分辨率而言的</p><h3 id="em"><a href="#em" class="headerlink" title="em"></a>em</h3><p>em是相对长度单位。相对于当前对象内文本的字体尺寸（参考物是父元素的font-size）</p><p>如当前父元素的字体尺寸未设置，则相对于浏览器的默认字体尺寸</p><p>特点：</p><ol><li><p>em的值并不是固定的；</p></li><li><p>em会继承父级元素的字体大小</p></li></ol><h3 id="rem"><a href="#rem" class="headerlink" title="rem"></a>rem</h3><p>rem是CSS3新增的一个相对单位，rem是相对于HTML根元素的字体大小（font-size）来计算的长度单位</p><p>如果你没有设置html的字体大小，就会以浏览器默认字体大小，一般是16px</p><p>优点是，只需要设置根目录的大小就可以把整个页面的成比例的调好</p><p>rem兼容性：除了IE8及更早版本外，所有浏览器均已支持rem</p><p>em与rem的区别：</p><blockquote><p>rem是相对于根元素（html）的字体大小，而em是相对于其父元素的字体大小</p></blockquote><p>两者使用规则：</p><p>如果这个属性根据它的font-size进行测量，则使用em<br>其他的一切事物属性均使用rem<br>这里提供了一个px、em、rem单位的转换工具：<a href="http://pxtoem.com/">http://pxtoem.com/</a></p><h3 id="vw、vh"><a href="#vw、vh" class="headerlink" title="vw、vh"></a>vw、vh</h3><p>vw、vh、vmax、vmin这四个单位都是基于视口</p><p>vw是相对视口（viewport）的宽度而定的，长度等于视口宽度的1/100</p><p>假如浏览器的宽度为200px，那么1vw就等于2px（200px/100）</p><p>vh是相对视口（viewport）的高度而定的，长度等于视口高度的1/100</p><p>假如浏览器的高度为500px，那么1vh就等于5px（500px/100）</p><p>vmin和vmax是相对于视口的高度和宽度两者之间的最小值或最大值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">如果浏览器的高为300px、宽为500px，那么1vmin就是3px，1vmax就是5px；如果浏览器的高为800px，宽为1080px，那么1vmin也是8px，1vmax也是10.8px<br></code></pre></td></tr></table></figure><h4 id="其他单位"><a href="#其他单位" class="headerlink" title="其他单位"></a>其他单位</h4><p>%（百分比）</p><p>一般来说就是相对于父元素</p><p>1、对于普通定位元素就是我们理解的父元素</p><p>2、对于position: absolute;的元素是相对于已定位的父元素</p><p>3、对于position: fixed;的元素是相对于ViewPort（可视窗口）</p><h4 id="vm"><a href="#vm" class="headerlink" title="vm"></a>vm</h4><p>css3新单位，相对于视口的宽度或高度中较小的那个</p><p>其中最小的那个被均分为100单位的vm</p><p>比如：浏览器高度900px，宽度1200px，取最小的浏览器高度，1 vm = 900px/100 = 9 px</p><p>缺点：兼容性差</p><h4 id="参考链接博客圆"><a href="#参考链接博客圆" class="headerlink" title="参考链接博客圆"></a>参考链接<a href="https://www.cnblogs.com/theblogs/p/10516098.html">博客圆</a></h4>]]></content>
    
    
    <categories>
      
      <category>CSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>CSS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue&amp; 使用axios的多种方式</title>
    <link href="/2021/06/15/Vue&amp;&amp;axios%E4%BD%BF%E7%94%A8%E5%A4%9A%E7%A7%8D%E6%96%B9%E5%BC%8F/"/>
    <url>/2021/06/15/Vue&amp;&amp;axios%E4%BD%BF%E7%94%A8%E5%A4%9A%E7%A7%8D%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h3 id="vue中使用axios的多种方式"><a href="#vue中使用axios的多种方式" class="headerlink" title="vue中使用axios的多种方式"></a>vue中使用axios的多种方式</h3><p>axios<br>axios 是一个基于Promise 用于浏览器和 nodejs 的 HTTP 客户端</p><p>它本身具有以下特征：</p><ul><li>从浏览器中创建 XMLHttpRequest</li><li>从 node.js 发出 http 请求</li><li>支持 Promise API</li><li>拦截请求和响应</li><li>转换请求和响应数据</li><li>取消请求</li><li>自动转换JSON数据</li><li>客户端支持防止 CSRF/XSRF</li></ul><h3 id="axios默认是不让ajax请求头部携带cookie的"><a href="#axios默认是不让ajax请求头部携带cookie的" class="headerlink" title="axios默认是不让ajax请求头部携带cookie的"></a>axios默认是不让ajax请求头部携带cookie的</h3><p>axios 解决跨域cookie丢失问题</p><p>设置 axios.defaults.withCredentials = true 即可</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ：">axios.defaults.withCredentials &#x3D; true;<br>var param &#x3D; new URLSearchParams();<br>param.append(&quot;vCode&quot;,vcode);<br>axios.post(&#39;http:&#x2F;&#x2F;localhost&#39;,param)<br>.then(function(res) &#123;<br>var rs&#x3D;res.data;<br>console.log(rs.data);<br>&#125;)<br>.catch(function(err) &#123;<br>console.log(err);<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="配合vue"><a href="#配合vue" class="headerlink" title="配合vue"></a>配合vue</h3><p>目前主流的 Vue 项目，都选择 axios 来完成 ajax 请求</p><p>Axios 是一个基于 promise 的 HTTP 库</p><p>axios并没有install 方法，所以是不能使用vue.use()方法的。<br>那么难道每个文件都要来引用一次？解决方法有很多种：</p><ol><li><p>结合 vue-axios使用</p></li><li><p>axios 改写为 Vue 的原型属性</p></li><li><p>结合 Vuex的action</p></li></ol><h4 id="结合-vue-axios使用"><a href="#结合-vue-axios使用" class="headerlink" title="结合 vue-axios使用"></a>结合 vue-axios使用</h4><p>vue-axios</p><p>用于将axios集成到Vuejs的小包装器</p><p>github: <a href="https://github.com/axios/axios">https://github.com/axios/axios</a></p><p>安装： npm install –save axios vue-axios</p><p>vue-axios是按照vue插件的方式去写的。那么结合vue-axios，就可以去使用vue.use方法了</p><p>首先在主入口文件main.js中引用</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs clean"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><span class="hljs-keyword">import</span> VueAxios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-axios&#x27;</span><br><br>Vue.use(VueAxios,axios);<br></code></pre></td></tr></table></figure><p>之后就可以使用了，在组件文件中的methods里去使用了</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">getNewsList()&#123;<br>      <span class="hljs-built_in">this</span>.axios.get(<span class="hljs-string">&#x27;api/getNewsList&#x27;</span>).<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">(response)</span>=&gt;</span>&#123;<br>        <span class="hljs-built_in">this</span>.newsList=response.data.data;<br>      &#125;).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">(response)</span>=&gt;</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(response);<br>      &#125;)<br><br><br>    &#125;,<br></code></pre></td></tr></table></figure><blockquote><p>方法2： axios 改写为 Vue 的原型属性<br>首先在主入口文件main.js中引用，之后挂在vue的原型链上</p></blockquote><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br>Vue.prototype.$axios= axios<br><br>在组件中使用<br><br><br><span class="hljs-built_in">this</span>.$axios.get(<span class="hljs-string">&#x27;api/getNewsList&#x27;</span>).<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">(response)</span>=&gt;</span>&#123;<br>        <span class="hljs-built_in">this</span>.newsList=response.data.data;<br>      &#125;).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">(response)</span>=&gt;</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(response);<br>      &#125;)<br></code></pre></td></tr></table></figure><p>方法3：结合vuex(待学)</p><h5 id="参考链接简书"><a href="#参考链接简书" class="headerlink" title="参考链接简书"></a>参考链接<a href="https://www.jianshu.com/p/4a872643f5ea">简书</a></h5>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>如何实现路由懒加载？</title>
    <link href="/2021/06/10/Vue%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD/"/>
    <url>/2021/06/10/Vue%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="路由懒加载"><a href="#路由懒加载" class="headerlink" title="路由懒加载"></a>路由懒加载</h3><p>当打包构建应用时，JavaScript 包会变得非常大，影响页面加载。如果我们能把不同路由对应的组件分割成不同的代码块，然后当路由被访问的时候才加载对应组件，这样就更加高效了。</p><p>结合 Vue 的异步组件 (opens new window)和 Webpack 的代码分割功能 (opens new window)，轻松实现路由组件的懒加载。</p><blockquote><p>vue-router路由懒加载（解决vue项目首次加载慢）</p></blockquote><p>也叫延迟加载，即在需要的时候进行加载，随用随载。</p><p>为什么需要懒加载？</p><p>像vue这种单页面应用，如果没有应用懒加载，运用webpack打包后的文件将会异常的大，造成进入首页时，需要加载的内容过多，时间过长，会出啊先长时间的白屏，即使做了loading也是不利于用户体验，而运用懒加载则可以将页面进行划分，需要的时候加载页面，可以有效的分担首页所承担的加载压力，减少首页加载用时</p><p>简单的说就是：进入首页不用一次加载过多资源造成用时过长！！！</p><blockquote><p>把不同路由对应的组件分割成不同的代码块，然后当路由被访问时才加载对应的组件即为路由的懒加载，可以加快项目的加载速度，提高效率</p></blockquote><p>写法一：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">const router = <span class="hljs-built_in">new</span> VueRouter(&#123;<br>  routes: [<br>    &#123;<br>      <span class="hljs-type">path</span>: <span class="hljs-string">&#x27;/home&#x27;</span>,<br>      <span class="hljs-type">name</span>: <span class="hljs-string">&#x27;Home&#x27;</span>，<br>      component:() = <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;../views/home&#x27;</span>)<br>  &#125;<br>  ]<br>&#125;)<br><br></code></pre></td></tr></table></figure><blockquote><p>使用webpack的require.ensure技术，也可以实现按需加载。 这种情况下，多个路由指定相同的chunkName，会合并打包成一个js文件。</p></blockquote><p>写法二：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// r就是resolve</span><br><span class="hljs-keyword">const</span> List = <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">require</span>.ensure([], <span class="hljs-function">() =&gt;</span> r(<span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@/components/list&#x27;</span>)), <span class="hljs-string">&#x27;list&#x27;</span>);<br><span class="hljs-comment">// 路由也是正常的写法  这种是官方推荐的写的 按模块划分懒加载 </span><br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> Router(&#123;<br>  routes: [<br>  &#123;<br>    path: <span class="hljs-string">&#x27;/list&#x27;</span>,<br>    component: List,<br>    name: <span class="hljs-string">&#x27;list&#x27;</span><br>  &#125;<br> ]<br>&#125;))<br></code></pre></td></tr></table></figure><h4 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h4><p><a href="https://router.vuejs.org/zh/guide/advanced/lazy-loading.html#%E6%8A%8A%E7%BB%84%E4%BB%B6%E6%8C%89%E7%BB%84%E5%88%86%E5%9D%97">路由懒加载</a></p>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue单向数据流与双向数据绑定的理解</title>
    <link href="/2021/05/29/Vue%E5%8D%95%E5%90%91%E6%95%B0%E6%8D%AE%E6%B5%81%E4%B8%8E%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E7%9A%84%E7%90%86%E8%A7%A3/"/>
    <url>/2021/05/29/Vue%E5%8D%95%E5%90%91%E6%95%B0%E6%8D%AE%E6%B5%81%E4%B8%8E%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E7%9A%84%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<hr><h4 id="一：单向数据流"><a href="#一：单向数据流" class="headerlink" title="一：单向数据流"></a>一：单向数据流</h4><p>单向数据流的意思是指数据的改变只能从一个方向修改。</p><p>举个栗子：如一个父组件有两个子组件，分别为1和2。父组件向子组件传递数据，两个组件都接收到了父组件传递过来的数据，在组件1中修改父组件传递过来的数据，子组件2和父组件的值不会发生变化。这就是单向的数据流，子组件不能直接改变父组件的状态。但是如果父组件改变相应的数据，两个子组件的数据也会发生相应的改变。</p><h4 id="二：双向数据绑定"><a href="#二：双向数据绑定" class="headerlink" title="二：双向数据绑定"></a>二：双向数据绑定</h4><p>由MVVM框架实现，MVVM的组成：View，ViewModel，Model。其中View 和 Model不能直接通信，要通过ViewModel来进行通信。</p><p>举个栗子：例如，当Model部分数据发生改变时，由于vue中Data Binding将底层数据和Dom层进行了绑定，ViewModel通知View层更新视图；当在视图 View数据发生变化也会同步到Model中。View和Model之间的同步完全是自动的，不需要人手动的操作DOM。</p><h5 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h5><p><a href="https://zhuanlan.zhihu.com/p/70538875">知乎</a></p><p><a href="https://juejin.cn/post/6844903504834740232">掘金</a></p>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git冲突与解决方法</title>
    <link href="/2021/05/28/Git%E5%86%B2%E7%AA%81%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
    <url>/2021/05/28/Git%E5%86%B2%E7%AA%81%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="Git冲突与解决方法"><a href="#Git冲突与解决方法" class="headerlink" title="Git冲突与解决方法"></a>Git冲突与解决方法</h3><h4 id="1-git冲突的场景"><a href="#1-git冲突的场景" class="headerlink" title="1. git冲突的场景"></a>1. git冲突的场景</h4><p><strong>情景一：多个分支代码合并到一个分支时；</strong></p><p><strong>情景二：多个分支向同一个远端分支推送代码时；</strong></p><p>实际上，push操作即是将本地代码merge到远端库分支上。</p><p>关于push和pull其实就分别是用本地分支合并到远程分支 和 将远程分支合并到本地分支</p><p>所以这两个过程中也可能存在冲突。</p><p>git的合并中产生冲突的具体情况：</p><h5 id="lt-1-gt-两个分支中修改了同一个文件（不管什么地方）"><a href="#lt-1-gt-两个分支中修改了同一个文件（不管什么地方）" class="headerlink" title="　&lt;1&gt; 两个分支中修改了同一个文件（不管什么地方）"></a><strong>　&lt;1&gt; 两个分支中修改了同一个文件</strong>（不管什么地方）</h5><h5 id="lt-2-gt-两个分支中修改了同一个文件的名称"><a href="#lt-2-gt-两个分支中修改了同一个文件的名称" class="headerlink" title="　&lt;2&gt;两个分支中修改了同一个文件的名称"></a><strong>　&lt;2&gt;两个分支中修改了同一个文件的名称</strong></h5><p>两个分支中分别修改了不同文件中的部分，不会产生冲突，可以直接将两部分合并。</p><h4 id="2-冲突解决方法"><a href="#2-冲突解决方法" class="headerlink" title="2. 冲突解决方法"></a>2. 冲突解决方法</h4><ol><li>情景一：在当前分支上，直接修改冲突代码—&gt;add—&gt;commit。</li><li>情景二：在本地当前分支上，修改冲突代码—&gt;add—&gt;commit—&gt;push</li></ol><p> 注：借用vim或者IDE或者直接找到冲突文件，修改。</p><h4 id="3、实战演示"><a href="#3、实战演示" class="headerlink" title="3、实战演示"></a>3、实战演示</h4><p>（1）情景</p><p>　　本地库中两个不同分支，修改同一个文件同一代码块，两分支先后将修改合并到master分支上，master在合并第二个分支代码时，报错：合并冲突。</p><h4 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h4><p><a href="https://www.cnblogs.com/gavincoder/p/9071959.html">Git冲突与解决方法</a></p>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
      <tag>Github</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ajax常见面试题</title>
    <link href="/2021/05/28/ajax%E9%9D%A2%E8%AF%95/"/>
    <url>/2021/05/28/ajax%E9%9D%A2%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="什么是ajax？ajax作用是什么？"><a href="#什么是ajax？ajax作用是什么？" class="headerlink" title="什么是ajax？ajax作用是什么？"></a>什么是ajax？ajax作用是什么？</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">异步的javascript和<span class="hljs-keyword">xml</span>  <span class="hljs-title">AJAX</span> 是一种用于创建快速动态网页的技术。  ajax用来与后台交互<br></code></pre></td></tr></table></figure><h3 id="原生js-ajax请求有几个步骤？分别是什么"><a href="#原生js-ajax请求有几个步骤？分别是什么" class="headerlink" title="原生js ajax请求有几个步骤？分别是什么"></a>原生js ajax请求有几个步骤？分别是什么</h3><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs qml"><span class="hljs-comment">//创建 XMLHttpRequest 对象</span><br><span class="hljs-keyword">var</span> ajax = <span class="hljs-keyword">new</span> XMLHttpRequest();<br><span class="hljs-comment">//规定请求的类型、URL 以及是否异步处理请求。</span><br>ajax.open(<span class="hljs-string">&#x27;GET&#x27;</span>,<span class="hljs-built_in">url</span>,<span class="hljs-literal">true</span>);<br><span class="hljs-comment">//发送信息至服务器时内容编码类型</span><br>ajax.setRequestHeader(<span class="hljs-string">&quot;Content-type&quot;</span>, <span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span>); <br><span class="hljs-comment">//发送请求</span><br>ajax.send(<span class="hljs-literal">null</span>);  <br><span class="hljs-comment">//接受服务器响应数据</span><br>ajax.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (obj.readyState == <span class="hljs-number">4</span> &amp;&amp; (obj.status == <span class="hljs-number">200</span> || obj.status == <span class="hljs-number">304</span>)) &#123; <br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="ajax几种请求方式？他们的优缺点？"><a href="#ajax几种请求方式？他们的优缺点？" class="headerlink" title="ajax几种请求方式？他们的优缺点？"></a>ajax几种请求方式？他们的优缺点？</h3><p>常用的post,get,delete。不常用copy、head、link等等。</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Get</span><br><span class="hljs-keyword">GET</span>请求的数据会附加在URL之后，用问号分割，多个参数用&amp;进行连接。<br><span class="hljs-keyword">GET</span>请求的数据会暴露在地址栏中。<br><span class="hljs-keyword">GET</span>请求URL的编码格式采用的是ASCII编码，而不是Unicode编码。<br><span class="hljs-keyword">GET</span>请求传输大小有限制，大小在<span class="hljs-number">2</span>KB。<br><span class="hljs-keyword">GET</span>相对安全性较差，会被浏览器主动缓存。<br><span class="hljs-keyword">GET</span>产生一个TCP数据包，head和data一起发送。<br><span class="hljs-keyword">GET</span>浏览器回退无害。<br><br><br>POST<br>POST请求会把数据放置在HTTP请求包的包体中，不会直接暴露给用户。<br>POST请求，理论上大小是不会限制的，但是实际上各个服务器会规定POST提交数据大小。<br>POST相对<span class="hljs-keyword">Get</span>更安全，因为参数不会保存浏览器立式或者是web服务器日志中。<br>POST产生两个TCP数据包，<span class="hljs-keyword">header</span>先发送，服务器响应<span class="hljs-number">100</span>ms然后继续，发送data，服务器<span class="hljs-number">200</span>然后返回数据。<br>POST浏览器回退重新请求。<br></code></pre></td></tr></table></figure><h3 id="什么情况造成跨域？"><a href="#什么情况造成跨域？" class="headerlink" title="什么情况造成跨域？"></a>什么情况造成跨域？</h3><p>同源策略限制 不同源会造成跨域。以下任意一种情况不同，都是不同源。</p><p><img src="/imageO/2.png" alt="图片"></p><h3 id="跨域解决方案有哪些？"><a href="#跨域解决方案有哪些？" class="headerlink" title="跨域解决方案有哪些？"></a>跨域解决方案有哪些？</h3><p>跨域，指的是浏览器不能执行其他网站的脚本。浏览器执行javascript脚本时，会检查这个脚本属于哪个页面，如果不是同源页面，就不会被执行。<br>解决办法：</p><ol><li>JSONP：注意JSONP只支持GET请求，不支持POST请求。( 只能解决get跨域(问的最多))<br>原理：ajax请求受同源策略影响，不允许进行跨域请求，而script标签src属性中的链接却可以访问跨域的js脚本，利用这个特性，服务端不再返回JSON格式的数据，而是返回一段调用某个函数的js代码，在src中进行了调用，这样实现了跨域。 —   callback</li></ol><p>步骤：</p><ol><li>去创建一个script标签</li><li>script的src属性设置接口地址</li><li>接口参数,必须要带一个自定义函数名 要不然后台无法返回数据。</li><li>通过定义函数名去接收后台返回数据</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>去创建一个script标签<br>var  script = document.createElement(<span class="hljs-string">&quot;script&quot;</span>);<br><span class="hljs-regexp">//</span>script的src属性设置接口地址 并带一个callback回调函数名称<br>script.src = <span class="hljs-string">&quot;http://127.0.0.1:8888/index.php?callback=jsonpCallback&quot;</span>;<br><span class="hljs-regexp">//</span>插入到页面<br>document.head.appendChild(script);<br><span class="hljs-regexp">//</span>通过定义函数名去接收后台返回数据<br><span class="hljs-keyword">function</span> jsonpCallback(data)&#123;<br>    <span class="hljs-regexp">//</span>注意  jsonp返回的数据是json对象可以直接使用<br>    <span class="hljs-regexp">//</span>ajax  取得数据是json字符串需要转换成json对象才可以使用。<br>&#125;<br></code></pre></td></tr></table></figure><ol start="2"><li><p>代理：写后端接口，在后端调用页面拿到返回值返回给html文件。相当于绕过了浏览器，就不会存在跨域问题。例；(nigx反向代理)</p></li><li><p>后端修改header  (CROS)跨域资源共享</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">header</span>(<span class="hljs-string">&#x27;Access-Control-Allow-Origin:*&#x27;</span>);<span class="hljs-comment">//允许所有来源访问</span><br><span class="hljs-selector-tag">header</span>(<span class="hljs-string">&#x27;Access-Control-Allow-Method:POST,GET&#x27;</span>);<span class="hljs-comment">//允许访问的方式</span><br></code></pre></td></tr></table></figure></li></ol><h4 id="http常见状态码有哪些？"><a href="#http常见状态码有哪些？" class="headerlink" title="http常见状态码有哪些？"></a>http常见状态码有哪些？</h4><p>一: 2开头状态码</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">2</span>xx (成功)表示成功处理了请求的状态代码<br><span class="hljs-symbol">200 </span>(成功) 服务器已成功处理了请求。 通常。<br></code></pre></td></tr></table></figure><p>二: 3开头状态码</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">3</span>xx (重定向) 表示要完成请求，需要进一步操作。 通常，这些状态代码用来重定向。<br><span class="hljs-symbol">304 </span>(未修改) 自从上次请求后，请求的网页未修改过。 服务器返回此响应时，不会返回网页内容。<br></code></pre></td></tr></table></figure><p>三: 4开头状态码</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-number">4</span>xx<span class="hljs-comment">(请求错误)</span> 这些状态代码表示请求可能出错，妨碍了服务器的处理<br><span class="hljs-number">1</span>:<span class="hljs-number">400</span> <span class="hljs-comment">(错误请求)</span> 服务器不理解请求的语法。<br> <br><span class="hljs-number">2</span>:<span class="hljs-number">403</span> <span class="hljs-comment">(禁止)</span> 服务器拒绝请求。<br><br><span class="hljs-number">3</span>:<span class="hljs-number">404</span> <span class="hljs-comment">(未找到)</span> 服务器找不到请求的网页。<br></code></pre></td></tr></table></figure><p>四: 5开头状态码</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">5</span>xx(服务器错误)这些状态代码表示服务器在尝试处理请求时发生内部错误。 这些错误可能是服务器本身的错误，而不是请求出错<br><span class="hljs-symbol">500 </span>(服务器内部错误) 服务器遇到错误，无法完成请求。<br><br><span class="hljs-symbol">501 </span>(尚未实施) 服务器不具备完成请求的功能。 例如，服务器无法识别请求方法时可能会返回此代码。<br><br><span class="hljs-symbol">502 </span>(错误网关) 服务器作为网关或代理，从上游服务器收到无效响应。<br><br><span class="hljs-symbol">503 </span>(服务不可用) 服务器目前无法使用(由于超载或停机维护)。 通常，这只是暂时状态。<br><br><span class="hljs-symbol">504 </span>(网关超时) 服务器作为网关或代理，但是没有及时从上游服务器收到请求。<br><br><span class="hljs-symbol">505 </span>(HTTP 版本不受支持) 服务器不支持请求中所用的 HTTP 协议版本。<br><br></code></pre></td></tr></table></figure><h4 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h4><p><a href="https://juejin.cn/post/6844903573529034759">ajax常见面试题</a></p>]]></content>
    
    
    <categories>
      
      <category>计算机网络</category>
      
    </categories>
    
    
    <tags>
      
      <tag>计算机网络</tag>
      
      <tag>ajax</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>从输入URL到浏览器显示页面过程中都发生了什么？</title>
    <link href="/2021/05/27/%E4%BB%8E%E8%BE%93%E5%85%A5URL%E5%88%B0%E6%B5%8F%E8%A7%88%E5%99%A8%E6%98%BE%E7%A4%BA%E9%A1%B5%E9%9D%A2%E8%BF%87%E7%A8%8B%E9%9D%A2%E8%AF%95/"/>
    <url>/2021/05/27/%E4%BB%8E%E8%BE%93%E5%85%A5URL%E5%88%B0%E6%B5%8F%E8%A7%88%E5%99%A8%E6%98%BE%E7%A4%BA%E9%A1%B5%E9%9D%A2%E8%BF%87%E7%A8%8B%E9%9D%A2%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="URL的输入到浏览器解析的一系列事件"><a href="#URL的输入到浏览器解析的一系列事件" class="headerlink" title="URL的输入到浏览器解析的一系列事件"></a>URL的输入到浏览器解析的一系列事件</h3><ol><li>浏览器根据请求的url交给DNS域名解析</li><li>发起TCP连接</li><li>发送HTTP请求</li><li>服务器处理请求并返回HTTP报文</li><li>浏览器解析渲染页面</li><li>连接结束。</li></ol><blockquote><p>简单说说，浏览器根据请求的url交给dns域名解析，查找真正的ip地址，向服务器发起请求；服务器交给后台处理后，返回数据，浏览器会接收到文件数据，比如，html,js，css，图像等；然后浏览器会对加载到的资源进行语法解析，建立相应的内部数据结构；载入解析到得资源文件，渲染页面，完成显示页面效果。</p></blockquote><p>不够清楚明白吗？</p><h4 id="那就再次详细一下，从浏览器接收url，开始进行网络请求线程，发出一个完整的HTTP请求，从服务器端接收请求到对应的后台接收到请求，然后是后台和前台的http交互；其中的缓存问题（http的缓存），浏览器接收到http数据包后的解析流程，css的可视化格式模型，js引擎解析过程等；其他呈现页面效果。"><a href="#那就再次详细一下，从浏览器接收url，开始进行网络请求线程，发出一个完整的HTTP请求，从服务器端接收请求到对应的后台接收到请求，然后是后台和前台的http交互；其中的缓存问题（http的缓存），浏览器接收到http数据包后的解析流程，css的可视化格式模型，js引擎解析过程等；其他呈现页面效果。" class="headerlink" title="那就再次详细一下，从浏览器接收url，开始进行网络请求线程，发出一个完整的HTTP请求，从服务器端接收请求到对应的后台接收到请求，然后是后台和前台的http交互；其中的缓存问题（http的缓存），浏览器接收到http数据包后的解析流程，css的可视化格式模型，js引擎解析过程等；其他呈现页面效果。"></a>那就再次详细一下，从浏览器接收url，开始进行网络请求线程，发出一个完整的HTTP请求，从服务器端接收请求到对应的后台接收到请求，然后是后台和前台的http交互；其中的缓存问题（http的缓存），浏览器接收到http数据包后的解析流程，css的可视化格式模型，js引擎解析过程等；其他呈现页面效果。</h4><p>这里就需要你对浏览器内核的理解：其中主要的渲染引擎和JS引擎，这里了解一下你对浏览器内核的理解。</p><ol><li>渲染引擎，是负责取得网页的内容，整理信息，以及计算网页的显示方式，然后输出到显示器上。</li></ol><ol start="2"><li>JS引擎是用于解析和执行javascript来实现网页的动态效果。</li></ol><blockquote><p>浏览器的内核的不同对于网页的语法解释会有不同，所以渲染的效果也不相同。其实最开始渲染引擎和JS引擎是没有区分明确的，不过后来JS引擎越来越独立，so，内核就倾向于渲染引擎。</p></blockquote><blockquote><p>对于资源请求/获取,资源响应/页面渲染，会给网络带宽和设备资源带来压力，这个时候就会考虑到web的性能优化。</p></blockquote><h4 id="通过DNS解析域名的实际IP地址"><a href="#通过DNS解析域名的实际IP地址" class="headerlink" title="通过DNS解析域名的实际IP地址"></a>通过DNS解析域名的实际IP地址</h4><p>发送至 DNS 服务器并获得域名对应的 WEB 服务器的 ip 地址。</p><p>DNS 解析首先会从你的浏览器的缓存中去寻找是否有这个网址对应的 IP 地址，如果没有就向OS系统的 DNS 缓存中寻找，如果没有就是路由器的 DNS 缓存， 如果没有就是 ISP 的DNS 缓存中寻找。 所以，缓存的寻找过程就是： 浏览器 -&gt; 系统 -&gt; 路由器 -&gt; ISP。 如果在某一个缓存中找到的话，就直接跳到下一步。 如果都没有找到的话，就会向 ISP 或者公共的域名解析服务发起 DNS 查找请求。这个查找的过程还是一个递归查询的过程。</p><h5 id="检查浏览器是否有缓存"><a href="#检查浏览器是否有缓存" class="headerlink" title="检查浏览器是否有缓存"></a>检查浏览器是否有缓存</h5><p>通过Cache-Control和Expires来检查是否命中强缓存，命中则直接取本地磁盘的html（状态码为200 from disk(or memory) cache，内存or磁盘）；</p><p>如果没有命中强缓存，则会向服务器发起请求（先进行下一步的TCP连接），服务器通过Etag和Last-Modify来与服务器确认返回的响应是否被更改（协商缓存），若无更改则返回状态码（304 Not Modified）,浏览器取本地缓存；</p><p>若强缓存和协商缓存都没有命中则返回请求结果。</p><h4 id="与-WEB-服务器建立-TCP-连接。"><a href="#与-WEB-服务器建立-TCP-连接。" class="headerlink" title="与 WEB 服务器建立 TCP 连接。"></a>与 WEB 服务器建立 TCP 连接。</h4><p>TCP 协议通过三次握手建立连接。</p><p>客户端通过 SYN 报文段发送连接请求，确定服务端是否开启端口准备连接。状态设置为 SYN_SEND;</p><p>服务器如果有开着的端口并且决定接受连接，就会返回一个 SYN+ACK 报文段给客户端，状态设置为 SYN_RECV；</p><p>客户端收到服务器的 SYN+ACK 报文段，向服务器发送 ACK 报文段表示确认。此时客户端和服务器都设置为 ESTABLISHED 状态。连接建立，可以开始数据传输了。</p><p>翻译成大白话就是：</p><p>客户端：你能接收到我的消息吗？</p><p>服务端：可以的，那你能接收到我的回复吗？</p><p>客户端：可以，那我们开始聊正事吧。</p><p>为什么是3次？：避免历史连接，确认客户端发来的请求是这次通信的人。</p><p>为什么不是4次？：3次够了第四次浪费</p><h4 id="浏览器发送HTTP请求"><a href="#浏览器发送HTTP请求" class="headerlink" title="浏览器发送HTTP请求"></a>浏览器发送HTTP请求</h4><p>首先科补一个小知识，HTTP的端口为80/8080，而HTTPS的端口为443</p><p>发送HTTP请求的过程就是构建HTTP请求报文并通过TCP协议中发送到服务器指定端口 请求报文由请求行，请求抱头，请求正文组成。</p><p>请求行<br>请求行的格式为Method Request-URL HTTP-Version CRLF eg: GET index.html HTTP/1.1 常用的方法有: GET,POST, PUT, DELETE, OPTIONS, HEAD。</p><p>常见的请求方法区别<br>这里主要展示GET和POST的区别</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"><span class="hljs-keyword">Get</span><br><span class="hljs-keyword">GET</span>请求的数据会附加在URL之后，用问号分割，多个参数用&amp;进行连接。<br><br><span class="hljs-keyword">GET</span>请求的数据会暴露在地址栏中。<br><br><span class="hljs-keyword">GET</span>请求URL的编码格式采用的是ASCII编码，而不是<span class="hljs-keyword">Unicode</span>编码。<br><br><span class="hljs-keyword">GET</span>请求传输大小有限制，大小在<span class="hljs-number">2</span>KB。<br><br><span class="hljs-keyword">GET</span>相对安全性较差，会被浏览器主动缓存。<br><br><span class="hljs-keyword">GET</span>产生一个TCP数据包，head和data一起发送。<br><br><span class="hljs-keyword">GET</span>浏览器回退无害。<br></code></pre></td></tr></table></figure><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">POST</span><br><span class="hljs-keyword">POST</span>请求会把数据放置在HTTP请求包的包体中，不会直接暴露给用户。<br><br><span class="hljs-keyword">POST</span>请求，理论上大小是不会限制的，但是实际上各个服务器会规定<span class="hljs-keyword">POST</span>提交数据大小。<br><br><span class="hljs-keyword">POST</span>相对Get更安全，因为参数不会保存浏览器立式或者是web服务器日志中。<br><br><span class="hljs-keyword">POST</span>产生两个TCP数据包，header先发送，服务器响应100ms然后继续，发送data，服务器200然后返回数据。<br><br><span class="hljs-keyword">POST</span>浏览器回退重新请求。<br></code></pre></td></tr></table></figure><h4 id="服务器处理请求并返回HTTP报文"><a href="#服务器处理请求并返回HTTP报文" class="headerlink" title="服务器处理请求并返回HTTP报文"></a>服务器处理请求并返回HTTP报文</h4><p>它会对TCP连接进行处理，对HTTP协议进行解析，并按照报文格式进一步封装成HTTP Request对象，供上层使用。这一部分工作一般是由Web服务器去进行，分成三份，状态码 ，响应报头和响应报文(你从服务器请求的HTML,CSS,JS文件就放在这里面)</p><h4 id="浏览器解析渲染页面"><a href="#浏览器解析渲染页面" class="headerlink" title="浏览器解析渲染页面"></a>浏览器解析渲染页面</h4><p>解析HTML形成DOM树</p><p>解析CSS形成CSSOM 树</p><p>合并DOM树和CSSOM树形成渲染树</p><p>浏览器开始渲染并绘制页面 这个过程涉及两个比较重要的概念回流和重绘，DOM结点都是以盒模型形式存在，需要浏览器去计算位置和宽度等，这个过程就是回流。等到页面的宽高，大小，颜色等属性确定下来后，浏览器开始绘制内容，这个过程叫做重绘。浏览器刚打开页面一定要经过这两个过程的，但是这个过程非常非常非常消耗性能，所以我们应该尽量减少页面的回流和重绘</p><h4 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h4><p><a href="https://juejin.cn/post/6850037263116533773#heading-4">从浏览器地址栏输入url到显示页面的步骤</a></p><p><a href="https://juejin.cn/post/6844903832435032072#heading-0">URL的输入到浏览器解析的一系列事件</a></p>]]></content>
    
    
    <categories>
      
      <category>计算机网络</category>
      
    </categories>
    
    
    <tags>
      
      <tag>计算机网络</tag>
      
      <tag>http</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>WebSocket和Socket.io介绍以及聊天室功能实现</title>
    <link href="/2021/05/22/socket%E5%AE%9E%E7%8E%B0%E8%81%8A%E5%A4%A9%E5%AE%A4/"/>
    <url>/2021/05/22/socket%E5%AE%9E%E7%8E%B0%E8%81%8A%E5%A4%A9%E5%AE%A4/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h3><p>在介绍 Socket.io 之前，首先需要说一说什么是 WebSocket。</p><p>详细了解参考：</p><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API">MDN上的介绍</a></p><p><a href="https://www.zhihu.com/question/20215561">知乎上的介绍</a></p><p><a href="http://www.cnblogs.com/mazg/p/5467960.html">WebSocket 与 Socket.io 介绍</a><br>为什么需要WebSocket</p><p>我们知道，在 HTML5 之前，客户端和服务器通过 HTTP 协议交换数据，但是，HTTP 协议具有两个特点：</p><ul><li><p><strong>HTTP 协议是一种单向的网络协议</strong>。在建立连接后，它只允许客户端 Browser/UA (User Agent) 向服务器 WebServer 发送请求后，WebServer 才能返回相应的数据。而 WebServer 不能主动推送数据给 Browser/UA。</p></li><li><p><strong>HTTP 协议是无状态的</strong>。客户端向服务器发送连接请求中会包含 identity info（鉴别信息），每次当一个连接结束时，服务器就会将这些鉴别信息丢掉，客户端再次发送 HTTP 请求时，就需要重新发送这些信息。</p></li></ul><p>现在，假设我们需要开发一个基于 Web 的应用程序，需要获取服务器的实时数据，比如股票的实时行情、聊天室的聊天内容等，这就需要客户端和服务器之间反复进行 HTTP 通信，客户端不断发送请求，去获取当前的实时数据。下面介绍两种常见的方式：</p><ul><li><strong>ajax 轮询</strong></li></ul><p>ajax 轮询的原理非常简单，就是让浏览器定时（隔几秒）向服务器发送一次请求，询问是否有新的数据，如果有就返回最新数据，浏览器接收到后将最新数据显示出来，然后重复这一过程。</p><ul><li><strong>Long Polling</strong></li></ul><p>Long Polling 的原理与 ajax 轮询的原理差不多，都是采用轮询的方式，它是 Polling 的一种改进。客户端发送请求到服务器后，服务器并不立即响应客户端，而是保持住这次连接，当有新的数据时，才返回给客户端，客户端接收到数据，进行展示，再立即发送一个新的请求给服务器，并重复这个过程。如果服务器的数据长期没有更新，一段时间后，这个请求就会超时，客户端收到超时消息后，再立即发送一个新的请求给服务器。</p><p>从上面可以看出，这两种方式都<strong>需要不断的建立 HTTP 连接，然后等待服务器处理。</strong></p><p>在这样的情况下，假如客户端能有一种新的网络协议，可以支持客户端和服务器的双向通信的就好了。于是，WebSocket 应运而生。</p><h3 id="Websocket是什么样的协议，具体有什么优点"><a href="#Websocket是什么样的协议，具体有什么优点" class="headerlink" title="Websocket是什么样的协议，具体有什么优点"></a>Websocket是什么样的协议，具体有什么优点</h3><p>Websocket是一个持久化的协议，相对于HTTP这种非持久的协议来说。</p><p>首先Websocket是基于HTTP协议的，或者说借用了HTTP的协议来完成一部分握手。在握手阶段是一样的</p><h4 id="WebSocket-协议"><a href="#WebSocket-协议" class="headerlink" title="WebSocket 协议"></a>WebSocket 协议<strong></h4><p>WebSocket 是 HTML5 新增的一种通信协议。<strong>WebSocket 协议是一种持久化的双向通信协议，它建立在TCP之上，同 HTTP 一样通过 TCP 来传输数据</strong>，但是它和 HTTP 最大的不同有两点：</p><p>WebSocket 是一种双向通信协议，在建立连接后，WebSocket 服务器和 Browser/UA(浏览器) 都能主动的向对方发送或接收数据，就像 Socket 一样，不同的是 WebSocket 是一种建立在 Web 基础上的一种简单模拟 Socket 的协议。</p><p>WebSocket 需要通过握手连接，类似于 TCP 它也需要客户端和服务器端进行握手连接，连接成功后才能相互通信。</p><h4 id="WebSocket-工作流程"><a href="#WebSocket-工作流程" class="headerlink" title="WebSocket 工作流程"></a>WebSocket 工作流程</h4><p>浏览器通过 JavaScript 向服务器发出建立 WebSocket 连接的请求，连接建立以后，客户端和服务器端就可以通过 TCP 连接直接交换数据。因为 WebSocket 连接本质上就是一个 TCP 连接，所以在数据传输的稳定性和数据传输量的大小方面，和传统轮询以技术比较，具有很大的性能优势。</p><p>为了建立一个 WebSocket 连接，客户端浏览器首先要向服务器发起一个 HTTP 请求，这个请求和通常的 HTTP 请求不同，包含了一些附加头信息，其中附加头信息 “Upgrade: WebSocket” 表明这是一个申请协议升级的 HTTP 请求，服务器端解析这些附加的头信息然后产生应答信息返回给客户端，客户端和服务器端的 WebSocket 连接就建立起来了，双方就可以通过这个连接通道自由的传递信息，并且这个连接会持续存在直到客户端或者服务器端的某一方主动的关闭连接。</p><h3 id="基于-nodeJs-的-webSocket-框架-socket-io"><a href="#基于-nodeJs-的-webSocket-框架-socket-io" class="headerlink" title="基于 nodeJs 的 webSocket 框架 socket.io"></a>基于 nodeJs 的 webSocket 框架 socket.io</h3><p>socket.io 是这篇文章的主角，因为它对 webSocket 做了一个非常完善的封装， 并且提出了 多房间  多命名空间的 概念，让多聊天室同时存在不再是一个问题，所以，下面就会详细的来介绍下 socket.io 这个框架</p><p>Socket.io 是一个完全由 JavaScript 实现、基于 Node.js、支持 WebSocket 协议的用于实时通信、跨平台的开源框架，它包括了客户端的 JavaScript 和服务器端的 Node.js。</p><p>Socket.io 设计的目标是支持任何的浏览器，任何 Mobile 设备。支持主流的 PC 浏览器 (IE,Safari,Chrome,Firefox,Opera等)，Mobile 浏览器(iphone Safari/ipad Safari/Android WebKit/WebOS WebKit等)。</p><p>但是，WebSocket 协议是 HTML5 新推出的协议，浏览器对它的支持并不完善，由此可以看出，Socket.io 不可能仅仅是对 WebSocket 的实现，它还支持其他的通信方式，如上面介绍过的 ajax 轮询和 Long Polling。根据浏览器的支持程度，自主选择使用哪种方式进行通讯。</p><p>Socket.io 支持的通信方式：</p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs smali">WebSocket<br>Adobe Flash Socket<br>AJAX long-polling<br>AJAX multipart streaming<br>Forever IFrame<br>JSONP polling<br></code></pre></td></tr></table></figure><h3 id="Socket-io-的使用"><a href="#Socket-io-的使用" class="headerlink" title="Socket.io 的使用"></a>Socket.io 的使用</h3><p>node 端使用 express 框架</p><h4 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h4><p>服务器端：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm install <span class="hljs-comment">--save socket.io</span><br></code></pre></td></tr></table></figure><p>浏览器端（引入本地文件）：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/socket.io/socket.io.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>浏览器端（CDN 加速）：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js&quot;</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="创建-io-服务器"><a href="#创建-io-服务器" class="headerlink" title="创建 io 服务器"></a>创建 io 服务器</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> app = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>)();<br><span class="hljs-keyword">var</span> server = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>).Server(app);<br><span class="hljs-keyword">var</span> io = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;socket.io&#x27;</span>)(server);<br><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>)</span>&#123;<br>    res.sendFile(__dirname + <span class="hljs-string">&#x27;/index.html&#x27;</span>);<br>&#125;);<br><br>server.listen(<span class="hljs-number">3000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;App listening on port 3000!&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h4><p>Socket.IO 提供了默认事件（如：connect, message, disconnect）。另外，Socket.IO允许发送并接收自定义事件。</p><blockquote><p>监听客户端连接，回调函数会传递本次连接的socket</p></blockquote><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs delphi">io.<span class="hljs-keyword">on</span>(‘connection’,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(socket)</span><span class="hljs-comment">&#123; &#125;</span>);</span><br></code></pre></td></tr></table></figure><blockquote><p>给所有客户端广播消息</p></blockquote><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">io</span>.sockets.emit(‘<span class="hljs-type">String</span>’,<span class="hljs-class"><span class="hljs-keyword">data</span>);</span><br></code></pre></td></tr></table></figure><blockquote><p>给指定的客户端发送自定义事件</p></blockquote><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">socket</span>.emit(‘<span class="hljs-type">String</span>’, <span class="hljs-class"><span class="hljs-keyword">data</span>);</span><br><span class="hljs-title">io</span>.sockets.socket(socketid).emit(‘<span class="hljs-type">String</span>’, <span class="hljs-class"><span class="hljs-keyword">data</span>);</span><br></code></pre></td></tr></table></figure><blockquote><p>接收客户端发送的自定义事件</p></blockquote><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs delphi">socket.<span class="hljs-keyword">on</span>(‘<span class="hljs-keyword">String</span>’,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span>);</span><br></code></pre></td></tr></table></figure><blockquote><p>给除了自己以外的客户端广播消息</p></blockquote><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">socket</span>.broadcast.emit(“msg”, <span class="hljs-class"><span class="hljs-keyword">data</span>);</span><br></code></pre></td></tr></table></figure><h4 id="房间"><a href="#房间" class="headerlink" title="房间"></a>房间</h4><p>房间是 Socket.IO 提供的一个非常好用的功能。房间相当于为指定的一些客户端提供了一个命名空间，所有在房间里的广播和通信都不会影响到房间以外的客户端。</p><p>使用 join() 方法将 socket 加入房间：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">io.<span class="hljs-keyword">on</span>(<span class="hljs-string">&#x27;connection&#x27;</span>, <span class="hljs-keyword">function</span>(socket)&#123;<br>    socket.<span class="hljs-keyword">on</span>(<span class="hljs-string">&#x27;group1&#x27;</span>, <span class="hljs-keyword">function</span> (data) &#123;<br>        socket.<span class="hljs-keyword">join</span>(<span class="hljs-string">&#x27;group1&#x27;</span>);<br>    &#125;);<br>    socket.<span class="hljs-keyword">on</span>(<span class="hljs-string">&#x27;group2&#x27;</span>,<span class="hljs-keyword">function</span>(data)&#123;<br>        socket.<span class="hljs-keyword">join</span>(<span class="hljs-string">&#x27;group2&#x27;</span>);<br>    &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure><p>使用 leave() 方法离开房间：</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">socket.leave(‘<span class="hljs-built_in">some</span> <span class="hljs-built_in">room</span>’);<br></code></pre></td></tr></table></figure><p>向房间中除了当前 socket 的其他 socket 发送消息</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">socket.broadcast.to<span class="hljs-comment">(‘group1’)</span>.emit<span class="hljs-comment">(‘event_name’, data)</span>;<br></code></pre></td></tr></table></figure><p>broadcast方法允许当前socket client不在该分组内</p><p>向房间中所有的 socket 发送消息</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">io</span>.sockets.<span class="hljs-keyword">in</span>(‘group1’).emit(‘event_name’, <span class="hljs-class"><span class="hljs-keyword">data</span>);</span><br></code></pre></td></tr></table></figure><p>获取连接的客户端 socket</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">io</span><span class="hljs-selector-class">.sockets</span><span class="hljs-selector-class">.clients</span>()<span class="hljs-selector-class">.forEach</span>(function (socket) &#123;<br>    <span class="hljs-comment">//.....</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>获取所有房间（分组）信息</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">io<span class="hljs-selector-class">.sockets</span><span class="hljs-selector-class">.manager</span>.rooms<br></code></pre></td></tr></table></figure><p>来获取此socketid进入的房间信息</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">io<span class="hljs-selector-class">.sockets</span><span class="hljs-selector-class">.manager</span><span class="hljs-selector-class">.roomClients</span><span class="hljs-selector-attr">[socket.id]</span><br></code></pre></td></tr></table></figure><p>获取particular room中的客户端，返回所有在此房间的socket实例</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">io<span class="hljs-selector-class">.sockets</span><span class="hljs-selector-class">.clients</span>(‘particular room’)<br></code></pre></td></tr></table></figure><h4 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/socket.io/socket.io.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-keyword">var</span> socket = io();</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>这样就加载了 socket.io-client。 socket.io-client 暴露了一个 io 全局变量，然后连接服务器。</p><p>请注意我们在调用 io() 时没有指定任何 URL，因为它默认将尝试连接到提供当前页面的主机。</p><blockquote><p>监听服务器消息</p></blockquote><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lasso">socket.<span class="hljs-keyword">on</span>(<span class="hljs-string">&#x27;msg&#x27;</span>,function(<span class="hljs-built_in">data</span>)&#123;<br>    console.<span class="hljs-keyword">log</span>(<span class="hljs-built_in">data</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><p>socket.on(“String”,function(data){}) 监听服务端发送的消息, String 参数与服务器端 socket.emit(‘String’, data) 第一个参数 String 相同。</p><blockquote><p>向服务器发送消息</p></blockquote><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">socket</span>.emit(‘msg’, <span class="hljs-class"><span class="hljs-keyword">data</span>);</span><br></code></pre></td></tr></table></figure><blockquote><p>监听 socket 断开与重连</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">socket.on(<span class="hljs-string">&#x27;disconnect&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;与服务器断开&quot;</span>);<br>&#125;);<br><br>socket.on(<span class="hljs-string">&#x27;reconnect&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;重新连接到服务器&quot;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><p>客户端 socket.on() 监听的事件</p><ul><li>connect：连接成功</li><li>connecting：正在连接</li><li>disconnect：断开连接</li><li>connect_failed：连接失败</li><li>error：错误发生，并且无法被其他事件类型所处理</li><li>message：同服务器端message事件</li><li>anything：同服务器端anything事件</li><li>reconnect_failed：重连失败</li><li>reconnect：成功重连</li><li>reconnecting：正在重连</li></ul><h3 id="聊天室"><a href="#聊天室" class="headerlink" title="聊天室"></a>聊天室</h3><p>流程：</p><ol><li>创建 socket 服务器</li><li>浏览器建立 socket 连接</li><li>页面输入聊天内容，点击 “发送” 按钮，向自定义 socket 事件 “chat” 发送聊天信息</li><li>服务器监听浏览器 “chat” 事件，当接收到浏览器发来的聊天信息时，将信息发送给所有连接了 socket 的浏览器</li><li>浏览器监听服务器发来的 “chat” 事件，接收到聊天信息时，在页面上显示</li></ol><h4 id="参考连接"><a href="#参考连接" class="headerlink" title="参考连接"></a>参考连接</h4><p><a href="http://mengyujing.com/socket-io%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%81%8A%E5%A4%A9%E5%AE%A4%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0/">WebSocket和Socket.io介绍以及聊天室功能实现</a></p><p><a href="https://www.bilibili.com/video/BV17i4y1t71B">聊天室</a></p>]]></content>
    
    
    <categories>
      
      <category>聊天室</category>
      
    </categories>
    
    
    <tags>
      
      <tag>WebSocket</tag>
      
      <tag>Socket.io</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>函数的防抖与节流</title>
    <link href="/2021/05/16/JS&amp;%E9%98%B2%E6%8A%96&amp;%E8%8A%82%E6%B5%81/"/>
    <url>/2021/05/16/JS&amp;%E9%98%B2%E6%8A%96&amp;%E8%8A%82%E6%B5%81/</url>
    
    <content type="html"><![CDATA[<p>函数防抖和节流，都是控制事件触发频率的方法。应用场景有很多，输入框持续输入，将输入内容远程校验、多次触发点击事件、onScroll等等。</p><hr><h3 id="防抖"><a href="#防抖" class="headerlink" title="防抖"></a>防抖</h3><p>函数防抖，这里的抖动就是执行的意思，而一般的抖动都是持续的，多次的。假设函数持续多次执行，我们希望让它冷静下来再执行。也就是当持续触发事件的时候，函数是完全不执行的，等最后一次触发结束的一段时间之后，再去执行。</p><p>分解一下需求：</p><h4 id="持续触发不执行"><a href="#持续触发不执行" class="headerlink" title="持续触发不执行"></a>持续触发不执行</h4><h4 id="不触发的一段时间之后再执行"><a href="#不触发的一段时间之后再执行" class="headerlink" title="不触发的一段时间之后再执行"></a>不触发的一段时间之后再执行</h4><p>那么怎么实现上述的目标呢？我们先看这一点：在不触发的一段时间之后再执行，那就需要个定时器呀，定时器里面调用我们要执行的函数，将arguments传入。</p><p>封装一个函数，让持续触发的事件监听是我们封装的这个函数，将目标函数作为回调（func）传进去，等待一段时间过后执行目标函数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">debounce</span>(<span class="hljs-params">func, delay</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      func.apply(<span class="hljs-built_in">this</span>, <span class="hljs-built_in">arguments</span>)<br>    &#125;, delay)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>第二点实现了，再看第一点：持续触发不执行。我们先思考一下，是什么让我们的函数执行了呢？是上边的setTimeout。OK，那现在的问题就变成了持续触发，不能有setTimeout。这样直接在事件持续触发的时候，清掉定时器就好了。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">debounce</span>(<span class="hljs-params">func, delay</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> timeout<br>  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">clearTimeout</span>(timeout) <span class="hljs-comment">// 如果持续触发，那么就清除定时器，定时器的回调就不会执行。</span><br>    timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      func.apply(<span class="hljs-built_in">this</span>, <span class="hljs-built_in">arguments</span>)<br>    &#125;, delay)<br>  &#125;<br>&#125;<br>用法：<br><br>  box.onmousemove = debounce(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;<br>    box.innerHTML = <span class="hljs-string">`<span class="hljs-subst">$&#123;e.clientX&#125;</span>, <span class="hljs-subst">$&#123;e.clientY&#125;</span>`</span><br>  &#125;, <span class="hljs-number">1000</span>)<br><br></code></pre></td></tr></table></figure><h3 id="节流"><a href="#节流" class="headerlink" title="节流"></a>节流</h3><p>节流的意思是让函数有节制地执行，而不是毫无节制的触发一次就执行一次。什么叫有节制呢？就是在一段时间内，只执行一次。</p><p>同样，我们分解一下：</p><h4 id="持续触发并不会执行多次"><a href="#持续触发并不会执行多次" class="headerlink" title="持续触发并不会执行多次"></a>持续触发并不会执行多次</h4><h4 id="到一定时间再去执行"><a href="#到一定时间再去执行" class="headerlink" title="到一定时间再去执行"></a>到一定时间再去执行</h4><p>思考一下，持续触发，并不会执行，但是到时间了就会执行。抓取一个关键的点：就是执行的时机。要做到控制执行的时机，我们可以通过一个开关，与定时器setTimeout结合完成。</p><p>函数执行的前提条件是开关打开，持续触发时，持续关闭开关，等到setTimeout到时间了，再把开关打开，函数就会执行了。</p><p>我们看一下代码怎么实现：</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function">function <span class="hljs-title">throttle</span><span class="hljs-params">(func, delay)</span> </span>&#123;<br>    let run = <span class="hljs-literal">true</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">function</span> () &#123;<br>      <span class="hljs-keyword">if</span> (!run) &#123;<br>        <span class="hljs-keyword">return</span>  <span class="hljs-comment">// 如果开关关闭了，那就直接不执行下边的代码</span><br>      &#125;<br>      run = <span class="hljs-literal">false</span> <span class="hljs-comment">// 持续触发的话，run一直是false，就会停在上边的判断那里</span><br>      <span class="hljs-built_in">setTimeout</span>(() =&gt; &#123;<br>        func.<span class="hljs-built_in">apply</span>(<span class="hljs-keyword">this</span>, arguments)<br>        run = <span class="hljs-literal">true</span> <span class="hljs-comment">// 定时器到时间之后，会把开关打开，我们的函数就会被执行</span><br>      &#125;, delay)<br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure><p>调用的时候：</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arcade">box.onmousemove = throttle(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;<br>  box.innerHTML = <span class="hljs-string">`<span class="hljs-subst">$&#123;e.clientX&#125;</span>, <span class="hljs-subst">$&#123;e.clientY&#125;</span>`</span><br>&#125;, <span class="hljs-number">1000</span>)<br><br></code></pre></td></tr></table></figure><p>这样，就实现了节流，节流还可以用时间间隔去控制，就是记录上一次函数的执行时间，与当前时间作比较，如果当前时间与上次执行时间的时间差大于一个值，就执行。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>防抖和节流巧妙地用了setTimeout，来控制函数执行的时机，优点很明显，可以节约性能，不至于多次触发复杂的业务逻辑而造成页面卡顿。</p><p><a href="https://zhuanlan.zhihu.com/p/72923073?utm_source=qq&utm_medium=social&utm_oi=993958266707247104">参考文章：函数的防抖和节流是个啥？？？</a></p>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>JS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JS&amp;call&amp;apply&amp;bind的用法和区别</title>
    <link href="/2021/05/14/Js&amp;call&amp;apply&amp;bind/"/>
    <url>/2021/05/14/Js&amp;call&amp;apply&amp;bind/</url>
    
    <content type="html"><![CDATA[<p>call和bind它们最主要的作用，是改变 this 的指向。在平时的工作中，除了在写一些基础类，或者公用库方法的时候会用到它们，其他时候 call 和 apply 的应用场景并不多。</p><p>不过，突然遇到的时候，需要想一下才能转过弯来。所以今天，就让我们好好地探究一下，这两个方法的区别以及一些妙用。最后，还会介绍与之用法相似的 bind 的方法。</p><hr><h3 id="call-和-apply-的共同点"><a href="#call-和-apply-的共同点" class="headerlink" title="call 和 apply 的共同点"></a>call 和 apply 的共同点</h3><p>它们的共同点是，<strong>都能够改变函数执行时的上下文</strong>，将一个对象的方法交给另一个对象来执行，并且是立即执行的。</p><p>为何要改变执行上下文？举一个生活中的小例子：平时没时间做饭的我，周末想给孩子炖个腌笃鲜尝尝。但是没有适合的锅，而我又不想出去买。所以就问邻居借了一个锅来用，这样既达到了目的，又节省了开支，一举两得。</p><p>改变执行上下文也是一样的，A 对象有一个方法，而 B 对象因为某种原因，也需要用到同样的方法，那么这时候我们是单独为 B 对象扩展一个方法呢，还是借用一下 A 对象的方法呢？当然是借用 A 对象的啦，既完成了需求，又减少了内存的占用。</p><p>另外，它们的写法也很类似，<strong>调用 call 和 apply 的对象，必须是一个函数 Function</strong>。接下来，就会说到具体的写法，那也是它们区别的主要体现。</p><h3 id="call-和-apply-的区别"><a href="#call-和-apply-的区别" class="headerlink" title="call 和 apply 的区别"></a>call 和 apply 的区别</h3><p>它们的区别，主要体现在参数的写法上。先来看一下它们各自的具体写法。</p><ol><li>call 的写法<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">Function.call(obj,<span class="hljs-comment">[param1<span class="hljs-comment">[,param2<span class="hljs-comment">[,…<span class="hljs-comment">[,paramN]</span>]</span>]</span>]</span>)<br></code></pre></td></tr></table></figure></li></ol><p>需要注意以下几点：</p><p>调用 call 的对象，必须是个函数 Function。<br>call 的第一个参数，是一个对象。 Function 的调用者，将会指向这个对象。如果不传，则默认为全局对象 window。</p><p>第二个参数开始，可以接收任意个参数。每个参数会映射到相应位置的 Function 的参数上。但是如果将所有的参数作为数组传入，它们会作为一个整体映射到 Function 对应的第一个参数上，之后参数都为空。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-keyword">function</span> <span class="hljs-keyword">func</span> (a,b,c) &#123;&#125;<br><br><span class="hljs-keyword">func</span>.call(obj, <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)<br><span class="hljs-regexp">//</span> <span class="hljs-keyword">func</span> 接收到的参数实际上是 <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span><br><br><span class="hljs-keyword">func</span>.call(obj, [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>])<br><span class="hljs-regexp">//</span> <span class="hljs-keyword">func</span> 接收到的参数实际上是 [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],undefined,undefined<br></code></pre></td></tr></table></figure><ol start="2"><li>apply 的写法</li></ol><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq"><span class="hljs-keyword">Function</span>.<span class="hljs-built_in">apply</span>(obj[,argArray])<br></code></pre></td></tr></table></figure><p>需要注意的是：</p><p>它的调用者必须是函数 Function，并且只接收两个参数，第一个参数的规则与 call 一致。</p><p>第二个参数，必须<code>是数组或者类数组</code>，它们会被转换成类数组，传入 Function 中，并且会被映射到 Function 对应的参数上。这也是 call 和 apply 之间，很重要的一个区别。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-keyword">func</span>.apply(obj, [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>])<br><span class="hljs-regexp">//</span> <span class="hljs-keyword">func</span> 接收到的参数实际上是 <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span><br><br><span class="hljs-keyword">func</span>.apply(obj, &#123;<br>    <span class="hljs-number">0</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-number">1</span>: <span class="hljs-number">2</span>,<br>    <span class="hljs-number">2</span>: <span class="hljs-number">3</span>,<br>    length: <span class="hljs-number">3</span><br>&#125;)<br><span class="hljs-regexp">//</span> <span class="hljs-keyword">func</span> 接收到的参数实际上是 <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h4 id="什么是类数组？"><a href="#什么是类数组？" class="headerlink" title="什么是类数组？"></a>什么是类数组？</h4><p>先说数组，这我们都熟悉。它的特征有：可以通过角标调用，如 array[0]；具有长度属性length；可以通过 for 循环或forEach方法，进行遍历。</p><p>那么，类数组是什么呢？顾名思义，就是具备与数组特征类似的对象。比如，下面的这个对象，就是一个类数组。</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">let</span> <span class="hljs-string">arrayLike = &#123;</span><br>    <span class="hljs-attr">0</span>: <span class="hljs-string">1,</span><br>    <span class="hljs-attr">1</span>: <span class="hljs-string">2,</span><br>    <span class="hljs-attr">2</span>: <span class="hljs-string">3,</span><br>    <span class="hljs-attr">length</span>: <span class="hljs-string">3</span><br><span class="hljs-attr">&#125;;</span><br></code></pre></td></tr></table></figure><p>类数组 arrayLike 可以通过角标进行调用，具有length属性，同时也可以通过 for 循环进行遍历。</p><p>类数组，还是比较常用的，只是我们平时可能没注意到。比如，我们获取 DOM 节点的方法，返回的就是一个类数组。再比如，在一个方法中使用 arguments 获取到的所有参数，也是一个类数组。</p><p>但是需要注意的是：类数组无法使用 forEach、splice、push 等数组原型链上的方法，毕竟它不是真正的数组。</p><h4 id="call-和-apply-的用途"><a href="#call-和-apply-的用途" class="headerlink" title="call 和 apply 的用途"></a>call 和 apply 的用途</h4><p>下面会分别列举 call 和 apply 的一些使用场景。声明：例子中没有哪个场景是必须用 call 或者必须用 apply 的，只是个人习惯这么用而已。</p><p>call 的使用场景<br>1、对象的继承。如下面这个例子：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">superClass</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">this</span>.a = <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">this</span>.print = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.a);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">subClass</span> (<span class="hljs-params"></span>) </span>&#123;<br>    superClass.call(<span class="hljs-built_in">this</span>);<br>    <span class="hljs-built_in">this</span>.print();<br>&#125;<br><br>subClass();<br><span class="hljs-comment">// 1</span><br></code></pre></td></tr></table></figure><p>subClass 通过 call 方法，继承了 superClass 的 print 方法和 a 变量。此外，subClass 还可以扩展自己的其他方法。</p><p>2、借用方法。还记得刚才的类数组么？如果它想使用 Array 原型链上的方法，可以这样：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">let</span> domNodes = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Array</span>.</span></span>prototype.slice.call(document.get<span class="hljs-constructor">ElementsByTagName(<span class="hljs-string">&quot;*&quot;</span>)</span>);<br></code></pre></td></tr></table></figure><p>这样，domNodes 就可以应用 Array 下的所有方法了。</p><h4 id="bind-的使用"><a href="#bind-的使用" class="headerlink" title="bind 的使用"></a>bind 的使用</h4><p>最后来说说 bind。在 MDN 上的解释是：bind() 方法创建一个新的函数，在调用时设置 this 关键字为提供的值。并在调用新函数时，将给定参数列表作为原函数的参数序列的前若干项。</p><p>它的语法如下：</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">Function.bind(thisArg<span class="hljs-comment">[, arg1<span class="hljs-comment">[, arg2<span class="hljs-comment">[, ...]</span>]</span>]</span>)<br></code></pre></td></tr></table></figure><p>bind 方法 与 apply 和 call 比较类似，也能改变函数体内的 this 指向。不同的是，bind 方法的返回值是函数，并且需要稍后调用，才会执行。而 apply 和 call 则是立即调用。</p><p>来看下面这个例子：</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs perl">function add (a, b) &#123;<br>    <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br>function <span class="hljs-function"><span class="hljs-keyword">sub</span> (<span class="hljs-title">a</span>, <span class="hljs-title">b</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> a - b;<br>&#125;<br><br>add.bind(<span class="hljs-function"><span class="hljs-keyword">sub</span>, 5, 3)</span>; // 这时，并不会返回 <span class="hljs-number">8</span><br>add.bind(<span class="hljs-function"><span class="hljs-keyword">sub</span>, 5, 3)</span>(); // 调用后，返回 <span class="hljs-number">8</span><br><br></code></pre></td></tr></table></figure><p>如果 bind 的第一个参数是 null 或者 undefined，this 就指向全局对象 window。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>call 和 apply 的主要作用，是改变对象的执行上下文，并且是立即执行的。它们在参数上的写法略有区别。</p><p>bind 也能改变对象的执行上下文，它与 call 和 apply 不同的是，返回值是一个函数，并且需要稍后再调用一下，才会执行。</p><h4 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h4><p><a href="https://juejin.cn/post/6844903768132157447#heading-1">「干货」细说 call、apply 以及 bind 的区别和用法</a></p>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>JS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HTTP 方法get和post的区别</title>
    <link href="/2021/05/13/get&amp;post/"/>
    <url>/2021/05/13/get&amp;post/</url>
    
    <content type="html"><![CDATA[<p>前景<br>现在在前端面试中还有一些面试官会问get和post的区别。对于目前我们能了解get和post在什么场景下使用，使用方式有什么区别，以及如何提交数据这些基本上就可以了。</p><hr><h3 id="Get"><a href="#Get" class="headerlink" title="Get"></a>Get</h3><p>GET请求的数据会附加在URL之后，用问号分割，多个参数用&amp;进行连接。</p><p>GET请求的数据会暴露在地址栏中。</p><p>GET请求URL的编码格式采用的是ASCII编码，而不是Unicode编码。</p><p>GET请求传输大小有限制，大小在2KB。</p><p>GET相对安全性较差，会被浏览器主动缓存。</p><p>GET产生一个TCP数据包，head和data一起发送。</p><p>GET浏览器回退无害。</p><h3 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h3><p>POST请求会把数据放置在HTTP请求包的包体中，不会直接暴露给用户。</p><p>POST请求，理论上大小是不会限制的，但是实际上各个服务器会规定POST提交数据大小。</p><p>POST相对Get更安全，因为参数不会保存浏览器立式或者是web服务器日志中。</p><p>POST产生两个TCP数据包，header先发送，服务器响应100ms然后继续，发送data，服务器200然后返回数据。</p><p>POST浏览器回退重新请求。</p><h4 id="其他http方法"><a href="#其他http方法" class="headerlink" title="其他http方法"></a>其他http方法</h4><p>PUT 方法<br>PUT 用于将数据发送到服务器来创建/更新资源。</p><p>POST 和 PUT之间的区别在于 PUT 请求是幂等的（idempotent）。也就是说，多次调用相同的 PUT 请求将始终产生相同的结果。相反，重复调用POST请求具有多次创建相同资源的副作用。</p><p>HEAD 方法<br>HEAD 与 GET 几乎相同，但没有响应主体。</p><p>换句话说，如果 GET /users 返回用户列表，那么 HEAD /users 将发出相同的请求，但不会返回用户列表。<br>HEAD 请求对于在实际发出 GET 请求之前（例如在下载大文件或响应正文之前）检查 GET 请求将返回的内容很有用。</p><p>DELETE 方法<br>DELETE 方法删除指定的资源。</p><p>OPTIONS 方法<br>OPTIONS 方法描述目标资源的通信选项。</p><h4 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h4><p><a href="https://juejin.cn/post/6854573213523902477">这年头还有面试问get和post的区别？</a></p><p><a href="https://www.w3school.com.cn/tags/html_ref_httpmethods.asp">HTML 请求方法</a></p>]]></content>
    
    
    <categories>
      
      <category>计算机网络</category>
      
    </categories>
    
    
    <tags>
      
      <tag>计算机网络</tag>
      
      <tag>get&amp;post</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JS&amp;this指向</title>
    <link href="/2021/05/12/JS&amp;this%E6%8C%87%E5%90%91/"/>
    <url>/2021/05/12/JS&amp;this%E6%8C%87%E5%90%91/</url>
    
    <content type="html"><![CDATA[<hr><h4 id="谈谈-This-对象的理解。"><a href="#谈谈-This-对象的理解。" class="headerlink" title="谈谈 This 对象的理解。"></a>谈谈 This 对象的理解。</h4><p>在 ES5 中，其实 this 的指向，始终坚持一个原理：<strong>this 永远指向最后调用它的那个对象&gt;</strong>，来，跟着我朗读三遍：this 永远指向最后调用它的那个对象，this 永远指向最后调用它的那个对象，this 永远指向最后调用它的那个对象。记住这句话，this 你已经了解一半了。</p><p>this 是执行上下文中的一个属性，它指向最后一次调用这个方法的对象。在实际开发中，this 的指向可以通过四种调用模<br>式来判断。</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">this</span><br>谈一谈你对<span class="hljs-keyword">this</span>的理解，以及在各种环境下的<span class="hljs-keyword">this</span><br>在浏览器里，在全局范围内<span class="hljs-keyword">this</span>指向window对象<br>在函数中，<span class="hljs-keyword">this</span>永远指向最后调用他的那个对象(箭头函数除外)。<br>在构造函数中，<span class="hljs-keyword">this</span>指向new出来的新对象。<br>call、apply、bind中的<span class="hljs-keyword">this</span>被强绑定在指定的那个对象上。<br>箭头函数<span class="hljs-keyword">this</span>为父作用域的<span class="hljs-keyword">this</span>，不是调用时的<span class="hljs-keyword">this</span>。<br></code></pre></td></tr></table></figure><p>在我之前的一篇文章你不知道的执行上下文中有提到过 this，对那篇文章进行概括就是：</p><ol><li>上下文是在函数调用的时候被创建的。</li><li>this 是组成上下文的一部分。<br>因此每次函数被调用的时候就会产生一个新的 this。具体的分为下面几种。</li></ol><h4 id="作为普通函数在全局环境中被调用"><a href="#作为普通函数在全局环境中被调用" class="headerlink" title="作为普通函数在全局环境中被调用"></a>作为普通函数在全局环境中被调用</h4><p>在全局环境里面，this 永远指向 window，因此在全局环境里作为普通函数被调用的时候，this 也是指向 window(这里仅指在浏览器环境下，不考虑Node)。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">&#x27;Abby&#x27;</span>;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>); <span class="hljs-comment">//window</span><br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name); <span class="hljs-comment">//Abby</span><br>&#125;<br><br>fn();<br></code></pre></td></tr></table></figure><p>这里，fn 其实是作为 window 的一个方法被调用的，而 name 也是 window 的一个属性，因此 fn() 实际上就是 window.fn()。</p><h4 id="作为对象的属性被调用"><a href="#作为对象的属性被调用" class="headerlink" title="作为对象的属性被调用"></a>作为对象的属性被调用</h4><p>如果函数作为一个对象的属性方法，并且被调用的时候，this 就指向这个对象。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">&#x27;Jane&#x27;</span>;<br><span class="hljs-keyword">var</span> person = &#123;<br>    name: <span class="hljs-string">&#x27;Abby&#x27;</span>,<br>    sayName: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>           <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name);<br>&#125;<br>&#125;;<br><span class="hljs-keyword">var</span> sayNameWin = person.sayName;<br><br>person.sayName(); <span class="hljs-comment">//Abby</span><br>sayNameWin(); <span class="hljs-comment">//Jane   作为 window 的方法被调用的</span><br></code></pre></td></tr></table></figure><p>在这里，sayName 方法是作为 person 的一个属性方法被调用的，因此指向 person，但是 sayNameWin 方法却是作为 window 的一个属性方法被调用的，因此 console.log 的值是 Jane。我们再看一个变形。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> person1 = &#123;<br>    name: <span class="hljs-string">&#x27;Jane&#x27;</span>,<br>    sayName: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>   <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name)<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">var</span> person2 = &#123;<br>    name: <span class="hljs-string">&#x27;Abby&#x27;</span>,<br>    sayName: person1.sayName<br>&#125;<br><br>person2.sayName(); <span class="hljs-comment">//Abby  作为 person2 的属性方法被调用</span><br></code></pre></td></tr></table></figure><p>但是当在在对象方法中再定义函数，这时候 this 又是 window 。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">&#x27;Jane&#x27;</span>;<br><span class="hljs-keyword">var</span> person = &#123;<br>    name: <span class="hljs-string">&#x27;Abby&#x27;</span>,<br>    sayName: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>)</span>&#123;<br>            <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>);      <span class="hljs-comment">//window</span><br>            <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name);    <span class="hljs-comment">//Jane</span><br>        &#125;<br>        fn();<br>    &#125;<br>&#125;<br><br>person.sayName();<br></code></pre></td></tr></table></figure><p>如果想让 this 指向 person 的话，只需要用 that 保存下来 this 的值即可，也可以使用 apply 等改变 this。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">&#x27;Jane&#x27;</span>;<br><span class="hljs-keyword">var</span> person = &#123;<br>    name: <span class="hljs-string">&#x27;Abby&#x27;</span>,<br>    sayName: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">var</span> that = <span class="hljs-built_in">this</span>;<br>        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>)</span>&#123;<br>            <span class="hljs-built_in">console</span>.log(that);      <span class="hljs-comment">//Object &#123;name: &quot;Abby&quot;&#125;</span><br>            <span class="hljs-built_in">console</span>.log(that.name);    <span class="hljs-comment">//Abby</span><br>        &#125;<br>        fn();<br>    &#125;<br>&#125;<br><br>person.sayName();<br></code></pre></td></tr></table></figure><h4 id="作为构造函数被调用"><a href="#作为构造函数被调用" class="headerlink" title="作为构造函数被调用"></a>作为构造函数被调用</h4><p>作为构造函数被调用的时候，this 代表它即将 new 出来的对象。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span>(<span class="hljs-params">name</span>) </span>&#123;<br>    <span class="hljs-built_in">this</span>.name = name;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>);  <span class="hljs-comment">//Person &#123;name: &quot;Abby&quot;&#125;</span><br>&#125;<br><br><span class="hljs-keyword">var</span> person = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&#x27;Abby&#x27;</span>);<br><span class="hljs-built_in">console</span>.log(person.name);  <span class="hljs-comment">//Abby</span><br>如果不加 <span class="hljs-keyword">new</span>,表示即作为普通函数调用，指向 <span class="hljs-built_in">window</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span>(<span class="hljs-params">name</span>) </span>&#123;<br><span class="hljs-built_in">this</span>.name = name;<br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>);  <span class="hljs-comment">//window</span><br>&#125;<br><br>Person(<span class="hljs-string">&#x27;Jane&#x27;</span>); <br><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">window</span>.name); <span class="hljs-comment">//Jane</span><br></code></pre></td></tr></table></figure><h4 id="作为-call-apply-bind-方法的调用"><a href="#作为-call-apply-bind-方法的调用" class="headerlink" title="作为 call/apply/bind 方法的调用"></a>作为 call/apply/bind 方法的调用</h4><p>作为 call/apply/bind 方法被调用的时候指向传入的值</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> person = &#123;<br>    name: <span class="hljs-string">&#x27;Abby&#x27;</span><br>&#125;;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>); <span class="hljs-comment">//Object &#123;name: &quot;Abby&quot;&#125;</span><br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name); <span class="hljs-comment">//Abby</span><br>&#125;<br><br>fn.apply(person);<br></code></pre></td></tr></table></figure><h4 id="严格模式下面"><a href="#严格模式下面" class="headerlink" title="严格模式下面"></a>严格模式下面</h4><p>在严格模式下，在全局环境中执行函数调用的时候 this 并不会指向 window 而是会指向 undefined</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-meta">&#x27;use strict&#x27;</span>;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">person</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>); <span class="hljs-comment">//undefined</span><br>&#125;;<br>person();<br></code></pre></td></tr></table></figure><h4 id="setTimeout、setInterval中的this"><a href="#setTimeout、setInterval中的this" class="headerlink" title="setTimeout、setInterval中的this"></a>setTimeout、setInterval中的this</h4><p>《 javascript 高级程序设计》中写到：“超时调用的代码都是在全局执行域中执行的”。setTimeout/setInterval 执行的时候，this 默认指向 window 对象，除非手动改变 this 的指向。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">&#x27;Jane&#x27;</span>;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-built_in">this</span>.name = <span class="hljs-string">&#x27;Abby&#x27;</span>;<br>    <span class="hljs-built_in">this</span>.sayName=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>); <span class="hljs-comment">//window</span><br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name); <span class="hljs-comment">//Jane</span><br>        &#125;;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-built_in">this</span>.sayName, <span class="hljs-number">10</span>);<br>    &#125;<br><br><span class="hljs-keyword">var</span> person=<span class="hljs-keyword">new</span> Person();<br></code></pre></td></tr></table></figure><p>在这里如果想改变 this，可是使用 apply/call/bind 等，也可以使用 that 保存 this.</p><p>setTimeout 中的回调函数在严格模式下也指向 window 而不是 undefined (是个坑)</p><p>因为 setTimeout 的回调函数如果没有指定的 this ，会做一个隐式的操作，将全局上下文注入进去，不管是在严格还是非严格模式下。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-meta">&#x27;use strict&#x27;</span>;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">person</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>);  <span class="hljs-comment">//window</span><br>&#125;<br><span class="hljs-built_in">setTimeout</span>(person, <span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure><h4 id="构造函数-prototype-属性"><a href="#构造函数-prototype-属性" class="headerlink" title="构造函数 prototype 属性"></a>构造函数 prototype 属性</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">&#x27;Jane&#x27;</span>;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-built_in">this</span>.name = <span class="hljs-string">&#x27;Abby&#x27;</span>;<br>&#125;<br>Person.prototype.sayName = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>);        <span class="hljs-comment">// Person &#123;name: &quot;Abby&quot;&#125;</span><br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name);      <span class="hljs-comment">// Abby</span><br>&#125;<br><span class="hljs-keyword">var</span> person = <span class="hljs-keyword">new</span> Person();<br>person.sayName();<br></code></pre></td></tr></table></figure><p>在 Person.prototype.sayName 函数中，this 指向的 person 对象。即便是在整个原型链中,this 也代表当前对象的值。</p><ol start="8"><li><p>Eval函数<br>在 Eval 中，this 指向当前作用域的对象。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">&#x27;Jane&#x27;</span>;<br><span class="hljs-keyword">var</span> person = &#123;<br>    name: <span class="hljs-string">&#x27;Abby&#x27;</span>,<br>    getName: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-built_in">eval</span>(<span class="hljs-string">&quot;console.log(this.name)&quot;</span>);<br>    &#125;<br>&#125;<br>person.getName();  <span class="hljs-comment">//Abby</span><br>    <br><span class="hljs-keyword">var</span> getNameWin=person.getName;<br>getNameWin();  <span class="hljs-comment">//Jane</span><br></code></pre></td></tr></table></figure><p>在这里，和不使用 Eval ，作为对象的方法调用的时候得出的结果是一样的。</p></li><li><p>箭头函数</p></li></ol><p>箭头函数里面 this 始终指向外部对象，因为箭头函数没有 this，因此它自身不能进行new实例化，同时也不能使用 call, apply, bind 等方法来改变 this 的指向。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> person = &#123;<br>    name: <span class="hljs-string">&#x27;Abby&#x27;</span>,<br>    sayName: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-keyword">var</span> fn = <span class="hljs-function">() =&gt;</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>                <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>);   <span class="hljs-comment">//Object &#123;name: &quot;Abby&quot;&#125;</span><br>                <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name); <span class="hljs-comment">//Abby</span><br>            &#125;<br>        &#125;<br>        fn()();<br>    &#125;<br>&#125;<br><br>person.sayName();<br></code></pre></td></tr></table></figure><h4 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h4><p><a href="https://zhuanlan.zhihu.com/p/26766112?utm_source=qq&utm_medium=social&utm_oi=993958266707247104">十分钟读懂 JavaScript 中的 this</a></p>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>JS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ES6-Symbol&amp;promise、generator、async/await&amp;rest参数</title>
    <link href="/2021/05/11/Es6async&amp;await/"/>
    <url>/2021/05/11/Es6async&amp;await/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="ES6-Symbol"><a href="#ES6-Symbol" class="headerlink" title="ES6 Symbol"></a>ES6 Symbol</h3><p>ES6 引入了一种新的原始数据类型 Symbol，表示独一无二的值。</p><p>基本用法<br>Symbol 函数栈不能用 new 命令，因为 Symbol 是原始数据类型，不是对象。可以接受一个字符串作为参数，为新创建的 Symbol 提供描述，用来显示在控制台或者作为字符串的时候使用，便于区分。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> sy = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">&quot;KK&quot;</span>);<br><span class="hljs-built_in">console</span>.log(sy);   <span class="hljs-comment">// Symbol(KK)</span><br><span class="hljs-keyword">typeof</span>(sy);        <span class="hljs-comment">// &quot;symbol&quot;</span><br> <br><span class="hljs-comment">// 相同参数 Symbol() 返回的值不相等</span><br><span class="hljs-keyword">let</span> sy1 = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">&quot;kk&quot;</span>); <br>sy === sy1;       <span class="hljs-comment">// false</span><br></code></pre></td></tr></table></figure><h4 id="Symbol-类型的注意点？"><a href="#Symbol-类型的注意点？" class="headerlink" title="Symbol 类型的注意点？"></a>Symbol 类型的注意点？</h4><ol><li>Symbol 函数前不能使用 new 命令，否则会报错。</li><li>Symbol 函数可以接受一个字符串作为参数，表示对 Symbol 实例的描述，主要是为了在控制台显示，或者转为字符串时，比较容易区分。</li><li>Symbol 作为属性名，该属性不会出现在 for…in、for…of 循环中，也不会被 Object.keys()、Object.getOwnPropertyNames()、JSON.stringify() 返回。</li><li>Object.getOwnPropertySymbols 方法返回一个数组，成员是当前对象的所有用作属性名的 Symbol 值。</li><li>Symbol.for 接受一个字符串作为参数，然后搜索有没有以该参数作为名称的 Symbol 值。如果有，就返回这个 Symbol 值，否则就新建并返回一个以该字符串为名称的 Symbol 值。</li><li>Symbol.keyFor 方法返回一个已登记的 Symbol 类型值的 key。</li></ol><h3 id="promise、generator、async-await"><a href="#promise、generator、async-await" class="headerlink" title="promise、generator、async/await"></a>promise、generator、async/await</h3><h4 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h4><p>优点：解决了回调地狱的问题<br>缺点：无法取消 Promise ，错误需要通过回调函数来捕获</p><h4 id="generator"><a href="#generator" class="headerlink" title="generator"></a>generator</h4><p>生成器内部的代码是以自然的同步 / 顺序方式表达任务的一系列步骤</p><h4 id="async-await"><a href="#async-await" class="headerlink" title="async/await"></a>async/await</h4><p>优点：代码清晰，不用像 Promise 写一大堆 then 链，处理了回调地狱的问题</p><p>缺点：await 将异步代码改造成同步代码，如果多个异步操作没有依赖性而使用 await 会导致性能上的降低。</p><ol><li>async 函数中可能会有 await 表达式，async 函数执行时，如果遇到 await 就会先暂停执行 ，等到触发的异步操作完成后，恢复 async 函数的执行并返回解析值。</li></ol><p>await 关键字仅在 async function 中有效。如果在 async function 函数体外使用 await ，你只会得到一个语法错误。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testAwait</span>(<span class="hljs-params"></span>)</span>&#123;<br>   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> &#123;<br>       <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;testAwait&quot;</span>);<br>          resolve();<br>       &#125;, <span class="hljs-number">1000</span>);<br>   &#125;);<br>&#125;<br> <br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">helloAsync</span>(<span class="hljs-params"></span>)</span>&#123;<br>   <span class="hljs-keyword">await</span> testAwait();<br>   <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;helloAsync&quot;</span>);<br> &#125;<br>helloAsync();<br><span class="hljs-comment">// testAwait</span><br><span class="hljs-comment">// helloAsync</span><br></code></pre></td></tr></table></figure><h3 id="rest参数"><a href="#rest参数" class="headerlink" title="rest参数"></a>rest参数</h3><ol><li>ES6引入rest 参数，用于获取函数的实参，用来代替arguments</li></ol><p>使用…rest形式设置剩余形参，支持无限参数<br>// 剩余参数，转化成数组</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">const</span> restParams = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-rest_arg">...args</span>)</span> </span>&#123;<br>    console.log(args.toString());<span class="hljs-comment">//1, 2, 3, 4, 5</span><br>&#125;<br><br>restParams(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)<br></code></pre></td></tr></table></figure><ol start="2"><li><p>rest 参数必须要放到参数最后</p></li><li><p>[…]扩展运算符能将[数组] 转换为都好分隔的参数序列</p></li><li><p>数组的合并</p></li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">&lt;script&gt;<br>    const A = [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>];<br>    const B = [<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>];<br>    <span class="hljs-regexp">//</span> const C = A.concat(B); <span class="hljs-regexp">//</span> [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>]<br>    const C = [...A, ...B]; <span class="hljs-regexp">//</span>[<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>] 能展开<br>    console.log(C);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><ol start="5"><li>数组的克隆  </li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">const</span> A = [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>];<br><span class="hljs-keyword">const</span> C = [...A]; <span class="hljs-comment">//[&quot;a&quot;, &quot;b&quot;]</span><br>console.<span class="hljs-built_in">log</span>(C);<br></code></pre></td></tr></table></figure><ol start="6"><li>将伪数组转为真正的数组</li></ol><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs erlang">const divs = document.<span class="hljs-keyword">query</span>SelectorAll(<span class="hljs-string">&quot;div&quot;</span>);<br>const <span class="hljs-keyword">div</span>Arr = [...divs];<br>console.log(<span class="hljs-keyword">div</span>Arr); //[<span class="hljs-keyword">div</span>, <span class="hljs-keyword">div</span>, <span class="hljs-keyword">div</span>]<br></code></pre></td></tr></table></figure><h4 id="语法糖"><a href="#语法糖" class="headerlink" title="语法糖"></a>语法糖</h4><p>之所以叫「语法」糖，不只是因为加糖后的代码功能与加糖前保持一致，更重要的是，<code>糖在不改变其所在位置的语法结构的前提下，实现了运行时等价</code>。可以简单理解为，加糖后的代码编译后跟加糖前一毛一样。</p><p>之所以叫语法「糖」，是因为加糖后的代码写起来很爽，包括但不限于：<code>代码更简洁流畅，代码更语义自然...</code> 写得爽，看着爽，就像吃了糖。效率高，错误少</p><p>PS: 据说还有一种叫做「语法盐」的东西，主要目的是通过反人类的语法，让你更痛苦的写代码。其实它同样能达到避免代码书写错误的效果，但编程效率应该是降低了，毕竟提高了语法学习门槛，让人咸到忧伤…</p><p>我觉着 js 里的对象原型继承有点「咸」，不然 ES6 也不会急着加糖（纯吐槽）</p><p>最基本的，for循环就是一个语法糖：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">for <span class="hljs-params">(var <span class="hljs-attr">i</span> = 0; i &lt; 5; i++)</span>&#123;<br>    <span class="hljs-string">...</span> <br>&#125;<br></code></pre></td></tr></table></figure><p>而这个实际上跟while没啥区别：</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-built_in">var</span> i=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (i &lt; <span class="hljs-number">5</span>)&#123;<br>    <span class="hljs-params">...</span><br>    i++;<br>&#125;<br></code></pre></td></tr></table></figure><p>简单说，语法糖就是为了避免coder出现错误并提高效率的语法层面的一种优雅的解决方案。</p><h4 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h4><p><a href="https://juejin.cn/post/6844904121380667399#heading-26">promise、generator、async/await</a></p><p><a href="https://www.runoob.com/w3cnote/es6-async.html">ES6 async 函数</a></p><p><a href="https://www.zhihu.com/question/20651624?sort=created">什么是语法糖？</a></p>]]></content>
    
    
    <categories>
      
      <category>ES6</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>ES6</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>BFC--块级格式化上下文</title>
    <link href="/2021/05/10/BFC/"/>
    <url>/2021/05/10/BFC/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h3><blockquote><p>BFC是Block Formatting Context，也就是块级格式化上下文，是用于布局块级盒子的一块渲染区域。</p></blockquote><blockquote><p>简单来说就是，BFC是一个完全独立的空间（布局环境），让空间里的子元素不会影响到外面的布局。那么怎么使用BFC呢，BFC可以看做是一个CSS元素属性</p></blockquote><p>文档流其实分为<code>普通流</code>、<code>定位流</code>和<code>浮动流</code>三种，普通流其实就是指BFC中的FC，也即格式化上下文。</p><p>普通流：元素按照其在 HTML 中的先后位置从上到下、从左到右布局，在这个过程中，行内元素水平排列，直到当行被占满然后换行，块级元素则会被渲染为完整的一个新行。</p><p>格式化上下文：页面中的一块渲染区域，有一套渲染规则，决定了其子元素如何布局，以及和其他元素之间的关系和作用</p><h3 id="BFC的几条规则："><a href="#BFC的几条规则：" class="headerlink" title="BFC的几条规则："></a>BFC的几条规则：</h3><ol><li><p>BFC 区域内的元素外边距会发生重叠。</p></li><li><p>BFC 区域内的元素不会与浮动元素重叠。</p></li><li><p>计算 BFC 区域的高度时，浮动元素也参与计算。</p></li><li><p>BFC 区域就相当于一个容器，内部的元素不会影响到外部，同样外部的元素也不会影响到内部。</p></li></ol><h3 id="BFC的应用："><a href="#BFC的应用：" class="headerlink" title="BFC的应用："></a>BFC的应用：</h3><ol><li>清除浮动：父元素设置overflow: hidden触发BFC实现清除浮动，防止父元素高度塌陷，后面的元素被覆盖，实现文字环绕等等。</li></ol><ol start="2"><li>消除相邻元素垂直方向的边距重叠：第二个子元素套一层，并设置overflow: hidden，构建BFC使其不影响外部元素。</li></ol><ol start="3"><li>消除父子元素边距重叠，父元素设置overflow: hidden</li></ol><h3 id="触发BFC的方式："><a href="#触发BFC的方式：" class="headerlink" title="触发BFC的方式："></a>触发BFC的方式：</h3><ol><li>float 不为 none，浮动元素所在的区域就是一个 BFC 区域。</li><li>position 的值不是 static 或 relative 的元素所在的区域就是一个 BFC 区域</li><li>display为 table-cell 的表格单元格元素所在的区域也是一个 BFC 区域</li><li>overflow 不为 visible 的元素所在的区域也是一个 BFC 区域</li></ol><p>这里简单列举几个触发BFC使用的CSS属性</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arduino">overflow: hidden<br>display: <span class="hljs-keyword">inline</span>-block<br>position: absolute<br>position: fixed<br>display: table-cell<br>display: flex<br></code></pre></td></tr></table></figure><h4 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h4><p><a href="https://mp.weixin.qq.com/s?__biz=MzI2MDM1Mzg1MA==&mid=2247495021&idx=1&sn=186ac3b00483aed484cf45c06135da2b&chksm=ea685738dd1fde2e71d24f6964223437281536ab34f40dc30a9097327c45858cfb65c1c32494&mpshare=1&scene=23&srcid=0508lZZ1YlHc5VKp7BtD81qU&sharer_sharetime=1620473387155&sharer_shareid=06281d72abe265bef7cbe940688c4d2b#rd">前端面经</a></p><p><a href="https://juejin.cn/post/6950082193632788493#heading-0">面试官：请说说什么是BFC？大白话讲清楚</a></p>]]></content>
    
    
    <categories>
      
      <category>CSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>CSS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>详情页&amp;对全局事件解绑&amp;递归组件实现详情页</title>
    <link href="/2021/05/08/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E4%B9%9D)/"/>
    <url>/2021/05/08/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E4%B9%9D)/</url>
    
    <content type="html"><![CDATA[<p><a href="https://gitee.com/Pengzhenglong/Travel">项目地址</a><br><a href="https://www.bilibili.com/video/BV1654y1576K/">视频演示地址</a></p><hr><h3 id="详情页动态路由及banner布局"><a href="#详情页动态路由及banner布局" class="headerlink" title="详情页动态路由及banner布局"></a>详情页动态路由及banner布局</h3><p>实现点击以下能够进入详情页</p><p><img src="/image1/34.png" alt="点击进入详情页"></p><p>src\pages\home\components\Recommend.vue中router-link</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml">&lt;router-link</span><br><span class="xml">  tag=&quot;li&quot;</span><br><span class="xml">  class=&quot;item border-bottom&quot;</span><br><span class="xml">  v-for=&quot;item of list&quot;</span><br><span class="xml">  :key=&quot;item.id&quot;</span><br><span class="xml">  :to=&quot;/detail/ + item.id&quot;</span><br><span class="xml">&gt;</span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-img&quot;</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;item.imgUrl&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-info&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-title&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item.title</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-desc&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item.desc</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-button&quot;</span>&gt;</span>查看详情<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>src\router\index.js路由配置</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">import</span>  Detail  <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/pages/detail/Detail&#x27;</span><br>Vue.use(Router)<br><br>export <span class="hljs-keyword">default</span> <span class="hljs-built_in">new</span> Router(&#123;<br>  routes: [<br>    &#123;<br>      <span class="hljs-type">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>      <span class="hljs-type">name</span>: <span class="hljs-string">&#x27;Home&#x27;</span>,<br>      component: Home<br>    &#125;,&#123;<br>      <span class="hljs-type">path</span>:<span class="hljs-string">&#x27;/city&#x27;</span>,<br>      <span class="hljs-type">name</span>:<span class="hljs-string">&#x27;City&#x27;</span>,<br>      component:City<br>    &#125;,&#123;<br>      <span class="hljs-type">path</span>:<span class="hljs-string">&#x27;/detail/:id&#x27;</span>,<br>      <span class="hljs-type">name</span>:<span class="hljs-string">&#x27;Detail&#x27;</span>,<br>      component:Detail<br>    &#125;<br>  ]<br>&#125;) <br><br></code></pre></td></tr></table></figure><p>src\pages\detail\Detail.vue</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">detail-banner</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">detail-banner</span>&gt;</span></span><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">detail-header</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">detail-header</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">import DetailBanner from &quot;./components/Banner&quot;;</span><br><span class="xml">import DetailHeader from &quot;./components/Header&quot;;</span><br><span class="xml">export default </span><span class="xquery">&#123;</span><br><span class="xquery"> <span class="hljs-built_in"> name</span>: <span class="hljs-string">&quot;Detail&quot;</span>,</span><br><span class="xquery">  components: &#123;</span><br><span class="xquery">    DetailBanner,</span><br><span class="xquery">    DetailHeader</span><br><span class="xquery">  &#125;</span><br><span class="xml">&#125;;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><img src="/image1/35.png" alt="实现效果"></p><h4 id="详情页对全局事件解绑"><a href="#详情页对全局事件解绑" class="headerlink" title="详情页对全局事件解绑"></a>详情页对全局事件解绑</h4><p>全局事件<br>详情页绑定了一个全局事件，当我在详情页面中滚动，这个样写没有问题，但是当我去到其他页面，在滚动时，你就会发现，刚刚你绑定在详情页中的滚动事件，在这个页面也被执行了，这肯定是有问题的。</p><p>其实在我们使用了keep-alive标签后，会有两个生命周期函数分别是：activated、deactivated</p><p>activated：页面展示的时候被执行        </p><p>deactivated：页面被隐藏或者页面即将被替换成新的页面时被执行           </p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">activated <span class="hljs-literal">()</span> &#123;<br>    window.add<span class="hljs-constructor">EventListener(&#x27;<span class="hljs-params">scroll</span>&#x27;, <span class="hljs-params">this</span>.<span class="hljs-params">handleScroll</span>)</span><br>&#125;,<br>deactivated <span class="hljs-literal">()</span> &#123;<br>    window.remove<span class="hljs-constructor">EventListener(&#x27;<span class="hljs-params">scroll</span>&#x27;, <span class="hljs-params">this</span>.<span class="hljs-params">handleScroll</span>)</span><br>&#125;<br></code></pre></td></tr></table></figure><p>这段代码是页面被展示的执行scroll，页面被隐藏的时候移除scroll事件</p><p>src\pages\detail\components\Header.vue部分代码</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">tag</span>=<span class="hljs-string">&quot;div&quot;</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;header-abs&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;showAbs&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont header-abs-back&quot;</span>&gt;</span><span class="hljs-symbol">&amp;#xe624;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;header-fixed&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;!showAbs&quot;</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;opacityStyle&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont header-fixed-back&quot;</span>&gt;</span><span class="hljs-symbol">&amp;#xe624;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>      景点详情<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  name: <span class="hljs-string">&quot;DetailHeader&quot;</span>,</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="javascript">      showAbs: <span class="hljs-literal">true</span>,</span><br>      opacityStyle: 0<br>    &#125;;<br>  &#125;,<br>  methods: &#123;<br><span class="javascript">    <span class="hljs-function"><span class="hljs-title">handleScroll</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">      <span class="hljs-keyword">const</span> top = <span class="hljs-built_in">document</span>.documentElement.scrollTop;</span><br>      if (top &gt; 60) &#123;<br><span class="javascript">        <span class="hljs-keyword">let</span> opacity = top / <span class="hljs-number">140</span>;</span><br>        opacity = opacity &gt; 1 ? 1 : opacity;<br><span class="javascript">        <span class="hljs-built_in">this</span>.opacityStyle = &#123; opacity &#125;;</span><br><span class="javascript">        <span class="hljs-built_in">this</span>.showAbs = <span class="hljs-literal">false</span>;</span><br><span class="javascript">      &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="javascript">        <span class="hljs-built_in">this</span>.showAbs = <span class="hljs-literal">true</span>;</span><br>      &#125;<br>    &#125;<br>  &#125;,<br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">activated</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-comment">//绑定了一个scroll事件，一旦它被执行，this.handleScroll方法会被执行</span></span><br><span class="javascript">    <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&quot;scroll&quot;</span>, <span class="hljs-built_in">this</span>.handleScroll);</span><br>  &#125;,<br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">deactivated</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">&quot;scroll&quot;</span>, <span class="hljs-built_in">this</span>.handleScroll);</span><br>  &#125;<br>&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure><h3 id="递归组件实现详情页"><a href="#递归组件实现详情页" class="headerlink" title="递归组件实现详情页"></a>递归组件实现详情页</h3><p>递归组件的意思就是在组件自身调用组件自身。</p><p>数据 detail.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;ret&quot;</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;sightName&quot;</span>: <span class="hljs-string">&quot;大连圣亚海洋世界(AAAA景区)&quot;</span>,<br>    <span class="hljs-attr">&quot;bannerImg&quot;</span>: <span class="hljs-string">&quot;http://img1.qunarzz.com/sight/p0/201404/23/04b92c99462687fa1ba45c1b5ba4ad77.jpg_600x330_bf9c4904.jpg&quot;</span>,<br>    <span class="hljs-attr">&quot;gallaryImgs&quot;</span>: [<span class="hljs-string">&quot;http://img1.qunarzz.com/sight/p0/201404/23/04b92c99462687fa1ba45c1b5ba4ad77.jpg_800x800_70debc93.jpg&quot;</span>, <span class="hljs-string">&quot;http://img1.qunarzz.com/sight/p0/1709/76/7691528bc7d7ad3ca3.img.png_800x800_9ef05ee7.png&quot;</span>],<br>    <span class="hljs-attr">&quot;categoryList&quot;</span>: [&#123;<br>        <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;成人票&quot;</span>,<br>        <span class="hljs-attr">&quot;children&quot;</span>: [&#123;<br>          <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;成人三馆联票&quot;</span>,<br>          <span class="hljs-attr">&quot;children&quot;</span>: [&#123;<br>            <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;成人三馆联票 - 某一连锁店销售&quot;</span><br>          &#125;]<br>        &#125;,&#123;<br>          <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;成人五馆联票&quot;</span><br>        &#125;]<br>      &#125;, &#123;<br>        <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;学生票&quot;</span><br>      &#125;, &#123;<br>        <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;儿童票&quot;</span><br>      &#125;, &#123;<br>        <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;特惠票&quot;</span><br>      &#125;]<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>src\pages\detail\components\List.vue</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item, index) of list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-title  border-bottom&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-title-icon&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">        </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item.title</span> &#125;&#125;</span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;item.children&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-children&quot;</span>&gt;</span></span><br><span class="xml">        //使用递归组件</span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">detail-list</span> <span class="hljs-attr">:list</span>=<span class="hljs-string">&quot;item.children&quot;</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">detail-list</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">import Detail from &quot;../Detail.vue&quot;;</span><br><span class="xml">export default &#123;</span><br><span class="xml">  components: &#123; Detail &#125;,</span><br><span class="xml">  name: &quot;DetailList&quot;,</span><br><span class="xml">  props: &#123;</span><br><span class="xml">    list: Array</span><br><span class="xml">  &#125;</span><br><span class="xml">&#125;;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;stylus&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span></span><br><span class="xml">.item-title-icon</span><br><span class="xml">    position: relative</span><br><span class="xml">    left: .06rem</span><br><span class="xml">    top: .06rem</span><br><span class="xml">    display: inline-block</span><br><span class="xml">    width: .36rem</span><br><span class="xml">    height: .36rem</span><br><span class="xml">    background: url(http://s.qunarzz.com/piao/image/touch/sight/detail.png) 0 -.45rem no-repeat</span><br><span class="xml">    margin-right: .1rem</span><br><span class="xml">    background-size: .4rem 3rem</span><br><span class="xml">.item-title</span><br><span class="xml">    line-height :.8rem</span><br><span class="xml">    font-size: 0.32rem</span><br><span class="xml">    padding : 0 .2rem</span><br><span class="xml">.item-children</span><br><span class="xml">    padding:0 .2rem</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br><br></code></pre></td></tr></table></figure><p>上面代码中，在 list-children 这个元素下，先做了一个判断，当 item.children 下有值的时候，调用一下自身，也就是 detail-list 这个组件，这个组件也是通过属性的形式，传一个 list，因为在 list.vue 中已经通过 props 接收到 list 了，而且外层已经循环过 list 了，现在要获取 list 下的 children 中的数据，所以直接让这个 list 属性等于 item.children 就可以了。因为数据存在层级关系，可以通过添加样式呈现出来，效果如下图：</p><p><img src="/image1/36.png" alt="效果"></p><h4 id="keep-alive不缓存"><a href="#keep-alive不缓存" class="headerlink" title="keep-alive不缓存"></a>keep-alive不缓存</h4><p>在Detail.vue页面中，当我点击了其他景点后，它也是不会发送请求的，那么Detail页面就不会重新渲染了。</p><p>可以使用keep-alive的exclude属性，给它默认设置为Detail，用途是每次进入Detail页面都会发送请求</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stata">&lt;<span class="hljs-keyword">keep</span>-alive exclude=<span class="hljs-string">&quot;Detail&quot;</span>&gt;   <span class="hljs-comment">//使用 exclude 属性，可以设置不需要缓存的页面</span><br>   &lt;router-<span class="hljs-keyword">view</span>/&gt;<br>&lt;/<span class="hljs-keyword">keep</span>-alive&gt;<br></code></pre></td></tr></table></figure><h4 id="页面路由切换回到最顶部"><a href="#页面路由切换回到最顶部" class="headerlink" title="页面路由切换回到最顶部"></a>页面路由切换回到最顶部</h4><p><img src="/image1/37.png" alt="代码添加"></p><p>让页面切换后始终回到页面最顶部</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">scrollBehavior (<span class="hljs-keyword">to</span>, <span class="hljs-keyword">from</span>, savedPosition) &#123;<br><span class="hljs-built_in">      return</span> &#123; x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><h3 id="在项目中加入基础动画"><a href="#在项目中加入基础动画" class="headerlink" title="在项目中加入基础动画"></a>在项目中加入基础动画</h3><p>让图片点击时有若影若现的效果</p><p>新建一个组件，通过插槽的方式传递<br>src\common\fade\FadeAnimation.vue</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">transition</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  name: <span class="hljs-string">&quot;FadeAnimation&quot;</span></span><br>&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;stylus&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><br>.v-enter, .v-leave-to<br><span class="css">    <span class="hljs-attribute">opacity</span> :<span class="hljs-number">0</span></span><br>.v-enter-activate, .v-leave-activate<br><span class="css">  <span class="hljs-attribute">transition</span> :opacity  .<span class="hljs-number">5s</span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>src\pages\detail\components\Banner.vue中使用,部分代码</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xquery">    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">fade-animation</span>&gt;</span></span><br><span class="xml">      &lt;common-gallary</span><br><span class="xml">        :imgs=&quot;bannerImgs&quot;</span><br><span class="xml">        v-show=&quot;showGallary&quot;</span><br><span class="xml">        @close=&quot;handleGallaryClose&quot;</span><br><span class="xml">      &gt;&lt;/common-gallary</span><br><span class="xml">    &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">fade-animation</span>&gt;</span></span><br><br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">import CommonGallary from &quot;common/gallary/Gallary&quot;;</span><br><span class="xml">import FadeAnimation from &quot;common/fade/FadeAnimation&quot;;</span><br><span class="xml">export default </span><span class="xquery">&#123;</span><br><span class="xquery"> <span class="hljs-built_in"> name</span>: <span class="hljs-string">&quot;DetailBanner&quot;</span>,</span><br><span class="xquery">  components: &#123;</span><br><span class="xquery">    CommonGallary,</span><br><span class="xquery">    FadeAnimation</span><br><span class="xquery">  &#125;</span><br><span class="xml">&#125;;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>至此，项目基本完结…</p>]]></content>
    
    
    <categories>
      
      <category>Vue项目实战</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>三次握手和四次挥手</title>
    <link href="/2021/05/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E8%B7%AF%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B/"/>
    <url>/2021/05/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E8%B7%AF%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="TCP-协议三次握手"><a href="#TCP-协议三次握手" class="headerlink" title="TCP 协议三次握手"></a>TCP 协议三次握手</h3><p>客户端-发送带有SYN标致的数据包-一次握手–服务端</p><p>服务端-发送带有SYN/ACK标致的数据包-二次握手-客户端</p><p>客户端-发送带有ACK的数据包-三次握手-服务端</p><h4 id="目的：-建立可靠的通信通道-，数据的发送和接收（双方正常）"><a href="#目的：-建立可靠的通信通道-，数据的发送和接收（双方正常）" class="headerlink" title="目的：    建立可靠的通信通道 ，数据的发送和接收（双方正常）"></a>目的：    建立可靠的通信通道 ，数据的发送和接收（双方正常）</h4><blockquote><p>翻译成大白话就是： 客户端：你能接收到我的消息吗？ 服务端：可以的，那你能接收到我的回复吗？ 客户端：可以，那我们开始聊正事吧。</p></blockquote><h4 id="为什么是3次？：避免历史连接，确认客户端发来的请求是这次通信的人-为什么不是4次？：3次够了第四次浪费"><a href="#为什么是3次？：避免历史连接，确认客户端发来的请求是这次通信的人-为什么不是4次？：3次够了第四次浪费" class="headerlink" title="为什么是3次？：避免历史连接，确认客户端发来的请求是这次通信的人 为什么不是4次？：3次够了第四次浪费"></a>为什么是3次？：避免历史连接，确认客户端发来的请求是这次通信的人 为什么不是4次？：3次够了第四次浪费</h4><p><img src="/image/25.png" alt="三次握手"></p><h3 id="TCP-协议四次挥手"><a href="#TCP-协议四次挥手" class="headerlink" title="TCP 协议四次挥手"></a>TCP 协议四次挥手</h3><p>客户端-发送一个FIN,用来关闭客户端到服务器的数据传输<br>服务器-收到这个FIN,它发回一个ACK，确认序号为收到的序号加1.和SYN一样，一个FIN将占用一个序号<br>服务器-关闭与客户端的连接，发送一个FIN给客户端<br>客户端-发回ACK报文确认，并将确认序号设置为收到序号加1             </p><p><img src="/image/26.png" alt="四次挥手"></p><ol><li>为什么不是两次？              </li></ol><p>两次情况客户端说完结束就立马断开不再接收，无法确认服务端是否接收到断开消息，但且服务端可能还有消息未发送完。<br>2. 为什么不是三次？    </p><p>3次情况服务端接收到断开消息，向客户端发送确认接受消息，客户端未给最后确认断开的回复。</p><ol start="3"><li>为什么要四次挥手</li></ol><p>任何一方都可以在数据传送结束后发出连接释放的通知，待对方确认后进入关闭状态。当另一方也没有数据再发送的时候，则发出连接释放通知，对方确认后就完全关闭了TCP连接。</p><h4 id="TCP作为一种可靠的传输控制协议，其核心思想就是：既要保证数据的可靠传输，又要提高传输的效率，而用三次恰恰可以满足以上俩方面的需求。"><a href="#TCP作为一种可靠的传输控制协议，其核心思想就是：既要保证数据的可靠传输，又要提高传输的效率，而用三次恰恰可以满足以上俩方面的需求。" class="headerlink" title="TCP作为一种可靠的传输控制协议，其核心思想就是：既要保证数据的可靠传输，又要提高传输的效率，而用三次恰恰可以满足以上俩方面的需求。"></a>TCP作为一种可靠的传输控制协议，其核心思想就是：既要保证数据的可靠传输，又要提高传输的效率，而用三次恰恰可以满足以上俩方面的需求。</h4>]]></content>
    
    
    <categories>
      
      <category>计算机网络</category>
      
    </categories>
    
    
    <tags>
      
      <tag>计算机网络</tag>
      
      <tag>TCP 协议</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue&amp;Vuex</title>
    <link href="/2021/05/07/Vue%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0(%E4%B8%83)/"/>
    <url>/2021/05/07/Vue%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0(%E4%B8%83)/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="Vuex介绍"><a href="#Vuex介绍" class="headerlink" title="Vuex介绍"></a>Vuex介绍</h3><p>Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化. Vuex 解决了<strong>多个视图依赖于同一状态</strong>和<strong>来自不同视图的行为需要变更同一状态</strong>的问题，将开发者的精力聚焦于数据的更新而不是数据在组件之间的传递上</p><ol><li>多个视图依赖于同一状态。</li><li>来自不同视图的行为需要变更同一状态。</li></ol><p>对于问题一，传参的方法对于多层嵌套的组件将会非常繁琐，并且对于兄弟组件间的状态传递无能为力。对于问题二，我们经常会采用父子组件直接引用或者通过事件来变更和同步状态的多份拷贝。以上的这些模式非常脆弱，通常会导致无法维护的代码。</p><p>因此，我们为什么不把组件的共享状态抽取出来，以一个全局单例模式管理呢？在这种模式下，我们的组件树构成了一个巨大的“视图”，不管在树的哪个位置，任何组件都能获取状态或者触发行为！</p><p><img src="/image1/33.png" alt="Vuex"></p><h3 id="怎么使用vuex"><a href="#怎么使用vuex" class="headerlink" title="怎么使用vuex"></a>怎么使用vuex</h3><p>第一步安装</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm install vuex <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><p>第二步创建store</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">import</span> Vuex <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span>;<br>Vue.use(Vuex);<br><span class="hljs-comment">//不是在生产环境debug为true</span><br><span class="hljs-keyword">const</span> debug = process.env.NODE_ENV !== <span class="hljs-string">&#x27;production&#x27;</span>;<br><span class="hljs-comment">//创建Vuex实例对象</span><br><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> Vuex.Store(&#123;<br>    strict:debug,<span class="hljs-comment">//在不是生产环境下都开启严格模式</span><br>    state:&#123;<br>    &#125;,<br>    getters:&#123;<br>    &#125;,<br>    mutations:&#123;<br>    &#125;,<br>    actions:&#123;<br>    &#125;<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store;<br></code></pre></td></tr></table></figure><p>第三步注入vuex</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span>;<br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./store&#x27;</span>;<br><span class="hljs-built_in">new</span> Vue(&#123;<br>  el: <span class="hljs-string">&#x27;#app&#x27;</span>,<br>  router,<br>  store,<br>  components: &#123; App &#125;,<br>  <span class="hljs-keyword">template</span>: <span class="hljs-string">&#x27;&lt;App/&gt;&#x27;</span><br>&#125;)<br></code></pre></td></tr></table></figure><h3 id="Vuex各个模块"><a href="#Vuex各个模块" class="headerlink" title="Vuex各个模块"></a>Vuex各个模块</h3><ol><li>state：用于数据的存储，是store中的唯一数据源</li><li>getters：如vue中的计算属性一样，基于state数据的二次包装，常用于数据的筛选和多个数据的相关性计算</li><li>mutations：类似函数，改变state数据的唯一途径，且不能用于处理异步事件</li><li>actions：类似于mutation，用于提交mutation来改变状态，而不直接变更状态，可以包含任意异步操作</li><li>modules：类似于命名空间，用于项目中将各个模块的状态分开定义和操作，便于维护</li></ol><h3 id="Vuex实例应用"><a href="#Vuex实例应用" class="headerlink" title="Vuex实例应用"></a>Vuex实例应用</h3><p>// 父组件</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">ChildA</span>/&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">ChildB</span>/&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  import ChildA from &#x27;./components/ChildA&#x27; // 导入A组件</span><br><span class="xml">  import ChildB from &#x27;./components/ChildB&#x27; // 导入B组件</span><br><br><span class="xml">  export default </span><span class="xquery">&#123;</span><br><span class="xquery">   <span class="hljs-built_in"> name</span>: <span class="hljs-string">&#x27;App&#x27;</span>,</span><br><span class="xquery">    components: &#123;ChildA, ChildB&#125;</span><span class="xml"> // 注册A、B组件</span><br><span class="xml">  &#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>// 子组件childA</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;childA&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>我是A组件<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;transform&quot;</span>&gt;</span>点我让B组件接收到数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>因为你点了B，所以我的信息发生了变化：</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">BMessage</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  export default &#123;</span><br><span class="xml">    data() &#123;</span><br><span class="xml">      return &#123;</span><br><span class="xml">        AMessage: &#x27;Hello，B组件，我是A组件&#x27;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;,</span><br><span class="xml">    computed: &#123;</span><br><span class="xml">      BMessage() &#123;</span><br><span class="xml">        // 这里存储从store里获取的B组件的数据</span><br><span class="xml">        return this.$store.state.BMsg</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;,</span><br><span class="xml">    methods: &#123;</span><br><span class="xml">      transform() &#123;</span><br><span class="xml">        // 触发receiveAMsg，将A组件的数据存放到store里去</span><br><span class="xml">        this.$store.commit(&#x27;receiveAMsg&#x27;, &#123;</span><br><span class="xml">          AMsg: this.AMessage</span><br><span class="xml">        &#125;)</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;</span><br><span class="xml">  &#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>// 子组件 childB</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;childB&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>我是B组件<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;transform&quot;</span>&gt;</span>点我让A组件接收到数据<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>因为你点了A，所以我的信息发生了变化：</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">AMessage</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  export default &#123;</span><br><span class="xml">    data() &#123;</span><br><span class="xml">      return &#123;</span><br><span class="xml">        BMessage: &#x27;Hello，A组件，我是B组件&#x27;</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;,</span><br><span class="xml">    computed: &#123;</span><br><span class="xml">      AMessage() &#123;</span><br><span class="xml">        // 这里存储从store里获取的A组件的数据</span><br><span class="xml">        return this.$store.state.AMsg</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;,</span><br><span class="xml">    methods: &#123;</span><br><span class="xml">      transform() &#123;</span><br><span class="xml">        // 触发receiveBMsg，将B组件的数据存放到store里去</span><br><span class="xml">        this.$store.commit(&#x27;receiveBMsg&#x27;, &#123;</span><br><span class="xml">          BMsg: this.BMessage</span><br><span class="xml">        &#125;)</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;</span><br><span class="xml">  &#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>vuex的store,js</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs pf">import Vue <span class="hljs-keyword">from</span> &#x27;vue&#x27;<br>import Vuex <span class="hljs-keyword">from</span> &#x27;vuex&#x27;<br>Vue.use(Vuex)<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">state</span> = &#123;<br>  // 初始化A和B组件的数据，等待获取<br>  AMsg: &#x27;&#x27;,<br>  BMsg: &#x27;&#x27;<br>&#125;<br><br><span class="hljs-keyword">const</span> mutations = &#123;<br>  receiveAMsg(<span class="hljs-keyword">state</span>, payload) &#123;<br>    // 将A组件的数据存放于<span class="hljs-keyword">state</span><br>    <span class="hljs-keyword">state</span>.AMsg = payload.AMsg<br>  &#125;,<br>  receiveBMsg(<span class="hljs-keyword">state</span>, payload) &#123;<br>    // 将B组件的数据存放于<span class="hljs-keyword">state</span><br>    <span class="hljs-keyword">state</span>.BMsg = payload.BMsg<br>  &#125;<br>&#125;<br><br>export <span class="hljs-keyword">default</span> new Vuex.Store(&#123;<br>  <span class="hljs-keyword">state</span>,<br>  mutations<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h4><p><a href="https://vuex.vuejs.org/zh/">Vue官方文档</a></p><p><a href="https://juejin.cn/post/6844903887162310669#heading-16">vue中8种组件通信方式, 值得收藏!</a></p>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使用Vuex的实现数据共享&amp;localStorage&amp;keep-alive</title>
    <link href="/2021/05/07/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E5%85%AB)/"/>
    <url>/2021/05/07/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E5%85%AB)/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="使用Vuex的实现数据共享"><a href="#使用Vuex的实现数据共享" class="headerlink" title="使用Vuex的实现数据共享"></a>使用Vuex的实现数据共享</h3><p>需求：我们点击城市页时首页的城市也能改变</p><p>City.vue和Home.vue是没有一个共用的父级组价的，这样两个页面是没有一个共用的父级组件进行中转。方法一：使用Bus总线(比较麻烦)</p><p>方法二：Vuex(数据框架)<br>main.js引入store</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">import</span>  store  <span class="hljs-keyword">from</span>  <span class="hljs-string">&#x27;./store&#x27;</span><br><span class="hljs-built_in">new</span> Vue(&#123;<br>  el: <span class="hljs-string">&#x27;#app&#x27;</span>,<br>  router,<br>  store,<br>  components: &#123; App &#125;,<br>  <span class="hljs-keyword">template</span>: <span class="hljs-string">&#x27;&lt;App/&gt;&#x27;</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>src\store\index.js 代码：</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs pf">import Vue <span class="hljs-keyword">from</span> &#x27;vue&#x27;<br>import Vuex <span class="hljs-keyword">from</span> &#x27;vuex&#x27;<br>import  <span class="hljs-keyword">state</span>  <span class="hljs-keyword">from</span>  &#x27;./<span class="hljs-keyword">state</span>&#x27;<br>import  mutations <span class="hljs-keyword">from</span>  &#x27;./mutation&#x27;<br>Vue.use(Vuex)<br>export <span class="hljs-keyword">default</span>  new  Vuex.Store(&#123;<br>    <span class="hljs-keyword">state</span>,<br>    mutations<br>&#125;)<br></code></pre></td></tr></table></figure><p>src\store\mutation.js</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pf">export <span class="hljs-keyword">default</span>&#123;<br>        changeCity(<span class="hljs-keyword">state</span>,city)&#123;<br>            <span class="hljs-keyword">state</span>.city=city<br>            try&#123;<br>                localStorage.city=city<br>            &#125;catch(e)&#123;&#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>src\store\state.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span>  defaultCity  =<span class="hljs-string">&#x27;北京&#x27;</span><br><span class="hljs-keyword">try</span>&#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">localStorage</span>.city)&#123;<br>        defaultStatus=<span class="hljs-built_in">localStorage</span>.city<br>    &#125;<br>&#125;<span class="hljs-keyword">catch</span>(e)&#123;&#125;<br><span class="hljs-keyword">export</span>  <span class="hljs-keyword">default</span>&#123;<br>        city: defaultCity<br><br>&#125;<br></code></pre></td></tr></table></figure><p>src\pages\city\components\List.vue使用部分代码其他页面修改同理</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs gradle">    &lt;<span class="hljs-keyword">div</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;button&quot;</span>&gt;&#123;&#123; <span class="hljs-keyword">this</span>.currentCity &#125;&#125;&lt;/<span class="hljs-keyword">div</span>&gt;<br>      &lt;<span class="hljs-keyword">div</span><br>            <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;item  border-bottom&quot;</span><br>            v-<span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;innerItem of item&quot;</span><br>            :key=<span class="hljs-string">&quot;innerItem.id&quot;</span><br>            @click=<span class="hljs-string">&quot;handleCityClick(innerItem.name)&quot;</span><br>          &gt;<br>            &#123;&#123; innerItem.name &#125;&#125;<br>          &lt;/<span class="hljs-keyword">div</span>&gt;<br><br><br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;button&quot;</span>&gt;&#123;&#123; <span class="hljs-keyword">this</span>.$store.state.city &#125;&#125;&lt;/<span class="hljs-keyword">div</span>&gt;<br>  methods: &#123;<br>    handleCityClick(city) &#123;<br>      <span class="hljs-keyword">this</span>.$store.commit(<span class="hljs-string">&quot;changeCity&quot;</span>, city); <br>      <span class="hljs-comment">//页面跳转--编程式导航push</span><br>      <span class="hljs-keyword">this</span>.$router.<span class="hljs-keyword">push</span>(<span class="hljs-string">&quot;/&quot;</span>);<br>    &#125;<br>  &#125;,<br></code></pre></td></tr></table></figure><h3 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h3><p>刚开始在实现首页右上角城市定位显示的时候，src 目录下新建了一个 store 目录，存储了 Vuex 中的默认数据，city 直接设置成了“北京”，但是其实这样去写，是有问题的，点击城市，会改变这个 city，但是当页面刷新了，就又变回了北京。      </p><p>考虑到在真实的项目中，如果你这次选中了一个城市，下次再打开这个网页的时候，上次选的城市还应该在的，怎么解决这个问题呢？         </p><p>这时可以借助 HTML5 中提供了一个新的 api，叫做 localStorage，它可以实现本地存储，在这里也就是实现保存城市的功能。         </p><p>store/index.js中，这样去写代码，当用户尝试去改变城市的时候，我不但把 state 中的 city 改了，同时还去存一个 localStorage，直接写 localStorage.city = city 就可以了。然后让 stare 中 city 的默认值是 localStorage.city || “北京”，就可以了。也就是 city 的值我默认先去 localStorage 中取，如果取不到，才用默认的 “北京”。</p><p>store/index.js中，这样去写代码，当用户尝试去改变城市的时候，我不但把 state 中的 city 改了，同时还去存一个 localStorage，直接写 localStorage.city = city 就可以了。然后让 stare 中 city 的默认值是 localStorage.city || “北京”，就可以了。也就是 city 的值我默认先去 localStorage 中取，如果取不到，才用默认的 “北京”。</p><p>store/index.js</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs pf">import Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br>import Vuex <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vuex&quot;</span>;<br>Vue.use(Vuex);<br>export <span class="hljs-keyword">default</span> new Vuex.Store(&#123;<br>    <span class="hljs-keyword">state</span>: &#123;<br>        city: localStorage.city || <span class="hljs-string">&quot;北京&quot;</span><br>    &#125;,<br>    mutations: &#123;<br>        changeCity(<span class="hljs-keyword">state</span>, city) &#123;<br>            <span class="hljs-keyword">state</span>.city = city;<br>            localStorage.city = city;<br>        &#125;<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>这个时候打开页面，当用户选择一个城市，然后刷新页面，可以看到上次选择的城市还在。但是当使用 localStorage 的时候，建议在外层包裹一个 try{ }catch(e){ }，因为在某些浏览器，如果用户关闭了本地存储这样的功能，或者使用隐身模式，使用 localStorage 可能导致浏览器直接抛出异常，代码就运行不了了，为了避免这种问题，建议在外层加一个 try{ }catch(e){ }，怎么加呢？</p><p>先定义一个默认的 defaultCity 等于“北京”，然后写一个 try{ }catch(e){ }，这样写：如果有 localStorage.city，default.city 就等于 localStorage.city，下边 state 中的 city 就可以等于 defaultCity 了，同样在 mutations 的 changeCity 中也要写一个 try{ }catch(e)：</p><p>store/index.js</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs pf">import Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br>import Vuex <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vuex&quot;</span>;<br>Vue.use(Vuex);<br><br>let <span class="hljs-keyword">default</span>City = <span class="hljs-string">&quot;北京&quot;</span><br>try &#123;<br>    if (localStorage.city) &#123;<br>        <span class="hljs-keyword">default</span>City = localStorage.city;<br>    &#125;<br>&#125; catch (e) &#123; &#125;<br><br>export <span class="hljs-keyword">default</span> new Vuex.Store(&#123;<br>    <span class="hljs-keyword">state</span>: &#123;<br>        city: <span class="hljs-keyword">default</span>City<br>    &#125;,<br>    mutations: &#123;<br>        changeCity(<span class="hljs-keyword">state</span>, city) &#123;<br>            <span class="hljs-keyword">state</span>.city = city;<br>            try &#123;<br>                localStorage.city = city;<br>            &#125; catch (e) &#123; &#125;<br>        &#125;<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>现在我们看到 store/index.js 这个文件慢慢的变得复杂起来了，实际上，在真正的项目开发和之中，会做进一步的拆分，也就是把这个文件拆分为 State、Actions、Mutations，在 store 中创建一个文件叫 state.js（只存储公用数据），然后把设置默认数据的这块代码放进去，并通过 export 导出，内容就是在 index.js 中定义的 state 对象里的内容：代<br>码见上面方法二中：</p><p>这样，我们就将 vuex 的代码拆分成了 State、Actions、Mutations 这几个部分，未来它的维护性也会得到比较大的提高。</p><h3 id="keep-alive"><a href="#keep-alive" class="headerlink" title="keep-alive"></a>keep-alive</h3><p>使用 keep-alive 优化网页性能</p><p>当写完城市列表响应代码，启动服务，打开页面，这样看不存在什么问题，基本的一些业务逻辑都已经实现了，但是在控制台中打开 Network 网络这个选项，选择 XHR，当初次进入首页的时候，请求了一个 index.json 的文件，然后切换到列表页，又请求了一个 city.json，然后再回到首页，index.json 又请求了一次，再次去列表页，city.json 又请求了一次，也就是，每一次路由发生变化的时候，Ajax 都会重新的被发送。</p><p><img src="/image1/29.png" alt="ajax"></p><p>思考是什么原因导致这样的问题呢，打开 Home.vue 首页这个组件，每一次打开这个首页的时候，都会被重新的渲染，所以 mounted 这个钩子就会被重新的执行，那么这个 Ajax 数据就会被重新获取，那么这么能让它只获取一次呢？</p><p>打开 main.js，可以看到入口组件是 App 这个组件，再打开 App.vue，router-view 显示的是当前地址所对应的内容，我们可以在外层包裹一个 keep-alive 的一个标签，他是 Vue 自带的一个标签，他的意思就是我的路由的内容被加载一次后，我就把路由中的内容放到内存之中，下一次再进入这个路由的时候，不需要重新渲染这个组件，去重新执行钩子函数，只要去内存里把以前的内容拿出来就可以。</p><p><img src="/image1/30.png" alt="keep-alive"></p><p>这个时候，回到页面上，再打开 Network，进入到列表页，选择城市再返回首页，就不会再去加载 index.json 了，同样再进入列表页，也不会再去加载 city.json 了，他直接会从内存中调数据，而不会重新去法 Ajax 请求了。</p><p><img src="/image1/31.png" alt="keep-alive"></p><p>这样还是存在逻辑上的问题的，当我在“北京”的时候，首页显示的是“北京”的内容，当切换为“上海”时，首页就应该显示“上海”的内容，所以城市发生改变的时候，首页还需要重新发一次 Ajax 请求，来获取不同城市的数据信息，我们对这一块做一个调整。</p><p>打开 Home.vue 组件，改一下 axios 请求地址这里，在他的后面带一个参数，让他等于 Vuex 中存的当前的城市，所以还需要在 Home.vue 组件中引用 Vuex，import { mapState } from “vuex”，然后再加一个计算属性：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">computed:&#123;<br>    ...<span class="hljs-built_in">mapState</span>([<span class="hljs-string">&#x27;city&#x27;</span>])<br>&#125;<br></code></pre></td></tr></table></figure><p>获取到城市对应的内容，然后就可以在发 Ajax 的时候，把 city 放在请求的参数里面：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">axios.<span class="hljs-keyword">get</span>(<span class="hljs-string">&quot;/api/index.json?city=&quot;</span> + <span class="hljs-keyword">this</span>.city)<br>.then(<span class="hljs-keyword">this</span>.getHomeInfoSucc);<br></code></pre></td></tr></table></figure><p>这个时候，我们打开页面，可以看到请求参数里已经携带了当前的城市：</p><p>但是，例如当你切换了城市“桂林”，回到首页，并没有重新发 Ajax 请求，虽然上面的城市变成了“桂林”，但是底下的内容还是“北京”的内容，我们希望底下的内容跟着变，该怎么做呢？</p><p>当我们在 App.vue 中用了 keep-alive 的时候，这块的内容已经被缓存起来了，他直接取得是缓存里的数据，那如何去改变缓存里的数据呢？当你使用 keep-alive 的时候，组件中会多出一个生命周期函数 activted，</p><p><img src="/image1/32.png" alt="active"></p><p>可以在 mounted 和 activated 两个生命周期函数下打印一些内容，到浏览器上看一下他俩的执行：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;mounted&quot;</span>);<br>    <span class="hljs-built_in">this</span>.getHomeInfo();<br>&#125;,<br><span class="hljs-function"><span class="hljs-title">activated</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;activted&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>打开页面，可以看到，mounted 和 activated 都会执行，当切换了城市，再回到首页的时候，组件的 mounted 就不会执行了，就只有 activated 会被执行，那么我们借助 activated 这个生命周期函数就可以实现我们想要的功能了。</p><p>首先在页面被挂载的时候，也就是 mounted 中一定会去发一个 Ajax 请求，当页面重新被显示的时候，activated 一定会被重新的执行，那么我们就可以在页面每次重新显示的时候，可以判断当前页面上的城市和上次页面上显示的城市是否是相同的，如果不相同的，就再发一次 Ajax 请求。</p><p>先在 data 中设置一个数据 lastCity，默认值是空，接着当页面被挂载的时候，让它等于 this.city，对上一次的城市做一个保存：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">mounted() &#123;<br>    <span class="hljs-keyword">this</span>.lastCity = <span class="hljs-keyword">this</span>.city<br>    <span class="hljs-keyword">this</span>.getHomeInfo();<br>&#125;<br></code></pre></td></tr></table></figure><p>当页面被重新激活的时候，我们在 activted 中这样写：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">activated() &#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.lastCity != <span class="hljs-keyword">this</span>.city)&#123;<br>        <span class="hljs-keyword">this</span>.lastCity = <span class="hljs-keyword">this</span>.city<br>        <span class="hljs-keyword">this</span>.getHomeInfo();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>如果上一次的城市 lastCity 不等于当前城市的时候，就重新发一个 Ajax 请求，直接调用上面 getHomeInfo 方法就可以了。当上次的 city 和这次的 city 不一样时，还需要让他等于这次的 city。回到页面上，可以看到当切换的城市和上次的城市一样时，Ajax 就不会请求 city.json 了，当不一样时，才会去请求 city.json。</p><p>回到代码里面，通过 activted 这样一个 keep-alive 新增的生命周期函数，结合 lastCity 这样一个临时缓存变量，就实现了首页代码性能优化的调整。</p>]]></content>
    
    
    <categories>
      
      <category>Vue项目实战</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue去哪儿项目&amp;搜索功能实现</title>
    <link href="/2021/05/06/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E4%B8%83)/"/>
    <url>/2021/05/06/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E4%B8%83)/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="搜索功能实现"><a href="#搜索功能实现" class="headerlink" title="搜索功能实现"></a>搜索功能实现</h3><p><img src="/image1/28.png" alt="效果图"></p><p>src\pages\city\components\Search.vue部分代码</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs maxima">&lt;div class=<span class="hljs-string">&quot;search-content&quot;</span> ref=<span class="hljs-string">&quot;search&quot;</span> v-<span class="hljs-built_in">show</span>=<span class="hljs-string">&quot;keyword&quot;</span>&gt;<br>&lt;ul&gt;<br>    &lt;<span class="hljs-built_in">li</span><br>    class=<span class="hljs-string">&quot;search-item  border-bottom&quot;</span><br>    v-<span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;item of list&quot;</span><br>    :<span class="hljs-built_in">key</span>=<span class="hljs-string">&quot;item.id&quot;</span><br>    &gt;<br>    &#123;&#123; item.name &#125;&#125;<br>    &lt;/<span class="hljs-built_in">li</span>&gt;<br>    &lt;<span class="hljs-built_in">li</span> class=<span class="hljs-string">&quot;search-item  border-bottom&quot;</span> v-<span class="hljs-built_in">show</span>=<span class="hljs-string">&quot;hasNoData&quot;</span>&gt;<br>    没有找到匹配数据<br>    &lt;/<span class="hljs-built_in">li</span>&gt;<br>&lt;/ul&gt;<br>&lt;/div&gt;<br><br> .search-<span class="hljs-built_in">content</span><br>          z-index:<span class="hljs-number">1</span><br>          overflow :hidden<br>          <span class="hljs-built_in">position</span>:absolute<br>          top: <span class="hljs-number">1.</span>58<span class="hljs-built_in">rem</span><br>          right:<span class="hljs-number">0</span><br>          left:<span class="hljs-number">0</span><br>          bottom:<span class="hljs-number">0</span><br>          <span class="hljs-built_in">background</span>:#eee<br>          .search-item<br>            line-<span class="hljs-built_in">height</span> :.62<span class="hljs-built_in">rem</span><br>            padding-left :.2<span class="hljs-built_in">rem</span><br>            <span class="hljs-built_in">color</span>:#<span class="hljs-number">666</span><br>            <span class="hljs-built_in">background</span>:#fff<br></code></pre></td></tr></table></figure><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;search&quot;</span>&gt;</span></span><br><span class="xml">      &lt;input</span><br><span class="xml">        v-model=&quot;keyword&quot;</span><br><span class="xml">        class=&quot;search-input&quot;</span><br><span class="xml">        type=&quot;text&quot;</span><br><span class="xml">        placeholder=&quot;输入城市名或拼音&quot;</span><br><span class="xml">      /&gt;</span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;search-content&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;search&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;keyword&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">          &lt;li</span><br><span class="xml">            class=&quot;search-item  border-bottom&quot;</span><br><span class="xml">            v-for=&quot;item of list&quot;</span><br><span class="xml">            :key=&quot;item.id&quot;</span><br><span class="xml">          &gt;</span><br><span class="xml">            </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item.name</span> &#125;&#125;</span><br><span class="xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;search-item  border-bottom&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;hasNoData&quot;</span>&gt;</span></span><br><span class="xml">            没有找到匹配数据</span><br><span class="xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">import Bscroll from &quot;better-scroll&quot;;</span><br><span class="xml">export default &#123;</span><br><span class="xml">  name: &quot;CitySearch&quot;,</span><br><span class="xml">  props: &#123;</span><br><span class="xml">    cities: Object</span><br><span class="xml">  &#125;,</span><br><span class="xml">  data() &#123;</span><br><span class="xml">    return &#123;</span><br><span class="xml">      keyword: &quot;&quot;,</span><br><span class="xml">      list: [],</span><br><span class="xml">      timer: null</span><br><span class="xml">    &#125;;</span><br><span class="xml">  &#125;,</span><br><span class="xml">  computed: &#123;</span><br><span class="xml">    hasNoData() &#123;</span><br><span class="xml">      return !this.list.length;</span><br><span class="xml">    &#125;</span><br><span class="xml">  &#125;,</span><br><span class="xml">  watch: &#123;</span><br><span class="xml">    keyword() &#123;</span><br><span class="xml">      if (this.timer) &#123;</span><br><span class="xml">        clearTimeout(this.timer);</span><br><span class="xml">      &#125;</span><br><span class="xml">      if (!this.keyword) &#123;</span><br><span class="xml">        this.list = [];</span><br><span class="xml">        return;</span><br><span class="xml">      &#125;</span><br><span class="xml">      //防抖节流函数</span><br><span class="xml">      this.timer = setTimeout(() =&gt; &#123;</span><br><span class="xml">        const result = [];</span><br><span class="xml">        for (let i in this.cities) &#123;</span><br><span class="xml">          this.cities[i].forEach(value =&gt; &#123;</span><br><span class="xml">            if (</span><br><span class="xml">              value.spell.indexOf(this.keyword) &gt; -1 ||</span><br><span class="xml">              value.name.indexOf(this.keyword) &gt; -1</span><br><span class="xml">            ) &#123;</span><br><span class="xml">              result.push(value);</span><br><span class="xml">            &#125;</span><br><span class="xml">          &#125;);</span><br><span class="xml">        &#125;</span><br><span class="xml">        this.list = result;</span><br><span class="xml">      &#125;, 100);</span><br><span class="xml">    &#125;</span><br><span class="xml">  &#125;,</span><br><span class="xml">  mounted() &#123;</span><br><span class="xml">    this.scroll = new Bscroll(this.$refs.search);</span><br><span class="xml">  &#125;</span><br><span class="xml">&#125;;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>【性能优化–节流】<br>函数节流：通过设定一个时间周期，只要在这个周期内函数就不执行。</p><p>【防抖】<br>写一个侦听器 watch，在里边监听 keyword 的改变，考虑到性能优化，使用防抖的方式来实现，先在 data 中定义一个 timer 定时器，默认值为 null，然后在监听 keyword 的方法中，判断，当 timer 不为 null 时，清除这个定时器。下面写这个定时器的方法，当延时 100ms 的时候，箭头函数会被执行。</p>]]></content>
    
    
    <categories>
      
      <category>Vue项目实战</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue去哪儿项目&amp;兄弟组件间联动&amp;节流</title>
    <link href="/2021/05/05/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E5%85%AD)/"/>
    <url>/2021/05/05/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E5%85%AD)/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="兄弟组件间联动-重要"><a href="#兄弟组件间联动-重要" class="headerlink" title="兄弟组件间联动(重要)"></a>兄弟组件间联动(重要)</h3><p>实现功能：点击城市列表页面右侧的字母，列表选项会滚动到对应的字母区域。</p><blockquote><p>兄弟组件的传值，可以通过 bus 总线的形式来传值。但是因为我们现在这个非父子组件比较简单，可以让 Alphabet.vue 组件将值传递给父组件 City.vue 组件，然后 City.vue 组件再将值转发给 List.vue 组件，这样就实现了兄弟组件的传值。【子组件给父组件，父组件再转给另一个子组件】。这样，在 Alphabet.vue 中点击右侧字母，会获取到对应的字母。</p></blockquote><p>src\pages\city\components\Alphabet.vue</p><p>在循环的元素上加一个点击事件，例如 handleLetterClick，然后在 methods 中写这个事件方法：</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span></span><br><span class="xml">    &lt;li</span><br><span class="xml">      class=&quot;item&quot;</span><br><span class="xml">      v-for=&quot;item of letters&quot;</span><br><span class="xml">      :key=&quot;item&quot;</span><br><span class="xml">      :ref=&quot;item&quot;</span><br><span class="xml">      @click=&quot;handleLetterClick&quot;</span><br><span class="xml">    &gt;</span><br><span class="xml">      </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item</span>&#125;&#125;</span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">methods: &#123;</span><br><span class="xml">    handleLetterClick(e) &#123;</span><br><span class="xml">        this.$emit(&quot;change&quot;, e.target.innerHTML);</span><br><span class="xml">    &#125;</span><br><span class="xml">&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>首先在父组件 City.vue 里的 data 中定义一个 letter，默认值是空，在 handleLetterClick 方法中，当接受到外部传来的 letter 的时候，让 this.letter = letter。</p><p>City.vue部分代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;city-list :cities=<span class="hljs-string">&quot;cities&quot;</span> :hot=<span class="hljs-string">&quot;hotCities&quot;</span> :letter=<span class="hljs-string">&quot;letter&quot;</span>&gt;&lt;/city-list&gt;<br>&lt;city-alphabet :cities=<span class="hljs-string">&quot;cities&quot;</span> @change=<span class="hljs-string">&quot;handLetterChange&quot;</span>&gt;&lt;/city-alphabet&gt;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  name: <span class="hljs-string">&quot;City&quot;</span>,<br>  components: &#123;<br>    CityHeader,<br>    CitySearch,<br>    CityList,<br>    CityAlphabet<br>  &#125;,<br>  methods: &#123;<br>    <span class="hljs-function"><span class="hljs-title">handLetterChange</span>(<span class="hljs-params">letter</span>)</span> &#123;<br>      <span class="hljs-comment">// console.log(letter);</span><br>      <span class="hljs-built_in">this</span>.letter = letter;<br>    &#125;<br>  &#125;,<br>  <span class="hljs-comment">// 存放数据</span><br>  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      cities: &#123;&#125;,<br>      hotCities: [],<br>      letter: <span class="hljs-string">&quot;&quot;</span><br>    &#125;;<br>  &#125;,<br><br>&#125;;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>接下来，将父组件接收到的这个数据转发给子组件 List.vue，父组件是通过属性props向子组件传值的。</p><p>最后只需要把 letter 传递给子组件 List.vue 就可以了，在 City.vue 组件的模板 city-list 中通过 :letter=”letter” 向子组件 List 传值，在 props 中接收这个 letter，并且验证类型为 String 类型。</p><p>List.vue</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">props:</span> &#123;<br><span class="hljs-symbol">    hot:</span> Array,<br><span class="hljs-symbol">    cities:</span> Object,<br><span class="hljs-symbol">    letter:</span> String<br>  &#125;<br></code></pre></td></tr></table></figure><p>这样就实现了兄弟组件的传值。</p><h4 id="【项目难点】"><a href="#【项目难点】" class="headerlink" title="【项目难点】"></a>【项目难点】</h4><p>接下来要做的是，当 List.vue 发现 letter 有改变的时候，就需要让组件显示的列表项跟 letter 相同的首字母的列表项要显示出来，怎么做呢？</p><ol><li>这个时候就要借助一个侦听器，监听letter的变化；</li></ol><p>better-scroll 给提供了这样一个接口，scroll.scorllToElement，如果 letter 不为空的时候，就调用 this.scroll.scrollToElement() 这个方法，可以让滚动区自动滚到某一个元素上，那么怎么传这个元素呢？在循环城市这一块中，给循环项加一个 ref 引用来获取当前 Dom 元素，等于 key，然后回到侦听器的 letter 中，定义一个 element，它就等于通过 ref 获取到的元素：</p><p>src\pages\city\components\List.vue</p><p>ref：如果在普通的 DOM 元素上使用，引用指向的就是 DOM 元素；如果用在子组件上，引用就指向组件实例，可以通过实例直接调用组件的方法或访问数据</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;div <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;area&quot;</span> v-<span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;(item, key) of cities&quot;</span> :key=<span class="hljs-string">&quot;key&quot;</span> :ref=<span class="hljs-string">&quot;key&quot;</span>&gt;<br><br>watch: &#123;<br><span class="hljs-function"><span class="hljs-title">letter</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-comment">// console.log(this.letter);</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.letter) &#123;<br>    <span class="hljs-keyword">const</span> element = <span class="hljs-built_in">this</span>.$refs[<span class="hljs-built_in">this</span>.letter][<span class="hljs-number">0</span>];<br>    <span class="hljs-built_in">this</span>.scroll.scrollToElement(element);<br>    &#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>这个时候就可以通过字母获取到对应的区域，然后把 element 传入 scrollToElement 里，注意，上边代码最后加了一个 [0]，这是因为如果不加，通过 ref 或的内容就是一个数组，这个数组里的第一个元素才是真正的 DOM 元素，这个时候，点击右侧字母表，就可以跳到对应的字母下的城市列表了。</p><p>点击跳转的功能实现了</p><ol start="2"><li>接下来再实现一下滑动右侧字母表，左侧城市列表切换的效果。</li></ol><p>知识补充</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">touchstart</span>事件：当手指触摸屏幕时候触发，即使已经有一个手指放在屏幕上也会触发。<br><br><span class="hljs-variable">touchmove</span>事件：当手指在屏幕上滑动的时候连续地触发。在这个事件发生期间，调用<span class="hljs-function"><span class="hljs-title">preventDefault</span>()事件可以阻止滚动。</span><br><span class="hljs-function"></span><br><span class="hljs-function"><span class="hljs-variable">touchend</span>事件：当手指从屏幕上离开的时候触发。</span><br><span class="hljs-function"></span><br><span class="hljs-function"><span class="hljs-variable">touchcancel</span>事件：当系统停止跟踪触摸的时候触发。关于这个事件的确切出发时间，文档中并没有具体说明，咱们只能去猜测了。</span><br></code></pre></td></tr></table></figure><p>src\pages\city\components\Alphabet.vue部分代码</p><p>思路：绑定三个新的事件， @touchstart @touchmove @touchend，然后定义一个标识位，    touchStatus: false,开始@touchstart=true,结束@touchend=false</p><p>首先我们要知道我们滑动的是第几个字母–思路：先获得A字母到顶部的高度，然后滑动后获得当前位置距离顶部的高度，做一个差值就能算出当前位置距离A的高度了，除以每个字母的高度就能得到当前是第几个字母了，然后去取对应的字母触发一个change事件给外部。</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span></span><br><span class="xml">    &lt;li</span><br><span class="xml">      class=&quot;item&quot;</span><br><span class="xml">      v-for=&quot;item of letters&quot;</span><br><span class="xml">      :key=&quot;item&quot;</span><br><span class="xml">      :ref=&quot;item&quot;</span><br><span class="xml">      @touchstart=&quot;handleTouchStart&quot;</span><br><span class="xml">      @touchmove=&quot;handleTouchMove&quot;</span><br><span class="xml">      @touchend=&quot;handleTouchEnd&quot;</span><br><span class="xml">      @click=&quot;handleLetterClick&quot;</span><br><span class="xml">    &gt;</span><br><span class="xml">      </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item</span> &#125;&#125;</span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">export default &#123;</span><br><span class="xml">  name: &quot;CityAlphabet&quot;,</span><br><span class="xml">  props: &#123;</span><br><span class="xml">    cities: Object</span><br><span class="xml">  &#125;,</span><br><span class="xml">//计算属性得到一个字母数组[&#x27;A&#x27;,&#x27;B&#x27;,......]</span><br><span class="xml">  computed: &#123;</span><br><span class="xml">    letters() &#123;</span><br><span class="xml">      const letters = [];</span><br><span class="xml">      for (let i in this.cities) &#123;</span><br><span class="xml">        letters.push(i);</span><br><span class="xml">      &#125;</span><br><span class="xml">      return letters;</span><br><span class="xml">    &#125;</span><br><span class="xml">  &#125;,</span><br><span class="xml">  data() &#123;</span><br><span class="xml">    return &#123;</span><br><span class="xml">      touchStatus: false,</span><br><span class="xml">    &#125;;</span><br><span class="xml">  &#125;,</span><br><span class="xml">  methods: &#123;</span><br><span class="xml">    handleLetterClick(e) &#123;</span><br><span class="xml">      // console.log(e.target.innerText);</span><br><span class="xml">      this.$emit(&quot;change&quot;, e.target.innerText);</span><br><span class="xml">    &#125;,</span><br><span class="xml">    handleTouchStart() &#123;</span><br><span class="xml">      this.touchStatus = true;</span><br><span class="xml">    &#125;,</span><br><span class="xml">    handleTouchMove(e) &#123;</span><br><span class="xml">      if (this.touchStatus) &#123;</span><br><span class="xml">        //startY 计算的是A的顶部距离上沿的距离  </span><br><span class="xml">        //HTMLElement.offsetTop 为只读属性，它返回当前元素相对于其 offsetParent 元素的顶部内边距的距离。</span><br><span class="xml">        const startY = this.$refs[&quot;A&quot;][0].offsetTop;//74</span><br><span class="xml">        //clientY 事件属性clientY 事件属性返回当事件被触发时鼠标指针向对于浏览器页面（客户区）的垂直坐标。 客户区指的是当前窗口。</span><br><span class="xml">        const touchY = e.touches[0].clientY - 79;</span><br><span class="xml">        const index = Math.floor((touchY - startY) / 20); //20为每个字母的高度，index计算出来为每个字母的下标0，1，2，3，4...</span><br><span class="xml">        if (index &gt;= 0 &amp;&amp; index &lt; this.letters.length) &#123;</span><br><span class="xml">          this.$emit(&quot;change&quot;, this.letters[index]);</span><br><span class="xml">        &#125;</span><br><span class="xml">      &#125;</span><br><br><span class="xml">    &#125;,</span><br><span class="xml">    handleTouchEnd() &#123;</span><br><span class="xml">      this.touchStatus = false;</span><br><span class="xml">    &#125;</span><br><span class="xml">  &#125;</span><br><span class="xml">&#125;;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="列表切换性能优化"><a href="#列表切换性能优化" class="headerlink" title="列表切换性能优化"></a>列表切换性能优化</h3><h4 id="节流"><a href="#节流" class="headerlink" title="节流"></a>节流</h4><p>手指在城市字母表中滑动时，会触发无数次handleTouchMove这个函数，这就对性能影响很大。</p><p>函数节流：通过设定一个时间周期，只要在这个周期内函数就不执行。</p><p>实现方法：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><br>      <span class="hljs-comment">// if (this.touchStatus) &#123;</span><br>      <span class="hljs-comment">//   const startY = this.$refs[&quot;A&quot;][0].offsetTop;</span><br>      <span class="hljs-comment">//   const touchY = e.touches[0].clientY - 79;</span><br>      <span class="hljs-comment">//   const index = Math.floor((touchY - startY) / 20); //20为每个字母的高度</span><br>      <span class="hljs-comment">//   if (index &gt;= 0 &amp;&amp; index &lt; this.letters.length) &#123;</span><br>      <span class="hljs-comment">//     this.$emit(&quot;change&quot;, this.letters[index]);</span><br>      <span class="hljs-comment">//   &#125;</span><br>      <span class="hljs-comment">// &#125;  </span><br><span class="hljs-comment">//节流   </span><br>handleTouchMove(e) &#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.touchStatus) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.timer) &#123;<br>          clearTimeout(<span class="hljs-keyword">this</span>.timer);<br>        &#125;<br>        <span class="hljs-keyword">this</span>.timer = setTimeout(() =&gt; &#123;<br>          <span class="hljs-keyword">const</span> touchY = e.touches[<span class="hljs-number">0</span>].clientY - <span class="hljs-number">79</span>;<br>          <span class="hljs-keyword">const</span> index = Math.floor((touchY - <span class="hljs-keyword">this</span>.startY) / <span class="hljs-number">20</span>); <span class="hljs-comment">//20为每个字母的高度</span><br>          <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-number">0</span> &amp;&amp; index &lt; <span class="hljs-keyword">this</span>.letters.length) &#123;<br>            <span class="hljs-keyword">this</span>.$emit(<span class="hljs-string">&quot;change&quot;</span>, <span class="hljs-keyword">this</span>.letters[index]);<br>          &#125;<br>        &#125;, <span class="hljs-number">16</span>);<br>      &#125;<br>    &#125;,<br></code></pre></td></tr></table></figure><p>这里设置的周期是16ms，16ms这个代码只会执行一次，大大优化了性能</p><ol><li>offsetTop的值是固定的，我们每一次去执行这个方法就会去运算一次，性能很低</li></ol><p>解决： data()中 先定义startY: 0,分析：页面刚加载的时候，Alphabet.vue中什么都不会显示出来，当City.vue中ajax获取数据后，Citys的值才发生变化，Alphabet才被渲染出来。当往Alphabet中传入的数据发生变化时，Alphabet才会被重新渲染，当Alphabet重新渲染之后，updated() 这个生命周期就会被执行，这个时候页面已经展示了城市字母列表的所有内容，这个时候我们去计算offsetTop就可以了。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;<br>   <span class="hljs-keyword">return</span> &#123;<br>     touchStatus: <span class="hljs-literal">false</span>,<br>     startY: <span class="hljs-number">0</span>,<br>     timer: <span class="hljs-literal">null</span><br>   &#125;;<br> &#125;,<br> <span class="hljs-function"><span class="hljs-title">updated</span>(<span class="hljs-params"></span>)</span> &#123;<br>   <span class="hljs-built_in">this</span>.startY = <span class="hljs-built_in">this</span>.$refs[<span class="hljs-string">&quot;A&quot;</span>][<span class="hljs-number">0</span>].offsetTop;<br> &#125;,<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Vue项目实战</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue&amp;v-for循环6种技巧</title>
    <link href="/2021/05/04/Vue%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0(%E5%85%AD)/"/>
    <url>/2021/05/04/Vue%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0(%E5%85%AD)/</url>
    
    <content type="html"><![CDATA[<hr><p>在最基本的用法中，它们的用法如下。</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&#x27;product in products&#x27;</span>&gt;</span></span><br><span class="xml">    </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">product.name</span> &#125;&#125;</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br></code></pre></td></tr></table></figure><hr><h3 id="1-始终在v-for循环中使用key"><a href="#1-始终在v-for循环中使用key" class="headerlink" title="1.始终在v-for循环中使用key"></a>1.始终在v-for循环中使用key</h3><p>首先，我们将讨论大多数Vue开发人员已经知道的常见最佳做法——在 v-for 循环中使用 :key。通过设置一个惟一的键属性，它可以确保组件以您期望的方式工作。</p><p>果我们不使用key，Vue将尝试使DOM尽可能高效，这可能意味着 v-for 元素可能会出现乱序或其他不可预测的行为。如果我们对每个元素都有唯一的键引用，那么我们就可以更好地准确地预测DOM将如何操作。</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> </span></span><br><span class="xml">    v-for=&#x27;product in products&#x27;</span><br><span class="xml">    :key=&#x27;product._id&#x27;  </span><br><span class="xml">  &gt;</span><br><span class="xml">    </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">product.name</span> &#125;&#125;</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="2-在一个范围内循环"><a href="#2-在一个范围内循环" class="headerlink" title="2.在一个范围内循环"></a>2.在一个范围内循环</h3><p>尽管大多数情况下，v-for 用于遍历数组或对象，但在某些情况下，我们肯定只希望循环执行一定次数。</p><p>例如，假设我们正在为在线商店创建一个分页系统，而我们只希望每页显示10个产品。使用一个变量来跟踪当前的页码，我们可以像这样处理分页。</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&#x27;index in 10&#x27;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&#x27;index&#x27;</span>&gt;</span></span><br><span class="xml">    </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">products</span>[page * 10 + index] &#125;&#125;</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="3-不要在循环中使用v-if"><a href="#3-不要在循环中使用v-if" class="headerlink" title="3.不要在循环中使用v-if"></a>3.不要在循环中使用v-if</h3><p>一个超级常见的错误是使用 v-if 来过滤 v-for 循环的数据。尽管这看起来很直观，但它会导致一个巨大的性能问题——VueJS优先考虑 v-for 而不是 v-if 指令。</p><p>这意味着您的组件将循环遍历每个元素，然后检查 v-if 条件以确定是否应渲染。因此，实际上，无论条件是什么，您都将遍历数组的每个项目。</p><p>不要这样：</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml">// BAD CODE!</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> </span></span><br><span class="xml">    v-for=&#x27;product in products&#x27; </span><br><span class="xml">    :key=&#x27;product._id&#x27; </span><br><span class="xml">    v-if=&#x27;product.price &lt; 50&#x27;</span><br><span class="xml">  &gt;</span><br><span class="xml">    </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">product.name</span> &#125;&#125;</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="4-使用计算属性或方法代替"><a href="#4-使用计算属性或方法代替" class="headerlink" title="4.使用计算属性或方法代替"></a>4.使用计算属性或方法代替</h3><p>为避免上述问题，我们应该在遍历模板中的数据之前对其进行过滤。有两种非常相似的方法：</p><p>使用计算属性<br>使用过滤方法<br>让我们快速地介绍一下这两种方法。</p><p>首先，我们只需要设置一个计算属性，为了获得与之前的v-if相同的功能，代码应如下所示。</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&#x27;products in productsUnderFifty&#x27;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&#x27;product._id&#x27;</span> &gt;</span></span><br><span class="xml">    </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">product.name</span> &#125;&#125;</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><br><span class="xml">// ...</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  export default &#123;</span><br><span class="xml">    data () &#123;</span><br><span class="xml">      return &#123;</span><br><span class="xml">        products: []</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;,</span><br><span class="xml">    computed: &#123;</span><br><span class="xml">      productsUnderFifty: function () &#123;</span><br><span class="xml">        return this.products.filter(product =&gt; product.price &lt; 50)</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;</span><br><span class="xml">  &#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>下面的代码几乎相同，但是使用方法改变了我们访问模板中的值的方式，如果我们希望能够将变量传递给筛选器，那么方法是最好的选择。</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&#x27;products in productsUnderPrice(50)&#x27;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&#x27;product._id&#x27;</span> &gt;</span></span><br><span class="xml">    </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">product.name</span> &#125;&#125;</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><br><span class="xml">// ...</span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  export default &#123;</span><br><span class="xml">    data () &#123;</span><br><span class="xml">      return &#123;</span><br><span class="xml">        products: []</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;,</span><br><span class="xml">    methods: &#123;</span><br><span class="xml">      productsUnderPrice (price) &#123;</span><br><span class="xml">        return this.products.filter(product =&gt; product.price &lt; price)</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;</span><br><span class="xml">  &#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="5-在循环中访问项目的索引"><a href="#5-在循环中访问项目的索引" class="headerlink" title="5.在循环中访问项目的索引"></a>5.在循环中访问项目的索引</h3><p>除了遍历数组和访问每个元素之外，我们还可以跟踪每个项的索引。</p><p>为此，我们必须在项目后添加一个索引值，它非常简单，可用于分页，显示列表索引，显示排名等。</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&#x27;(products, index) in products&#x27;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&#x27;product._id&#x27;</span> &gt;</span></span><br><span class="xml">    Product #</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">index</span> &#125;&#125;</span><span class="xml">: </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">product.name</span> &#125;&#125;</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="6-遍历一个对象"><a href="#6-遍历一个对象" class="headerlink" title="6.遍历一个对象"></a>6.遍历一个对象</h3><p>到目前为止，我们只真正看过使用 v-for 遍历数组，但是我们可以轻松地遍历对象的键值对。     </p><p>与访问元素的索引类似，我们必须向循环中添加另一个值。如果我们用一个参数遍历一个对象，我们将遍历所有的项。     </p><p>如果我们添加另一个参数，我们将获得items 和 key，如果添加第三个，我们还可以访问 v-for 循环的索引。     </p><p>假设我们要遍历产品中的每个媒体资源。  </p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&#x27;(products, index) in products&#x27;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&#x27;product._id&#x27;</span> &gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&#x27;(item, key, index) in product&#x27;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&#x27;key&#x27;</span>&gt;</span></span><br><span class="xml">      </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item</span> &#125;&#125;</span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>引用文章<br><a href="https://juejin.cn/post/6844904121825230856#heading-0">在Vue.js中编写更好的v-for循环的6种技巧</a></p>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue去哪儿项目&amp;城市选择页面&amp;动态数据渲染</title>
    <link href="/2021/05/04/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E4%BA%94)/"/>
    <url>/2021/05/04/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E4%BA%94)/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="城市选择页面路由配置"><a href="#城市选择页面路由配置" class="headerlink" title="城市选择页面路由配置"></a>城市选择页面路由配置</h3><p><img src="/image1/22.png" alt="城市页面路由配置"></p><ol><li>页面跳转</li></ol><p>src\pages\home\components\Header.vue中 <code>router-link to=&quot;/city&quot;</code>实现点击右上角页面跳转</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/city&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;header-right&quot;</span>&gt;</span></span><br><span class="xml">    </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">this.city</span> &#125;&#125;</span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont  arrow-cron&quot;</span>&gt;</span><span class="hljs-symbol">&amp;#xe64a;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>这里router-link会使字体颜色发生变化，这是因为router-link在div外层加了个a标签，我们可以给header-right加一个颜色color:#fff</p><ol start="2"><li>src\pages\city\components\Header.vue代码实现</li></ol><p><img src="/image1/23.png" alt="城市页面Header实现代码"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;header&quot;</span>&gt;</span><br>    城市选择<br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont header-back&quot;</span>&gt;</span><span class="hljs-symbol">&amp;#xe624;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  name: <span class="hljs-string">&quot;CityHeader&quot;</span></span><br>&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;stylus&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><br><span class="css"><span class="hljs-keyword">@import</span> <span class="hljs-string">&#x27;~styles/varibles.styl&#x27;</span>;</span><br>.header<br><span class="css">   <span class="hljs-attribute">position</span>: relative</span><br><span class="css">   <span class="hljs-attribute">overflow</span> :hidden</span><br><span class="css">   <span class="hljs-attribute">height</span>: $headerHeight</span><br><span class="css">   <span class="hljs-attribute">line-height</span> :$headerHeight</span><br><span class="css">   <span class="hljs-attribute">text-align</span>:center</span><br><span class="css">   <span class="hljs-attribute">color</span>:<span class="hljs-number">#fff</span></span><br><span class="css">   <span class="hljs-attribute">background</span> :$bgColor</span><br><span class="css">   <span class="hljs-attribute">font-size</span>:.<span class="hljs-number">32rem</span></span><br>   .header-back<br><span class="css">       <span class="hljs-attribute">top</span>:<span class="hljs-number">0</span></span><br><span class="css">       <span class="hljs-attribute">left</span>:<span class="hljs-number">0</span></span><br><span class="css">       <span class="hljs-attribute">position</span>:absolute</span><br><span class="css">       <span class="hljs-attribute">width</span> <span class="hljs-number">0.64rem</span></span><br><span class="css">       <span class="hljs-attribute">text-align</span>:center</span><br><span class="css">       <span class="hljs-attribute">font-size</span> :.<span class="hljs-number">4rem</span></span><br><span class="css">       <span class="hljs-attribute">color</span>:<span class="hljs-number">#fff</span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br></code></pre></td></tr></table></figure><ol start="3"><li>src\pages\city\City.vue引入使用上面的组件</li></ol><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    </span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">city-header</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">city-header</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">import CityHeader from &quot;./components/Header&quot;;</span><br><span class="xml">export default </span><span class="xquery">&#123;</span><br><span class="xquery"> <span class="hljs-built_in"> name</span>: <span class="hljs-string">&quot;City&quot;</span>,</span><br><span class="xquery">  components: &#123;</span><br><span class="xquery">    CityHeader,</span><br><span class="xquery">  &#125;</span><span class="xml">,</span><br><span class="xml">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="搜索框布局"><a href="#搜索框布局" class="headerlink" title="搜索框布局"></a>搜索框布局</h3><p><img src="/image1/24.png" alt="城市页面搜索框样式"></p><p>src\pages\city\components\Search.vue代码实现</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;<span class="hljs-keyword">template</span>&gt;<br>&lt;div <span class="hljs-keyword">class</span>=&quot;search&quot;&gt;<br>    &lt;<span class="hljs-keyword">input</span><br>    v-model=&quot;keyword&quot;<br>    <span class="hljs-keyword">class</span>=&quot;search-input&quot;<br>    <span class="hljs-keyword">type</span>=&quot;text&quot;<br>    placeholder=&quot;输入城市名或拼音&quot;<br>    /&gt;<br>&lt;/<span class="hljs-keyword">template</span>&gt;<br>&lt;script&gt;<br>export <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-type">name</span>: &quot;CitySearch&quot;,<br>&#125;&lt;/script&gt;<br>&lt;style lang=&quot;stylus&quot; scoped&gt;<br>@<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;~styles/varibles.styl&#x27;</span>;<br>    .<span class="hljs-keyword">search</span><br>       height:<span class="hljs-number">0.72</span>rem<br>       padding:<span class="hljs-number">0</span>  <span class="hljs-number">.1</span>rem<br>       background:$bgColor<br>       .<span class="hljs-keyword">search</span>-<span class="hljs-keyword">input</span><br>           <span class="hljs-type">box</span>-sizing:border-<span class="hljs-type">box</span><br>           width :<span class="hljs-number">100</span>%<br>           height: <span class="hljs-number">0.62</span>rem<br>           padding:<span class="hljs-number">0</span> <span class="hljs-number">.1</span>rem<br>           <span class="hljs-type">line</span>-height :<span class="hljs-number">.62</span>rem<br>           <span class="hljs-type">text</span>-align :center<br>           border-radius: <span class="hljs-number">0.06</span>rem<br>           color:#<span class="hljs-number">666</span><br>      .<span class="hljs-keyword">search</span>-content<br>          z-<span class="hljs-keyword">index</span>:<span class="hljs-number">1</span><br>          overflow :hidden<br>          position:absolute<br>          top: <span class="hljs-number">1.58</span>rem<br>          right:<span class="hljs-number">0</span><br>          left:<span class="hljs-number">0</span><br>          bottom:<span class="hljs-number">0</span><br>          background:#eee<br>          .<span class="hljs-keyword">search</span>-item<br>            <span class="hljs-type">line</span>-height :<span class="hljs-number">.62</span>rem<br>            padding-left :<span class="hljs-number">.2</span>rem<br>            color:#<span class="hljs-number">666</span><br>            background:#fff<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><h3 id="列表布局"><a href="#列表布局" class="headerlink" title="列表布局"></a>列表布局</h3><p><img src="/image1/25.png" alt="城市列表"></p><p>部分代码样式：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;template&gt;<br>  &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-keyword">ref</span>=<span class="hljs-string">&quot;wrapper&quot;</span>&gt;<br>    &lt;<span class="hljs-keyword">div</span>&gt;<br>      &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;area&quot;</span>&gt;<br>        &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;title  border-topbottom&quot;</span>&gt;当前城市&lt;/<span class="hljs-keyword">div</span>&gt;<br>        &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;buttom-list&quot;</span>&gt;<br>          &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;buttom-wrapper&quot;</span>&gt;<br>            &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;button&quot;</span>&gt;北京&lt;/<span class="hljs-keyword">div</span>&gt;<br>          &lt;/<span class="hljs-keyword">div</span>&gt;<br>        &lt;/<span class="hljs-keyword">div</span>&gt;<br>      &lt;/<span class="hljs-keyword">div</span>&gt;<br>      &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;area&quot;</span>&gt;<br>        &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;title  border-topbottom&quot;</span>&gt;热门城市&lt;/<span class="hljs-keyword">div</span>&gt;<br>        &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;buttom-list&quot;</span>&gt;<br>          &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;buttom-wrapper&quot;</span> v-<span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;item of hot&quot;</span> :key=<span class="hljs-string">&quot;item.id&quot;</span>&gt;<br>            &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;button&quot;</span>&gt;&#123;&#123; <span class="hljs-built_in">item</span>.<span class="hljs-built_in">name</span> &#125;&#125;&lt;/<span class="hljs-keyword">div</span>&gt;<br>          &lt;/<span class="hljs-keyword">div</span>&gt;<br>        &lt;/<span class="hljs-keyword">div</span>&gt;<br>      &lt;/<span class="hljs-keyword">div</span>&gt;<br>      &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;area&quot;</span> v-<span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;(item, key) of cities&quot;</span> :key=<span class="hljs-string">&quot;key&quot;</span> :<span class="hljs-keyword">ref</span>=<span class="hljs-string">&quot;key&quot;</span>&gt;<br>        &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;title   border-topbottom&quot;</span>&gt;&#123;&#123; key &#125;&#125;&lt;/<span class="hljs-keyword">div</span>&gt;<br>        &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;item-list&quot;</span>&gt;<br>          &lt;<span class="hljs-keyword">div</span><br>            <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;item  border-bottom&quot;</span><br>            v-<span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;innerItem of item&quot;</span><br>            :key=<span class="hljs-string">&quot;innerItem.id&quot;</span><br>          &gt;<br>            &#123;&#123; innerItem.<span class="hljs-built_in">name</span> &#125;&#125;<br>          &lt;/<span class="hljs-keyword">div</span>&gt;<br>        &lt;/<span class="hljs-keyword">div</span>&gt;<br>      &lt;/<span class="hljs-keyword">div</span>&gt;<br>    &lt;/<span class="hljs-keyword">div</span>&gt;<br>  &lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;/template&gt;<br><br>&lt;style lang=<span class="hljs-string">&quot;stylus&quot;</span> scoped&gt;<br>@import &#x27;~styles/varibles.styl&#x27;;<br>.header<br>  display:flex<br>  line-height: $headerHeight<br>  background: $bgColor<br>  color: <span class="hljs-comment">#fff</span><br>  .header-left<br>    width <span class="hljs-number">.64</span>rem<br>    float:left<br>    .<span class="hljs-keyword">back</span>-icon<br>      <span class="hljs-built_in">text</span>-align:center<br>      font-size:<span class="hljs-number">.4</span>rem<br>  .header-input<br>     flex:<span class="hljs-number">1</span><br>     line-height:<span class="hljs-number">.64</span>rem<br>     height: <span class="hljs-number">.64</span>rem<br>     margin-top: <span class="hljs-number">.12</span>rem<br>     margin-left: <span class="hljs-number">.2</span>rem<br>     padding-left:<span class="hljs-number">.2</span>rem<br>     background: <span class="hljs-comment">#fff</span><br>     border-radius: <span class="hljs-number">.1</span>rem<br>     color:<span class="hljs-comment">#ccc</span><br>  .header-right<br>     width: <span class="hljs-number">1.24</span>rem<br>     float:right<br>     <span class="hljs-built_in">text</span>-align:center<br>     color:<span class="hljs-comment">#fff</span><br>     .arrow-icon<br>       margin-left :<span class="hljs-number">-.04</span>rem<br>       font-size :<span class="hljs-number">.24</span>rem<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p><img src="/image1/25.png" alt="城市列表"></p><h3 id="Better-scroll的使用及字母表布局"><a href="#Better-scroll的使用及字母表布局" class="headerlink" title="Better-scroll的使用及字母表布局"></a>Better-scroll的使用及字母表布局</h3><p>问题：列表布局中.list加了一个绝对定位和overflow:hidden这会导致页面是无法拖动的</p><p>解决：我们可以使用一个第三方的包Better-scroll</p><p><a href="https://github.com/ustbhuangyi/better-scroll">Github地址</a></p><ol><li>安装</li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss">npm install better-<span class="hljs-keyword">scroll</span> --<span class="hljs-keyword">save</span><br></code></pre></td></tr></table></figure><ol start="2"><li>使用(符合这个dom结构)</li></ol><p>BetterScroll的最常见应用场景是列表滚动。让我们看看它的HTML：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wrapper&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    ...<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- you can put some other DOMs here, it won&#x27;t affect the scrolling</span><br><span class="hljs-comment">&lt;/div&gt;</span><br></code></pre></td></tr></table></figure><ol start="3"><li>具体使用</li></ol><figure class="highlight capnproto"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs capnproto"><span class="hljs-keyword">import</span> Bscroll <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;better-scroll&quot;</span>;<br></code></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;div <span class="hljs-keyword">class</span>=&quot;list&quot; <span class="hljs-keyword">ref</span>=&quot;wrapper&quot;&gt;  //<span class="hljs-keyword">ref</span>帮助我们获取该dom元素<br><br> //生命周期函数，载入后<br>  mounted() &#123;<br>  this.scroll = <span class="hljs-built_in">new</span> Bscroll(this.$refs.<span class="hljs-keyword">wrapper</span>);<br>&#125;,<br></code></pre></td></tr></table></figure><ol start="4"><li>效果：上拉与下拉能够实现，并且有弹性动画效果，非常流畅</li></ol><h4 id="字母表布局"><a href="#字母表布局" class="headerlink" title="字母表布局"></a>字母表布局</h4><p><img src="/image1/26.png" alt="右侧字母表布局"></p><ol><li>创建组件src\pages\city\components\Alphabet.vue</li></ol><p>部分代码样式</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span>  &gt;</span></span><br><span class="xml">      </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item</span> &#125;&#125;</span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">export default &#123;</span><br><span class="xml">  name: &quot;CityAlphabet&quot;,</span><br><span class="xml">&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;stylus&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span></span><br><span class="xml">@import &#x27;~styles/varibles.styl&#x27;;</span><br><span class="xml">    .list</span><br><span class="xml">        display:flex</span><br><span class="xml">        flex-direction :column</span><br><span class="xml">        justify-content :center</span><br><span class="xml">        position:absolute</span><br><span class="xml">        top 1.58rem</span><br><span class="xml">        right 0</span><br><span class="xml">        bottom:0</span><br><span class="xml">        width 0.4rem</span><br><span class="xml">        .item</span><br><span class="xml">            text-align:center</span><br><span class="xml">            line-height :.4rem</span><br><span class="xml">            color:$bgColor</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="城市列表页面动态数据渲染"><a href="#城市列表页面动态数据渲染" class="headerlink" title="城市列表页面动态数据渲染"></a>城市列表页面动态数据渲染</h3><p>利用ajax获取数据</p><ol><li>准备好的本地模拟数据</li></ol><p><img src="/image1/27.png" alt="数据"></p><ol start="2"><li>ajax请求一般我们会放在最外层组件中获取，这样一次就能够获取到所有组件需要的内容</li></ol><p>src\pages\city\City.vue这里我们在City.vue中发送</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">city-header</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">city-header</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">city-search</span> <span class="hljs-attr">:cities</span>=<span class="hljs-string">&quot;cities&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">city-search</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">city-list</span> <span class="hljs-attr">:cities</span>=<span class="hljs-string">&quot;cities&quot;</span> <span class="hljs-attr">:hot</span>=<span class="hljs-string">&quot;hotCities&quot;</span> <span class="hljs-attr">:letter</span>=<span class="hljs-string">&quot;letter&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">city-list</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">city-alphabet</span> <span class="hljs-attr">:cities</span>=<span class="hljs-string">&quot;cities&quot;</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">&quot;handLetterChange&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">city-alphabet</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;axios&quot;</span>;</span><br><span class="javascript"><span class="hljs-keyword">import</span> CityHeader <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Header&quot;</span>;</span><br><span class="javascript"><span class="hljs-keyword">import</span> CitySearch <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Search&quot;</span>;</span><br><span class="javascript"><span class="hljs-keyword">import</span> CityList <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/List&quot;</span>;</span><br><span class="javascript"><span class="hljs-keyword">import</span> CityAlphabet <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Alphabet&quot;</span>;</span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  name: <span class="hljs-string">&quot;City&quot;</span>,</span><br>  components: &#123;<br>    CityHeader,<br>    CitySearch,<br>    CityList,<br>    CityAlphabet<br>  &#125;,<br>  methods: &#123;<br><span class="javascript">    <span class="hljs-function"><span class="hljs-title">getCityInfo</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">      axios.get(<span class="hljs-string">&quot;/api/city.json&quot;</span>).then(<span class="hljs-built_in">this</span>.handleGetCityIngoSucc);</span><br>    &#125;,<br><span class="javascript">    <span class="hljs-function"><span class="hljs-title">handleGetCityIngoSucc</span>(<span class="hljs-params">res</span>)</span> &#123;</span><br>      res = res.data;<br>      if (res.ret &amp;&amp; res.data) &#123;<br><span class="javascript">        <span class="hljs-keyword">const</span> data = res.data;</span><br><span class="javascript">        <span class="hljs-built_in">this</span>.cities = data.cities;</span><br><span class="javascript">        <span class="hljs-built_in">this</span>.hotCities = data.hotCities;</span><br>      &#125;<br>    &#125;,<br><span class="javascript">    <span class="hljs-function"><span class="hljs-title">handLetterChange</span>(<span class="hljs-params">letter</span>)</span> &#123;</span><br><span class="javascript">      <span class="hljs-comment">// console.log(letter);</span></span><br><span class="javascript">      <span class="hljs-built_in">this</span>.letter = letter;</span><br>    &#125;<br>  &#125;,<br><span class="javascript">  <span class="hljs-comment">// 存放数据</span></span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-keyword">return</span> &#123;</span><br>      cities: &#123;&#125;,<br>      hotCities: [],<br><span class="javascript">      letter: <span class="hljs-string">&quot;&quot;</span></span><br>    &#125;;<br>  &#125;,<br><span class="javascript">  <span class="hljs-comment">// 生命周期函数</span></span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-built_in">this</span>.getCityInfo();</span><br>  &#125;<br>&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><ol start="3"><li>父组件向子组件传数据</li></ol><p>例：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">&lt;city-list <span class="hljs-symbol">:cities=<span class="hljs-string">&quot;cities&quot;</span></span> <span class="hljs-symbol">:hot=<span class="hljs-string">&quot;hotCities&quot;</span></span> <span class="hljs-symbol">:letter=<span class="hljs-string">&quot;letter&quot;</span>&gt;&lt;/city-list&gt;</span><br></code></pre></td></tr></table></figure><ol start="4"><li>子组件通过props接收</li></ol><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dts">export <span class="hljs-class">default </span>&#123;<br><span class="hljs-symbol">  name:</span> <span class="hljs-string">&quot;CityList&quot;</span>,<br><span class="hljs-symbol">  props:</span> &#123;<br><span class="hljs-symbol">    hot:</span> Array,<br><span class="hljs-symbol">    cities:</span> Object,<br><span class="hljs-symbol">    letter:</span> String<br>  &#125;,<br></code></pre></td></tr></table></figure><ol start="5"><li>v-for渲染数据</li></ol><p>循环数组</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;buttom-wrapper&quot;</span> v-<span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;item of hot&quot;</span> :key=<span class="hljs-string">&quot;item.id&quot;</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;button&quot;</span>&gt;&#123;&#123; <span class="hljs-built_in">item</span>.<span class="hljs-built_in">name</span> &#125;&#125;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;/<span class="hljs-keyword">div</span>&gt;<br></code></pre></td></tr></table></figure><p>循环对象(这里我们使用了二次循环)</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;area&quot;</span> v-<span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;(item, key) of cities&quot;</span> :key=<span class="hljs-string">&quot;key&quot;</span> :<span class="hljs-keyword">ref</span>=<span class="hljs-string">&quot;key&quot;</span>&gt;<br>  &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;title   border-topbottom&quot;</span>&gt;&#123;&#123; key &#125;&#125;&lt;/<span class="hljs-keyword">div</span>&gt;<br>  &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;item-list&quot;</span>&gt;<br>    &lt;<span class="hljs-keyword">div</span><br>      <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;item  border-bottom&quot;</span><br>      v-<span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;innerItem of item&quot;</span><br>      :key=<span class="hljs-string">&quot;innerItem.id&quot;</span><br>    &gt;<br>      &#123;&#123; innerItem.<span class="hljs-built_in">name</span> &#125;&#125;<br>    &lt;/<span class="hljs-keyword">div</span>&gt;<br>  &lt;/<span class="hljs-keyword">div</span>&gt;<br>      &lt;/<span class="hljs-keyword">div</span>&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Vue项目实战</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue去哪儿项目&amp;Ajax获取首页数据</title>
    <link href="/2021/05/03/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E5%9B%9B)/"/>
    <url>/2021/05/03/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E5%9B%9B)/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="Ajax获取首页数据–axios"><a href="#Ajax获取首页数据–axios" class="headerlink" title="Ajax获取首页数据–axios"></a>Ajax获取首页数据–axios</h3><ol><li>项目安装axios </li></ol><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm  install  axios <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><p>分析：首页由5个组件组成，每一个组件都有自己的数据，那么每个组件都发送一个ajax请求。如果这样做首页就会发送5个ajax请求，网站的性能会很低。</p><p>解决：Home.vue组件中发送ajax是最好的选择，这个组件获取ajax请求的数据传给每个子组件中，只用请求一次。</p><ol start="2"><li>引入axios</li></ol><figure class="highlight capnproto"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs capnproto"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;axios&quot;</span>;<br></code></pre></td></tr></table></figure><ol start="3"><li>使用</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//&#x27;/static/mock/index.json&#x27;</span><br>  methods: &#123;<br>    <span class="hljs-function"><span class="hljs-title">getHomeInfo</span>(<span class="hljs-params"></span>)</span> &#123;<br>      axios.get(<span class="hljs-string">&quot;/api/index.json&quot;</span>).then(<span class="hljs-built_in">this</span>.getHomeInfoSucc);<br>    &#125;<br>  &#125;,<br>  <span class="hljs-comment">//mounted (载入后) 在el 被新创建的 vm.$el替换，并挂载到实例上去之后调用</span><br>  <span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.getHomeInfo();<br>  &#125;<br></code></pre></td></tr></table></figure><p>这里我们的使用的是本地模拟的数据json文件,开发环境中使用转发机制</p><p>vue中提供了一个代理功能</p><p><img src="/image1/20.png" alt="代理"></p><p>index.json</p><p><img src="/image1/21.png" alt="本地json文件"></p><h3 id="首页父子组件数据传递"><a href="#首页父子组件数据传递" class="headerlink" title="首页父子组件数据传递"></a>首页父子组件数据传递</h3><p>Home.vue</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">home-header</span> <span class="hljs-attr">:city</span>=<span class="hljs-string">&quot;city&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">home-header</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">home-swiper</span> <span class="hljs-attr">:list</span>=<span class="hljs-string">&quot;swiperList&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">home-swiper</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">home-icons</span> <span class="hljs-attr">:list</span>=<span class="hljs-string">&quot;iconList&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">home-icons</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">home-recommend</span> <span class="hljs-attr">:list</span>=<span class="hljs-string">&quot;recommendList&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">home-recommend</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">home-weekend</span> <span class="hljs-attr">:list</span>=<span class="hljs-string">&quot;weekendList&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">home-weekend</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript"><span class="hljs-keyword">import</span> HomeHeader <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Header&quot;</span>;</span><br><span class="javascript"><span class="hljs-keyword">import</span> HomeSwiper <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Swiper&quot;</span>;</span><br><span class="javascript"><span class="hljs-keyword">import</span> HomeIcons <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Icons&quot;</span>;</span><br><span class="javascript"><span class="hljs-keyword">import</span> HomeRecommend <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Recommend&quot;</span>;</span><br><span class="javascript"><span class="hljs-keyword">import</span> HomeWeekend <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Weekend&quot;</span>;</span><br><span class="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;axios&quot;</span>;</span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  name: <span class="hljs-string">&quot;Home&quot;</span>,</span><br>  components: &#123;<br>    HomeHeader,<br>    HomeSwiper,<br>    HomeIcons,<br>    HomeRecommend,<br>    HomeWeekend<br>  &#125;,<br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="javascript">      city: <span class="hljs-string">&quot;&quot;</span>,</span><br>      swiperList: [],<br>      iconList: [],<br>      recommendList: [],<br>      weekendList: []<br>    &#125;;<br>  &#125;,<br>  methods: &#123;<br><span class="javascript">    <span class="hljs-function"><span class="hljs-title">getHomeInfo</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">      axios.get(<span class="hljs-string">&quot;/api/index.json&quot;</span>).then(<span class="hljs-built_in">this</span>.getHomeInfoSucc);</span><br>    &#125;,<br><span class="javascript">    <span class="hljs-function"><span class="hljs-title">getHomeInfoSucc</span>(<span class="hljs-params">res</span>)</span> &#123;</span><br>      res = res.data;<br>      if (res.ret &amp;&amp; res.data) &#123;<br><span class="javascript">        <span class="hljs-keyword">const</span> data = res.data;</span><br><span class="javascript">        <span class="hljs-built_in">this</span>.city = res.data.city;</span><br><span class="javascript">        <span class="hljs-built_in">this</span>.swiperList = data.swiperList;</span><br><span class="javascript">        <span class="hljs-built_in">this</span>.iconList = data.iconList;</span><br><span class="javascript">        <span class="hljs-built_in">this</span>.recommendList = data.recommendList;</span><br><span class="javascript">        <span class="hljs-built_in">this</span>.weekendList = data.weekendList;</span><br>      &#125;<br>    &#125;<br>  &#125;,<br><span class="javascript">  <span class="hljs-comment">//mounted (载入后) 在el 被新创建的 vm.$el替换，并挂载到实例上去之后调用</span></span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-built_in">this</span>.getHomeInfo();</span><br>  &#125;<br>&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>父组件给子组件传值<br>使用props，父组件可以使用props向子组件传递数据。</p><ol><li>Swiper.vue中小问题</li></ol><p>默认显示的是最后一页的图片</p><p>分析：当页面还没接收数据的时候，也就是还没接收ajax获取的Array数组时，这时候接收的是外面获取的空数组。<br>解决</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;swiper :<span class="hljs-attribute">options</span>=<span class="hljs-string">&quot;swiperOptions&quot;</span> <span class="hljs-attribute">v-if</span>=<span class="hljs-string">&quot;showSwiper&quot;</span>&gt;<br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  name: <span class="hljs-string">&quot;HomeSwiper&quot;</span>,</span><br>  props: &#123;<br><span class="javascript">    list: <span class="hljs-built_in">Array</span></span><br>  &#125;,<br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-keyword">return</span> &#123;</span><br>      swiperOptions: &#123;<br><span class="javascript">        pagination: <span class="hljs-string">&quot;.swiper-pagination&quot;</span>,</span><br><span class="javascript">        loop: <span class="hljs-literal">true</span> <span class="hljs-comment">//能够循环滑动，false只能滑倒最后，或最前</span></span><br>      &#125;<br>    &#125;;<br>  &#125;,<br>  computed: &#123;<br><span class="javascript">    <span class="hljs-function"><span class="hljs-title">showSwiper</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">      <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.list.length;</span><br>    &#125;<br>  &#125;<br>&#125;;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Vue项目实战</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue去哪儿项目首页开发&amp;首页轮播图&amp;推荐组件开发</title>
    <link href="/2021/05/02/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E4%B8%89)/"/>
    <url>/2021/05/02/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E4%B8%89)/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="首页轮播图"><a href="#首页轮播图" class="headerlink" title="首页轮播图"></a>首页轮播图</h3><ol><li>第三方轮播插件使用</li></ol><p>Github地址<br><a href="https://github.com/surmon-china/vue-awesome-swiper">vue-awesome-swiper</a></p><p>安装：项目文件夹路径中,这里我们安装的是@2.6.7版本，其他版本可能兼容性等问题</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">npm</span> install swiper vue-awesome-swiper@<span class="hljs-number">2</span>.<span class="hljs-number">6</span>.<span class="hljs-number">7</span> --save<br></code></pre></td></tr></table></figure><ol start="2"><li>引用(这里我们引用到全局中，因为各个页面可能都会使用)</li></ol><p>main.js</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-keyword">import</span> Vue from &#x27;vue&#x27;<br><span class="hljs-keyword">import</span> VueAwesomeSwiper from &#x27;vue-awesome-swiper&#x27;<br><br>//这里我们使用这个版本<br>// <span class="hljs-keyword">import</span> style (&gt;= <span class="hljs-type">Swiper</span> 6.<span class="hljs-title">x</span>)<br><span class="hljs-keyword">import</span> &#x27;swiper/swiper-bundle.css&#x27;<br><br>// <span class="hljs-keyword">import</span> style (&lt;= <span class="hljs-type">Swiper</span> 5.<span class="hljs-title">x</span>)<br><span class="hljs-keyword">import</span> &#x27;swiper/css/swiper.css&#x27;<br><br><span class="hljs-type">Vue</span>.use(<span class="hljs-type">VueAwesomeSwiper</span>, /* &#123; <span class="hljs-keyword">default</span> options with global component &#125; */)<br></code></pre></td></tr></table></figure><ol start="3"><li>使用</li></ol><p>Swiper.vue</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;<span class="hljs-keyword">template</span>&gt;<br>  &lt;div <span class="hljs-keyword">class</span>=&quot;wrapper&quot;&gt;<br>    &lt;swiper :<span class="hljs-keyword">options</span>=&quot;swiperOptions&quot; v-<span class="hljs-keyword">if</span>=&quot;showSwiper&quot;&gt;<br>      &lt;swiper-slide v-<span class="hljs-keyword">for</span>=&quot;item of list&quot; :key=&quot;item.id&quot;&gt;<br>        &lt;img <span class="hljs-keyword">class</span>=&quot;swiper-img&quot; :src=&quot;item.imgUrl&quot; alt=&quot;&quot; /&gt;<br>      &lt;/swiper-slide&gt;<br><br>      &lt;div <span class="hljs-keyword">class</span>=&quot;swiper-pagination&quot; slot=&quot;pagination&quot;&gt;&lt;/div&gt;<br>    &lt;/swiper&gt;<br>  &lt;/div&gt;<br>&lt;/<span class="hljs-keyword">template</span>&gt;<br>&lt;script&gt;<br>export <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-type">name</span>: &quot;HomeSwiper&quot;,<br>  props: &#123;<br>    list: <span class="hljs-keyword">Array</span><br>  &#125;,<br>  data() &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      swiperOptions: &#123;<br>        pagination: &quot;.swiper-pagination&quot;,<br>        <span class="hljs-keyword">loop</span>: <span class="hljs-keyword">true</span><br>      &#125;<br>    &#125;;<br>  &#125;,<br>  computed: &#123;<br>    showSwiper() &#123;<br>      <span class="hljs-keyword">return</span> this.list.length;<br>    &#125;<br>  &#125;<br>&#125;;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;stylus&quot; scoped&gt;<br>// 样式穿透，不受scoped控制了<br>.<span class="hljs-keyword">wrapper</span> &gt;&gt;&gt; .swiper-pagination-bullet-active<br>    background:#fff<br>.<span class="hljs-keyword">wrapper</span><br>    overflow hidden<br>    width:<span class="hljs-number">100</span>%<br>    height:<span class="hljs-number">0</span><br>    padding-bottom :<span class="hljs-number">31.25</span>%<br>    background  :#eee<br>    .swiper-img<br>        width:<span class="hljs-number">100</span>%<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><h4 id="占位"><a href="#占位" class="headerlink" title="占位"></a>占位</h4><p>图片是可替代资源，在页面显然时，会先将页面中静态的内容渲染上去，等数据返回后，在进行重新渲染，这样页面就会出现抖动，影响用户体验，同时性能也比较低。</p><p>可以用下面的css代码对这些可替换资源先进行占位，页面大体框架在第一次渲染后就能呈现给用户，数据获取到后，替换相应的内容就可，就不会出现抖动了。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">.<span class="hljs-attribute">icon</span>-img<br>    <span class="hljs-attribute">overflow</span>: hidden<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span><br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span><br>    <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">100%</span><br></code></pre></td></tr></table></figure><p><img src="/image1/15.png" alt="样式，可以滑动"></p><h3 id="图标区域页面布局"><a href="#图标区域页面布局" class="headerlink" title="图标区域页面布局"></a>图标区域页面布局</h3><p>新建一个组件<br>src\pages\home\components\Icons.vue</p><p>在Home.vue中引入并使用</p><p>icons.vue代码</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;icons&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">swiper</span> <span class="hljs-attr">:options</span>=<span class="hljs-string">&quot;swiperOptions&quot;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">swiper-slide</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(page, index) of pages&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item of page&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;icon-img&quot;</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;icon-img-content&quot;</span> <span class="hljs-attr">v-bind:src</span>=<span class="hljs-string">&quot;item.imgUrl&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;icon-desc&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item.desc</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">swiper-slide</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">swiper</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">export default &#123;</span><br><span class="xml">  name: &quot;HomeIcons&quot;,</span><br><span class="xml">  props: &#123;</span><br><span class="xml">    list: Array</span><br><span class="xml">  &#125;,</span><br><span class="xml">  data() &#123;</span><br><span class="xml">    return &#123;</span><br><span class="xml">      swiperOptions: &#123;</span><br><span class="xml">        autoplay: false</span><br><span class="xml">      &#125;</span><br><span class="xml">    &#125;;</span><br><span class="xml">  &#125;,</span><br><span class="xml">  computed: &#123;</span><br><span class="xml">    pages() &#123;</span><br><span class="xml">      const pages = [];</span><br><span class="xml">      this.list.forEach((item, index) =&gt; &#123;</span><br><span class="xml">        const page = Math.floor(index / 8);</span><br><span class="xml">        if (!pages[page]) &#123;</span><br><span class="xml">          pages[page] = [];</span><br><span class="xml">        &#125;</span><br><span class="xml">        pages[page].push(item);</span><br><span class="xml">      &#125;);</span><br><span class="xml">      return pages;</span><br><span class="xml">    &#125;</span><br><span class="xml">  &#125;</span><br><span class="xml">&#125;;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;stylus&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span></span><br><span class="xml">@import &#x27;~styles/varibles.styl&#x27;;</span><br><span class="xml">@import &#x27;~styles/mixins.styl&#x27;;</span><br><span class="xml">.icons  &gt;&gt;&gt; .swiper-container</span><br><span class="xml">  width:100%</span><br><span class="xml">  height:0</span><br><span class="xml">  padding-bottom:50%</span><br><span class="xml">.icons</span><br><span class="xml">  margin-top:.1rem</span><br><span class="xml">  .icon</span><br><span class="xml">    position :relative</span><br><span class="xml">    overflow :hidden</span><br><span class="xml">    float:left</span><br><span class="xml">    width:25%</span><br><span class="xml">    height:0</span><br><span class="xml">    padding-bottom :25%</span><br><span class="xml">    .icon-img</span><br><span class="xml">        position:absolute</span><br><span class="xml">        top:0</span><br><span class="xml">        left:0</span><br><span class="xml">        right:0</span><br><span class="xml">        bottom:.44rem</span><br><span class="xml">        box-sizing:border-box</span><br><span class="xml">        padding:.1rem</span><br><span class="xml">        .icon-img-content</span><br><span class="xml">            display:block</span><br><span class="xml">            margin 0 auto</span><br><span class="xml">            height:100%</span><br><span class="xml">    .icon-desc</span><br><span class="xml">       position :absolute</span><br><span class="xml">       left:0</span><br><span class="xml">       right:0</span><br><span class="xml">       bottom:0</span><br><span class="xml">       height:.44rem</span><br><span class="xml">       line-height :.44rem</span><br><span class="xml">       color:#darkTextColor</span><br><span class="xml">       text-align :center</span><br><span class="xml">       ellipsis()</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br><br></code></pre></td></tr></table></figure><p><img src="/image1/17.png" alt="效果"></p><p>文字太长后面文字用….表示的Css样式</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino">overflow :hidden <br>white-space :nowrap <br>text-overflow :ellipsis<br></code></pre></td></tr></table></figure><p>由于这个样式很多地方都会用到，所以我们可以借助stylus的mixins.styl将它封装.</p><p><img src="/image1/16.png" alt="封装"></p><p>使用：</p><p>导入</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-keyword">@import</span> <span class="hljs-string">&#x27;~styles/mixins.styl&#x27;</span>;<br></code></pre></td></tr></table></figure><p>css中使用</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs isbl">.icon-<span class="hljs-variable">desc</span><br>   <span class="hljs-function"><span class="hljs-title">ellipsis</span>()</span><br></code></pre></td></tr></table></figure><h3 id="推荐组件开发"><a href="#推荐组件开发" class="headerlink" title="推荐组件开发"></a>推荐组件开发</h3><p><img src="/image1/18.png" alt="效果"></p><p>新建一个组件<br>src\pages\home\components\Recommend.vue</p><p>在Home.vue中引入并使用</p><p>Recommend.vue代码</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span></span><br><span class="xml">      热销推荐</span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item  border-bottom&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item of list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-img&quot;</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;item.imgUrl&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span></span><br><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-info&quot;</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-title&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item.title</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-desc&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item.desc</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-button&quot;</span>&gt;</span>查看详情<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">export default &#123;</span><br><span class="xml">  name: &quot;HomeRecommend&quot;,</span><br><span class="xml">  props: &#123;</span><br><span class="xml">    list: Array</span><br><span class="xml">  &#125;</span><br><span class="xml">&#125;;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;stylus&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span></span><br><span class="xml">@import &#x27;~styles/mixins.styl&#x27;;</span><br><span class="xml">.title</span><br><span class="xml">    margin-top :.2rem</span><br><span class="xml">    line-height :.8rem</span><br><span class="xml">    background:#eee</span><br><span class="xml">    text-indent:.2rem</span><br><span class="xml">.item</span><br><span class="xml">    overflow: hidden</span><br><span class="xml">    display:flex</span><br><span class="xml">    height :1.9rem</span><br><span class="xml">    .item-img</span><br><span class="xml">       width 1.7rem</span><br><span class="xml">       height 1.7rem</span><br><span class="xml">       padding:.1rem</span><br><span class="xml">    .item-info</span><br><span class="xml">        flex:1</span><br><span class="xml">        padding:.1rem</span><br><span class="xml">        min-width:0</span><br><span class="xml">        .item-title</span><br><span class="xml">            line-height :.54rem</span><br><span class="xml">            font-size :.32rem</span><br><span class="xml">            ellipsis()</span><br><span class="xml">        .item-desc</span><br><span class="xml">            line-height :.4rem</span><br><span class="xml">            color:#ccc</span><br><span class="xml">            ellipsis()</span><br><span class="xml">        .item-button</span><br><span class="xml">            line-height :.44rem</span><br><span class="xml">            margin-top:.16rem</span><br><span class="xml">            background #ff9300</span><br><span class="xml">            padding:0 .2rem</span><br><span class="xml">            border radius 0.06rem</span><br><span class="xml">            color:#fff</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br><br></code></pre></td></tr></table></figure><h3 id="周末游组件开发"><a href="#周末游组件开发" class="headerlink" title="周末游组件开发"></a>周末游组件开发</h3><p><img src="/image1/19.png" alt="效果"></p><p>新建一个组件<br>src\pages\home\components\Weekend.vue</p><p>在Home.vue中引入并使用</p><p>Weekend.vue代码</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span></span><br><span class="xml">      周末去哪儿</span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item  border-bottom&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item of list&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-img-warpper&quot;</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-img&quot;</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;item.imgUrl&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-info&quot;</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-title&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item.title</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-desc&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">item.desc</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">export default &#123;</span><br><span class="xml">  name: &quot;HomeWeekend&quot;,</span><br><span class="xml">  props: &#123;</span><br><span class="xml">    list: Array</span><br><span class="xml">  &#125;</span><br><span class="xml">&#125;;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;stylus&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span></span><br><span class="xml">@import &#x27;~styles/mixins.styl&#x27;;</span><br><span class="xml">.title</span><br><span class="xml">    line-height :.8rem</span><br><span class="xml">    background:#eee</span><br><span class="xml">    text-indent:.2rem</span><br><span class="xml">.item-img-warpper</span><br><span class="xml">    overflow:hidden</span><br><span class="xml">    height:0</span><br><span class="xml">    padding-bottom :37.9%</span><br><span class="xml">.item-img</span><br><span class="xml">    width 100%</span><br><span class="xml">.item-info</span><br><span class="xml">    padding:.1rem</span><br><span class="xml">    .item-title</span><br><span class="xml">        line-height :.54rem</span><br><span class="xml">        font-size :.32rem</span><br><span class="xml">        ellipsis()</span><br><span class="xml">    .item-desc</span><br><span class="xml">        line-height :.4rem</span><br><span class="xml">        color:#ccc</span><br><span class="xml">        ellipsis()</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Vue项目实战</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue去哪儿项目首页开发&amp;首页header区域</title>
    <link href="/2021/05/02/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E4%BA%8C)/"/>
    <url>/2021/05/02/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E4%BA%8C)/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="首页header区域"><a href="#首页header区域" class="headerlink" title="首页header区域"></a>首页header区域</h3><ol><li>安装开发依赖包(项目目录下)<br>stylus：CSS的预处理框架，即将stylus转换为css使用<br>stylus-loader：让webpack理解stylus<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm  install  stylus <span class="hljs-comment">--save</span><br>npm  install  stylus-loader  <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure></li></ol><p>参考使用文章：<br><a href="https://juejin.cn/post/6844903696409722894">『前端干货篇』：你不知道的Stylus</a><br><a href="www.zhangxinxu.com/jq/stylus/">张鑫旭大大的Stylus文章</a></p><p>使用过程中报错：npm run dev后报错<br>Vue中使用Stylus报错：Module build failed: TypeError: this.getOptions is not a function</p><p>报错原因<br>stylus-loader版本过高，更改为<a href="mailto:&#115;&#x74;&#121;&#108;&#x75;&#115;&#x2d;&#x6c;&#x6f;&#x61;&#x64;&#x65;&#114;&#64;&#x33;&#46;&#x30;&#46;&#x31;">&#115;&#x74;&#121;&#108;&#x75;&#115;&#x2d;&#x6c;&#x6f;&#x61;&#x64;&#x65;&#114;&#64;&#x33;&#46;&#x30;&#46;&#x31;</a>即可</p><p>再次安装stylus</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">npm uninstall stylus stylus-loader <span class="hljs-regexp">//</span>删除之前的loader<br>npm install stylus stylus-loader@<span class="hljs-number">3.0</span>.<span class="hljs-number">1</span> --save-dev <span class="hljs-regexp">//</span>再次安装<br></code></pre></td></tr></table></figure><ol start="2"><li>src\pages\home\components路径下新建一个Header.vue</li></ol><p>页面组件化，对于Home这个页面可以被拆分成多个小组件，Header.vue可以放在compons中被使用</p><ol start="3"><li>引入组件使用</li></ol><p><img src="/image1/8.png" alt="使用组件"></p><ol start="4"><li>Header.vue页面样式</li></ol><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs maxima">&lt;template&gt;<br>  &lt;div class=<span class="hljs-string">&quot;header&quot;</span>&gt;<br>    &lt;div class=<span class="hljs-string">&quot;header-left&quot;</span>&gt;返回&lt;/div&gt;<br>    &lt;div class=<span class="hljs-string">&quot;header-input&quot;</span>&gt;输入城市/景点/游玩/主题&lt;/div&gt;<br>    &lt;div class=<span class="hljs-string">&quot;header-right&quot;</span>&gt;城市&lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>  name: <span class="hljs-string">&quot;HomeHeader&quot;</span><br>&#125;;<br>&lt;/script&gt;<br><br>&lt;<span class="hljs-built_in">style</span> lang=<span class="hljs-string">&quot;stylus&quot;</span> scoped&gt;<br>.header<br>  <span class="hljs-built_in">display</span>:flex<br>  line-<span class="hljs-built_in">height</span>: .86<span class="hljs-built_in">rem</span><br>  <span class="hljs-built_in">background</span> #<span class="hljs-number">00bcd4</span><br>  <span class="hljs-built_in">color</span>: #fff<br>  .header-left<br>    <span class="hljs-built_in">width</span> .64<span class="hljs-built_in">rem</span><br>    <span class="hljs-built_in">float</span>:left<br>  .header-input<br>     flex:<span class="hljs-number">1</span><br>     line-<span class="hljs-built_in">height</span>:.64<span class="hljs-built_in">rem</span><br>     <span class="hljs-built_in">height</span>: .64<span class="hljs-built_in">rem</span><br>     margin-top .12<span class="hljs-built_in">rem</span><br>     margin-left: .2<span class="hljs-built_in">rem</span><br>     <span class="hljs-built_in">background</span>: #fff<br>     <span class="hljs-built_in">border</span>-<span class="hljs-built_in">radius</span>: .1<span class="hljs-built_in">rem</span><br>     <span class="hljs-built_in">color</span>:#ccc<br>  .header-right<br>     <span class="hljs-built_in">width</span>: <span class="hljs-number">1.</span>24<span class="hljs-built_in">rem</span><br>     <span class="hljs-built_in">float</span>:right<br>     text-align:<span class="hljs-built_in">center</span><br>&lt;/<span class="hljs-built_in">style</span>&gt;<br><br></code></pre></td></tr></table></figure><p>补充：<code>&lt;style lang=&quot;stylus&quot; scoped&gt;</code><br>我们写的这个组件不要对其他组件产生影响，使用scoped可以限制.header的样式只对当前组件有效，不对其他组件有影响<br>当<code> &lt;style&gt;</code> 标签有 scoped 属性时，它的 CSS 只作用于当前组件中的元素。</p><p>完成效果：</p><p><img src="/image1/9.png" alt="使用组件"></p><h3 id="iconfont的使用和代码优化"><a href="#iconfont的使用和代码优化" class="headerlink" title="iconfont的使用和代码优化"></a>iconfont的使用和代码优化</h3><p><img src="/image1/10.png" alt="iconfont下载使用"></p><ol><li>将以下文件放入项目静态资源中,这里我们修改一下引用路径</li></ol><p><img src="/image1/11.png" alt="资源引入"></p><ol><li>引入iconfont</li></ol><p>由于我们几乎所有页面都要使用iconfont，所以我们可以在main.js中引用</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;styles/iconfont.css&#x27;</span><br></code></pre></td></tr></table></figure><ol start="3"><li>使用，这里的代码是Unicode编码</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont back-icon&quot;</span>&gt;</span><span class="hljs-symbol">&amp;#xe624;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont&quot;</span>&gt;</span><span class="hljs-symbol">&amp;#xe632;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont  arrow-cron&quot;</span>&gt;</span><span class="hljs-symbol">&amp;#xe64a;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br></code></pre></td></tr></table></figure><p>css样式(省略)</p><ol start="4"><li>代码优化</li></ol><p>整个Header背景色都是一个绿色的内容，我们这个网页很多地方都会用到这个背景色，我们可以将这个颜色单独放在一个变量中，然后单独的去引用。未来网站颜色风格需要切换，只需要去改变这一个变量，全局都会改变，这个可维护性会有很大的提升</p><p>解决：</p><p>全局变量文件</p><p><img src="/image1/12.png" alt="全局变量文件"></p><p>引入使用：</p><p><img src="/image1/13.png" alt="引入与使用"></p><ol start="5"><li>引入优化</li></ol><p>起别名：</p><p><img src="/image1/14.png" alt="起别名"></p><p>使用：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-keyword">@import</span> <span class="hljs-string">&#x27;~styles/varibles.styl&#x27;</span>;<br></code></pre></td></tr></table></figure><p>这里我们修改了webpack中的配置项时，一定要重启项目，否者会报错</p>]]></content>
    
    
    <categories>
      
      <category>Vue项目实战</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue去哪儿项目环境搭建</title>
    <link href="/2021/05/01/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E4%B8%80)/"/>
    <url>/2021/05/01/Vue%E5%8E%BB%E5%93%AA%E5%84%BF%E5%AE%9E%E6%88%98(%E4%B8%80)/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="项目环境准备"><a href="#项目环境准备" class="headerlink" title="项目环境准备"></a>项目环境准备</h3><ol><li>安装node</li><li>Gitee创建一个自己的仓库</li></ol><p><img src="/image1/1.png" alt="仓库"></p><ol start="3"><li><p>git ssh本地免密</p></li><li><p>git  clone 项目到本地电脑</p></li><li><p>全局安装vue-cli</p></li></ol><p><img src="/image1/2.png" alt="全局安装"></p><ol start="6"><li>项目初始化</li></ol><p><img src="/image1/3.png" alt="初始化项目"></p><ol start="7"><li>项目启动</li></ol><p>npm  run  dev</p><p><img src="/image1/4.png" alt="启动成功"></p><p>目录结构</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs verilog">readme              <span class="hljs-comment">//项目的说明文件</span><br><span class="hljs-keyword">package</span><span class="hljs-variable">.json</span>         <span class="hljs-comment">//第三方依赖包配置</span><br><span class="hljs-keyword">package</span><span class="hljs-variable">.lock</span><span class="hljs-variable">.json</span>    <span class="hljs-comment">//帮助我们去确定安装的第三方依赖包的具体的版本，保持团队编程的统一</span><br>license             <span class="hljs-comment">//开源协议的说明</span><br>index<span class="hljs-variable">.html</span>          <span class="hljs-comment">//项目默认的首页模版文件</span><br><span class="hljs-variable">.postcssrc</span><span class="hljs-variable">.js</span>        <span class="hljs-comment">//对 postcss 的配置项</span><br><span class="hljs-variable">.gitignore</span>          <span class="hljs-comment">//不需要上传到 git 上的文件管理 </span><br><span class="hljs-variable">.eslintrc</span><span class="hljs-variable">.js</span>        <span class="hljs-comment">//对写的代码检测是否标准做一个检测</span><br><span class="hljs-variable">.eslintignore</span>       <span class="hljs-comment">//配置不需要 eslintrc 检测工具检测的文件</span><br><span class="hljs-variable">.editorconfig</span>       <span class="hljs-comment">//配置编辑器总风格统一的自动化格式的语法</span><br><span class="hljs-variable">.babelrc</span>            <span class="hljs-comment">//项目写的代码是 Vue 的大文件组件的代码的写法，所以需要通过 babel 这种语法解析器做一些语法上的转换，最终转换成浏览器能够编译执行的代码，babel 需要做额外配置时，就放在文件里面</span><br><span class="hljs-keyword">static</span>                  <span class="hljs-comment">//static 目录放的是静态资源，要用到的静态图片啊或者后续需要模拟的 json 数据</span><br>node_modules                 <span class="hljs-comment">//项目中需要用到的第三方 node 包</span><br>src                         <span class="hljs-comment">//放的是项目的源代码</span><br>src/main<span class="hljs-variable">.js</span>                  <span class="hljs-comment">//整个项目的入口文件</span><br>src/app<span class="hljs-variable">.vue</span>                 <span class="hljs-comment">//整个项目最原始的根组件</span><br>src/router/index<span class="hljs-variable">.js</span>          <span class="hljs-comment">//项目的路由放置位置</span><br>src/components               <span class="hljs-comment">//项目中要用到的小组件</span><br>src/assets                  <span class="hljs-comment">//项目中需要用到的图片</span><br><span class="hljs-keyword">config</span>                      <span class="hljs-comment">//放置项目配置文件</span><br><span class="hljs-keyword">config</span>/index<span class="hljs-variable">.js</span>              <span class="hljs-comment">//放基础配置</span><br><span class="hljs-keyword">config</span>/dev<span class="hljs-variable">.ent</span><span class="hljs-variable">.js</span>            <span class="hljs-comment">//开发环境配置信息</span><br><span class="hljs-keyword">config</span>/prod<span class="hljs-variable">.ent</span><span class="hljs-variable">.js</span>           <span class="hljs-comment">//线上环境配置信息</span><br>build                      <span class="hljs-comment">//放置项目打包的 webpack 配置信息，vue-cli 会自动构建</span><br>build/webpack<span class="hljs-variable">.base</span><span class="hljs-variable">.conf</span><span class="hljs-variable">.js</span>   <span class="hljs-comment">//基础的 webpack 配置信息</span><br>build/webpack<span class="hljs-variable">.dev</span><span class="hljs-variable">.conf</span><span class="hljs-variable">.js</span>    <span class="hljs-comment">//开发环境的 webpack 配置信息</span><br>build/webpack<span class="hljs-variable">.prod</span><span class="hljs-variable">.conf</span><span class="hljs-variable">.js</span>   <span class="hljs-comment">//线上环境的 webpack 配置信息</span><br></code></pre></td></tr></table></figure><h3 id="项目代码初始化"><a href="#项目代码初始化" class="headerlink" title="项目代码初始化"></a>项目代码初始化</h3><p>由于做的是webapp，所以需要针对移动端，做相应的准备。</p><ol><li> meta标签相关设置</li></ol><p>项目中的  index.html</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;meta <span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attribute">content</span>=<span class="hljs-string">&quot;width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no&quot;</span>&gt;<br></code></pre></td></tr></table></figure><p>效果：页面比例始终是1：1，用户通过手指操作缩放是无效的</p><ol start="2"><li>引入reset.css<br>目的：重置页面样式</li></ol><p>因为在不同移动端、不同浏览器上页面的初始样式是不一样的，引入reset.css为了保证在每个浏览器上展示出的初始效果是一样的</p><ol start="3"><li>引入border.css</li></ol><p>目的：解决移动端1像素边框问题  原因，不同手机上显示的像素不同(可能有二倍屏，多倍屏)</p><p>main.js中代码导入</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs clean"><span class="hljs-keyword">import</span>  fastClick  <span class="hljs-keyword">from</span>  <span class="hljs-string">&#x27;fastclick&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./assets/styles/reset.css&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./assets/styles/border.css&#x27;</span><br></code></pre></td></tr></table></figure><ol start="4"><li>项目中安装fastclick</li></ol><p>npm install fastclick –save</p><p>目的：解决移动端300ms延迟问题</p><p>移动端浏览器click事件为什么会有300ms的延迟呢？因为在手机上有个双击方案 —— 在手机上快速点击两下，实现页面放大；再次双击，恢复到原始比例。</p><p>那它是如何实现的呢？浏览器在捕捉到第一次点击事件后，会等待一段时间，如果在这段时间内，用户没有再次进行点击操作的话，就执行单击事件；如果用户进行了第二次点击操作的话，就会执行双击事件。这段等待的时间大约300ms。</p><ol start="5"><li>Iconfont阿里巴巴矢量图标注册账号使用</li></ol><h3 id="单页应用与多页应用"><a href="#单页应用与多页应用" class="headerlink" title="单页应用与多页应用"></a>单页应用与多页应用</h3><p><img src="/image1/5.png" alt="对比"></p><p>本项目页面采用的是单页页面</p><h3 id="项目下方报error解决"><a href="#项目下方报error解决" class="headerlink" title="项目下方报error解决"></a>项目下方报error解决</h3><p>问题：由于esLint校验导致报错或警告</p><p><img src="/image1/6.png" alt="error"></p><p>解决</p><p><img src="/image1/7.png" alt="注释"></p>]]></content>
    
    
    <categories>
      
      <category>Vue项目实战</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue&amp;插槽</title>
    <link href="/2021/05/01/Vue%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0(%E4%BA%94)/"/>
    <url>/2021/05/01/Vue%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0(%E4%BA%94)/</url>
    
    <content type="html"><![CDATA[<p>槽，也就是slot，是组件的一块HTML模板，这块模板显示不显示、以及怎样显示由父组件来决定。 实际上，一个slot最核心的两个问题在这里就点出来了，是显示不显示和怎样显示。</p><p>由于插槽是一块模板，所以，对于任何一个组件，从模板种类的角度来分，其实都可以分为非插槽模板和插槽模板两大类。 非插槽模板指的是html模板，比如‘div、span、ul、table’这些，非插槽模板的显示与隐藏以及怎样显示由组件自身控制；插槽模板是slot，它是一个空壳子，因为它的显示与隐藏以及最后用什么样的html模板显示由父组件控制。但是插槽显示的位置却由子组件自身决定，slot写在组件template的什么位置，父组件传过来的模板将来就显示在什么位置。</p><hr><h3 id="单个插槽-默认插槽-匿名插槽"><a href="#单个插槽-默认插槽-匿名插槽" class="headerlink" title="单个插槽 | 默认插槽 | 匿名插槽"></a>单个插槽 | 默认插槽 | 匿名插槽</h3><p>首先是单个插槽，单个插槽是vue的官方叫法，但是其实也可以叫它默认插槽，或者与具名插槽相对，我们可以叫它匿名插槽。因为它不用设置name属性。</p><p>单个插槽可以放置在组件的任意位置，但是就像它的名字一样，一个组件中只能有一个该类插槽。相对应的，具名插槽就可以有很多个，只要名字（name属性）不同就可以了。</p><p>下面通过一个例子来展示。</p><p>父组件：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">&lt;template&gt;<br>    &lt;div <span class="hljs-keyword">class</span>=&quot;<span class="hljs-symbol">father</span>&quot;&gt;<br>        &lt;<span class="hljs-symbol">h3</span>&gt;这里是父组件&lt;/<span class="hljs-symbol">h3</span>&gt;<br>        &lt;<span class="hljs-symbol">child</span>&gt;<br>            &lt;<span class="hljs-symbol">div</span> <span class="hljs-symbol">class</span>=&quot;<span class="hljs-symbol">tmpl</span>&quot;&gt;<br>              &lt;<span class="hljs-symbol">span</span>&gt;菜单<span class="hljs-symbol">1</span>&lt;/<span class="hljs-symbol">span</span>&gt;<br>              &lt;<span class="hljs-symbol">span</span>&gt;菜单<span class="hljs-symbol">2</span>&lt;/<span class="hljs-symbol">span</span>&gt;<br>              &lt;<span class="hljs-symbol">span</span>&gt;菜单<span class="hljs-symbol">3</span>&lt;/<span class="hljs-symbol">span</span>&gt;<br>              &lt;<span class="hljs-symbol">span</span>&gt;菜单<span class="hljs-symbol">4</span>&lt;/<span class="hljs-symbol">span</span>&gt;<br>              &lt;<span class="hljs-symbol">span</span>&gt;菜单<span class="hljs-symbol">5</span>&lt;/<span class="hljs-symbol">span</span>&gt;<br>              &lt;<span class="hljs-symbol">span</span>&gt;菜单<span class="hljs-symbol">6</span>&lt;/<span class="hljs-symbol">span</span>&gt;<br>            &lt;/<span class="hljs-symbol">div</span>&gt;<br>        &lt;/<span class="hljs-symbol">child</span>&gt;<br>    &lt;/<span class="hljs-symbol">div</span>&gt;<br>&lt;/<span class="hljs-symbol">template</span>&gt;<br></code></pre></td></tr></table></figure><p>子组件：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;child&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>这里是子组件<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure><p>在这个例子里，因为父组件在里面写了html模板，那么子组件的匿名插槽这块模板就是下面这样。也就是说，子组件的匿名插槽被使用了，是被下面这块模板使用了。</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">&lt;div <span class="hljs-keyword">class</span>=&quot;<span class="hljs-symbol">tmpl</span>&quot;&gt;<br>  &lt;<span class="hljs-symbol">span</span>&gt;菜单<span class="hljs-symbol">1</span>&lt;/<span class="hljs-symbol">span</span>&gt;<br>  &lt;<span class="hljs-symbol">span</span>&gt;菜单<span class="hljs-symbol">2</span>&lt;/<span class="hljs-symbol">span</span>&gt;<br>  &lt;<span class="hljs-symbol">span</span>&gt;菜单<span class="hljs-symbol">3</span>&lt;/<span class="hljs-symbol">span</span>&gt;<br>  &lt;<span class="hljs-symbol">span</span>&gt;菜单<span class="hljs-symbol">4</span>&lt;/<span class="hljs-symbol">span</span>&gt;<br>  &lt;<span class="hljs-symbol">span</span>&gt;菜单<span class="hljs-symbol">5</span>&lt;/<span class="hljs-symbol">span</span>&gt;<br>  &lt;<span class="hljs-symbol">span</span>&gt;菜单<span class="hljs-symbol">6</span>&lt;/<span class="hljs-symbol">span</span>&gt;<br>&lt;/<span class="hljs-symbol">div</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h3><p>匿名插槽没有name属性，所以是匿名插槽，那么，插槽加了name属性，就变成了具名插槽。具名插槽可以在一个组件中出现N次，出现在不同的位置。下面的例子，就是一个有两个具名插槽和单个插槽的组件，这三个插槽被父组件用同一套css样式显示了出来，不同的是内容上略有区别。</p><p>父组件：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;father&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>这里是父组件<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">child</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tmpl&quot;</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;up&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单4<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单6<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tmpl&quot;</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;down&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单-1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单-2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单-3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单-4<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单-5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单-6<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tmpl&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单-&gt;1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单-&gt;2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单-&gt;3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单-&gt;4<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单-&gt;5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>菜单-&gt;6<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">child</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure><p>子组件：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">&lt;template&gt;<br>  &lt;div <span class="hljs-keyword">class</span>=&quot;<span class="hljs-symbol">child</span>&quot;&gt;<br>    // 具名插槽<br>    &lt;<span class="hljs-symbol">slot</span> <span class="hljs-symbol">name</span>=&quot;<span class="hljs-symbol">up</span>&quot;&gt;&lt;/<span class="hljs-symbol">slot</span>&gt;<br>    &lt;<span class="hljs-symbol">h3</span>&gt;这里是子组件&lt;/<span class="hljs-symbol">h3</span>&gt;<br>    // 具名插槽<br>    &lt;<span class="hljs-symbol">slot</span> <span class="hljs-symbol">name</span>=&quot;<span class="hljs-symbol">down</span>&quot;&gt;&lt;/<span class="hljs-symbol">slot</span>&gt;<br>    // 匿名插槽<br>    &lt;<span class="hljs-symbol">slot</span>&gt;&lt;/<span class="hljs-symbol">slot</span>&gt;<br>  &lt;/<span class="hljs-symbol">div</span>&gt;<br>&lt;/<span class="hljs-symbol">template</span>&gt;<br></code></pre></td></tr></table></figure><h4 id="具名插槽的缩写"><a href="#具名插槽的缩写" class="headerlink" title="具名插槽的缩写"></a>具名插槽的缩写</h4><p>跟 v-on 和 v-bind 一样，v-slot 也有缩写，即把参数之前的所有内容 (v-slot:) 替换为字符 #。例如 v-slot:header 可以被重写为 #header：</p><h3 id="作用域插槽-带数据的插槽"><a href="#作用域插槽-带数据的插槽" class="headerlink" title="作用域插槽 | 带数据的插槽"></a>作用域插槽 | 带数据的插槽</h3><p>最后，就是我们的作用域插槽。这个稍微难理解一点。官方叫它作用域插槽，实际上，对比前面两种插槽，我们可以叫它带数据的插槽。什么意思呢，就是前面两种，都是在组件的template里面写</p><p>匿名插槽</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-section">&lt;slot&gt;</span><span class="hljs-section">&lt;/slot&gt;</span><br></code></pre></td></tr></table></figure><p>具名插槽</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;up&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br></code></pre></td></tr></table></figure><p>但是作用域插槽要求，在slot上面绑定数据。也就是你得写成大概下面这个样子。</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs elixir">&lt;slot name=<span class="hljs-string">&quot;up&quot;</span> <span class="hljs-symbol">:data=<span class="hljs-string">&quot;data&quot;</span>&gt;&lt;/slot&gt;</span><br> export default &#123;<br>    <span class="hljs-symbol">data:</span> function()&#123;<br>      <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-symbol">data:</span> [<span class="hljs-string">&#x27;zhangsan&#x27;</span>,<span class="hljs-string">&#x27;lisi&#x27;</span>,<span class="hljs-string">&#x27;wanwu&#x27;</span>,<span class="hljs-string">&#x27;zhaoliu&#x27;</span>,<span class="hljs-string">&#x27;tianqi&#x27;</span>,<span class="hljs-string">&#x27;xiaoba&#x27;</span>]<br>      &#125;<br>    &#125;,<br>&#125;<br></code></pre></td></tr></table></figure><p>我们前面说了，插槽最后显示不显示是看父组件有没有在child下面写模板，像下面那样。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-section">&lt;child&gt;</span><br>   <span class="hljs-attribute">html</span>模板<br><span class="hljs-section">&lt;/child&gt;</span><br></code></pre></td></tr></table></figure><h4 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h4><p><a href="https://juejin.cn/post/6844903555837493256#heading-0">深入理解vue中的slot与slot-scope</a></p><p><a href="https://cn.vuejs.org/v2/guide/components-slots.html#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD">官方文档</a></p>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue&amp;组件之间的传值通信&amp;props$&amp;$emits&amp;ref/refs</title>
    <link href="/2021/05/01/Vue%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0(%E5%9B%9B)/"/>
    <url>/2021/05/01/Vue%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0(%E5%9B%9B)/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="vue变量赋值的时候，在什么时候用双引号，什么时候用单引号，什么时候不用引号"><a href="#vue变量赋值的时候，在什么时候用双引号，什么时候用单引号，什么时候不用引号" class="headerlink" title="vue变量赋值的时候，在什么时候用双引号，什么时候用单引号，什么时候不用引号"></a>vue变量赋值的时候，在什么时候用双引号，什么时候用单引号，什么时候不用引号</h3><p>变量值赋值的时候要根据是什么类型来给对应的符号</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros">String 字符串 类型的加双引号       <span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;陈钰&quot;</span>;<br><br>char   字符     类型的加单引号       <span class="hljs-attribute">sex</span>=<span class="hljs-string">&#x27;男&#x27;</span>;<br><br>boolean 布尔值  类型的不加引号     <span class="hljs-attribute">isShow</span>=<span class="hljs-literal">true</span>;<br><br>number 数字      类型的不加引号     <span class="hljs-attribute">num</span>=18;<br><br>只要不是char字符类型，String字符串类型，其他的类型都不需要加引号<br></code></pre></td></tr></table></figure><p>在vue中也是如此，只不过在data里面的赋值符号要改一下,把等号改为冒号，把最后面的分号改为逗号</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">String</span> 字符串 类型的加双引号       name:<span class="hljs-string">&quot;陈钰&quot;</span>,<br><br><span class="hljs-keyword">char</span>   字符     类型的加单引号       sex:<span class="hljs-string">&#x27;男&#x27;</span>,<br><br><span class="hljs-keyword">boolean</span> 布尔值  类型的不加引号     isShow:<span class="hljs-literal">true</span>,<br><br>number 数字      类型的不加引号     num:<span class="hljs-number">18</span>,<br></code></pre></td></tr></table></figure><p>在计算机语言中，大多数单引号表示的是一个字符，双引号表示的是表示一个字符串</p><p>前端HTML和Javascript建议统一使用双引号</p><p>在<code>&#123;&#123;&#125;&#125;</code>内的双引号内的是字符串<br>在标签的属性中的双引号内的变量</p><h3 id="请详细说下你对vue生命周期的理解"><a href="#请详细说下你对vue生命周期的理解" class="headerlink" title="请详细说下你对vue生命周期的理解"></a>请详细说下你对vue生命周期的理解</h3><p>vue生命周期总共分为8个阶段: 创建前/后，载入前/后，更新前/后， 销毁前/后。</p><ul><li>beforeCreate （创建前）vue实例的挂载元素$el和数据对象 data都是undefined, 还未初始化</li><li>created (创建后) 完成了 data数据初始化, el还未初始化</li><li>beforeMount (载入前) vue实例的$el和data都初始化了, 相关的render函数首次被调用。实例已完成以下的配置：编译模板，把data里面的数据和模板生成html。注意此时还没有挂载html到页面上。</li><li>mounted (载入后) 在el 被新创建的 vm.$el替换，并挂载到实例上去之后调用。实例已完成以下的配置：用上面编译好的html内容替换el属性指向的DOM对象。完成模板中的html渲染到html页面中。此过程中进行ajax交互</li><li>beforeUpdate (更新前) 在数据更新之前调用，发生在虚拟DOM重新渲染和打补丁之前。可以在该钩子中进一步地更改状态，不会触发附加的重渲染过程。</li><li>updated （更新后） 在由于数据更改导致的虚拟DOM重新渲染和打补丁之后调用。调用时，组件DOM已经更新，所以可以执行依赖于DOM的操作。然而在大多数情况下，应该避免在此期间更改状态，因为这可能会导致更新无限循环。该钩子在服务器端渲染期间不被调用。</li><li>beforeDestroy (销毁前） 在实例销毁之前调用。实例仍然完全可用。</li><li>destroyed (销毁后） 在实例销毁之后调用。调用后，所有的事件监听器会被移除，所有的子实例也会被销毁。该钩子在服务器端渲染期间不被调用。</li></ul><h3 id="组件之间的传值通信"><a href="#组件之间的传值通信" class="headerlink" title="组件之间的传值通信"></a>组件之间的传值通信</h3><p>组件之间通讯分为三种: 父传子、子传父、兄弟组件之间的通讯<br>父组件通过props的方式向子组件传递数据，而通过$emit 子组件可以向父组件通信。          </p><ol><li>父组件给子组件传值<br>使用props，父组件可以使用props向子组件传递数据。</li></ol><p>父组件vue模板father.vue:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">child</span> <span class="hljs-attr">:msg</span>=<span class="hljs-string">&quot;message&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript"><span class="hljs-keyword">import</span> child <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./child.vue&#x27;</span>;</span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br>    components: &#123;<br>        child<br>    &#125;,<br>    data () &#123;<br><span class="javascript">        <span class="hljs-keyword">return</span> &#123;</span><br><span class="javascript">            message: <span class="hljs-string">&#x27;father message&#x27;</span>;</span><br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>子组件vue模板child.vue:</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">msg</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">export default &#123;</span><br><span class="xml">    props: &#123;</span><br><span class="xml">        msg: &#123;</span><br><span class="xml">            type: String,</span><br><span class="xml">            required: true</span><br><span class="xml">        &#125;</span><br><span class="xml">    &#125;</span><br><span class="xml">&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><ol start="2"><li>子组件向父组件通信<br>父组件向子组件传递事件方法，子组件通过$emit触发事件，回调给父组件。</li></ol><p>父组件vue模板father.vue:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">child</span> @<span class="hljs-attr">msgFunc</span>=<span class="hljs-string">&quot;func&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript"><span class="hljs-keyword">import</span> child <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./child.vue&#x27;</span>;</span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br>    components: &#123;<br>        child<br>    &#125;,<br>    methods: &#123;<br>        func (msg) &#123;<br><span class="javascript">            <span class="hljs-built_in">console</span>.log(msg);</span><br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>子组件vue模板child.vue:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleClick&quot;</span>&gt;</span>点我<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br>    props: &#123;<br>        msg: &#123;<br><span class="javascript">            type: <span class="hljs-built_in">String</span>,</span><br><span class="javascript">            required: <span class="hljs-literal">true</span></span><br>        &#125;<br>    &#125;,<br>    methods () &#123;<br>        handleClick () &#123;<br><span class="javascript">            <span class="hljs-comment">//........</span></span><br><span class="javascript">            <span class="hljs-built_in">this</span>.$emit(<span class="hljs-string">&#x27;msgFunc&#x27;</span>);</span><br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><ol start="3"><li>非父子, 兄弟组件之间通信<br>vue2中废弃了dispatch和broadcast广播和分发事件的方法。父子组件中可以用props和$emit()。如何实现非父子组件间的通信，可以通过实例一个vue实例Bus作为媒介，要相互通信的兄弟组件之中，都引入Bus，然后通过分别调用Bus事件触发和监听来实现通信和参数传递。 Bus.js可以是这样:<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Vue()<br></code></pre></td></tr></table></figure>在需要通信的组件都引入Bus.js:<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="xml"></span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;toBus&quot;</span>&gt;</span>子组件传给兄弟组件<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">import Bus from &#x27;../common/js/bus.js&#x27;</span><br><span class="xml">export default</span><span class="xquery">&#123;</span><br><span class="xquery">methods: &#123;</span><br><span class="xquery">    toBus () &#123;</span><br><span class="xquery">        Bus.<span class="hljs-variable">$emit</span>(<span class="hljs-string">&#x27;on&#x27;</span>, <span class="hljs-string">&#x27;来自兄弟组件&#x27;</span>)</span><br><span class="xquery">    &#125;</span><br><span class="xml">  &#125;</span><br><span class="xml">&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>另一个组件也import Bus.js 在钩子函数中监听on事件<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> Bus <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../common/js/bus.js&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;<br>      <span class="hljs-keyword">return</span> &#123;<br>        message: <span class="hljs-string">&#x27;&#x27;</span><br>      &#125;<br>    &#125;,<br>    <span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123;<br>       Bus.$on(<span class="hljs-string">&#x27;on&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> &#123;<br>         <span class="hljs-built_in">this</span>.message = msg<br>       &#125;)<br>     &#125;<br>   &#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="ref-refs"><a href="#ref-refs" class="headerlink" title="ref / refs"></a>ref / refs</h3><p>访问子组件实例或子元素<br>尽管存在 prop 和事件，有的时候你仍可能需要在 JavaScript 里直接访问一个子组件。为了达到这个目的，你可以通过 ref 这个 attribute 为子组件赋予一个 ID 引用。例如：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">&lt;<span class="hljs-keyword">base</span>-input <span class="hljs-keyword">ref</span>=<span class="hljs-string">&quot;usernameInput&quot;</span>&gt;&lt;/<span class="hljs-keyword">base</span>-input&gt;<br></code></pre></td></tr></table></figure><p>现在在你已经定义了这个 ref 的组件里，你可以使用：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">this</span>.$<span class="hljs-built_in">ref</span>s.usernameInput<br></code></pre></td></tr></table></figure><p>ref：如果在普通的 DOM 元素上使用，引用指向的就是 DOM 元素；如果用在子组件上，引用就指向组件实例，可以通过实例直接调用组件的方法或访问数据， 我们看一个ref 来访问组件的例子:</p><p>// 子组件 A.vue</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  data () &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      name: <span class="hljs-string">&#x27;Vue.js&#x27;</span><br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    sayHello () &#123;<br>      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;hello&#x27;</span>)<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>// 父组件 app.vue</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">component-a</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;comA&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component-a</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br>    mounted () &#123;<br><span class="javascript">      <span class="hljs-keyword">const</span> comA = <span class="hljs-built_in">this</span>.$refs.comA;</span><br><span class="javascript">      <span class="hljs-built_in">console</span>.log(comA.name);  <span class="hljs-comment">// Vue.js</span></span><br><span class="javascript">      comA.sayHello();  <span class="hljs-comment">// hello</span></span><br>    &#125;<br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>$refs 只会在组件渲染完成之后生效，并且它们不是响应式的。这仅作为一个用于直接操作子组件的“逃生舱”——你应该避免在模板或计算属性中访问 $refs。</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>操作系统</title>
    <link href="/2021/04/30/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%90%86%E8%A7%A3(%E4%B8%80)/"/>
    <url>/2021/04/30/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%90%86%E8%A7%A3(%E4%B8%80)/</url>
    
    <content type="html"><![CDATA[<h2 id="操作系统相当于一个特殊的软件：这种软件对上服务着我们用户的程序，对下管理硬件。"><a href="#操作系统相当于一个特殊的软件：这种软件对上服务着我们用户的程序，对下管理硬件。" class="headerlink" title="操作系统相当于一个特殊的软件：这种软件对上服务着我们用户的程序，对下管理硬件。"></a>操作系统相当于一个特殊的软件：这种软件对上服务着我们用户的程序，对下管理硬件。</h2><h3 id="操作系统主要做什么"><a href="#操作系统主要做什么" class="headerlink" title="操作系统主要做什么"></a>操作系统主要做什么</h3><p><img src="/image/24.1.png" alt="管理硬件，管理应用"></p><h3 id="中断"><a href="#中断" class="headerlink" title="中断"></a>中断</h3><p>假设你的键盘按下了ctrl+deletel键要求马上给一个反馈杀死某个程序，机器内核跑的好好的，突然过来一个东西，这时候会断掉一下。这叫做操作系统中断。</p><h3 id="进程，线程（-）"><a href="#进程，线程（-）" class="headerlink" title="进程，线程（*）"></a>进程，线程（*）</h3><p>程序：硬盘上某一个可执行文件就是程序  (例如：qq.exe)</p><p>你双击一下就是一个进程，你再双击一下就又是一个进程，进程就是这个程序跑起来了，放到内存里开始执行了，CPU开始执行他的指令了就叫一个进程。在这个进程中有好多个工作是并行进行的，比如（qq在显示页面，网络传输，存盘），那么是怎么执行的呢，就是通过线程来。</p><h4 id="纤程"><a href="#纤程" class="headerlink" title="纤程"></a>纤程</h4><p>在一个线程中还可以做并行任务，一个线程里面不同的执行路径同时可以执行的那种，叫纤程。java中叫fiber.</p><h2 id="区别：进程是分配资源的单位，线程进行执行，调度单位。"><a href="#区别：进程是分配资源的单位，线程进行执行，调度单位。" class="headerlink" title="区别：进程是分配资源的单位，线程进行执行，调度单位。"></a>区别：进程是分配资源的单位，线程进行执行，调度单位。</h2><p>（解释：如果我启动一个进程的时候，我是会分配一个内存空间的，这个是虚拟内存最后映射到物理内存上也是会给它分配物理空间的，起线程的时候不会给线程分配任何物理空间，这个线程共享了进程的物理空间）</p><h3 id="操作系统的功能"><a href="#操作系统的功能" class="headerlink" title="操作系统的功能"></a>操作系统的功能</h3><p>一共有四种，了解这两种宏外核，微内核（还有系统外核，VMM）</p><p>功能：<br>调度CPU，内存管理，管理文件，管理文件系统，处理中断，管理应用，进行进程调度</p><p><img src="/image/24.2.png" alt="功能"></p><ol><li>宏内核–操作系统的东西全部都集中在一起<br>操作系统的核心包括周边的东西叫宏内核</li></ol><p><img src="/image/24.3.png" alt="宏内核"></p><ol start="2"><li>微内核—-全球的大厂商的都在做，微软，苹果，谷歌，华为。华为首先推出商用的鸿蒙系统。<h4 id="微内核的核心就干一个事就是进程调度。"><a href="#微内核的核心就干一个事就是进程调度。" class="headerlink" title="微内核的核心就干一个事就是进程调度。"></a>微内核的核心就干一个事就是进程调度。</h4>所有的东西都是以内核为核心，cpu调度文件系统则访问内核，内核去访问文件系统。核心非常小，周围一堆的插件。缺点是运行速度稍低，优点是你可以做到非常灵活的部署，可以做到很灵活的拆装。</li></ol><p><img src="/image/24.4.png" alt="微内核"></p>]]></content>
    
    
    <categories>
      
      <category>操作系统</category>
      
    </categories>
    
    
    <tags>
      
      <tag>操作系统</tag>
      
      <tag>计算机基础</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javascript同步与异步</title>
    <link href="/2021/04/27/JS%E5%BC%82%E6%AD%A5%E4%B8%8E%E5%90%8C%E6%AD%A5/"/>
    <url>/2021/04/27/JS%E5%BC%82%E6%AD%A5%E4%B8%8E%E5%90%8C%E6%AD%A5/</url>
    
    <content type="html"><![CDATA[<p>JavaScript起源<br>技术的出现,和应用场景密切相关的。JavaScript诞生于1995年。当时，它的主要目的是处理以前由服务器端语言（如Perl）负责的一些输入验证操作。在JavaScript问世之前，必须把表单数据发送到服务器端才能确定用户是否没有填写某个必填域，是否输入了无效的值。Netscape Navigator希望通过JavaScript来解决这个问题。起初名字为livescript，但是后来Netscape(网景)与Sun公司成立了一个开发联盟。Netscape为了搭上媒体热炒Java的顺风车，临时把LiveScript改名为JavaScript，所以从本质上来说JavaScript和Java没什么关系（趁热度）。 如今，JavaScript的用途早已不再局限于简单的数据验证，而是具备了与浏览器窗口及其内容等几乎所有方面交互的能力。今天的JavaScript已经成为一门功能全面的编程语言</p><p>总结:js最初的用途是为来实现用户与浏览器的交互</p><hr><h3 id="JS为何是单线程的？"><a href="#JS为何是单线程的？" class="headerlink" title="JS为何是单线程的？"></a>JS为何是单线程的？</h3><p>JavaScript的单线程，与它的用途有关。作为浏览器脚本语言，JavaScript的主要用途是与用户互动，以及操作DOM。这决定了它只能是单线程，否则会带来很复杂的同步问题。比如，假定JavaScript同时有两个线程，一个线程在某个DOM节点上添加内容，另一个线程删除了这个节点，这时浏览器应该以哪个线程为准？</p><p>所以，为了避免复杂性，从一诞生，JavaScript就是单线程，这已经成这门语言的核心特征，将来也不会改变。</p><p>注：所谓单线程，是指在JS引擎中负责解释和执行JavaScript代码的线程只有一个</p><h3 id="计算机的同步与异步（重点）–与生活中相反"><a href="#计算机的同步与异步（重点）–与生活中相反" class="headerlink" title="计算机的同步与异步（重点）–与生活中相反"></a>计算机的同步与异步（重点）–与生活中相反</h3><p>计算机领域中的同步（Synchronous）和异步（Asynchronous）和我们生活中的同步和异步的概念是恰好相反的。生活中的同步，突出的是‘同’，相同的步伐，是咱俩一起行动，比如一起去逛街吃饭饭睡觉觉。异步则是你忙你的，我忙我的，步调不致且互不干扰。难到计算机里的同步和异步不是这样？确实不是。</p><h4 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h4><p>计算机中的同步就是排队等待，假如你是第一百零一个备胎，那你只能等前面的一百个爆了之后才能‘处理’你。异步就是，尽管你是第一百零一个，她还是能照顾到你的感受。</p><h4 id="同步："><a href="#同步：" class="headerlink" title="同步："></a>同步：</h4><p>同步的定义：是指一个进程在执行某个请求的时候，若该请求需要一段时间才能返回信息，那么，这个进程将会一直等待下去，直到收到返回信息才继续执行下去。</p><p>特点：<br>同步是阻塞模式；<br>同步是按顺序执行，执行完一个再执行下一个，需要等待，协调运行；                    </p><h4 id="异步："><a href="#异步：" class="headerlink" title="异步："></a>异步：</h4><p>是指进程不需要一直等下去，而是继续执行下面的操作，不管其他进程的状态。当有消息返回时系统会通知进程进行处理，这样可以提高执行的效率。<br>特点：<br>异步是非阻塞模式，无需等待；<br>异步是彼此独立，在等待某事件的过程中，继续做自己的事，不需要等待这一事件完成后再工作。线程是异步实现的一个方式。</p><h4 id="同步与异步的优缺点："><a href="#同步与异步的优缺点：" class="headerlink" title="同步与异步的优缺点："></a>同步与异步的优缺点：</h4><p>同步可以避免出现死锁，读脏数据的发生。一般共享某一资源的时候，如果每个人都有修改权限，同时修改一个文件，有可能使一个读取另一个人已经删除了内容，就会出错，同步就不会出错。但，同步需要等待资源访问结束，浪费时间，效率低。</p><p>异步可以提高效率，但，安全性较低。</p><h3 id="js单线程为什么会有’异步’问题"><a href="#js单线程为什么会有’异步’问题" class="headerlink" title="js单线程为什么会有’异步’问题"></a>js单线程为什么会有’异步’问题</h3><p>js是同步的？<br>是的，单线程，那肯定只能同步(排队)执行咯</p><p>js为什么需要异步?<br>如果JS中不存在异步,只能自上而下执行,万一上一行解析时间很长,那么下面的代码就会被阻塞。 对于用户而言,阻塞就意味着”卡死”,这样就导致了很差的用户体验</p><p>js单线程又是如何实现异步的呢?<br>通过事件循环(event loop) 实现’异步’</p><p>经典问题：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;1&#x27;</span>)<br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;2&#x27;</span>)<br>&#125;,<span class="hljs-number">0</span>)<br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;3&#x27;</span>)  <br><span class="hljs-comment">//       1，3，2</span><br></code></pre></td></tr></table></figure><p>也就是说,setTimeout里的函数并没有立即执行,而是延迟了一段时间,满足一定条件后,才去执行的,这类代码,我们叫异步代码。</p><p>所以,这里我们首先知道了JS里的一种分类方式,就是将任务分为: 同步任务和异步任务</p><p><img src="/image/23.png" alt="如图"></p><p>虽然JS是单线程的但是浏览器的内核是多线程的，在浏览器的内核中不同的异步操作由不同的浏览器内核模块调度执行，异步操作会将相关回调添加到任务队列中。而不同的异步操作添加到任务队列的时机也不同，如 onclick, setTimeout, ajax 处理的方式都不同，这些异步操作是由浏览器内核的 webcore 来执行的，webcore 包含上图中的3种 webAPI，分别是 DOM Binding、network、timer模块。</p><p>按照这种分类方式:JS的执行机制是</p><p>首先判断js代码是同步还是异步,同步就进入主进程,异步就进入event table<br>异步任务在event table中注册函数,当满足触发条件后,被推入event queue<br>同步任务进入主线程后一直执行,直到主线程空闲时,才会去event queue中查看是否有可执行的异步任务,如果有就推入主进程中 以上三步循环执行,这就是event loop<br>总结：同步可以保证顺序一致，但是容易导致阻塞；异步可以解决阻塞问题，但是会改变顺序性，根据不同的需要去写你的代码。</p><h4 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h4><p><a href="https://juejin.cn/post/6844903810263941134">前端面试：js同步与异步问题</a></p><p><a href="https://www.cnblogs.com/sunshine-blog/p/8392576.html">《计算机操作系统》总结（三）—同步与异步</a></p>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>JS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javascript闭包</title>
    <link href="/2021/04/26/JS%E9%97%AD%E5%8C%85%E7%90%86%E8%A7%A3/"/>
    <url>/2021/04/26/JS%E9%97%AD%E5%8C%85%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>闭包并不是需要学习新的语法才能使用的工具。闭包的产生是基于词法作用域写代码时自然产生的结果。换句话说，你不需要要为了闭包而写闭包，闭包在我们写的代码中随处可见。当你真正了解闭包之后，会发现，哦~，原来我以前所敲的代码中已经出现了很多闭包！</p><hr><h3 id="一个小-demo"><a href="#一个小-demo" class="headerlink" title="一个小 demo"></a>一个小 demo</h3><p>仔细看看下面的例子我们会感到奇怪，明明都是调用result(),为什么结果会不一样呢？</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> count=<span class="hljs-number">500</span> <span class="hljs-comment">//全局作用域</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo1</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;<span class="hljs-comment">//函数全局作用域</span><br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo2</span>(<span class="hljs-params"></span>) </span>&#123;<br>    count++;<span class="hljs-comment">//函数内部作用域</span><br>    <span class="hljs-built_in">console</span>.log(count);<br>    <span class="hljs-keyword">return</span> count;<br>  &#125;<br>  <span class="hljs-keyword">return</span> foo2;<span class="hljs-comment">//返回函数</span><br>&#125;<br><span class="hljs-keyword">let</span> result = foo1();<br>result();<span class="hljs-comment">//结果为1</span><br>result();<span class="hljs-comment">//结果为2</span><br></code></pre></td></tr></table></figure><p>首先foo1()返回的是一个foo2()函数,当我们调用result()的时候就会返回foo2()执行的函数,foo2()里面有什么呢? 首先我们看到如下有一个count变量,但是没有定义.我们根据JavaScript的作用域链的定义可知,当函数内部的变量没有定义的时候,就会采用冒泡的方式,向上一级寻找.上一级没有接着上一级找,直到最顶层window. 如果都没有,就会报undefined的错误.这里我们在foo1()中找到了count,于是count+1,第一次输出的是1,没有什么问题.</p><p>但是第二次我们再执行result()的时候就出现了问题,为什么会是2呢?按照流程,首先再foo2()函数内部寻找count,没有然后到外层寻找,找到了count=0,这时候count+1应该为1才对.这里就涉及到闭包的问题了.</p><p>！<a href="/image/22.png">debugger</a></p><p>首先我们在原来的代码中加一个debugger,然后到谷歌浏览器右键检查,点击sources就可以看到右边有一个Closure,浏览器的可视化已经证实了这的确是一个闭包.并且count=1已经存储在了Closure之中.也就说明count=1没有被销毁,等下次在调用result()的时候count=2.</p><h3 id="认识作用域"><a href="#认识作用域" class="headerlink" title="认识作用域"></a>认识作用域</h3><p>作用域包括：</p><ol><li>全局作用域</li><li>函数作用域</li><li>块级作用域(es6 新出,解决 var 问题, 新增 let, const)</li></ol><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">var</span> <span class="hljs-keyword">count</span> = 100; <span class="hljs-comment">//全局作用域</span><br> function foo1() &#123;<br>   <span class="hljs-keyword">var</span> <span class="hljs-keyword">count</span> = 0; <span class="hljs-comment">//函数全局作用域</span><br>   <span class="hljs-keyword">return</span> <span class="hljs-keyword">count</span>; <span class="hljs-comment">//返回函数</span><br> &#125;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">count</span> == 1) &#123;<br>   <span class="hljs-comment">//块级作用域</span><br>   console.<span class="hljs-built_in">log</span>(<span class="hljs-keyword">count</span>);<br> &#125;<br></code></pre></td></tr></table></figure><p>上面代码简单可以看出作用域分类,需要注意是,一个函数(function)也是块级作用域,简单来说,一般有 {}都可以算做是一个块级作用域.</p><h3 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h3><p>作用域里面嵌套作用域,就形成了作用域链. 外部作用域无法访问内部的作用域,看如下例子</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs stylus">function foo()&#123;<br><span class="hljs-selector-tag">var</span> n=<span class="hljs-number">1</span><br>function foo2()&#123;<br>  <span class="hljs-selector-tag">var</span> m=<span class="hljs-number">1</span><br>  console<span class="hljs-selector-class">.log</span>(n) <span class="hljs-comment">//1</span><br>&#125;<br><span class="hljs-function"><span class="hljs-title">foo2</span><span class="hljs-params">()</span></span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-title">foo</span><span class="hljs-params">()</span></span><br>console<span class="hljs-selector-class">.log</span>(n) <span class="hljs-comment">//err: n is not defined</span><br></code></pre></td></tr></table></figure><p>上述代码中在全局中无法访问内部的n,但是在嵌套的内部foo2()可以访问外部的函数,这就是作用域产生的特殊效果.</p><p>明白了作用域链,我们再来看个例子(很有迷惑性,仔细看看哦):</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">var name = <span class="hljs-string">&#x27;Mike&#x27;</span>; <span class="hljs-regexp">//</span>第一次定义name<br> <span class="hljs-keyword">function</span> showName() &#123;<br>   console.log(name);  <span class="hljs-regexp">//</span>输出 Mike 还是 Jay ？     <br> &#125;<br><br> <span class="hljs-keyword">function</span> changeName() &#123;<br>   var name = <span class="hljs-string">&#x27;Jay&#x27;</span>; <span class="hljs-regexp">//</span>重新定义name<br>   showName(); <span class="hljs-regexp">//</span>调用showName()<br> &#125;<br> changeName();<span class="hljs-regexp">//</span>Mike<br><br></code></pre></td></tr></table></figure><p>以上两个输出的均为Mike,在这里我们引出了一个新的概念,词法作用域 作用域有两种模型:</p><ul><li>词法作用域（静态）：js查找是按照代码书写时候的位置来决定的，而不是按照调用时候位置</li><li>动态作用域：目前还有使用的有Perl，Bash (可以自行了解)</li></ul><ol><li>调用changeName()时,找到这个函数</li><li>定义var name = “Jay”</li><li>调用showName()</li><li>在changeName()里面查找是否有showName()这个方法,发现没有,向外层查找,找到了</li><li>调用console.log(name),在函数内部查找有没有name,没有,向外查找,找到了,name=”Mike”</li><li>输出Mike</li></ol><h2 id="闭包：闭包就是能够读取其他函数内部变量的函数"><a href="#闭包：闭包就是能够读取其他函数内部变量的函数" class="headerlink" title="闭包：闭包就是能够读取其他函数内部变量的函数"></a>闭包：闭包就是能够读取其他函数内部变量的函数</h2><h3 id="使用闭包的注意点"><a href="#使用闭包的注意点" class="headerlink" title="使用闭包的注意点"></a>使用闭包的注意点</h3><p>1）由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大，所以不能滥用闭包，否则会造成网页的性能问题，在IE中可能导致内存泄露。解决方法是，在退出函数之前，将不使用的局部变量全部删除。</p><p>2）闭包会在父函数外部，改变父函数内部变量的值。所以，如果你把父函数当作对象（object）使用，把闭包当作它的公用方法（Public Method），把内部变量当作它的私有属性（private value），这时一定要小心，不要随便改变父函数内部变量的值。</p><h3 id="闭包的用途"><a href="#闭包的用途" class="headerlink" title="闭包的用途"></a>闭包的用途</h3><p>闭包可以用在许多地方。它的最大用处有两个，一个是前面提到的可以读取函数内部的变量，另一个就是让这些变量的值始终保持在内存中。<br>怎么来理解这句话呢？请看下面的代码。<br>Js代码</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f1</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">var</span> n = <span class="hljs-number">999</span>;<br>nAdd = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>&#123;<br>n += <span class="hljs-number">1</span>;<br>&#125;;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f2</span><span class="hljs-params">()</span> </span>&#123;<br>alert(n);<br>&#125;<br><span class="hljs-keyword">return</span> f2;<br>&#125;<br><span class="hljs-keyword">var</span> result = f1();<br>result(); <span class="hljs-comment">// 999</span><br>nAdd();<br>result(); <span class="hljs-comment">// 1000</span><br></code></pre></td></tr></table></figure><p>在这段代码中，result实际上就是闭包f2函数。它一共运行了两次，第一次的值是999，第二次的值是1000。这证明了，函数f1中的局部变量n一直保存在内存中，并没有在f1调用后被自动清除。</p><p>为什么会这样呢？原因就在于f1是f2的父函数，而f2被赋给了一个全局变量，这导致f2始终在内存中，而f2的存在依赖于f1，因此f1也始终在内存中，不会在调用结束后，被垃圾回收机制（garbage collection）回收。</p><p>这段代码中另一个值得注意的地方，就是“nAdd=function(){n+=1}”这一行，首先在nAdd前面没有使用var关键字，因此 nAdd是一个全局变量，而不是局部变量。其次，nAdd的值是一个匿名函数（anonymous function），而这个</p><p>匿名函数本身也是一个闭包，所以nAdd相当于是一个setter，可以在函数外部对函数内部的局部变量进行操作。</p><h4 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h4><p><a href="https://juejin.cn/post/6844904161268482062#heading-4">javascript 近乎神话般的概念：闭包</a></p><p><a href="https://my.oschina.net/u/3693769/blog/1544436">JavaScript 闭包</a></p>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>JS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MVC&amp;MVVM</title>
    <link href="/2021/04/26/MVC&amp;MVVM%E7%90%86%E8%A7%A3/"/>
    <url>/2021/04/26/MVC&amp;MVVM%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>MVVM和MVC总结</p><hr><h3 id="什么是MVVM？"><a href="#什么是MVVM？" class="headerlink" title="什么是MVVM？"></a>什么是MVVM？</h3><p>MVVM 由 Model、View、ViewModel 三部分构成</p><ol><li>View 层</li></ol><p>View 是视图层，也就是用户界面。前端主要由 HTML 和 CSS 来构建 。</p><ol start="2"><li><p>Model 层<br>Model 是指数据模型，泛指后端进行的各种业务逻辑处理和数据操控，对于前端来说就是后端提供的 api 接口。</p></li><li><p>ViewModel 是一个同步View 和 Model的对象；</p></li></ol><p><img src="/image/20.1.png" alt="MVVM"></p><p>MVVM 的核心是 ViewModel 层，它就像是一个中转站（value converter），负责转换 Model 中的数据对象来让数据变得更容易管理和使用，该层向上与视图层进行双向数据绑定，向下与 Model 层通过接口请求进行数据交互，起呈上启下作用</p><p>ViewModel 通过双向数据绑定把 View 层和 Model 层连接了起来，而 View 和 Model 之间的同步工作完全是自动的，无需人为干涉，因此开发者只需关注业务逻辑，不需要手动操作 DOM, 不需要关注数据状态的同步问题，复杂的数据状态维护完全由 MVVM 来统一管理。</p><h3 id="什么是MVC"><a href="#什么是MVC" class="headerlink" title="什么是MVC"></a>什么是MVC</h3><p>MVC是Model-View-Controller的缩写，即模型—视图—控制器</p><ul><li>Model：后端传递的 数据 。</li><li>View：所看到的 页面 。</li><li>Controller：页面 业务逻辑 。</li></ul><ol><li>MVC是 单向通信。即View和Model，必须通过Controller来承上启下。</li><li>使用MVC的 目的 就是 将M和V的代码分离 。</li></ol><h3 id="MVC和MVVM的区别"><a href="#MVC和MVVM的区别" class="headerlink" title="MVC和MVVM的区别"></a>MVC和MVVM的区别</h3><p>mvc 和 mvvm 都是一种设计思想。主要就是 把mvc 中 Controller 演变成 mvvm 中的viewModel。MVC和MVVM的区别并不是VM完全取代了C，只是在MVC的基础上增加了一层VM，只不过是弱化了C的概念，ViewModel存在目的在于抽离Controller中展示的业务逻辑，而不是替代Controller，其它视图操作业务等还是应该放在Controller中实现。</p><h4 id="mvvm-主要解决了-mvc-中大量的-DOM-操作使页面渲染性能降低，加载速度变慢，影响用户体验的缺点。当-Model-频繁发生变化，开发者都需要主动更新到-View-。MVVM实现的是业务逻辑组件的重用，使开发更高效，结构更清晰，增加代码的复用性。"><a href="#mvvm-主要解决了-mvc-中大量的-DOM-操作使页面渲染性能降低，加载速度变慢，影响用户体验的缺点。当-Model-频繁发生变化，开发者都需要主动更新到-View-。MVVM实现的是业务逻辑组件的重用，使开发更高效，结构更清晰，增加代码的复用性。" class="headerlink" title="mvvm 主要解决了 mvc 中大量的 DOM 操作使页面渲染性能降低，加载速度变慢，影响用户体验的缺点。当 Model 频繁发生变化，开发者都需要主动更新到 View 。MVVM实现的是业务逻辑组件的重用，使开发更高效，结构更清晰，增加代码的复用性。"></a>mvvm 主要解决了 mvc 中大量的 DOM 操作使页面渲染性能降低，加载速度变慢，影响用户体验的缺点。当 Model 频繁发生变化，开发者都需要主动更新到 View 。MVVM实现的是业务逻辑组件的重用，使开发更高效，结构更清晰，增加代码的复用性。</h4><h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><p><a href="https://juejin.cn/post/6844903918753808398#heading-20">什么是 MVVM？</a></p><p><a href="https://zhuanlan.zhihu.com/p/192341615">知乎</a></p>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>豆瓣&amp;搜索页面布局&amp;详情评分bug解决</title>
    <link href="/2021/04/25/%E5%BE%AE%E4%BF%A1%E8%B1%86%E7%93%A3%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0(%E5%85%AD)/"/>
    <url>/2021/04/25/%E5%BE%AE%E4%BF%A1%E8%B1%86%E7%93%A3%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0(%E5%85%AD)/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV17p4y1b7eP">项目视频演示地址</a></p><hr><h3 id="搜索页面样式布局完成"><a href="#搜索页面样式布局完成" class="headerlink" title="搜索页面样式布局完成"></a>搜索页面样式布局完成</h3><p>要完成样式</p><p><img src="/image/19.11.png" alt="页面样式"></p><ol><li>search.wxml</li></ol><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cos">&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;item-list-group&quot;</span>&gt;<br>&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;item-group&quot;</span>&gt;<br>&lt;image  src=<span class="hljs-string">&quot;https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2635676317.webp&quot;</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;thumbnail&quot;</span>&gt;&lt;/image&gt;<br>&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;info-group&quot;</span>&gt;<br>&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;六人-泰坦尼克上的中国幸存者&lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;rate-year&quot;</span>&gt;<span class="hljs-number">8.5</span>分/<span class="hljs-number">2020</span>&lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;/<span class="hljs-keyword">view</span>&gt;<br></code></pre></td></tr></table></figure><ol start="2"><li>search.wxss</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.item-list-group</span>&#123;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10</span>rpx  <span class="hljs-number">20</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.item-list-group</span>  <span class="hljs-selector-class">.item-group</span>&#123;<br>  <span class="hljs-attribute">padding</span>:<span class="hljs-number">10</span>rpx <span class="hljs-number">0</span>;<br>  <span class="hljs-comment">/* 底部分割线 */</span><br>  <span class="hljs-attribute">border-bottom</span>:<span class="hljs-number">1px</span>  solid <span class="hljs-number">#e4e4e4</span>;<br>  <span class="hljs-comment">/* 左右分布布局 */</span><br>  <span class="hljs-attribute">display</span>: flex;<br>&#125;<br><span class="hljs-selector-class">.item-group</span> <span class="hljs-selector-class">.thumbnail</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">80</span>rpx;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100</span>rpx;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.item-group</span> <span class="hljs-selector-class">.info-group</span>&#123;<br>  <span class="hljs-attribute">flex</span>:<span class="hljs-number">1</span>;<br>  <span class="hljs-attribute">display</span>:flex;<br>  <span class="hljs-attribute">flex-direction</span>: column;<br>  <span class="hljs-attribute">justify-content</span>: space-between;<br>&#125;<br><br><span class="hljs-selector-class">.info-group</span> <span class="hljs-selector-class">.title</span>&#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.info-group</span> <span class="hljs-selector-class">.rate-year</span>&#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32</span>rpx;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#7b7b7b</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>样式渲染完成，采用flex布局</p><h3 id="搜索功能实现"><a href="#搜索功能实现" class="headerlink" title="搜索功能实现"></a>搜索功能实现</h3><ol><li>搜索请求实现</li></ol><p>分析：1.在输入框中输入输入文字，那么就应该要获取到输入框中的文字了，但是输入框是单独放在<br>一个searchbar组件中，我们要获取的话没有那么方便   </p><p> 2.解决：在组件中监听输入框中input事件，将监听到的input输入框中输入的东西及时反馈，然后组件监听得到后再区触发另外一个事件，这样就可以传到外面了。</p><ol start="2"><li>代码实现</li></ol><p>bindinput事件是只要你在输入框中新增删除文字它都会去执行事件</p><p><img src="/image/19.13.png" alt="绑定事件"></p><p>searchbar.js</p><p>方法实现，组件主要复制将信息传递出去，执行在search中，这样职责划分更明确</p><p><img src="/image/19.14.png" alt="绑定事件"></p><p>search.wxml绑定查找事件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">searchbar</span>  <span class="hljs-attr">bindsearchinput</span>=<span class="hljs-string">&quot;onSearchInputEvent&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">searchbar</span>&gt;</span><br></code></pre></td></tr></table></figure><p>serch.js监听事件</p><p><img src="/image/19.15.png" alt="绑定事件"></p><p>此时控制台type类型变为searchinput类型,能够得到用户输入的值</p><ol start="3"><li>发送网路请求url</li></ol><p>url.js</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">searchUrl: <span class="hljs-keyword">function</span> <span class="hljs-title"></span>(q) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-type">&quot;https://m.douban.com/rexxar/api/v2/search?type=movie&amp;q=&quot;</span> + q<br>&#125;<br></code></pre></td></tr></table></figure><p>network.js</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-comment">// 搜索item</span><br>getSearch:function(<span class="hljs-keyword">params</span>)&#123;<br>  <span class="hljs-built_in">var</span> q =<span class="hljs-keyword">params</span>.q;<br>  <span class="hljs-built_in">var</span>  url = globalurls.searchUrl(q);<br>  wx.request(&#123;<br>    url: url,<br>    success:function(res)&#123;<br>      <span class="hljs-comment">// console.log(res);</span><br>      <span class="hljs-built_in">var</span>  subjects = res.<span class="hljs-built_in">data</span>.subjects;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">params</span>.success)&#123;<br>        <span class="hljs-keyword">params</span>.success(subjects);<br>      &#125;<br>    &#125;<br>  &#125;)<br>&#125;<br><br></code></pre></td></tr></table></figure><p>search.js</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">onSearchInputEvent:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span></span>&#123;<br><span class="hljs-keyword">var</span>  that= <span class="hljs-keyword">this</span>;<br><span class="hljs-comment">// console.log(event)</span><br><span class="hljs-keyword">var</span>  value = event.detail.value;<br>network.getSearch(&#123;<br>  q:value,<br>  success:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(subjects)</span></span>&#123;<br>        that.setData(&#123;<br>          subjects:subjects<br>        &#125;)<br>  &#125;<br>&#125;)<br>&#125;,<br></code></pre></td></tr></table></figure><p>因豆瓣Api限制访问，经常请求不到数据</p><p><img src="/image/19.12.png" alt="能够搜索"></p><ol start="4"><li>此时能够拿到数据，我们将数据渲染到页面</li></ol><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">searchbar</span>  <span class="hljs-attr">bindsearchinput</span>=<span class="hljs-string">&quot;onSearchInputEvent&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">searchbar</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-list-group&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">wx:for</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">subjects</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span></span></span><br><span class="xml"> class=&quot;item-group&quot;  wx:key =&quot;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.id</span>&#125;&#125;</span><span class="xml">&quot;</span><br><span class="xml"> <span class="hljs-comment">&lt;!-- 绑定了一个点击事件，这样点击item可以跳转到详情页面中 --&gt;</span></span><br><span class="xml"> bindtap=&quot;onItemTapEvent&quot;  data-id=&quot;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.id</span>&#125;&#125;</span><span class="xml">&quot; &gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">image</span>  <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.pic.normal</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;thumbnail&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;info-group&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.title</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;rate-year&quot;</span>&gt;</span> </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.rating.value</span>&#125;&#125;</span><span class="xml">分</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.year</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>绑定了一个点击事件，这样点击item可以跳转到详情页面中,同时获取id</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">bindtap</span>=<span class="hljs-string">&quot;onItemTapEvent&quot;</span>  <span class="hljs-class"><span class="hljs-keyword">data</span>-id=&quot;&#123;&#123;<span class="hljs-title">item</span>.<span class="hljs-title">id</span>&#125;&#125;&quot;</span><br></code></pre></td></tr></table></figure><p>search.js</p><figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gml">onItemTapEvent:<span class="hljs-keyword">function</span>(event)&#123;<br>   <span class="hljs-comment">// console.log(event)</span><br>   <span class="hljs-keyword">var</span> <span class="hljs-symbol">id</span> = event.currentTarget.dataset.<span class="hljs-symbol">id</span>;<br>   <span class="hljs-comment">// 跳转到某一个页面</span><br>   wx.navigateTo(&#123;<br>     url: <span class="hljs-string">&#x27;/pages/detail/detail?type=movie&amp;id=&#x27;</span>+<span class="hljs-symbol">id</span>,<br>   &#125;)<br> &#125;<br></code></pre></td></tr></table></figure><p>至此，点击电影也可以跳转到详情页面了</p><h3 id="历史搜索记录布局"><a href="#历史搜索记录布局" class="headerlink" title="历史搜索记录布局"></a>历史搜索记录布局</h3><p><img src="/image/19.16.png" alt="要完成的样式"></p><p>search.wxml</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cos">&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;history-list-group&quot;</span>&gt;<br>&lt;<span class="hljs-keyword">view</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;history-title&quot;</span>&gt;<br>&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;历史记录&lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;clear&quot;</span>&gt;清除&lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;navigator  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;history-group&quot;</span>&gt;泰坦尼克号&lt;/navigator&gt;<br>&lt;/<span class="hljs-keyword">view</span>&gt;<br></code></pre></td></tr></table></figure><p>search.wxss</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.history-list-group</span>&#123;<br>  <span class="hljs-attribute">padding</span>:<span class="hljs-number">10</span>rpx <span class="hljs-number">20</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.history-list-group</span> <span class="hljs-selector-class">.history-title</span>&#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: space-between;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20</span>rpx  <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-number">#f9f9f9</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">28</span>rpx;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#9e9e9e</span>;<br>&#125;<br><span class="hljs-selector-class">.history-list-group</span>  <span class="hljs-selector-class">.history-group</span>&#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32</span>rpx;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20</span>rpx <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">border-bottom</span>:<span class="hljs-number">1px</span>  solid  <span class="hljs-number">#e4e4e4</span><br>&#125;<br><br></code></pre></td></tr></table></figure><p>优化：history-group可以将它变为一个navigator组件，因为历史搜索是不需要任何操作的，可以直接从本地读取</p><h4 id="历史记录功能实现"><a href="#历史记录功能实现" class="headerlink" title="历史记录功能实现"></a>历史记录功能实现</h4><p>由于豆瓣api次数限制控制，搜索有时候请求不到，故这里并未实现</p><p><a href="https://study.163.com/course/courseLearn.htm?courseId=1208961810#/learn/video?lessonId=1278472316&courseId=1208961810">学习思路</a></p><h3 id="详情评分bug解决"><a href="#详情评分bug解决" class="headerlink" title="详情评分bug解决"></a>详情评分bug解决</h3><p>所有电影，综艺，电视剧评分均为9.7，因为我们这里写成固定的了</p><p><img src="/image/19.17.png" alt="rate"></p><p>代码修改</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">stars</span> <span class="hljs-attr">rate</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.rating.value</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">stars</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><img src="/image/19.18.png" alt="问题"></p><p>评论的评分是能够接收的，同理上面的星星评分也是能设置进来的。</p><p>分析：stars.js中代码问题</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">  lifetimes:&#123;<br>attached:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>&#123;<br>  <span class="hljs-keyword">this</span>.updateRate();<br>&#125;<br>  &#125;<br></code></pre></td></tr></table></figure><p>问题原因：attached生命周期函数执行时，rate还没有设置进来，因为rate是通过网络请求加载出来的，需要时间加载进来，所以这时候rate为0默认值。</p><p>解决</p><p>stars.js</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs axapta">  properties: &#123;<br>  rate:&#123;<br>        type:Number,<br>        value:<span class="hljs-number">0</span>,<br>        observer: function(newVal, oldVal,changePath) &#123;<br>          <span class="hljs-comment">// 属性值变化时执行,newVal就是新设置的数据，old是旧数据</span><br>          <span class="hljs-keyword">this</span>.updateRate();<br>        &#125;<br>      &#125; <br>      &#125;,<br>methods: &#123;<br>updateRate:function()&#123;<br>  <span class="hljs-built_in">var</span>  that = <span class="hljs-keyword">this</span>;<br>  <span class="hljs-built_in">var</span>  rate= that.properties.rate;<br>  <span class="hljs-built_in">var</span>  inRate = parseInt(rate);<br>  <span class="hljs-built_in">var</span>  light = parseInt(rate/<span class="hljs-number">2</span>);<br>  <span class="hljs-built_in">var</span>  half = inRate%<span class="hljs-number">2</span>;<br>  <span class="hljs-built_in">var</span>  gray  = <span class="hljs-number">5</span>-light-half;<br>  <span class="hljs-built_in">var</span> lights = [];<br>  <span class="hljs-built_in">var</span>  halfs = [];<br>  <span class="hljs-built_in">var</span>  grays = [];<br>  <span class="hljs-comment">// for循环遍历存放到数组中</span><br>  <span class="hljs-keyword">for</span>(<span class="hljs-built_in">var</span>  <span class="hljs-keyword">index</span>=<span class="hljs-number">1</span>;<span class="hljs-keyword">index</span>&lt;=light;<span class="hljs-keyword">index</span>++)&#123;<br>    lights.push(<span class="hljs-keyword">index</span>);<br>  &#125;<br>  <span class="hljs-keyword">for</span>(<span class="hljs-built_in">var</span>  <span class="hljs-keyword">index</span>=<span class="hljs-number">1</span>;<span class="hljs-keyword">index</span>&lt;=half;<span class="hljs-keyword">index</span>++)&#123;<br>    halfs.push(<span class="hljs-keyword">index</span>);<br>  &#125;<br>  <span class="hljs-keyword">for</span>(<span class="hljs-built_in">var</span>  <span class="hljs-keyword">index</span>=<span class="hljs-number">1</span>;<span class="hljs-keyword">index</span>&lt;=gray;<span class="hljs-keyword">index</span>++)&#123;<br>    grays.push(<span class="hljs-keyword">index</span>);<br>  &#125;<br>  <span class="hljs-comment">// 评分设置</span><br>  <span class="hljs-built_in">var</span>   ratetext = rate &amp;&amp; rate&gt;<span class="hljs-number">0</span>?rate.toFixed(<span class="hljs-number">1</span>):<span class="hljs-string">&quot;未评分&quot;</span><br>  <span class="hljs-comment">//数组获取到后 修改 data 中的值</span><br>  that.setData(&#123;<br>    lights:lights,<br>    halfs:halfs,<br>    grays:grays,<br>    ratetext:ratetext,<br>  &#125;);<br>&#125;<br>&#125;,<br><br>lifetimes:&#123;<br>attached:function()&#123;<br>  <span class="hljs-keyword">this</span>.updateRate();<br>  &#125;<br> &#125;<br></code></pre></td></tr></table></figure><p>至此，问题解决了</p><blockquote><p>问题的核心元素是：代码之前执行是放在一个attached中，这个函数是被加载到页面中才会去执行，加载到页面中我们的数据没有从网络中请求到，这时候数据就是默认的0，我们可以用observer函数，一旦监听到改变了评分的值，就可以重新设置一下这个值。</p></blockquote><p><img src="/image/19.20.png" alt="星星加载成功"></p><h4 id="项目Github地址"><a href="#项目Github地址" class="headerlink" title="项目Github地址"></a><a href="https://github.com/Pengzhenglong/doubanxiaochengxu">项目Github地址</a></h4>]]></content>
    
    
    <categories>
      
      <category>WX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>WX</tag>
      
      <tag>小程序</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>豆瓣&amp;评论列表页实现</title>
    <link href="/2021/04/24/%E5%BE%AE%E4%BF%A1%E8%B1%86%E7%93%A3%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0(%E4%BA%94)/"/>
    <url>/2021/04/24/%E5%BE%AE%E4%BF%A1%E8%B1%86%E7%93%A3%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0(%E4%BA%94)/</url>
    
    <content type="html"><![CDATA[<hr><h2 id="评论列表页实现"><a href="#评论列表页实现" class="headerlink" title="评论列表页实现"></a>评论列表页实现</h2><p><img src="/image/19.png" alt="实现点击该页面跳转后"></p><h3 id="完成布局和样式"><a href="#完成布局和样式" class="headerlink" title="完成布局和样式"></a>完成布局和样式</h3><ol><li>先创建comment页面app.json中</li></ol><p>可以将该页面放在第一位,这样方便后面调试页面在第一页</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-string">&quot;pages/comment/comment&quot;</span>,<br></code></pre></td></tr></table></figure><p>ctrl+s保存后生成页面</p><ol start="2"><li>comment.wxml代码</li></ol><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-group&quot;</span></span></span><br><span class="xml">bindtap=&quot;onItemTapEvent&quot;&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">image</span>    <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;thumbnail&quot;</span>  <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">thumbnail</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-title&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">title</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">text</span>   <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-rate&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">rate</span>&#125;&#125;</span><span class="xml">分<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><br></code></pre></td></tr></table></figure><ol start="3"><li>comment.wxss样式</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.container</span>&#123;<br>  <span class="hljs-attribute">padding</span>:<span class="hljs-number">20</span>rpx  <span class="hljs-number">30</span>rpx;<br>&#125;<br><br><span class="hljs-selector-class">.item-group</span>&#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: flex-start;<br>  <span class="hljs-attribute">align-items</span>: center;<br>&#125;<br><br><span class="hljs-selector-class">.item-group</span> <span class="hljs-selector-class">.thumbnail</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">40</span>rpx;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">50</span>rpx;<br>  <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">10</span>rpx;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10</span>rpx;<br>&#125;<br><br><span class="hljs-selector-class">.item-group</span>  <span class="hljs-selector-class">.item-title</span>&#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32</span>rpx;<br>  <span class="hljs-attribute">color</span> : <span class="hljs-number">#41be57</span>;<br>  <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">10</span>rpx;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10</span>rpx;<br>&#125;<br><br><span class="hljs-selector-class">.item-group</span>  <span class="hljs-selector-class">.item-rate</span>&#123;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">28</span>rpx;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#ccc</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>完成后效果</p><p><img src="/image/19.1.png" alt="样式"></p><ol start="4"><li>将comment页面降级，实现跳转功能</li></ol><p>app.json</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs n1ql">&quot;pages/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">index</span><span class="hljs-string">&quot;,</span><br><span class="hljs-string">&quot;</span>pages/comment/comment<span class="hljs-string">&quot;,</span><br></code></pre></td></tr></table></figure><ol start="5"><li>detail.wxml中实现跳转url</li></ol><p>url 中接收了从上一页传递到下一页的一些参数?后面的</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">navigator</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;more-comment&quot;</span> </span></span><br><span class="xml">url=&quot;/pages/comment/comment?id=</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">id</span>&#125;&#125;</span><span class="xml">&amp;type=</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">type</span>&#125;&#125;</span><span class="xml">&amp;thumbnail=</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.cover.image.small.url</span>&#125;&#125;</span><span class="xml">&amp;title=</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.title</span>&#125;&#125;</span><span class="xml">&amp;rate=</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.rating.value</span>&#125;&#125;</span><span class="xml">&quot; &gt;查看更多短评<span class="hljs-tag">&lt;/<span class="hljs-name">navigator</span>&gt;</span></span><br><br></code></pre></td></tr></table></figure><p>此时我们在comment.js中打印一下数据</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">onLoad: <span class="hljs-keyword">function</span> (<span class="hljs-keyword">options</span>) &#123;<br>  console.log(<span class="hljs-keyword">options</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>问题：没有打印id和type</p><p><img src="/image/19.2.png" alt="问题"></p><p>解决：detail.js中虽然获取到了type和id，但是没有保存</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">that.setData(&#123;<br><span class="hljs-built_in">id</span>:<span class="hljs-built_in">id</span>,<br><span class="hljs-built_in">type</span>:<span class="hljs-built_in">type</span><br>&#125;)<br></code></pre></td></tr></table></figure><ol start="6"><li>comment.js中保存数据</li></ol><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs livescript">onLoad: <span class="hljs-keyword">function</span> (options) &#123;<br>   <span class="hljs-keyword">var</span>  <span class="hljs-literal">that</span>=<span class="hljs-built_in">this</span>;<br>   <span class="hljs-literal">that</span>.setData(options);<br>&#125;<br></code></pre></td></tr></table></figure><ol start="7"><li>渲染数据</li></ol><p>修改以下数据，从url中获取的参数，渲染到页面，会根据点击实现数据的改变</p><p><img src="/image/19.3.png" alt="修改"></p><h3 id="点击完成页面跳转"><a href="#点击完成页面跳转" class="headerlink" title="点击完成页面跳转"></a>点击完成页面跳转</h3><ol><li>能够点击头像完成上一页的跳转</li></ol><p><img src="/image/19.4.png" alt="能够点击跳转"></p><p>分析：能够通过rul或js实现</p><ol start="2"><li>这里我们通过js实现,绑定一个点击事件</li></ol><p><img src="/image/19.5.png" alt="绑定一个点击事件"></p><ol start="3"><li>comment.js函数实现</li></ol><p>这里我们调用的是微信的Api,返回到上一页</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">onItemTapEvent:<span class="hljs-built_in">function</span>(event)&#123;<br>  wx.<span class="hljs-built_in">navigateBack</span>(&#123;&#125;)<br>&#125;,<br><br></code></pre></td></tr></table></figure><p>问题，这里返回到的是上一页的最下面，不是很好</p><p>解决： 在detail界面中加上一个滚动事件，一旦页面show出来了，就展示在最上面</p><p>detail.js</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 生命周期函数--监听页面显示</span><br><span class="hljs-comment"> */</span><br>onShow: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>&#123;<br>    wx.pageScrollTo(&#123;<br>      scrollTop:<span class="hljs-number">0</span>,<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>问题解决。</p><h3 id="加载评论数据"><a href="#加载评论数据" class="headerlink" title="加载评论数据"></a>加载评论数据</h3><ol><li><p>分析，影评和上面的标题的左右间距都一样，所以可以将它放在.container中</p></li><li><p>wxml代码</p></li></ol><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-comment">&lt;!-- 影评 --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment-title&quot;</span>&gt;</span>全部影评(</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">total</span>&#125;&#125;</span><span class="xml">)<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">onecomment</span> <span class="hljs-attr">wx:for</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">comments</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">onecomment</span>&gt;</span></span><br></code></pre></td></tr></table></figure><ol start="3"><li>wxss代码</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.comment-title</span>&#123;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">60</span>rpx;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">40</span>rpx;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="评论列表页面抽取注册成组件"><a href="#评论列表页面抽取注册成组件" class="headerlink" title="评论列表页面抽取注册成组件"></a>评论列表页面抽取注册成组件</h3><p><img src="/image/19.6.png" alt="分析"></p><p>评论的样式和布局之前已经在详情页中已经做了，我们在这里没有必要再写一遍，我们可以将之前评论的样式和布局单独抽取出来，做成一个组件，然后直接使用组件，非常方便。</p><ol><li><p>创建一个onecomment组件</p></li><li><p>将detail中的comment代码剪切到onecomment中</p></li></ol><p><img src="/image/19.7.png" alt="代码"></p><ol start="3"><li>将css代码剪切到onecomment中</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 左边固定，右边内容适配 */</span><br> <span class="hljs-selector-class">.comment-group</span>&#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: flex-start;<br>  <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">40</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.comment-group</span> <span class="hljs-selector-class">.left-comment</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">70</span>rpx;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.left-comment</span>  <span class="hljs-selector-class">.avatar</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">70</span>rpx;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">70</span>rpx;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;<br>&#125;<br><span class="hljs-selector-class">.comment-group</span>  <span class="hljs-selector-class">.right-comment</span>&#123;<br>  <span class="hljs-attribute">flex</span>:<span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-selector-class">.right-comment</span>   <span class="hljs-selector-class">.username-rate</span>&#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: flex-start;<br>  <span class="hljs-attribute">align-items</span>: center;<br>&#125;<br><span class="hljs-selector-class">.username-rate</span> <span class="hljs-selector-class">.username</span>&#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">36</span>rpx;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.release-time</span>&#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#b3b3b3</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32</span>rpx;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.content</span>&#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32</span>rpx;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#353535</span>;<br>  <span class="hljs-attribute">margin-top</span>:<span class="hljs-number">10</span>rpx;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="4"><li>再onecomment中设置一个属性，这样我们可以使用使数据显示</li></ol><p>onecomment.js</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">properties:</span> &#123;<br><span class="hljs-symbol">      item:</span>&#123;<br><span class="hljs-symbol">        type:</span>Object,<br><span class="hljs-symbol">        value:</span>&#123;&#125;<br>      &#125;<br>&#125;,<br></code></pre></td></tr></table></figure><p>onecomment.wxml代码</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment-group&quot;</span> &gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;left-comment&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">image</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;avatar&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.user.avatar</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml"> <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;right-comment&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;username-rate&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.user.name</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">stars</span>  <span class="hljs-attr">rate</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.rating.value</span>*<span class="hljs-number">2</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">starsize</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">istext</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">false</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">stars</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;release-time&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.create_time</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.comment</span>&#125;&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br></code></pre></td></tr></table></figure><ol start="5"><li>detail中使用先注册组件</li></ol><p>detail.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;usingComponents&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;stars&quot;</span>:<span class="hljs-string">&quot;/components/stars/stars&quot;</span>,<br>    <span class="hljs-attr">&quot;onecomment&quot;</span>:<span class="hljs-string">&quot;/components/onecomment/onecomment&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>detail.wxml中使用</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">onecomment</span>  <span class="hljs-attr">wx:for</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">comments</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">onecomment</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>其他样式和之前一样，但是出现了问题：星星样式没了</p><p>解决：再onecomment中注册stars组件</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;component&quot;</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">&quot;usingComponents&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;stars&quot;</span>:<span class="hljs-string">&quot;/components/stars/stars&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>完成。</p><h3 id="请求评论数据"><a href="#请求评论数据" class="headerlink" title="请求评论数据"></a>请求评论数据</h3><ol><li>comment.js</li></ol><p>请求数据，先导入network.js</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-keyword">import</span>  &#123;network&#125;  <span class="hljs-keyword">from</span>  <span class="hljs-string">&quot;../../utils/network.js&quot;</span>;<br><br>  onLoad: <span class="hljs-keyword">function</span> (options) &#123;<br>     <span class="hljs-keyword">var</span>  <span class="hljs-literal">that</span>=<span class="hljs-built_in">this</span>;<br>     <span class="hljs-literal">that</span>.setData(options);<br>    network.getItemComments(&#123;<br>      type:options.type,<br>      id:options.id,<br>      start:<span class="hljs-number">1</span>,<br>      count:<span class="hljs-number">20</span>,<br>      success:<span class="hljs-keyword">function</span>(data)&#123;<br>        <span class="hljs-keyword">var</span>  total = data.total;<br>        <span class="hljs-keyword">var</span>  comments = data.interests;<br>        <span class="hljs-literal">that</span>.setData(&#123;<br>          total:total,<br>          comments:comments<br>        &#125;)<br>      &#125;<br>    &#125;)<br>  &#125;,<br></code></pre></td></tr></table></figure><ol start="2"><li>comment中注册组件</li></ol><p>comment.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;usingComponents&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;onecomment&quot;</span>:<span class="hljs-string">&quot;/components/onecomment/onecomment&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>使用组件</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;usingComponents&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;onecomment&quot;</span>:<span class="hljs-string">&quot;/components/onecomment/onecomment&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>完成</p><h3 id="翻页按钮布局"><a href="#翻页按钮布局" class="headerlink" title="翻页按钮布局"></a>翻页按钮布局</h3><p>要完成样式</p><p><img src="/image/19.8.png" alt="样式"></p><ol><li>comment.wxml代码</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page-btn-group&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page-btn&quot;</span><span class="hljs-attr">bindtap</span>=<span class="hljs-string">&quot;onPrePageTap&quot;</span></span><br><span class="hljs-tag">&gt;</span>上一页<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page-btn&quot;</span><span class="hljs-attr">bindtap</span>=<span class="hljs-string">&quot;onNextPageTap&quot;</span></span><br><span class="hljs-tag">&gt;</span>下一页<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br></code></pre></td></tr></table></figure><ol start="2"><li>comment.wxss代码</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.page-btn-group</span>&#123;<br>  <span class="hljs-attribute">margin-top</span>:<span class="hljs-number">40</span>rpx;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">40</span>rpx;<br>  <span class="hljs-attribute">display</span>:flex;<br>  <span class="hljs-comment">/* 水平方向从左到右 */</span><br>  <span class="hljs-attribute">justify-content</span>: flex-start;<br>  <span class="hljs-comment">/* 垂直反向居中 */</span><br>  <span class="hljs-attribute">align-items</span>: center;<br>&#125;<br><br><span class="hljs-selector-class">.page-btn</span>&#123;<br>  <span class="hljs-attribute">flex</span>:<span class="hljs-number">1</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">60</span>rpx;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#898989</span>;<br>  <span class="hljs-attribute">border-color</span>:<span class="hljs-number">#898989</span>;<br>  <span class="hljs-attribute">line-height</span>:<span class="hljs-number">60</span>rpx;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="翻页功能实现"><a href="#翻页功能实现" class="headerlink" title="翻页功能实现"></a>翻页功能实现</h3><p>优化用户体验，从用户角度出发，给用户更好的体验</p><ol><li>点击绑定事件</li></ol><p><img src="/image/19.10.png" alt="绑定"></p><ol start="2"><li>comment.js实现</li></ol><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">import</span>  &#123;network&#125;  from  <span class="hljs-string">&quot;../../utils/network.js&quot;</span>;<br>Page(&#123;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * 页面的初始数据</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-keyword">data</span>: &#123;<br>      total:<span class="hljs-number">0</span>,<br>      start:<span class="hljs-number">1</span>,<br>      count:<span class="hljs-number">20</span><br>  &#125;,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * 生命周期函数--监听页面加载</span><br><span class="hljs-comment">   */</span><br>onLoad: function (options) &#123;<br>     <span class="hljs-keyword">var</span>  that=<span class="hljs-keyword">this</span>;<br>    that.setData(options);<br>    <span class="hljs-comment">// 传入的为第一页</span><br>    that.getComments(<span class="hljs-number">1</span>);<br>  &#125;,<br><span class="hljs-comment">// 传入一个start参数</span><br>getComments:function(start)&#123;<br><span class="hljs-keyword">var</span>  that= <span class="hljs-keyword">this</span>;<br><span class="hljs-keyword">var</span> type  = that.<span class="hljs-keyword">data</span>.type;<br><span class="hljs-keyword">var</span>  id = that.<span class="hljs-keyword">data</span>.id;<br><span class="hljs-comment">// loading判断用户点击是上一页还是下一页</span><br><span class="hljs-keyword">if</span>(start&gt;that.<span class="hljs-keyword">data</span>.start)&#123;<br>  that.setData(&#123;<br>    nextLoading:<span class="hljs-literal">true</span><br>  &#125;);<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>  that.setData(&#123;<br>    preLoading:<span class="hljs-literal">true</span><br>  &#125;);<br>&#125;<br>  network.getItemComments(&#123;<br>    type:type,<br>    id:id,<br>    start:start,<br>    count:<span class="hljs-number">20</span>,<br>    success:function(<span class="hljs-keyword">data</span>)&#123;<br>      <span class="hljs-keyword">var</span>  total = <span class="hljs-keyword">data</span>.total;<br>      <span class="hljs-keyword">var</span>  comments = <span class="hljs-keyword">data</span>.interests;<br>      that.setData(&#123;<br>        total:total,<br>        comments:comments,<br>        start:start,<br>        <span class="hljs-comment">// 数据请求完毕loading关闭</span><br>        preLoading:<span class="hljs-literal">false</span>,<br>        nextLoading:<span class="hljs-literal">false</span><br>      &#125;);<br>      <span class="hljs-comment">// 优化，点击下一页或上一页返回为最上面</span><br>        wx.pageScrollTo(&#123;<br>          scrollTop: <span class="hljs-number">0</span>,<br>        &#125;)<br>    &#125;<br>  &#125;)<br>&#125;,<br><span class="hljs-comment">// 返回上一页</span><br>  onItemTapEvent:function(event)&#123;<br>    wx.navigateBack(&#123;&#125;)<br>  &#125;,<br><span class="hljs-comment">// 上一页</span><br>  onPrePageTap:function(event)&#123;<br>    <span class="hljs-keyword">var</span>  that= <span class="hljs-keyword">this</span>;<br>    <span class="hljs-keyword">var</span>  oldStar= that.<span class="hljs-keyword">data</span>.start;<br>    <span class="hljs-keyword">var</span> count = that.<span class="hljs-keyword">data</span>.count;<br>    <span class="hljs-keyword">if</span>(oldStar-count&gt;<span class="hljs-number">0</span>)&#123;<br>        <span class="hljs-keyword">var</span>  start =  oldStar-count; <br>        that.getComments(start);<br>    &#125;<br>  &#125;,<br>  <span class="hljs-comment">// 下一页</span><br>  onNextPageTap:function(event)&#123;<br>      <span class="hljs-keyword">var</span>  that=<span class="hljs-keyword">this</span>;<br>      <span class="hljs-keyword">var</span> oldStart = that.<span class="hljs-keyword">data</span>.start;<br>      <span class="hljs-keyword">var</span>  start = oldStart+that.<span class="hljs-keyword">data</span>.count;<br>      that.getComments(start);<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>基本完成</p><p><img src="/image/19.9.png" alt="完成"></p>]]></content>
    
    
    <categories>
      
      <category>WX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>WX</tag>
      
      <tag>小程序</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>豆瓣&amp;详情页面固定样式完成&amp;详情页短评数据获取与渲染</title>
    <link href="/2021/04/23/%E5%BE%AE%E4%BF%A1%E8%B1%86%E7%93%A3%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0(%E5%9B%9B)/"/>
    <url>/2021/04/23/%E5%BE%AE%E4%BF%A1%E8%B1%86%E7%93%A3%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0(%E5%9B%9B)/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="详情页面固定样式完成"><a href="#详情页面固定样式完成" class="headerlink" title="详情页面固定样式完成"></a>详情页面固定样式完成</h3><h4 id="详情页面header完成"><a href="#详情页面header完成" class="headerlink" title="详情页面header完成"></a>详情页面header完成</h4><p>要完成的样式<br><img src="/image/18.png" alt="要完成的样式"></p><ol><li>创建detail页面</li></ol><p>app.json中,<strong>将detail放在最前面方便后面调试</strong></p><p><img src="/image/18.1.png" alt="保存生成detail页面"></p><ol start="2"><li>分析布局</li></ol><p><img src="/image/18.2.png" alt="分析"></p><ol start="3"><li>detail.wxml代码编写</li></ol><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;<span class="hljs-keyword">view</span> <span class="hljs-keyword">class</span>=&quot;item-header&quot;&gt;<br>  &lt;<span class="hljs-keyword">view</span> <span class="hljs-keyword">class</span>=&quot;item-title&quot;&gt; 肖申克的救赎(<span class="hljs-number">1994</span>) &lt;/<span class="hljs-keyword">view</span>&gt;<br>  &lt;<span class="hljs-keyword">view</span> <span class="hljs-keyword">class</span>=&quot;item-detail&quot;&gt;<br>    &lt;<span class="hljs-keyword">view</span> <span class="hljs-keyword">class</span>=&quot;left-detail&quot;&gt;<br>      &lt;<span class="hljs-keyword">view</span> <span class="hljs-keyword">class</span>=&quot;item-rate&quot;&gt;<br>        &lt;stars rate=&quot;9.7&quot;&gt;&lt;/stars&gt;<br>        &lt;<span class="hljs-type">text</span> <span class="hljs-keyword">class</span>=&quot;comment-persons&quot;&gt;<span class="hljs-number">203894</span>评价&lt;/<span class="hljs-type">text</span>&gt;<br>      &lt;/<span class="hljs-keyword">view</span>&gt;<br>      &lt;<span class="hljs-keyword">view</span> <span class="hljs-keyword">class</span>=&quot;item-sub-detail&quot;&gt;<br>        &lt;<span class="hljs-keyword">view</span> <span class="hljs-keyword">class</span>=&quot;item-type&quot;&gt; <span class="hljs-number">142</span>分钟 剧情 / 犯罪 &lt;/<span class="hljs-keyword">view</span>&gt;<br>        &lt;<span class="hljs-keyword">view</span> <span class="hljs-keyword">class</span>=&quot;item-show&quot;&gt; <span class="hljs-number">1994</span><span class="hljs-number">-10</span><span class="hljs-number">-14</span>(美国) &lt;/<span class="hljs-keyword">view</span>&gt;<br>        &lt;<span class="hljs-keyword">view</span> <span class="hljs-keyword">class</span>=&quot;item-actors&quot;&gt;<br>          导演: 弗兰克·德拉邦特/ 主演: 蒂姆·罗宾斯<br>        &lt;/<span class="hljs-keyword">view</span>&gt;<br>      &lt;/<span class="hljs-keyword">view</span>&gt;<br>    &lt;/<span class="hljs-keyword">view</span>&gt;<br>    &lt;<span class="hljs-keyword">view</span> <span class="hljs-keyword">class</span>=&quot;right-detail&quot;&gt;<br>      &lt;image<br>        src=&quot;https://img2.doubanio.com/view/photo/s_ratio_poster/public/p480747492.webp&quot;<br>      &gt;&lt;/image&gt;<br>    &lt;/<span class="hljs-keyword">view</span>&gt;<br>  &lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;/<span class="hljs-keyword">view</span>&gt;<br></code></pre></td></tr></table></figure><p>detail.wxss代码</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.item-header</span> &#123;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">60</span>rpx <span class="hljs-number">30</span>rpx;<br>&#125;<br><br><span class="hljs-selector-class">.item-header</span> <span class="hljs-selector-class">.item-title</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">50</span>rpx;<br>&#125;<br><br><span class="hljs-selector-class">.item-header</span> <span class="hljs-selector-class">.item-detail</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: space-between;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20</span>rpx;<br>&#125;<br><br><span class="hljs-selector-class">.item-detail</span> <span class="hljs-selector-class">.left-detail</span> &#123;<br>  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20</span>rpx;<br>&#125;<br><br><span class="hljs-selector-class">.left-detail</span> <span class="hljs-selector-class">.item-rate</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: flex-start;<br>  <span class="hljs-attribute">align-items</span>: center;<br>&#125;<br><br><span class="hljs-selector-class">.item-rate</span> <span class="hljs-selector-class">.comment-persons</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">28</span>rpx;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#ccc</span>;<br>  <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">20</span>rpx;<br>&#125;<br><br><span class="hljs-selector-class">.item-detail</span> <span class="hljs-selector-class">.right-detail</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">200</span>rpx;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">300</span>rpx;<br>&#125;<br><br><span class="hljs-selector-class">.right-detail</span> image &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>&#125;<br><br><span class="hljs-selector-class">.item-sub-detail</span> &#123;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">40</span>rpx;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32</span>rpx;<br>&#125;<br><br><span class="hljs-selector-class">.item-sub-detail</span> view &#123;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10</span>rpx;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>效果图</p><p><img src="/image/18.3.png" alt="效果图片"></p><h4 id="标签布局和样式完成"><a href="#标签布局和样式完成" class="headerlink" title="标签布局和样式完成"></a>标签布局和样式完成</h4><p><img src="/image/18.4.png" alt="样式"></p><p>detail.wxml代码</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;<span class="hljs-keyword">view</span> <span class="hljs-keyword">class</span>=&quot;item-tags&quot;&gt;<br>  &lt;<span class="hljs-keyword">view</span> <span class="hljs-keyword">class</span>=&quot;item-tags-title&quot;&gt;豆瓣成员常用标签&lt;/<span class="hljs-keyword">view</span>&gt;<br>  &lt;<span class="hljs-keyword">view</span> <span class="hljs-keyword">class</span>=&quot;item-tags-list&quot;&gt;<br>    &lt;<span class="hljs-type">text</span>&gt;黑色幽默&lt;/<span class="hljs-type">text</span>&gt;&lt;<span class="hljs-type">text</span>&gt;小人物&lt;/<span class="hljs-type">text</span>&gt;&lt;<span class="hljs-type">text</span>&gt;戏剧&lt;/<span class="hljs-type">text</span><br>    &gt;&lt;<span class="hljs-type">text</span>&gt;方言&lt;/<span class="hljs-type">text</span>&gt;&lt;<span class="hljs-type">text</span>&gt;中国大陆&lt;/<span class="hljs-type">text</span>&gt;&lt;<span class="hljs-type">text</span>&gt;人性&lt;/<span class="hljs-type">text</span><br>    &gt;&lt;<span class="hljs-type">text</span>&gt;剧情&lt;/<span class="hljs-type">text</span>&gt;<br>  &lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;/<span class="hljs-keyword">view</span>&gt;<br></code></pre></td></tr></table></figure><p>detail.wxss代码</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-selector-class">.item-tags-title</span>&#123;<br>  <span class="hljs-comment">/* 设置元素的下外边距 */</span><br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.item-tags</span>&#123;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">30</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.item-tags</span> <span class="hljs-selector-class">.item-tags-title</span>&#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#b3b3b3</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32</span>rpx;<br>  <span class="hljs-attribute">margin-bottom</span>:<span class="hljs-number">20</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.item-tags</span> <span class="hljs-selector-class">.item-tags-list</span>&#123;<br>  <span class="hljs-attribute">display</span>:flex;<br>  <span class="hljs-attribute">justify-content</span>: flex-start;<br>  <span class="hljs-attribute">flex-wrap</span>: wrap;<br>&#125;<br><span class="hljs-selector-class">.item-tags-list</span> text&#123;<br>  <span class="hljs-attribute">padding</span>:<span class="hljs-number">10</span>rpx <span class="hljs-number">20</span>rpx;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f5</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32</span>rpx;<br>  <span class="hljs-attribute">columns</span>: <span class="hljs-number">#353535</span>;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">40</span>rpx;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20</span>rpx;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20</span>rpx;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="详情页布局完成"><a href="#详情页布局完成" class="headerlink" title="详情页布局完成"></a>详情页布局完成</h4><p>分析：</p><p><img src="/image/18.5.png" alt="要完成的样式"></p><p>detail.wxml</p><p>这里的头像图片和文字我们先从豆瓣网获取，方便页面布局显示</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cos">&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;comment-list-group&quot;</span>&gt;<br>&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;comment-title&quot;</span>&gt;短评(<span class="hljs-number">202220297</span>)&lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;comment-group&quot;</span>&gt;<br>&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;left-comment&quot;</span>&gt;<br>&lt;image  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;avatar&quot;</span> src=<span class="hljs-string">&quot;https://img3.doubanio.com/icon/u218767230-1.jpg&quot;</span>&gt;&lt;/image&gt;<br>&lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;<span class="hljs-keyword">view</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;right-comment&quot;</span>&gt;<br>&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;username-rate&quot;</span>&gt;<br>&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;羚锐&lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;stars  rate=<span class="hljs-string">&quot;5&quot;</span> starsize=<span class="hljs-string">&quot;30&quot;</span> istext=<span class="hljs-string">&quot;&#123;&#123;false&#125;&#125;&quot;</span> &gt;&lt;/stars&gt;<br>&lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;release-time&quot;</span>&gt;<span class="hljs-number">2018</span>-<span class="hljs-number">12</span>-<span class="hljs-number">03</span>   <span class="hljs-number">12</span>:<span class="hljs-number">22</span>:<span class="hljs-number">22</span>&lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;<span class="hljs-keyword">view</span>  <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;这部纪录片上映也等了很久，就像这段历史被揭开的时间也是等待了太久，<br>这几个人的人生或许仍然不能被探索清楚，但至少已经开始被发掘，其实这不仅是关于八个中国乘客，也是那一代华人移民故事，方的故事尤为震撼，<br>一个从冰海里挣扎出来的幸存者，又如此努力在美国讨生活还要帮助亲友，他的故事比电影更加传奇。<br>&lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;/<span class="hljs-keyword">view</span>&gt;<br>&lt;/<span class="hljs-keyword">view</span>&gt;<br><br> &lt;navigator <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;more-comment&quot;</span>&gt;查看更多短评&lt;/navigator&gt;<br></code></pre></td></tr></table></figure><p>detail.wxss</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.comment-list-group</span>&#123;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">60</span>rpx <span class="hljs-number">30</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.comment-list-group</span>  <span class="hljs-selector-class">.comment-title</span>&#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32</span>rpx;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#b3b3b3</span>;<br>&#125;<br><span class="hljs-comment">/* 左边固定，右边内容适配 */</span><br><span class="hljs-selector-class">.comment-list-group</span>  <span class="hljs-selector-class">.comment-group</span>&#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: flex-start;<br>  <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">40</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.comment-group</span> <span class="hljs-selector-class">.left-comment</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">70</span>rpx;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.left-comment</span>  <span class="hljs-selector-class">.avatar</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">70</span>rpx;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">70</span>rpx;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;<br>&#125;<br><span class="hljs-selector-class">.comment-group</span>  <span class="hljs-selector-class">.right-comment</span>&#123;<br>  <span class="hljs-attribute">flex</span>:<span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-selector-class">.right-comment</span>   <span class="hljs-selector-class">.username-rate</span>&#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: flex-start;<br>  <span class="hljs-attribute">align-items</span>: center;<br>&#125;<br><span class="hljs-selector-class">.username-rate</span> <span class="hljs-selector-class">.username</span>&#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">36</span>rpx;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.release-time</span>&#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#b3b3b3</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32</span>rpx;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.content</span>&#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32</span>rpx;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#353535</span>;<br>  <span class="hljs-attribute">margin-top</span>:<span class="hljs-number">10</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.more-comment</span>&#123;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">36</span>rpx;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#41be57</span>;<br>  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">60</span>rpx;<br>&#125;<br></code></pre></td></tr></table></figure><p>问题：星星这里出现了评分数字</p><p><img src="/image/18.6.png" alt="要完成的样式"></p><p>解决：</p><p>在stars.js文件中定义一个属性，是否需要文本</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">istext:</span>&#123;<br><span class="hljs-symbol">  type:</span>Boolean,<br><span class="hljs-symbol">  value:</span>true<br>&#125;<br></code></pre></td></tr></table></figure><p>stars.wxml中<br><img src="/image/18.7.png" alt="代码添加判断"></p><p>detail.wxml代码</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">stars</span>  <span class="hljs-attr">rate</span>=<span class="hljs-string">&quot;5&quot;</span> <span class="hljs-attr">starsize</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">istext</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">false</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">stars</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><img src="/image/18.8.png" alt="页面完成"></p><h2 id="以下是将详情页的数据转换为真实从网上获取的数据"><a href="#以下是将详情页的数据转换为真实从网上获取的数据" class="headerlink" title="以下是将详情页的数据转换为真实从网上获取的数据"></a>以下是将详情页的数据转换为真实从网上获取的数据</h2><h3 id="详情页入口参数设置"><a href="#详情页入口参数设置" class="headerlink" title="详情页入口参数设置"></a>详情页入口参数设置</h3><ol><li>分析：进入详情页面有多种途径，1从首页中电影，电视剧，综艺都可以进入，2从列表页面也可以点击进入</li></ol><p>所以我们要对点击进入详情页面进行入口设置，因为(电影，电视剧，综艺)三个的url类型是不同的，所以获取详情页前要传递类型和item的id过去，告诉它我们传递的类型和id</p><ol start="2"><li>接下来我们来到首页index.wxml中，发现页面是在indexmodul中，而页面是写在itemview中</li></ol><p>之前我们只是在itemview中写了一些样式，并没有跳转的链接</p><p>itemview.js中定义类型</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">itemurl:</span>&#123;<br><span class="hljs-symbol">  type:</span>String,<br><span class="hljs-symbol">  value:</span><span class="hljs-string">&quot;&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>itemview.wxml url跳转链接</p><p><img src="/image/18.9.png" alt="url"></p><ol start="3"><li>indexmodule设置跳转页面</li></ol><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">itemview</span> <span class="hljs-attr">wx:for</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">items</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>  <span class="hljs-attr">wx:key</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.title</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>  <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> </span></span><br><br><span class="xml">itemurl=&quot;/pages/detail/detail?type=</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">type</span>&#125;&#125;</span><span class="xml">&amp;id=</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.id</span>&#125;&#125;</span><span class="xml">&quot;</span><br><span class="xml">&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">itemview</span>&gt;</span>  </span><br></code></pre></td></tr></table></figure><ul><li>可以实现，但是我们还需要传递两个参数 type和id(通过查询字符串的方式?)</li></ul><p>indexmodule.js  属性设置</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">type</span>:&#123;<br>  <span class="hljs-keyword">type</span>:<span class="hljs-keyword">String</span>,<br>  value:<span class="hljs-string">&quot;&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>以后在使用这个组件的时候要传递一个字符串type进来，index页面中。</p><p><img src="/image/18.10.png" alt="type"></p><ul><li>id 的传递—item中有一个属性id</li></ul><p>id=</p><p>首页中点击可以获取到数据</p><p><img src="/image/18.11.png" alt="console"></p><ol start="4"><li>列表页面实现获取list</li></ol><p>它直接使用的就是itemview,所以我们就只需要传递url</p><p>list.js</p><figure class="highlight pony"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pony"><span class="hljs-keyword">var</span>  that= <span class="hljs-literal">this</span>;<br><span class="hljs-keyword">var</span>  <span class="hljs-keyword">type</span> = options.<span class="hljs-keyword">type</span>;<br>that.setData(&#123;<br>  <span class="hljs-keyword">type</span>:<span class="hljs-keyword">type</span><br>&#125;)<br></code></pre></td></tr></table></figure><p><img src="/image/18.12.png" alt="console"></p><p>点击type和id都能获取</p><h3 id="详情页item详情数据获取"><a href="#详情页item详情数据获取" class="headerlink" title="详情页item详情数据获取"></a>详情页item详情数据获取</h3><p>详情页面参数已经可以获取了</p><ol><li><p>detail.js </p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-keyword">var</span>  <span class="hljs-keyword">type</span> =options.<span class="hljs-keyword">type</span>;<br><span class="hljs-keyword">var</span>  id=options.id;<br></code></pre></td></tr></table></figure></li><li><p>导入详情页面的三个url到url.js中</p></li></ol><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">movieDetail:</span> <span class="hljs-string">&quot;https://m.douban.com/rexxar/api/v2/movie/&quot;</span>,<br><span class="hljs-symbol">tvDetail:</span> <span class="hljs-string">&quot;https://m.douban.com/rexxar/api/v2/tv/&quot;</span>,<br><span class="hljs-symbol">showDetail:</span> <span class="hljs-string">&quot;https://m.douban.com/rexxar/api/v2/tv/&quot;</span>,<br></code></pre></td></tr></table></figure><ol start="3"><li>network.js 文件中定义一个新的函数来获取网络请求</li></ol><p><img src="/image/18.13.png" alt="获取网络请求"></p><p>最后成功获取通过success函数回调返回item</p><ol start="4"><li>detail.js中导入network</li></ol><figure class="highlight capnproto"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs capnproto"><span class="hljs-keyword">import</span>  &#123;network&#125;  <span class="hljs-keyword">from</span>  <span class="hljs-string">&quot;../../utils/network&quot;</span><br></code></pre></td></tr></table></figure><p><img src="/image/18.14.png" alt="获取打印数据"></p><p>此时点击首页一个数据发现控制台200的状态并打印了数据，发现通过url可以获取到数据</p><h3 id="详情页面item数据渲染"><a href="#详情页面item数据渲染" class="headerlink" title="详情页面item数据渲染"></a>详情页面item数据渲染</h3><h4 id="将获取到的item的数据设置到界面上"><a href="#将获取到的item的数据设置到界面上" class="headerlink" title="将获取到的item的数据设置到界面上"></a>将获取到的item的数据设置到界面上</h4><ol><li>detail.js中保存data数据</li></ol><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-keyword">var</span> <span class="hljs-literal">that</span>  =<span class="hljs-built_in">this</span>;<br><br>  <span class="hljs-literal">that</span>.setData(&#123;<br>              item:item<br>            &#125;)<br> <span class="hljs-regexp">// console.log(item)  //</span>打印查看数据列表<br></code></pre></td></tr></table></figure><p><img src="/image/18.15.png" alt="控制台数据答应"></p><ol start="2"><li>detail.wxml中修改</li></ol><p><img src="/image/18.17.png" alt="修改位置"></p><ol start="3"><li>detail.js中代码</li></ol><p><img src="/image/18.16.png" alt="部分细节处理"></p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs axapta">onLoad: function (options) &#123;<br>        <span class="hljs-built_in">var</span> that  =<span class="hljs-keyword">this</span>;<br>        <span class="hljs-built_in">var</span>  type =options.type;<br>        <span class="hljs-built_in">var</span>  id=options.id;<br><br>        network.getItemDetail(&#123;<br>          type:type,<br>          id:id,<br>          success:function(item)&#123;<br>            <span class="hljs-built_in">var</span>  genres= item.genres;<br>           <span class="hljs-comment">//字符串拼接  电影类型</span><br>           genres = genres.<span class="hljs-keyword">join</span>(<span class="hljs-string">&quot;/&quot;</span>);<br>           item.genres = genres;<br><br>           <span class="hljs-built_in">var</span>   actors = item.actors;<br>           <span class="hljs-built_in">var</span>  actorNames = [];<br>             <span class="hljs-comment">//slice函数截取数组的一部分，slice(0,3)左闭右开取(0,1,2)，演员数组太多，取三个返回</span><br>           <span class="hljs-keyword">if</span>(actors.length&gt;<span class="hljs-number">3</span>)&#123;<br>             actors = actors.slice(<span class="hljs-number">0</span>,<span class="hljs-number">3</span>);<br>           &#125;<br>        <span class="hljs-comment">//    for循环压入数组中</span><br>           <span class="hljs-keyword">for</span>(<span class="hljs-built_in">var</span>  <span class="hljs-keyword">index</span> = <span class="hljs-number">0</span>;<span class="hljs-keyword">index</span>&lt;actors.length;<span class="hljs-keyword">index</span>++)&#123;<br>             <span class="hljs-built_in">var</span>  actor  = actors[<span class="hljs-keyword">index</span>];<br>             actorNames.push(actor.name);<br>           &#125;<br>           actorNames = actorNames.<span class="hljs-keyword">join</span>(<span class="hljs-string">&quot;/&quot;</span>);<br>           <span class="hljs-built_in">var</span>  director  = item.directors[<span class="hljs-number">0</span>].name;<br>           <span class="hljs-built_in">var</span>  authors = director+<span class="hljs-string">&quot;(导演)/&quot;</span>+actorNames;<br>           item.authors = authors;<br><br>            that.setData(&#123;<br>              item:item<br>            &#125;)<br>           <span class="hljs-comment">// console.log(item)</span><br>          &#125;<br>        &#125;);<br> &#125;<br></code></pre></td></tr></table></figure><p><img src="/image/18.18.png" alt="页面数据可以从网络上请求改变"></p><h4 id="标签完成"><a href="#标签完成" class="headerlink" title="标签完成"></a>标签完成</h4><p>标签数据获取与数据渲染</p><p><img src="/image/18.19.png" alt="如图"></p><ol><li>url.js设置</li></ol><p><img src="/image/18.20.png" alt="url设置"></p><ol start="2"><li>network.js函数设置</li></ol><p><img src="/image/18.21.png" alt="network.js"></p><ol start="3"><li>detail.js中触发该函数</li></ol><p>tags用来接收调用network.js中函数返回传的参数</p><p><img src="/image/18.22.png" alt="detail.js"></p><ol start="4"><li>修改detail.wxml代码</li></ol><p>wx:for循环中，默认的下标名称的index,默认的值的名称的item</p><p><img src="/image/18.23.png" alt="wx:for"></p><h4 id="详情页短评数据获取与渲染"><a href="#详情页短评数据获取与渲染" class="headerlink" title="详情页短评数据获取与渲染"></a>详情页短评数据获取与渲染</h4><ol><li>url链接获取</li></ol><p>url.js代码</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xquery">// 默认传一个<span class="hljs-keyword">start</span>=<span class="hljs-number">0</span><span class="hljs-built_in">,count</span> =<span class="hljs-number">3</span><br>movieComments: <span class="hljs-keyword">function</span><span class="hljs-built_in">(id</span>,<span class="hljs-keyword">start</span>=<span class="hljs-number">0</span><span class="hljs-built_in">,count</span>=<span class="hljs-number">3</span>)&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;https://m.douban.com/rexxar/api/v2/movie/&#x27;</span> +<span class="hljs-built_in"> id</span> + <span class="hljs-string">&#x27;/interests?count=&#x27;</span> +<span class="hljs-built_in"> count</span> + <span class="hljs-string">&#x27;&amp;start=&#x27;</span> + <span class="hljs-keyword">start</span>;<br>&#125;,<br>tvComments: <span class="hljs-keyword">function</span><span class="hljs-built_in">(id</span>,<span class="hljs-keyword">start</span>=<span class="hljs-number">0</span><span class="hljs-built_in">,count</span>=<span class="hljs-number">3</span>)&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;https://m.douban.com/rexxar/api/v2/tv/&#x27;</span> +<span class="hljs-built_in"> id</span> + <span class="hljs-string">&#x27;/interests?count=&#x27;</span> +<span class="hljs-built_in"> count</span> + <span class="hljs-string">&#x27;&amp;start=&#x27;</span> + <span class="hljs-keyword">start</span>;<br>&#125;,<br>showComments: <span class="hljs-keyword">function</span><span class="hljs-built_in">(id</span>,<span class="hljs-keyword">start</span>=<span class="hljs-number">0</span><span class="hljs-built_in">,count</span>=<span class="hljs-number">3</span>)&#123;<br>  <span class="hljs-keyword">return</span> this.tvComments<span class="hljs-built_in">(id</span>,<span class="hljs-keyword">start</span><span class="hljs-built_in">,count</span>);<br>&#125;,<br><br></code></pre></td></tr></table></figure><ol start="2"><li>network.js写一个获取网络请求的接口</li></ol><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-comment">// 获取短评</span><br>  getItemComments:function(<span class="hljs-keyword">params</span>)&#123;<br>    <span class="hljs-built_in">var</span>  <span class="hljs-keyword">type</span> =<span class="hljs-keyword">params</span>.<span class="hljs-keyword">type</span>;<br>    <span class="hljs-built_in">var</span>  id= <span class="hljs-keyword">params</span>.id;<br>    <span class="hljs-built_in">var</span>  start = <span class="hljs-keyword">params</span>.start?<span class="hljs-keyword">params</span>.start:<span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">var</span> count  = <span class="hljs-keyword">params</span>.count?<span class="hljs-keyword">params</span>.count:<span class="hljs-number">3</span>;<br>    <span class="hljs-built_in">var</span>  url=<span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">type</span> === <span class="hljs-string">&#x27;movie&#x27;</span>)&#123;<br>      url = globalurls.movieComments(id,start,count);<br>    &#125;<span class="hljs-keyword">else</span>  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">type</span> ===<span class="hljs-string">&#x27;tv&#x27;</span>)&#123;<br>      url = globalurls.tvComments(id,start,count);<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>      url  =globalurls.showComments(id,start,count);<br>    &#125;<br>    wx.request(&#123;<br>      url:url,<br>      success:function(res)&#123;<br>        <span class="hljs-built_in">var</span>  <span class="hljs-built_in">data</span>  =res.<span class="hljs-built_in">data</span>;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">params</span>.success)&#123;<br>          <span class="hljs-keyword">params</span>.success(<span class="hljs-built_in">data</span>);<br>        &#125;<br>      &#125;<br>    &#125;)<br>  &#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>detail页面调用 detail.js文件种</li></ol><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-comment">//  获取评论</span><br>network.getItemComments(&#123;<br>  <span class="hljs-keyword">type</span>:<span class="hljs-keyword">type</span>,<br>  id:id,<br>  success:function(<span class="hljs-built_in">data</span>)&#123;<br>    <span class="hljs-built_in">var</span>  totalComment = <span class="hljs-built_in">data</span>.total;<br>    <span class="hljs-built_in">var</span>  comments= <span class="hljs-built_in">data</span>.interests;<br>    that.setData(&#123;<br>      totalComment:totalComment,<br>      comments:comments<br>    &#125;)<br>    <span class="hljs-comment">// console.log(data)</span><br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><ol start="4"><li><p>控制台能够打印200状态，并获取到data</p></li><li><p>数据渲染到detail.wxml种</p></li></ol><p>变量修改</p><p><img src="/image/18.24.png" alt="wxml代码修改"></p><ol start="6"><li>页面效果</li></ol><p><img src="/image/18.25.png" alt="真实数据"></p>]]></content>
    
    
    <categories>
      
      <category>WX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>WX</tag>
      
      <tag>小程序</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>豆瓣&amp;itemview重构&amp;列表数据渲染成真实数据</title>
    <link href="/2021/04/22/%E5%BE%AE%E4%BF%A1%E8%B1%86%E7%93%A3%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0(%E4%B8%89)/"/>
    <url>/2021/04/22/%E5%BE%AE%E4%BF%A1%E8%B1%86%E7%93%A3%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0(%E4%B8%89)/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="电影列表页面布局"><a href="#电影列表页面布局" class="headerlink" title="电影列表页面布局"></a>电影列表页面布局</h3><h4 id="itemview重构"><a href="#itemview重构" class="headerlink" title="itemview重构"></a>itemview重构</h4><p>分析：首页和更多页面的布局基本一样，所以我们可以将首页布局代码拿过来直接用         </p><p>(我们在代码的时候发现有些东西是重复的，我们可以将代码单独抽取出来，然后再哪个地方需要使用的时候再引用，这样相当于对代码进行了重构，方便后期对代码进行管理)</p><p><img src="/image/17.1.png" alt="首页代码"></p><ol><li>首页代码在indexmodul组件中，所以我们去该组价中再进行代码优化</li></ol><ol start="2"><li><p>在components中新建一个itemview组件</p></li><li><p>将indexmodule.wxml中的代码剪切到itemview.wxml中</p></li></ol><p>navigator也可以拿过去，因为后期我们点击一个电影也会跳转到详情页面中</p><p><img src="/image/17.2.png" alt="itemview.wxml"></p><ol start="4"><li>将样式代码页抽取到itemview.wxss中</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs css"> <span class="hljs-selector-class">.item-navigator</span>&#123;<br>  <span class="hljs-attribute">width</span>:<span class="hljs-number">200</span>rpx;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20</span>rpx;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>&#125;<br><br><span class="hljs-selector-class">.item-navigator</span>  <span class="hljs-selector-class">.item-group</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>&#125;<br><span class="hljs-selector-class">.item-group</span> <span class="hljs-selector-class">.thumbnail-group</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">284</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.thumbnail-group</span> <span class="hljs-selector-class">.thumbnail</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>&#125;<br><span class="hljs-selector-class">.item-group</span> <span class="hljs-selector-class">.item-title</span>&#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">28</span>rpx;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20</span>rpx;<br>  <span class="hljs-comment">/* 文本过长处理 */</span><br>  <span class="hljs-attribute">text-overflow</span>:ellipsis;<br>  <span class="hljs-attribute">overflow</span>: hidden;<br>&#125;<br><br></code></pre></td></tr></table></figure><ol start="5"><li>展示items，应该要传一个items属性过来</li></ol><p><img src="/image/17.3.png" alt="问题"></p><p>解决： 在itemsview.js文件中</p><p><img src="/image/17.4.png" alt="属性"></p><ol start="6"><li>注册组件</li></ol><p><img src="/image/17.5.png" alt="注册组件"></p><ol start="7"><li>使用组件</li></ol><p><img src="/image/17.6.png" alt="使用组件"></p><ol start="8"><li>问题</li></ol><p>右边距没有了</p><p><img src="/image/17.7.png" alt="问题"></p><p>解决：我们把itemview单独放在一个当中使用了，所以item-navigator只有一个则last-of-type就是它本身<br>将该代码删除就可以了</p><p><img src="/image/17.8.png" alt="解决"></p><ol start="9"><li>此时星星组件不见了，将星星组件放到itemview.json文件中使用</li></ol><p><img src="/image/17.9.png" alt="解决"></p><p>以上操作方便了我们后期布局</p><h4 id="创建列表页"><a href="#创建列表页" class="headerlink" title="创建列表页"></a>创建列表页</h4><ol><li>创建列表页面</li></ol><p>在app.json中添加该行代码保存就会自动创建页面</p><p><img src="/image/17.10.png" alt="创建页面"></p><ol start="2"><li><p>分析：电影，电视剧，综艺三个列表页面都是相同的样式，唯独不一样的是数据，所以我们完全没有必要为这三个弄三个单独的页面。我们完全可以使用同一个页面，后期我们传不同的参数过去，告诉它我现在要获取电影，电视剧，综艺.这样可以达到重用。</p></li><li><p>列表页入口</p></li></ol><p>应该有一个入口可以来到列表页–更多</p><p>在首页添加url</p><p><img src="/image/17.11.png" alt="moreurl"></p><ol start="4"><li>列表页搜索栏<br>列表页也应该有搜索栏,将之前的searchbar组件拿过来使用</li></ol><p>注册list.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;usingComponents&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;searchbar&quot;</span>:<span class="hljs-string">&quot;/components/searchbar/searchbar&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>使用 list.wxml</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">searchbar</span>  <span class="hljs-attr">isnavigator</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">true</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">searchbar</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>这时候列表页出现了搜索栏</p><ol start="5"><li>电影排列–flex布局</li></ol><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">itemview</span>  <span class="hljs-attr">wx:for</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">items</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>  <span class="hljs-attr">wx:key</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.title</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>  <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">itemview</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>由于.container在app.wxss中存在，这里我们将app.wxss代码删除掉</p><ol start="6"><li>电影数据获取</li></ol><p>在list.js的onLoad函数中调用电影列表数据</p><ul><li>导入network.js</li></ul><figure class="highlight capnproto"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs capnproto"><span class="hljs-keyword">import</span> &#123;network&#125;  <span class="hljs-keyword">from</span>  <span class="hljs-string">&quot;../../utils/network.js&quot;</span>;<br></code></pre></td></tr></table></figure><ul><li><p>请求数据</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">onLoad: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(options)</span> </span>&#123;<br>    <span class="hljs-keyword">var</span>  that= <span class="hljs-keyword">this</span>;<br>          <span class="hljs-comment">// 请求的电影数据</span><br>      network.getMovieList(&#123;<br>        success:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(items)</span></span>&#123;<br>          that.setData(&#123;<br>            items: items<br>          &#125;);    <br>        &#125;&#125;<br></code></pre></td></tr></table></figure></li><li><p>css样式</p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.container</span>&#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: space-between;<br>  <span class="hljs-attribute">flex-wrap</span>: wrap;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">30</span>rpx;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="列表数据渲染成真实数据"><a href="#列表数据渲染成真实数据" class="headerlink" title="列表数据渲染成真实数据"></a>列表数据渲染成真实数据</h3><ol><li>分析：电影，电视剧，综艺用的都是list页面中的，这时候我们要怎么去区分它呢？</li></ol><p>我们可以在首页index中传一个参数过去，当点击更多的时候，我们list页面得到这个参数就可以根据参数发送不同的请求</p><p>传递参数</p><p><img src="/image/17.12.png" alt="type"></p><p>list.js中接收参数</p><p><img src="/image/17.13.png" alt="接收"></p><ol start="2"><li>怎么能够获取所有正在热映的电影，电视剧，综艺？</li></ol><p>分析：我们在首页中就已经写过网络请求的代码，不过我们写的count=7,我们现在要获取所有的数据，之前的代码也可以重用。</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs lasso"> wx.request(&#123;<br>   <span class="hljs-comment">//  豆瓣电影接口</span><br>    url: globalurls.movieList,<br>    <span class="hljs-built_in">data</span>:&#123;<br>      count:count<br>     &#125;,<br>    success:function(res)&#123;<br>     <span class="hljs-comment">// console.log(res)</span><br>      <span class="hljs-built_in">var</span>   movies = res.<span class="hljs-built_in">data</span>.subjects;<br>       <span class="hljs-keyword">if</span>(<span class="hljs-keyword">params</span> &amp;&amp; <span class="hljs-keyword">params</span>.success)&#123;<br>         <span class="hljs-keyword">params</span>.success(movies)<br>       &#125;<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>解决：将network.js文件进行重构<br>我们network.js 文件在list文件中也用的到，所以放在全局文件中比较合适，可以放在utils中。网络请求代码不是很多，所以我们这里放在一个文件中是可以的。</p><ol start="3"><li>在utils中新建一个network.js文件</li></ol><p>将原来的network.js文件代码拷贝过来，原来文件可以删除了</p><p>此时将所有相关引用路径更改</p><p>network.js代码</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs sqf">import  &#123;globalurls&#125;  <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;urls.js&quot;</span><br><br>const  network=&#123;<br>  <br>getMovieList:function(<span class="hljs-built_in">params</span>)&#123;<br><span class="hljs-built_in">params</span>.<span class="hljs-built_in">type</span>= <span class="hljs-string">&quot;movie&quot;</span>;<br>this.getItemList(<span class="hljs-built_in">params</span>);<br>&#125;,<br>getTVList:function(<span class="hljs-built_in">params</span>)&#123;<br>    <span class="hljs-built_in">params</span>.<span class="hljs-built_in">type</span>= <span class="hljs-string">&quot;tv&quot;</span>;<br>    this.getItemList(<span class="hljs-built_in">params</span>);<br>     &#125; ,<br>getShowList: function(<span class="hljs-built_in">params</span>)&#123;<br>    <span class="hljs-built_in">params</span>.<span class="hljs-built_in">type</span>= <span class="hljs-string">&quot;show&quot;</span>;<br>    this.getItemList(<span class="hljs-built_in">params</span>);<br>&#125;,<br><br><br><span class="hljs-comment">// 获取item列表 params获取传递参数type</span><br>getItemList:function(<span class="hljs-built_in">params</span>)&#123;<br>  <span class="hljs-comment">// 获取不同url</span><br>  var  url=<span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-keyword">if</span>(<span class="hljs-built_in">params</span>.<span class="hljs-built_in">type</span> === <span class="hljs-string">&quot;movie&quot;</span>)&#123;<br>    url= globalurls.movieList;<br>  &#125;<span class="hljs-keyword">else</span>  <span class="hljs-keyword">if</span>(<span class="hljs-built_in">params</span>.<span class="hljs-built_in">type</span>===<span class="hljs-string">&quot;tv&quot;</span>)&#123;<br>    url = globalurls.tvList;<br>  &#125;<span class="hljs-keyword">else</span>&#123;<br>    url= globalurls.showList;<br>  &#125;<br>  var <span class="hljs-built_in">count</span> = <span class="hljs-built_in">params</span>.<span class="hljs-built_in">count</span> ? <span class="hljs-built_in">params</span>.<span class="hljs-built_in">count</span> : <span class="hljs-number">7</span>;<br>  wx.request(&#123;<br>    <span class="hljs-comment">//  豆瓣电影接口</span><br>     url: url,<br>     data:&#123;<br>       <span class="hljs-built_in">count</span>:<span class="hljs-built_in">count</span><br>     &#125;,<br>     success:function(res)&#123;<br>    <span class="hljs-comment">// item代表所有的项</span><br>       var   <span class="hljs-built_in">items</span> =res.data.subject_collection_items;<br>       var  itemsCount = <span class="hljs-built_in">items</span>.length;<br>       var  left = itemsCount%<span class="hljs-number">3</span>;<br>       <span class="hljs-keyword">if</span>(left===<span class="hljs-number">2</span>)&#123;<br>         <span class="hljs-built_in">items</span>.push(null);<br>       &#125;<br>       <span class="hljs-keyword">if</span>(<span class="hljs-built_in">params</span> &amp;&amp; <span class="hljs-built_in">params</span>.success)&#123;<br>        <span class="hljs-comment">//  将items传出</span><br>        <span class="hljs-built_in">params</span>.success( <span class="hljs-built_in">items</span>)<br>      &#125;<br>     &#125;,<br> &#125;);<br>&#125;<br>&#125;<br><br>export  &#123;network&#125;<br></code></pre></td></tr></table></figure><ol start="4"><li>在list.js中请求网络</li></ol><p>修改引入路径<br>import {network}  from  “../../utils/network.js”;</p><p>list.js代码</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs sqf">onLoad: function (options) &#123;<br>   var  that= this;<br>   var  <span class="hljs-built_in">type</span> = options.<span class="hljs-built_in">type</span>;<br>   var  title =<span class="hljs-string">&quot;&quot;</span>;<br>   <span class="hljs-comment">// 数据加载前</span><br>   wx.showLoading(&#123;<br>     title: <span class="hljs-string">&#x27;正在加载中...&#x27;</span>,<br>   &#125;)<br>   <span class="hljs-keyword">if</span>(<span class="hljs-built_in">type</span> === <span class="hljs-string">&quot;movie&quot;</span>)&#123;<br>     <span class="hljs-comment">// 请求的电影数据</span><br>     network.getMovieList(&#123;<br>       success:function(<span class="hljs-built_in">items</span>)&#123;<br>         that.setData(&#123;<br>           <span class="hljs-built_in">items</span>: <span class="hljs-built_in">items</span><br>         &#125;);<br>         <span class="hljs-comment">// 数据加载完成</span><br>           wx.hideLoading();<br>       &#125;,<br>       <span class="hljs-comment">// 确保获取到所有数据</span><br>             <span class="hljs-built_in">count</span>:<span class="hljs-number">1000</span><br>     &#125;)<br>    title= <span class="hljs-string">&quot;电影&quot;</span><br>   &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-built_in">type</span>=== <span class="hljs-string">&quot;tv&quot;</span>)&#123;<br>     <span class="hljs-comment">// 请求电视剧的数据</span><br>     network.getTVList(&#123;<br>       success:function(<span class="hljs-built_in">items</span>)&#123;<br>         that.setData(&#123;<br>           <span class="hljs-built_in">items</span>: <span class="hljs-built_in">items</span><br>         &#125;);<br>         wx.hideLoading();<br>       &#125;,<br>       <span class="hljs-built_in">count</span>:<span class="hljs-number">1000</span><br>     &#125;);<br>     title = <span class="hljs-string">&quot;电视剧&quot;</span><br>   &#125;<span class="hljs-keyword">else</span>  &#123;<br>     <span class="hljs-comment">//请求综艺的数据</span><br>     network.getShowList(&#123;<br>       success:function(<span class="hljs-built_in">items</span>)&#123;<br>         that.setData(&#123;<br>           <span class="hljs-built_in">items</span>: <span class="hljs-built_in">items</span><br>         &#125;);<br>         wx.hideLoading();<br>       &#125;,<br>       <span class="hljs-built_in">count</span>:<span class="hljs-number">1000</span><br>     &#125;);<br>     title=<span class="hljs-string">&quot;综艺&quot;</span>;<br>   &#125;<br>   wx.setNavigationBarTitle(&#123;<br>     title:title,<br>   &#125;)<br> &#125;<br></code></pre></td></tr></table></figure><p>问题：发现页面不显示但是也没有报错，说明数据获取了但是没有渲染</p><p>问题：将原来的movies修改为items</p><p><img src="/image/17.14.png" alt="问题"></p><ol start="5"><li>优化</li></ol><p>当点击更多之后(电影，电视剧，综艺)三个上方均显示为豆瓣评分，这时候我们需要考虑到用户体验，将上面的数据进行修改。</p><p><img src="/image/17.15.png" alt="优化"></p><p>解决：在list.js文件中</p><p>微信的函数设置</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gauss">wx.setNavigationBarTitle(&#123;<br>  <span class="hljs-built_in">title</span>:<span class="hljs-built_in">title</span>,<br>&#125;)<br></code></pre></td></tr></table></figure><p>函数上面定义一个title</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">var  title</span> =<span class="hljs-string">&quot;&quot;</span>;<br></code></pre></td></tr></table></figure><p><img src="/image/17.16.png" alt="根据请求数据改变title"></p><h4 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h4><ol><li>如果底部剩余两个item就会出现一下情况，因为是flex布局</li></ol><p><img src="/image/17.17.png" alt="左右各一个,中间空"></p><ol start="2"><li>分析：</li></ol><ul><li>在主轴上的那布局排列总共有5中</li><li>1从左到右排列，最下面的可以但是上面的可能排列就不那么好看了，因为它的中间的间距你不好掌握</li><li>2中间间距相等的方式也不这么好，页面排列也不那么好看</li></ul><p>什么时候会产生这个问题，就是底部余2个，余1余活3个都不会产生</p><p>解决：这时候我们要迎合flex布局方式，在数据渲染的时候判断数据对3取余是不是等于2</p><p>当然我们还要对index页面进行分析，因为index页面也调用了network.js,因为首页是得到了7个数据，对3取余为1，所以对network.js处理是不会对页面有影响的。</p><p>代码解决network.js</p><p>如果余2就添加一个空的数据</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs excel"><span class="hljs-built_in">var</span>  itemsCount = items.length;<br><span class="hljs-built_in">var</span>  <span class="hljs-built_in">left</span> = itemsCount%<span class="hljs-number">3</span>;<br><span class="hljs-built_in">if</span>(<span class="hljs-built_in">left</span>===<span class="hljs-number">2</span>)&#123;<br>  items.push(null);<br>&#125;<br></code></pre></td></tr></table></figure><p>新问题：出现一个未评分</p><p><img src="/image/17.18.png" alt="新问题"></p><p>解决：在itemview中判断是否传入值</p><p><img src="/image/17.19.png" alt="item解决"></p><ol start="3"><li>页面加载优化</li></ol><p>数据加载需要时间，如果长时间没有加载出来，用户体验会不好，会损失用户。</p><p>处理：调用小程序Api实现，</p><p><img src="/image/17.20.png" alt="三个同时作用"></p>]]></content>
    
    
    <categories>
      
      <category>WX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>WX</tag>
      
      <tag>小程序</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>豆瓣&amp;首页布局和数据获取&amp;首页模块重构&amp;网络请求模块重构</title>
    <link href="/2021/04/21/%E5%BE%AE%E4%BF%A1%E8%B1%86%E7%93%A3%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0(%E4%BA%8C)/"/>
    <url>/2021/04/21/%E5%BE%AE%E4%BF%A1%E8%B1%86%E7%93%A3%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0(%E4%BA%8C)/</url>
    
    <content type="html"><![CDATA[<hr><h3 id="首页布局和数据获取"><a href="#首页布局和数据获取" class="headerlink" title="首页布局和数据获取"></a>首页布局和数据获取</h3><ol><li>将电影中假的数据变成真的数据(wx.request请求Api)</li></ol><p>首页js文件中获取，在onLoad中请求数据，这个页面一旦加载完毕就去请求</p><p>index.js</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs awk">/*<br>*生命周期函数-监听页面加载<br>*/<br>onLoad:<span class="hljs-keyword">function</span>(options)&#123;<br>  <span class="hljs-regexp">//</span> that方便后期使用当前Page对象<br>   var  that = this;<br>  <span class="hljs-regexp">//</span>  top20电影<br>   wx.request(&#123;<br>    <span class="hljs-regexp">//</span>  豆瓣电影接口<br>     url: <span class="hljs-string">&#x27;https://api.rixingyike.com/doubanapiv2/movie/top250?start=0&amp;count=10&#x27;</span>,<br>     success:<span class="hljs-keyword">function</span>(res)&#123;<br>      <span class="hljs-regexp">//</span> console.log(res)<br>       var   movies = res.data.subjects;<br>      <span class="hljs-regexp">//</span>  console.log(movies);<br>      &lt;!-- 保存movies数据 --&gt;<br>       that.setData(&#123;<br>         movies: movies<br>       &#125;);<br>    <br>     &#125;,<br> &#125;)<br>    <span class="hljs-regexp">//</span>  正在热映的电影<br>    wx.request(&#123;<br>      <span class="hljs-regexp">//</span>  豆瓣电影接口<br>       url: <span class="hljs-string">&#x27;https://api.rixingyike.com/doubanapiv2/movie/in_theaters?start=0&amp;count=10&#x27;</span>,<br>       success:<span class="hljs-keyword">function</span>(res)&#123;<br>        <span class="hljs-regexp">//</span> console.log(res)<br>         var   tvs = res.data.subjects;<br>         that.setData(&#123;<br>           tvs:tvs<br>         &#125;);<br>       &#125;,<br>   &#125;),<br>  <span class="hljs-regexp">//</span>  即将上映的电影<br>  wx.request(&#123;<br>    <span class="hljs-regexp">//</span>  豆瓣电影接口<br>     url: <span class="hljs-string">&#x27;https://api.rixingyike.com/doubanapiv2/movie/coming_soon?start=0&amp;count7&#x27;</span>,<br>     success:<span class="hljs-keyword">function</span>(res)&#123;<br>      <span class="hljs-regexp">//</span> console.log(res)<br>       var   shows = res.data.subjects;<br>       that.setData(&#123;<br>       shows:shows<br>       &#125;);<br>     &#125;,<br> &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/image/16.9.png" alt="数据放置,其他类型同理"></p><ol start="2"><li><p>由于豆瓣Api不对外开放，以上Api是我从网上得到进行处理的，部分数据加载不出来。</p></li><li><p>测试版本微信要勾选不校验合法域名才能网上获取数据</p></li></ol><p><img src="/image/16.10.png" alt="勾选不校验合法域名"></p><h4 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h4><blockquote><p>wx:key作用：<br>如果列表中项目的位置会动态改变或者有新的项目添加到列表中，并且希望列表中的项目保持自己的特征和状态（如<code> &lt;input/&gt;</code> 中的输入内容， <code>&lt;switch/&gt; </code>的选中状态），需要使用 wx:key 来指定列表中项目的唯一的标识符。<br>wx:key 的值以两种形式提供：                      </p></blockquote><ol><li>字符串或者数字，代表在 for 循环的 array 中 item 的某个 property，该 property 的值需要是列表中唯一的字符串或数字，且不能动态改变。在写的时候，直接写这个 property 的名字就可以了，不需要写 item.property 的形式，并且不需要加中括号。                        </li><li>保留关键字 this 代表在 for 循环中的 item 本身，这种表示需要 item 本身是一个唯一的字符串或者数字，如：当数据改变触发渲染层重新渲染的时候，会校正带有 key 的组件，*框架会确保他们被重新排序，而不是重新创建，以确保使组件保持自身的状态，并且提高列表渲染时的效率。</li></ol><blockquote><p>setData<br>如果以后想要修改 data 中的值，应该使用 setData 方法。 setData 函数用于将数据从逻辑层发送到视图层（异步），同时改变对应的 this.data 的值（同步）。注意事项：</p></blockquote><ol><li>直接修改 this.data 而不调用 this.setData 是无法改变页面的状态的，还会造成数据不一致。      </li><li>放到 data 中的值，只能使用可以 JSON 序列化的：字符串，数字，布尔值，对象，数组。否则将不会渲染。          </li><li>其中 key 可以以数据路径的形式给出，支持改变数组中的某一项或对象的某个属性，如<br>array[2].message ， a.b.c.d ，并且不需要在 this.data 中预先定义。    </li></ol><h3 id="首页模块重构"><a href="#首页模块重构" class="headerlink" title="首页模块重构"></a>首页模块重构</h3><p><img src="/image/16.11.png" alt="首页图片"></p><h4 id="分析：首页三个模块中90-以上的代码都是重复的，我们可以把它给重构"><a href="#分析：首页三个模块中90-以上的代码都是重复的，我们可以把它给重构" class="headerlink" title="分析：首页三个模块中90%以上的代码都是重复的，我们可以把它给重构"></a>分析：首页三个模块中90%以上的代码都是重复的，我们可以把它给重构</h4><p>把不同的东西提取出来，通过变量的方式表示，将以上一个模块做成一个组件。然后做成三个属性{电影，更多，循环的movies}</p><p><img src="/image/16.12.png" alt="分析"></p><ol><li>在components中新建一个indexmodules组件</li></ol><p>将index.wxml中的代码剪切到indexmodules.wxml中</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;module-group&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">view</span>   <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;module-top&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;module-title&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">title</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">navigator</span>  <span class="hljs-attr">url</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">moreurl</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;module-more&quot;</span>&gt;</span>更多<span class="hljs-tag">&lt;/<span class="hljs-name">navigator</span>&gt;</span> </span><br><span class="xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">scroll-view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;module-scroll-view&quot;</span>  <span class="hljs-attr">scroll-x</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">true</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> &gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">navigator</span>   <span class="hljs-attr">wx:for</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">items</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>  <span class="hljs-attr">wx:key</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item-title</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>        <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-navigator&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-group&quot;</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;thumbnail-group&quot;</span>&gt;</span></span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;thumbnail&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#x27;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.images.small</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-title&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.title</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">stars</span>  <span class="hljs-attr">rate</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.rating.average</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">stars</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">navigator</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">scroll-view</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml">  </span><br></code></pre></td></tr></table></figure><p>将index.wxss中的代码剪切到indexmodules.wxss中</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 最大模块 */</span><br><span class="hljs-selector-class">.module-group</span>&#123;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">40</span>rpx;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;<br>&#125;<br><span class="hljs-comment">/* 顶部电影 更多flex布局 */</span><br><span class="hljs-selector-class">.module-group</span> <span class="hljs-selector-class">.module-top</span>&#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">36</span>rpx;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-comment">/* 主轴元素贴两边 */</span><br>  <span class="hljs-attribute">justify-content</span>: space-between;<br>&#125;<br><span class="hljs-comment">/* title字体颜色设置 */</span><br><span class="hljs-selector-class">.module-top</span> <span class="hljs-selector-class">.moudle-title</span>&#123;<br>  <span class="hljs-attribute">color</span>:<span class="hljs-number">#494949</span>;<br>&#125;<br><span class="hljs-comment">/* more颜色设置 */</span><br><span class="hljs-selector-class">.module-top</span> <span class="hljs-selector-class">.module-more</span>&#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#41be57</span>;<br>&#125;<br><br><span class="hljs-selector-class">.module-scroll-view</span>&#123;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">40</span>rpx;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">height</span>:<span class="hljs-number">400</span>rpx;<br>  <span class="hljs-comment">/* 设置横向滚动 */</span><br>  <span class="hljs-attribute">white-space</span>: nowrap;<br>&#125;<br><span class="hljs-selector-class">.module-scroll-view</span> <span class="hljs-selector-class">.item-navigator</span>&#123;<br>  <span class="hljs-attribute">width</span>:<span class="hljs-number">200</span>rpx;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20</span>rpx;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>&#125;<br><span class="hljs-comment">/* 最后一个的右边距 对齐 */</span><br><span class="hljs-selector-class">.module-scroll-view</span> <span class="hljs-selector-class">.item-navigator</span><span class="hljs-selector-pseudo">:last-of-type</span>&#123;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-selector-class">.item-navigator</span>  <span class="hljs-selector-class">.item-group</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>&#125;<br><span class="hljs-selector-class">.item-group</span> <span class="hljs-selector-class">.thumbnail-group</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">284</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.thumbnail-group</span> <span class="hljs-selector-class">.thumbnail</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>&#125;<br><span class="hljs-selector-class">.item-group</span> <span class="hljs-selector-class">.item-title</span>&#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">28</span>rpx;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20</span>rpx;<br>  <span class="hljs-comment">/* 文本过长处理 */</span><br>  <span class="hljs-attribute">text-overflow</span>:ellipsis;<br>  <span class="hljs-attribute">overflow</span>: hidden;<br>&#125;<br><br></code></pre></td></tr></table></figure><ol start="2"><li>将要渲染的数据定义成三个属性</li></ol><p>indexmodules.js文件中</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 组件的属性列表</span><br><span class="hljs-comment"> */</span><br><span class="hljs-symbol">properties:</span> &#123;<br><span class="hljs-symbol">    title:</span>&#123;<br><span class="hljs-symbol">      type:</span>String,<br><span class="hljs-symbol">      value:</span><span class="hljs-string">&quot;&quot;</span><br>    &#125;,<br><span class="hljs-symbol">    moreurl:</span>&#123;<br><span class="hljs-symbol">      type:</span>String,<br><span class="hljs-symbol">      value:</span><span class="hljs-string">&quot;&quot;</span><br>    &#125;,<br><span class="hljs-symbol">    items:</span>&#123;<br><span class="hljs-symbol">      type:</span>Array,<br><span class="hljs-symbol">      value:</span>[]<br>    &#125;<br><br>&#125;,<br></code></pre></td></tr></table></figure><ol start="3"><li>组件引用</li></ol><p>index.json文件中</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;usingComponents&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;searchbar&quot;</span>:<span class="hljs-string">&quot;/components/searchbar/searchbar&quot;</span>,<br>    <span class="hljs-attr">&quot;stars&quot;</span>:<span class="hljs-string">&quot;/components/stars/stars&quot;</span>,<br>    <span class="hljs-attr">&quot;indexmodule&quot;</span>:<span class="hljs-string">&quot;/components/indexmodule/indexmodule&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="4"><li>组件使用</li></ol><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-comment">&lt;!-- top20电影 --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">indexmodule</span>  <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;电影&quot;</span>  <span class="hljs-attr">items</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">movies</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">indexmodule</span>&gt;</span></span><br><span class="xml"> <span class="hljs-comment">&lt;!-- 正在热映的电影 --&gt;</span></span><br><span class="xml"> <span class="hljs-tag">&lt;<span class="hljs-name">indexmodule</span>  <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;正在热映电影&quot;</span>  <span class="hljs-attr">items</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">tvs</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">indexmodule</span>&gt;</span></span><br><span class="xml"> <span class="hljs-comment">&lt;!-- 即将上映的电影 --&gt;</span></span><br><span class="xml"> <span class="hljs-tag">&lt;<span class="hljs-name">indexmodule</span>  <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;即将上映电影&quot;</span>  <span class="hljs-attr">items</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">shows</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">indexmodule</span>&gt;</span></span><br><br></code></pre></td></tr></table></figure><p><img src="/image/16.13.png" alt="组件使用"></p><ol start="5"><li>问题：此时评分不见了stars是放在indexmodule中使用，所以要在indexmodule.js中引用一下stars组件</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;component&quot;</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">&quot;usingComponents&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;stars&quot;</span>:<span class="hljs-string">&quot;/components/stars/stars&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>此时页面效果和之前一样了<br><img src="/image/16.11.png" alt="页面效果"></p><h3 id="网络请求模块重构"><a href="#网络请求模块重构" class="headerlink" title="网络请求模块重构"></a>网络请求模块重构</h3><h4 id="对index-js中的网络请求代码进行重构"><a href="#对index-js中的网络请求代码进行重构" class="headerlink" title="对index.js中的网络请求代码进行重构"></a>对index.js中的网络请求代码进行重构</h4><ol><li>index.js中只有这些网路请求的代码</li><li>代码重复较多</li><li>MVC思想 Model(数据data)  View(html,css)  Controller(控制器,起到指挥的作用，具体怎么去实现交给专门的模块,可以比喻成交警指挥交通并不会去开车)</li></ol><p><img src="/image/16.14.png" alt="代码示例"></p><h4 id="处理方法"><a href="#处理方法" class="headerlink" title="处理方法"></a>处理方法</h4><ol><li>将网络请求放入一个network.js文件中去完成</li></ol><p>将index.wxml中的request请求剪切到network.js中</p><p><img src="/image/16.15.png" alt="network.js"></p><ol start="2"><li>index.js 导入模块  import  {network}  from  “../../utils/network.js”</li></ol><p>代码处理，存储数据，其他模块进行相同处理<br><img src="/image/16.16.png" alt="network.js"></p><ol start="3"><li><p>这时候index.js就起到了一个控制器的作用，不会起到网络请求的的作用，真正的网络请求在network.js文件中。我们只负责调用。</p></li><li><p>考虑到后期我们点击更多列表页使用的ur和首页的url是一样的，所以我们可以把url链接单独抽取出来。</p></li></ol><p>在utils文件中单独创建一个文件用来存储这些链接urls.js</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts">const  globalurls=&#123;<br><span class="hljs-symbol">  movieList:</span> <span class="hljs-string">&quot;https://m.douban.com/rexxar/api/v2/subject_collection/movie_showing/items&quot;</span>,<br><span class="hljs-symbol">  tvList:</span> <span class="hljs-string">&quot;https://m.douban.com/rexxar/api/v2/subject_collection/tv_hot/items&quot;</span>,<br><span class="hljs-symbol">  showList:</span> <span class="hljs-string">&quot;https://m.douban.com/rexxar/api/v2/subject_collection/tv_variety_show/items&quot;</span>,<br>&#125;<br><span class="hljs-class">export </span>&#123;globalurls&#125;   <span class="hljs-comment">//导出</span><br></code></pre></td></tr></table></figure><p>network.js文件中修改代码</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">url:</span> globalurls.movieList,<br><span class="hljs-symbol">data:</span>&#123;<br><span class="hljs-symbol">  count:</span><span class="hljs-number">7</span><br> &#125;,<br></code></pre></td></tr></table></figure><h4 id="重构后首页效果与之前一样"><a href="#重构后首页效果与之前一样" class="headerlink" title="重构后首页效果与之前一样"></a>重构后首页效果与之前一样</h4><p>由于我的Api换了，所以数据发生了一些变化，之前代码一些数据获取代码可能之后不同</p><p><img src="/image/16.17.png" alt="首页"></p>]]></content>
    
    
    <categories>
      
      <category>WX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>WX</tag>
      
      <tag>小程序</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>豆瓣小程序&amp;入门&amp;搜索栏的实现&amp;评分星星布局</title>
    <link href="/2021/04/20/%E5%BE%AE%E4%BF%A1%E8%B1%86%E7%93%A3%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0(%E4%B8%80)/"/>
    <url>/2021/04/20/%E5%BE%AE%E4%BF%A1%E8%B1%86%E7%93%A3%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0(%E4%B8%80)/</url>
    
    <content type="html"><![CDATA[<p>微信小程序由于适用性强、逻辑简要、开发迅速的特性，叠加具有海量活跃用户的腾讯公司背景，逐渐成为了轻量级单一功能应用场景的较佳承载方式，诸如电影购票、外卖点餐、移动商城、生活服务等场景服务提供商迅速切入了。<br>前段时间学习了一个微信小程序，将所学的html,css,js一起运用学习，下面是记录我的开发过程。</p><hr><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>下载微信开发者工具新建一个微信小程序即可,会出现以下目录结构：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">- project.config.json：项目的配置文件。比如设置项目的名字，设置appid等。<br>- app.js：小程序逻辑处理。比如小程序加载完成执行的代码。<br>- app.json：小程序公共配置。比如小程序的页面，是否有tabbar等。<br>- app.wxss：小程序公共样式。在这个里面写的样式可以被所有页面使用。<br>- pages：存储小程序页面的。<br>- <span class="hljs-keyword">index</span>：页面的名称<br>- <span class="hljs-keyword">index</span>.js：<span class="hljs-keyword">index</span>页面的逻辑处理文件。<br>- <span class="hljs-keyword">index</span>.json：<span class="hljs-keyword">index</span>页面的配置文件。<br>- <span class="hljs-keyword">index</span>.wxml：<span class="hljs-keyword">index</span>页面的页面结构。<br>- <span class="hljs-keyword">index</span>.wxss：<span class="hljs-keyword">index</span>页面的样式。<br>- 其他页面<br></code></pre></td></tr></table></figure><p><img src="/image/16.1.PNG" alt="目录结构"></p><p>修改app.json文件全局配置</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-string">&quot;window&quot;</span>:&#123;<br>  <span class="hljs-string">&quot;backgroundTextStyle&quot;</span>:<span class="hljs-string">&quot;light&quot;</span>,<br>  <span class="hljs-string">&quot;navigationBarBackgroundColor&quot;</span>: <span class="hljs-string">&quot;#41be57&quot;</span>,<br>  <span class="hljs-string">&quot;navigationBarTitleText&quot;</span>: <span class="hljs-string">&quot;豆瓣评分&quot;</span>,<br>  <span class="hljs-string">&quot;navigationBarTextStyle&quot;</span>:<span class="hljs-string">&quot;white&quot;</span><br>&#125;,<br></code></pre></td></tr></table></figure><h3 id="微信小程序组件封装"><a href="#微信小程序组件封装" class="headerlink" title="微信小程序组件封装"></a>微信小程序组件封装</h3><p>相信大家在开发小程序时会遇到某个功能多次使用的情况，比如弹出框。这个时候大家首先想到的是组件化开发，就是把弹出框封装成一个组件，然后哪里使用哪里就调用。</p><h3 id="搜索栏的实现1–主页search"><a href="#搜索栏的实现1–主页search" class="headerlink" title="搜索栏的实现1–主页search"></a>搜索栏的实现1–主页search</h3><p>因为搜索栏会在多处使用，所以把它做成组件是最好的，这样可以多处使用，实现代码的优化。</p><p><img src="/image/16.2.png" alt="新建组件"></p><ol><li>分析：搜索框由两部分组成，即外盒子和搜索框组成</li><li>在主页的时候是导航栏，在搜索页面的时候是搜索框。</li></ol><p><img src="/image/16.3.png" alt="搜索框"></p><ol start="2"><li>searchbar.wxml/.wxss代码实现</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;searchbar&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 导航栏 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">navigator</span>    <span class="hljs-attr">url</span>=<span class="hljs-string">&#x27;/pages/search/search&#x27;</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;search-navigator&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">navigator</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&#x27;search-input&#x27;</span>  <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;搜索&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 这里一保存ctrl+s就会自动生成/pages/search/search文件了 --&gt;</span><br><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.searchbar</span>&#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#41be57</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.search-navigator</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">60</span>rpx;<br>  <span class="hljs-attribute">background</span>:<span class="hljs-number">#fff</span>;<br>  <span class="hljs-attribute">border-radius</span>:  <span class="hljs-number">10</span>rpx;<br><br>  &lt;!-- 本地图片资源无法通过wxss获取，可以通过网络图片，或者base64，或者&lt;/image&gt;标签  这里我们使用网络转换的base图片 --&gt;<br><br>  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAPA0lEQVR4Xu2dj5UUNxLGpQgMERhHwBKBrUnAEIFxBOYiOByBIQKvIzBOYAQR3F4EhyM4iED3Pq/mPDvsTFep1b3qqq/f4wFvJc3qK/2mVKU/HQMfKkAFzioQqQ0VoALnFSAgHB1U4IICBITDgwoQEI4BKtCmAD1Im26s5UQBAuLE0OxmmwIEpE031nKiAAFxYmh2s00BAtKmG2s5UYCAODE0u9mmAAFp0421nChAQJwYmt1sU4CAtOnGWk4UICBO.....省略&quot;</span>);<br><br>  <span class="hljs-attribute">background-position</span>: center center;<br>  <span class="hljs-attribute">background-repeat</span>: no-repeat;<br>  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">8%</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>组件被使用(在首页中使用)在index.json文件中注册</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;usingComponents&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;searchbar&quot;</span>:<span class="hljs-string">&quot;/components/searchbar/searchbar&quot;</span>,<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="4"><li>组件的使用</li></ol><p>index.html中代码</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-section">&lt;searchbar&gt;</span><span class="hljs-section">&lt;/searchbar&gt;</span><br></code></pre></td></tr></table></figure><h3 id="搜索栏的实现2—search页面"><a href="#搜索栏的实现2—search页面" class="headerlink" title="搜索栏的实现2—search页面"></a>搜索栏的实现2—search页面</h3><ol><li>使用组件</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;usingComponents&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;searchbar&quot;</span>:<span class="hljs-string">&quot;/components/searchbar/searchbar&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="/image/16.4.png" alt="组件的注册"></p><ol start="2"><li>组件使用</li></ol><p>search.wxml中代码</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-section">&lt;searchbar&gt;</span><span class="hljs-section">&lt;/searchbar&gt;</span><br></code></pre></td></tr></table></figure><ol start="3"><li>搜索页面searchbar.wxml</li></ol><p>将导航组将navigator添加到组件的属性列表</p><p><img src="/image/16.5.png" alt="添加属性"></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;searchbar&quot;</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-comment">&lt;!--根据导航组件进行不同的渲染 --&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">navigator</span>  <span class="hljs-attr">wx:if</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">isnavigator</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>  <span class="hljs-attr">url</span>=<span class="hljs-string">&#x27;/pages/search/search&#x27;</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;search-navigator&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">navigator</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">wx:else</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;search-input-group&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&#x27;search-input&#x27;</span>  <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;搜索&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><br></code></pre></td></tr></table></figure><p>首页index.wxml  </p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">searchbar</span>  <span class="hljs-attr">isnavigator</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">true</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">searchbar</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>搜索框样式</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.search-input-group</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">60</span>rpx;<br>  <span class="hljs-attribute">background</span>:<span class="hljs-number">#fff</span>;<br>  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10</span>rpx;<br>  <span class="hljs-attribute">border-radius</span>:<span class="hljs-number">10</span>rpx;<br>  <span class="hljs-attribute">padding</span>:<span class="hljs-number">10</span>rpx <span class="hljs-number">20</span>rpx;<br>  <span class="hljs-attribute">box-sizing</span>: border-box;<br>&#125;<br><span class="hljs-selector-class">.search-input</span>&#123;<br>  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">40</span>rpx;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">40</span>rpx;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="电影模块布局"><a href="#电影模块布局" class="headerlink" title="电影模块布局"></a>电影模块布局</h3><ol><li>分析：为一个模块而不是一个盒子，因为下面的是一样的模块，所以后面可以复用。</li></ol><p>wxml</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;module-group&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;module-top&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;module-title&quot;</span>&gt;</span>正在热映电影<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">navigator</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;module-more&quot;</span>&gt;</span>更多<span class="hljs-tag">&lt;/<span class="hljs-name">navigator</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">scroll-view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;module-scroll-view&quot;</span> <span class="hljs-attr">scroll-x</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">true</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span><br><span class="xml">    &lt;navigator</span><br><span class="xml">      wx:for=&quot;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">tvs</span>&#125;&#125;</span><span class="xml">&quot;</span><br><span class="xml">      wx:key=&quot;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item-title</span>&#125;&#125;</span><span class="xml">&quot;</span><br><span class="xml">      class=&quot;item-navigator&quot;</span><br><span class="xml">    &gt;</span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-group&quot;</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;thumbnail-group&quot;</span>&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;thumbnail&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.images.small</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item-title&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.title</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">stars</span> <span class="hljs-attr">rate</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.rating.average</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">stars</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">navigator</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">scroll-view</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>wxss</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 最大模块 */</span><br><span class="hljs-selector-class">.module-group</span>&#123;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">40</span>rpx;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;<br>&#125;<br><span class="hljs-comment">/* 顶部电影 更多flex布局 */</span><br><span class="hljs-selector-class">.module-group</span> <span class="hljs-selector-class">.module-top</span>&#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">36</span>rpx;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-comment">/* 主轴元素贴两边 */</span><br>  <span class="hljs-attribute">justify-content</span>: space-between;<br>&#125;<br><span class="hljs-comment">/* title字体颜色设置 */</span><br><span class="hljs-selector-class">.module-top</span> <span class="hljs-selector-class">.moudle-title</span>&#123;<br>  <span class="hljs-attribute">color</span>:<span class="hljs-number">#494949</span>;<br>&#125;<br><span class="hljs-comment">/* more颜色设置 */</span><br><span class="hljs-selector-class">.module-top</span> <span class="hljs-selector-class">.module-more</span>&#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#41be57</span>;<br>&#125;<br><br><span class="hljs-selector-class">.module-scroll-view</span>&#123;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">40</span>rpx;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">height</span>:<span class="hljs-number">400</span>rpx;<br>  <span class="hljs-comment">/* 设置横向滚动 */</span><br>  <span class="hljs-attribute">white-space</span>: nowrap;<br>&#125;<br><span class="hljs-selector-class">.module-scroll-view</span> <span class="hljs-selector-class">.item-navigator</span>&#123;<br>  <span class="hljs-attribute">width</span>:<span class="hljs-number">200</span>rpx;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20</span>rpx;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>&#125;<br><span class="hljs-comment">/* 最后一个的右边距 对齐 */</span><br><span class="hljs-selector-class">.module-scroll-view</span> <span class="hljs-selector-class">.item-navigator</span><span class="hljs-selector-pseudo">:last-of-type</span>&#123;<br>  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-selector-class">.item-navigator</span>  <span class="hljs-selector-class">.item-group</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>&#125;<br><span class="hljs-selector-class">.item-group</span> <span class="hljs-selector-class">.item-title</span>&#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">28</span>rpx;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20</span>rpx;<br>  <span class="hljs-comment">/* 文本过长处理 */</span><br>  <span class="hljs-attribute">text-overflow</span>:ellipsis;<br>  <span class="hljs-attribute">overflow</span>: hidden;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><img src="/image/16.7.png" alt="css作用效果例图"></p><p>补充：</p><p>scroll-view：<br>有时候我们的一些视图在手机指定的宽度和高度不够存放。那么可以放在 scroll-view 中。<br>设置横向滚动：</p><ol><li>给 scroll-view 添加 scroll-x=”true” 属性。</li><li>给 scroll-view 添加 white-space:nowrap; 样式。</li><li>给 scroll-view 中的子元素设置为 display:inline-block; 。</li></ol><h3 id="评分星星布局1–初始化固定样式"><a href="#评分星星布局1–初始化固定样式" class="headerlink" title="评分星星布局1–初始化固定样式"></a>评分星星布局1–初始化固定样式</h3><p>wxml</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;rate-group&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">wx:for</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/imags/rate_light.png&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/imags/rate_half.png&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/imags/rate_gray.png&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>8.0<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>图片来源本地</p><p><img src="/image/16.6.png" alt="星星图片"></p><p>wxss</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.rate-group</span>&#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: center;<br>  <span class="hljs-attribute">align-content</span>: center;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20</span>rpx;<br>  <span class="hljs-attribute">color</span>:<span class="hljs-number">#ccc</span>;<br>  <span class="hljs-attribute">margin-top</span>:<span class="hljs-number">20</span>rpx;<br>&#125;<br><span class="hljs-selector-class">.rate-group</span>  image&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">20</span>rpx;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">20</span>rpx;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="评分星星布局2–组件化"><a href="#评分星星布局2–组件化" class="headerlink" title="评分星星布局2–组件化"></a>评分星星布局2–组件化</h3><h4 id="分析：评分的星星-高亮，半高亮，不亮星星-是通过评分数字变化的，而评分数字是变化的-不同电影-，所以我们可以将数字传进来计算星星的个数，这时候我们可以使用组件的方式。在组件当中我们定义一个属性评分，然后接收评分的数字在生命周期方法中计算星星-高亮，半高亮，不亮星星-，另一个好处是可以多处复用。"><a href="#分析：评分的星星-高亮，半高亮，不亮星星-是通过评分数字变化的，而评分数字是变化的-不同电影-，所以我们可以将数字传进来计算星星的个数，这时候我们可以使用组件的方式。在组件当中我们定义一个属性评分，然后接收评分的数字在生命周期方法中计算星星-高亮，半高亮，不亮星星-，另一个好处是可以多处复用。" class="headerlink" title="分析：评分的星星(高亮，半高亮，不亮星星)是通过评分数字变化的，而评分数字是变化的(不同电影)，所以我们可以将数字传进来计算星星的个数，这时候我们可以使用组件的方式。在组件当中我们定义一个属性评分，然后接收评分的数字在生命周期方法中计算星星(高亮，半高亮，不亮星星)，另一个好处是可以多处复用。"></a>分析：评分的星星(高亮，半高亮，不亮星星)是通过评分数字变化的，而评分数字是变化的(不同电影)，所以我们可以将数字传进来计算星星的个数，这时候我们可以使用组件的方式。在组件当中我们定义一个属性评分，然后接收评分的数字在生命周期方法中计算星星(高亮，半高亮，不亮星星)，另一个好处是可以多处复用。</h4><ol><li>创建stars组件</li></ol><p><img src="/image/16.8.png" alt="创建"></p><ol start="2"><li>将上面的wxml代码放入stars.wxml中，wxss同理</li></ol><ol start="3"><li>在index.json中导入使用<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;usingComponents&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;searchbar&quot;</span>:<span class="hljs-string">&quot;/components/searchbar/searchbar&quot;</span>,<br>    <span class="hljs-attr">&quot;stars&quot;</span>:<span class="hljs-string">&quot;/components/stars/stars&quot;</span>,<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li>index.wxml中使用<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-section">&lt;stars&gt;</span><span class="hljs-section">&lt;/stars&gt;</span><br></code></pre></td></tr></table></figure></li></ol><h4 id="将数据变成活的"><a href="#将数据变成活的" class="headerlink" title="将数据变成活的"></a>将数据变成活的</h4><ol><li>定义属性<br>在stars的stars.js文件中定义星星的一些属性<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs dts"> <span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 组件的属性列表</span><br><span class="hljs-comment"> */</span><br><span class="hljs-symbol">properties:</span> &#123;<br><span class="hljs-symbol">rate:</span>&#123;<br><span class="hljs-symbol">      type:</span>Number,<br><span class="hljs-symbol">      value:</span><span class="hljs-number">0</span><br>    &#125;, <br><span class="hljs-symbol">starsize:</span>&#123;<br><span class="hljs-symbol">  type:</span>Number,<br><span class="hljs-symbol">  value:</span><span class="hljs-number">20</span> <span class="hljs-comment">//rpx</span><br>&#125;,<br><span class="hljs-symbol">fontsize:</span>&#123;<br><span class="hljs-symbol">  type:</span> Number,<br><span class="hljs-symbol">  value:</span><span class="hljs-number">20</span> <span class="hljs-comment">//rpx</span><br>&#125;,<br><span class="hljs-symbol">fontcolor:</span>&#123;<br><span class="hljs-symbol">  type:</span>String,<br><span class="hljs-symbol">  value:</span><span class="hljs-string">&quot;#ccc&quot;</span><br>&#125;<br>&#125;,<br></code></pre></td></tr></table></figure></li><li>在组件的生命周期实现(attached生命周期就是你的组件一旦被加载就会被执行)</li></ol><p>stars.js文件中的代码</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs excel">lifetim<span class="hljs-symbol">es:</span>&#123;<br>  attach<span class="hljs-symbol">ed:fu</span>nction()&#123;<br>    <span class="hljs-built_in">var</span>  that = this;<br>    <span class="hljs-built_in">var</span>  <span class="hljs-built_in">rate</span>= that.properties.rate;<br>    <span class="hljs-built_in">var</span>  inRate = parseInt(<span class="hljs-built_in">rate</span>);<br>    <span class="hljs-built_in">var</span>  light = parseInt(<span class="hljs-built_in">rate</span>/<span class="hljs-number">2</span>);<br>    <span class="hljs-built_in">var</span>  half = inRate%<span class="hljs-number">2</span>;<br>    <span class="hljs-built_in">var</span>  gray  = <span class="hljs-number">5</span>-light-half;<br>    <span class="hljs-built_in">var</span> lights = [];<br>    <span class="hljs-built_in">var</span>  halfs = [];<br>    <span class="hljs-built_in">var</span>  grays = [];<br>    // for循环遍历存放到数组中<br>    for(<span class="hljs-built_in">var</span>  <span class="hljs-built_in">index</span>=<span class="hljs-number">1</span>;<span class="hljs-built_in">index</span>&lt;=light;<span class="hljs-built_in">index</span>++)&#123;<br>      lights.push(<span class="hljs-built_in">index</span>);<br>    &#125;<br>    for(<span class="hljs-built_in">var</span>  <span class="hljs-built_in">index</span>=<span class="hljs-number">1</span>;<span class="hljs-built_in">index</span>&lt;=half;<span class="hljs-built_in">index</span>++)&#123;<br>      halfs.push(<span class="hljs-built_in">index</span>);<br>    &#125;<br>    for(<span class="hljs-built_in">var</span>  <span class="hljs-built_in">index</span>=<span class="hljs-number">1</span>;<span class="hljs-built_in">index</span>&lt;=gray;<span class="hljs-built_in">index</span>++)&#123;<br>      grays.push(<span class="hljs-built_in">index</span>);<br>    &#125;<br>    // 评分设置<br>   <span class="hljs-built_in">var</span>   ratetext = <span class="hljs-built_in">rate</span> &amp;&amp; <span class="hljs-built_in">rate</span>&gt;<span class="hljs-number">0</span>?rate.toFixed(<span class="hljs-number">1</span>)<span class="hljs-symbol">:</span><span class="hljs-string">&quot;未评分&quot;</span><br>    //数组获取到后 修改 data 中的值<br>    that.setData(&#123;<br>      ligh<span class="hljs-symbol">ts:li</span>ghts,<br>      hal<span class="hljs-symbol">fs:ha</span>lfs,<br>      gra<span class="hljs-symbol">ys:gr</span>ays,<br>      ratete<span class="hljs-symbol">xt:ra</span>tetext,<br>    &#125;);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>修改wxml文件中样式</li></ol><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;rate-group&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">image</span>   <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width:</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">starsize</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">rpx; height:</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">starsize</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">rpx&quot;</span>   <span class="hljs-attr">wx:for</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">lights</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>    <span class="hljs-attr">wx:key</span>=<span class="hljs-string">&quot;this&quot;</span>   <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/imags/rate_light.png&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">image</span>   <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width:</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">starsize</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">rpx; height:</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">starsize</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">rpx&quot;</span>   <span class="hljs-attr">wx:for</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">halfs</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>     <span class="hljs-attr">wx:key</span>=<span class="hljs-string">&quot;this&quot;</span>   <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/imags/rate_half.png&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">image</span>   <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width:</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">starsize</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">rpx; height:</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">starsize</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">rpx&quot;</span>    <span class="hljs-attr">wx:for</span>=<span class="hljs-string">&quot;</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">grays</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>    <span class="hljs-attr">wx:key</span>=<span class="hljs-string">&quot;this&quot;</span>    <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/imags/rate_gray.png&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">text</span>   <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;font-size:</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">fontsize</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">rpx;color:</span></span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">fontcolor</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag"><span class="hljs-string"> &quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">ratetext</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>补充： 生命周期：<br>组件本身的生命周期：<br>组件的生命周期，指的是组件自身的一些函数，这些函数在特殊的时间点或遇到一些特殊的框架事件时被自动触发。<br>其中，最重要的生命周期是 created/attached/detached ，包含一个组件实例生命流程的最主要时间点。（注意：在2.2.3基础库之前，生命周期函数写在 Component 中就可以，在 2.2.3 后应该写在 lifetimes 中。）            </p><ol><li>组件实例刚刚被创建好时， created 生命周期被触发。此时，组件数据 this.data 就是在 Component 构造器中定义的数据 data 。此时还不能调用setData 。通常情况下，这个生命周期只应该用于给组件 this 添加一些自定义属性字段。                </li><li>在组件完全初始化完毕、进入页面节点树后， attached 生命周期被触发。此时， this.data 已被初始化为组件的当前值。这个生命周期很有用，绝大多数初始化工作可以在这个时机进行。                    </li><li>在组件离开页面节点树后，detached 生命周期被触发。退出一个页面时，如果组件还在页面节点树中，则detached 会被触发。       </li></ol>]]></content>
    
    
    <categories>
      
      <category>WX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>WX</tag>
      
      <tag>小程序</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue&amp;计算属性&amp;计算属性缓存vs方法methods&amp;Vue侦听器</title>
    <link href="/2021/04/18/Vue&amp;computed%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7/"/>
    <url>/2021/04/18/Vue&amp;computed%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7/</url>
    
    <content type="html"><![CDATA[<p>前言：插值表达式的语法相当简洁，使用起来也很方便。但是也不免暴露出它的一些缺点，最典型的就是无法进行复杂逻辑运算。所以，Vue才会自带计算属性的功能。</p><hr><h3 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h3><p>模板内的表达式非常便利，但是设计它们的初衷是用于简单运算的。在模板中放入太多的逻辑会让模板过重且难以维护。例如：</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;example&quot;</span>&gt;</span></span><br><span class="xml">  </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">message.split</span>(<span class="hljs-name">&#x27;&#x27;</span>).reverse().join(<span class="hljs-name">&#x27;&#x27;</span>) &#125;&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">在这个地方，模板不再是简单的声明式逻辑。你必须看一段时间才能意识到，这里是想要显示变量 message 的翻转字符串。当你想要在模板中多包含此处的翻转字符串时，就会更加难以处理。</span><br><br><span class="xml">所以，对于任何复杂逻辑，你都应当使用计算属性。</span><br></code></pre></td></tr></table></figure><h3 id="computed"><a href="#computed" class="headerlink" title="computed"></a>computed</h3><p>计算属性的本质就是辅助插值表达式来进行复杂逻辑运算的。</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">msg</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">count</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./node_modules/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  var vm = new Vue(&#123;</span><br><span class="xml">    el: &quot;#app&quot;,</span><br><span class="xml">    data: &#123;</span><br><span class="xml">      msg: &quot;hello  Vue&quot;,</span><br><span class="xml">    &#125;,</span><br><span class="xml">    computed: &#123;</span><br><span class="xml">      count: function () &#123;</span><br><span class="xml">        //切割，翻转，拼接</span><br><span class="xml">        return this.msg.split(&quot; &quot;).reverse().join(&quot;====&quot;); //Vue========hello</span><br><span class="xml">      &#125;,</span><br><span class="xml">    &#125;,</span><br><span class="xml">  &#125;);</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>上面这个案例就是一个computed的实例演示，我们通过代码不难看出：第一个p标记中的插值表达式显示的是原文，而第二个p标记中，显示的则是经过一系列API处理之后的文本内容。</p><p>其中，所有的API操作都放在了computed中的count方法中来实现，而最终插值表达式，只是将computed中处理完毕的属性绑定给自己即可。这也从另一个侧面证实了computed只负责进行复杂逻辑运算的特点。</p><h3 id="计算属性setter和getter"><a href="#计算属性setter和getter" class="headerlink" title="计算属性setter和getter"></a>计算属性setter和getter</h3><ol><li>计算属性一般是没有set方法，只读属性</li><li>使用getter方法较多<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">message</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./node_modules/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    const app = new Vue(&#123;</span><br><span class="xml">      el: &quot;#app&quot;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        firstName: &quot;kobe&quot;,</span><br><span class="xml">        lastName: &quot;Bryant&quot;,</span><br><span class="xml">      &#125;,</span><br><span class="xml">      // 计算属性一般是没有set方法，只读属性</span><br><span class="xml">      computed: &#123;</span><br><span class="xml">        // set中方法可以传参数</span><br><span class="xml">        //   fullName: &#123;</span><br><span class="xml">        //     set: function () &#123;</span><br><span class="xml">        //       console.log(&quot;----&quot;);</span><br><span class="xml">        //     &#125;,</span><br><span class="xml">        //   &#125;,</span><br><br><span class="xml">        fullName: &#123;</span><br><span class="xml">          get: function () &#123;</span><br><span class="xml">            return this.firstName + &quot; &quot; + this.lastName;</span><br><span class="xml">          &#125;,</span><br><span class="xml">        &#125;,</span><br><span class="xml">        //与上面方法一样，一般只使用getter方法</span><br><span class="xml">        //   fullName: &#123;</span><br><span class="xml">        //     function() &#123;</span><br><span class="xml">        //       return this.firstName + &quot; &quot; + this.lastName;</span><br><span class="xml">        //     &#125;,</span><br><span class="xml">        //   &#125;,</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;</span><br><span class="xml">         full : function () &#123;</span><br><span class="xml">          return this.firstName + &quot; &quot; + this.lastName;</span><br><span class="xml">        &#125;,</span><br><span class="xml">      &#125;,</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure></li></ol><h3 id="计算属性缓存-vs-方法methods"><a href="#计算属性缓存-vs-方法methods" class="headerlink" title="计算属性缓存 vs 方法methods"></a>计算属性缓存 vs 方法methods</h3><p>你可能已经注意到我们可以通过在表达式中调用方法来达到同样的效果：</p><p>我们可以将同一函数定义为一个方法而不是一个计算属性。两种方式的最终结果确实是完全相同的。然而，<strong>不同的是计算属性是基于它们的响应式依赖进行缓存的。只在相关响应式依赖发生改变时它们才会重新求值。这就意味着只要 message 还没有发生改变，多次访问 full 计算属性会立即返回之前的计算结果，而不必再次执行函数。</strong></p><p>这也同样意味着下面的计算属性将不再更新，因为computed中的return <code>this.firstName + &quot; &quot; + this.lastName;</code> 不是响应式依赖：      </p><p>相比之下，每当触发重新渲染时，调用方法将<strong>总会</strong>再次执行函数。</p><p>我们为什么需要缓存？假设我们有一个性能开销比较大的计算属性 A，它需要遍历一个巨大的数组并做大量的计算。然后我们可能有其他的计算属性依赖于 A。如果没有缓存，我们将不可避免的多次执行 A 的 getter！如果你不希望有缓存，请用方法来替代。</p><h3 id="Vue侦听器"><a href="#Vue侦听器" class="headerlink" title="Vue侦听器"></a>Vue侦听器</h3><p>侦听属性，响应数据（data&amp;computed）的变化，当数据变化时，会立刻执行对应函数。</p><p>虽然计算属性在大多数情况下更合适，但有时也需要一个自定义的侦听器。这就是为什么 Vue 通过 watch 选项提供了一个更通用的方法，来响应数据的变化。当需要在数据变化时执行异步或开销较大的操作时，这个方式是最有用的。</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- 这里表示被vue控制的区域 --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">fullName</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">  </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">age</span> &#125;&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  const vm = new Vue(&#123;</span><br><span class="xml">    el: &quot;#app&quot;, // 控制id为app的元素</span><br><span class="xml">    data: &#123;</span><br><span class="xml">      firstName: &quot;li&quot;,</span><br><span class="xml">      lastName: &quot;xinxin&quot;,</span><br><span class="xml">      fullName: &quot;li xinxin&quot;,</span><br><span class="xml">      age: 20,</span><br><span class="xml">    &#125;,</span><br><span class="xml">    watch: &#123;</span><br><span class="xml">      firstName() &#123;</span><br><span class="xml">        console.log(&quot;侦听器执行了&quot;);</span><br><span class="xml">        return this.firstName + &quot; &quot; + this.lastName;</span><br><span class="xml">      &#125;,</span><br><span class="xml">      lastName() &#123;</span><br><span class="xml">        console.log(&quot;侦听器执行了&quot;);</span><br><span class="xml">        return this.firstName + &quot; &quot; + this.lastName;</span><br><span class="xml">      &#125;,</span><br><span class="xml">    &#125;,</span><br><span class="xml">  &#125;);</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><img src="/image/15.png" alt="如图"></p><h4 id="侦听器-vs-计算属性"><a href="#侦听器-vs-计算属性" class="headerlink" title="侦听器 vs 计算属性"></a>侦听器 vs 计算属性</h4><ol><li>两者都可以观察和响应Vue实例上的数据的变动。</li><li>watch擅长处理的场景是：一个数据影响多个数据。计算属性擅长处理的场景是：多个数据影响一个数据。</li><li>在侦听器中可以执行异步，但是在计算属性中不可以。</li></ol><h3 id="当我们可以使用一个功能，使用计算属性、方法、侦听器都可以时，推荐使用计算属性。计算属性的模板较轻，有利于提高浏览器的性能。"><a href="#当我们可以使用一个功能，使用计算属性、方法、侦听器都可以时，推荐使用计算属性。计算属性的模板较轻，有利于提高浏览器的性能。" class="headerlink" title="当我们可以使用一个功能，使用计算属性、方法、侦听器都可以时，推荐使用计算属性。计算属性的模板较轻，有利于提高浏览器的性能。"></a>当我们可以使用一个功能，使用计算属性、方法、侦听器都可以时，推荐使用计算属性。计算属性的模板较轻，有利于提高浏览器的性能。</h3><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://cn.vuejs.org/v2/guide/computed.html">Vue官方文档</a></p>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>javascript 关于赋值、浅拷贝、深拷贝</title>
    <link href="/2021/04/17/javascript%20%E5%85%B3%E4%BA%8E%E8%B5%8B%E5%80%BC%E3%80%81%E6%B5%85%E6%8B%B7%E8%B4%9D%E3%80%81%E6%B7%B1%E6%8B%B7%E8%B4%9D%E7%9A%84%E4%B8%AA%E4%BA%BA%E7%90%86%E8%A7%A3/"/>
    <url>/2021/04/17/javascript%20%E5%85%B3%E4%BA%8E%E8%B5%8B%E5%80%BC%E3%80%81%E6%B5%85%E6%8B%B7%E8%B4%9D%E3%80%81%E6%B7%B1%E6%8B%B7%E8%B4%9D%E7%9A%84%E4%B8%AA%E4%BA%BA%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>以下是对关于赋值、浅拷贝、深拷贝的学习</p><hr><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>说这个话题之前，先扯一下JS的基本数据类型。</p><p>大家都知道JS中的数据类型分为：<br>基本类型：string, number, boolean, null, undefined,symbol(ES6新增)<br>引用类型：Object，特殊的有Array, Function, Date, Math, RegExp, Error等((Object类)有常规名值对的无序对象{a:1}，数组[1,2,3]，以及函数等)     </p><p>那什么是引用类型呢？这又得扯上JS的内存机制了。</p><p>JS的内存跟其他的内存差不多，分为堆（heap）和栈（stack）。 </p><ol><li>栈和堆<br>栈：由系统自动分配，自动回收，效率高，但容量小。<br>堆：由程序员手动分配内存，并且手动销毁（高级语言如JS中有垃圾自动回收机制），效率不如栈，但容量大。<br>请注意区分数据结构中所说的堆栈和内存中的堆栈是两回事。</li><li>基本类型和引用类型分配位置(栈，堆)<br>JS的基本类型分配在栈中，而因为引用类型大小的不固定，系统将存储该引用类型的地址存在栈中，并赋值给变量本身，而具体的内容存在堆中。所以当访问一个对象的时候，先访问栈中它的地址，然后按照这个地址去堆中找到它的实际内容。<h4 id="例"><a href="#例" class="headerlink" title="例"></a>例</h4></li></ol><ol><li>a.基本类型–名值存储在栈内存中，例如let a=1;<br><img src="/image/14.1.PNG" alt="如图"><br>当你b=a复制时，栈内存会新开辟一个内存，例如这样：<br><img src="/image/14.2.PNG" alt="如图">   </li></ol><p>所以当复制的时候，对于基本类型的变量，系统会为新的变量在栈中开辟一个新的空间，赋予相同的值，然后这两个变量就各自独立，毫无牵连。所以当你此时修改a=2，对b并不会造成影响，因为此时的b已自食其力，翅膀硬了，不受a的影响了.         </p><ol><li>b.引用数据类型–名存在栈内存中，值存在于堆内存中，但是栈内存会提供一个引用的地址指向堆内存中的值<br><img src="/image/14.3.PNG" alt="如图"><br>而对于引用类型的变量，新的变量复制的是那个对象在堆中的地址，这两个变量指向的是同一个对象。        </li></ol><p>例子：简单的引用拷贝(浅拷贝)</p><pre><code>var obj = &#123;name: &#39;Yecao&#39;&#125;;var obj2 = obj;console.log(obj2.name); // &#39;Yecao&#39;obj2.name = &#39;Claire&#39;;console.log(obj.name); //&#39;Claire&#39;</code></pre><p>以上是个很简单的例子，obj2复制了obj之后，两个其实指向的是同一个对象。           </p><p>而当我们a[0]=1时进行数组修改时，由于a与b指向的是同一个地址，所以自然b也受了影响，这就是所谓的浅拷贝了。             </p><p><img src="/image/14.4.PNG" alt="如图">        </p><p>实现简单的深拷贝<br>这么我们封装一个深拷贝的函数(PS：只是一个基本实现的展示，并非最佳实践)</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> deep<span class="hljs-constructor">Clone(<span class="hljs-params">obj</span>)</span>&#123;<br>    <span class="hljs-keyword">let</span> objClone = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Array</span>.</span></span>is<span class="hljs-constructor">Array(<span class="hljs-params">obj</span>)</span>?<span class="hljs-literal">[]</span>:&#123;&#125;;<br>    <span class="hljs-keyword">if</span>(obj<span class="hljs-operator"> &amp;&amp; </span>typeof obj===<span class="hljs-string">&quot;object&quot;</span>)&#123;<br>        <span class="hljs-keyword">for</span>(key <span class="hljs-keyword">in</span> obj)&#123;<br>            <span class="hljs-keyword">if</span>(obj.has<span class="hljs-constructor">OwnProperty(<span class="hljs-params">key</span>)</span>)&#123;<br>                <span class="hljs-comment">//判断ojb子元素是否为对象，如果是，递归复制</span><br>                <span class="hljs-keyword">if</span>(obj<span class="hljs-literal">[<span class="hljs-identifier">key</span>]</span>&amp;&amp;typeof obj<span class="hljs-literal">[<span class="hljs-identifier">key</span>]</span> ===<span class="hljs-string">&quot;object&quot;</span>)&#123;<br>                    objClone<span class="hljs-literal">[<span class="hljs-identifier">key</span>]</span> = deep<span class="hljs-constructor">Clone(<span class="hljs-params">obj</span>[<span class="hljs-params">key</span>])</span>;<br>                &#125;<span class="hljs-keyword">else</span>&#123;<br>                    <span class="hljs-comment">//如果不是，简单复制</span><br>                    objClone<span class="hljs-literal">[<span class="hljs-identifier">key</span>]</span> = obj<span class="hljs-literal">[<span class="hljs-identifier">key</span>]</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    return objClone;<br>&#125;    <br><span class="hljs-keyword">let</span> a=<span class="hljs-literal">[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]</span>,<br>    b=deep<span class="hljs-constructor">Clone(<span class="hljs-params">a</span>)</span>;<br>a<span class="hljs-literal">[<span class="hljs-number">0</span>]</span>=<span class="hljs-number">2</span>;<br>console.log(a,b);<br></code></pre></td></tr></table></figure><p>可以看到<br><img src="/image/14.5.PNG" alt="如图">        </p><p>跟之前想象的一样，现在b脱离了a的控制，不再受a影响了。</p><p>这里再次强调，深拷贝，是拷贝对象各个层级的属性<br><img src="/image/14.6.PNG" alt="如图">   </p><p>第一层的属性确实深拷贝，拥有了独立的内存，但更深的属性却仍然公用了地址，所以才会造成上面的问题。</p><p>同理，concat方法与slice也存在这样的情况，他们都不是真正的深拷贝，这里需要注意。  </p><h4 id="slice-和-concat"><a href="#slice-和-concat" class="headerlink" title="slice 和 concat"></a>slice 和 concat</h4><p>Array 的 slice 和 concat 方法 和 jQuery 中的 extend 复制方法，他们都会复制第一层的值，对于 第一层 的值都是 深拷贝，而到 第二层 的时候 Array 的 slice 和 concat 方法就是 复制引用 ，jQuery 中的 extend 复制方法 则 取决于 你的 第一个参数， 也就是是否进行递归复制。所谓第一层 就是 key 所对应的 value 值是基本数据类型，也就像上面栗子中的name、age，而对于 value 值是引用类型 则为第二层，也就像上面栗子中的 company。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ol><li>JS的基本类型不存在浅拷贝还是深拷贝的问题,深拷贝与浅拷贝的概念只存在于引用类型。</li><li>对于仅仅是复制了引用（地址），换句话说，复制了之后，原来的变量和新的变量指向同一个东西，彼此之间的操作会互相影响，为 浅拷贝。<br>而如果是在堆中重新分配内存，拥有不同的地址，但是值是一样的，复制后的对象与原来的对象是完全隔离，互不影响，为 深拷贝。</li><li>深浅拷贝 的主要区别就是：复制的是引用(地址)还是复制的是实例。</li></ol><h4 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h4><p><a href="https://www.cnblogs.com/echolun/p/7889848.html">博客圆</a></p><p><a href="https://zhuanlan.zhihu.com/p/26282765">知乎</a></p>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>JS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ES6-promise</title>
    <link href="/2021/04/17/ES6(promise)/"/>
    <url>/2021/04/17/ES6(promise)/</url>
    
    <content type="html"><![CDATA[<p>在JavaScript的世界中，所有代码都是单线程执行的。由于这个“缺陷”，导致 <strong>JavaScript的所有网络操作，浏览器事件</strong>，都必须是异步执行。异步执行可以用回调函数实现。一旦有一连串的ajax请求a,b,c,d….后面的请求依赖前面的请求结果，就需要层层嵌套。这种缩进和层层嵌套的方式，非常容易造成上下文代码混乱，我们不得不非常小心翼翼处理内层函数与外层函数的数据，一旦内层函数使用了上层函数的变量，这种混乱程度就会加剧…总之，这种层叠上下文的层层嵌套方式，着实增加了神经的紧张程度</p><hr><p>先理解一下什么是回调函数</p><h4 id="什么是函数？"><a href="#什么是函数？" class="headerlink" title="什么是函数？"></a>什么是函数？</h4><p>函数是在其中有一组代码的逻辑构件，用来执行特定任务。实际上为了易于调试和维护，函数允许以更有组织的方式去编写代码。函数还允许代码重用。</p><p>你只需定义一次函数，然后在需要时去调用它，而不必一次又一次地编写相同的代码。</p><h2 id="回调函数（callback）"><a href="#回调函数（callback）" class="headerlink" title="回调函数（callback）"></a>回调函数（callback）</h2><p>首先回调函数就是一个函数,形式上和其他函数没有半点区别.<br>举个例子:</p><p>一般函数:function a(int a, String b):接收的参数是一般类型.</p><p>特殊函数:function b(function c):接收的参数是一个函数,c这个函数就叫回调函数.</p><p>你也可以这么理解:本质区别是,一般一个函数调用另一个函数,被调用的函数是出现在方法体当中,而回调函数比较特殊,它是出现在参数列表当中.也就是说,当调用的时候,需要从其他地方拿到这个(回调)函数,以参数的形式传入.<br><img src="/image/12.png" alt="示例"></p><h2 id="异步操作"><a href="#异步操作" class="headerlink" title="异步操作"></a>异步操作</h2><h3 id="同步和异步区别？"><a href="#同步和异步区别？" class="headerlink" title="同步和异步区别？"></a>同步和异步区别？</h3><p>举个栗子，煮开水，同步就是把水放上去烧，得一直等水开，中途不能做其他事情。而异步，则是把水放上去烧，让水在烧，你可以玩手机看电视，等水开了把火关掉。同样的，代码中也是一样，同步是现在发生的，异步是未来某个时刻发生的。</p><h3 id="JS-运行机制"><a href="#JS-运行机制" class="headerlink" title="JS 运行机制"></a>JS 运行机制</h3><p>先介绍下JavaScript运行机制，因为JS 是单线程运行的，所以这意味着两段代码不能同时运行，而是必须一个接一个地运行，所以，在同步代码执行过程中，异步代码是不执行的。只有等同步代码执行结束后，异步代码才会被添加到事件队列中。</p><h3 id="JS-中异步有几种？"><a href="#JS-中异步有几种？" class="headerlink" title="JS 中异步有几种？"></a>JS 中异步有几种？</h3><p>JS 中异步操作还挺多的，常见的分以下几种：</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">setTimeout</span> (<span class="hljs-built_in">setInterval</span>)<br>AJAX<br><span class="hljs-built_in">Promise</span><br><span class="hljs-keyword">async</span>/<span class="hljs-keyword">await</span><br></code></pre></td></tr></table></figure><h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p>状态的特点<br>Promise 异步操作有三种状态：pending（进行中）、fulfilled（已成功）和 rejected（已失败）。除了异步操作的结果，任何其他操作都无法改变这个状态。    </p><p>Promise 对象只有：从 pending 变为 fulfilled 和从 pending 变为 rejected 的状态改变。只要处于 fulfilled 和 rejected ，状态就不会再变了即 resolved（已定型）。<br>语法：</p><figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nim">new <span class="hljs-type">Promise</span>( function(resolve, reject) <span class="hljs-meta">&#123;...&#125;</span>);<br></code></pre></td></tr></table></figure><p>Promise 对象是由关键字 new 及其构造函数来创建的。这个“处理器函数”接受两个函数 resolve 和 reject 作为其参数。当异步任务顺利完成且返回结果值时，会调用 resolve 函数；而当异步任务失败且返回失败原因（通常是一个错误对象）时，会调用reject 函数。       </p><p>new Promise 返回一个 promise 对象，在遇到 resolve 或 reject之前，状态一直是pending，如果调用 resolve 方法，状态变为 fulfilled，如果调用了 reject 方法，状态变为 rejected。   </p><p>例子：<br>案例:用户登录，并展示该用户的各科成绩。在页面发送两次请求:<br>1.查询当前用户信息<br>2.按照当前用户的id查出他的课程<br>3.按照当前课程id查出分数<br>分析:此时后台应该提供三个接口，一个提供用户查询接口，一个提供科目的接口，一个提供各科成绩的接口，为了渲染方便，最好响应json数据。在这里就不编写后台接口了，而是提供三个json文件，直接提供json数据，模拟后台接口。<br><img src="/image/12.1.png" alt="数据如图"></p><ol><li>ajax发送请求获取数据方法<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 导入JQuery --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  $.ajax(&#123;</span><br><span class="javascript">    url: <span class="hljs-string">&quot;mock/user.json&quot;</span>,</span><br><span class="javascript">    <span class="hljs-function"><span class="hljs-title">success</span>(<span class="hljs-params">data</span>)</span> &#123;</span><br><span class="javascript">      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;查询用户：&quot;</span>, data);</span><br><span class="javascript">      $.ajax(&#123;</span><br><span class="javascript">        url: <span class="hljs-string">`mock/user_corse_<span class="hljs-subst">$&#123;data.id&#125;</span>.json`</span>,</span><br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">success</span>(<span class="hljs-params">data</span>)</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;查询到课程：&quot;</span>, data);</span><br><span class="javascript">          $.ajax(&#123;</span><br><span class="javascript">            url: <span class="hljs-string">`mock/corse_score_<span class="hljs-subst">$&#123;data.id&#125;</span>.json`</span>,</span><br><span class="javascript">            <span class="hljs-function"><span class="hljs-title">success</span>(<span class="hljs-params">data</span>)</span> &#123;</span><br><span class="javascript">              <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;查询到分数：&quot;</span>, data);</span><br>            &#125;,<br><span class="javascript">            <span class="hljs-function"><span class="hljs-title">error</span>(<span class="hljs-params">error</span>)</span> &#123;</span><br><span class="javascript">              <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;出现异常了：&quot;</span> + error);</span><br>            &#125;,<br>          &#125;);<br>        &#125;,<br><span class="javascript">        <span class="hljs-function"><span class="hljs-title">error</span>(<span class="hljs-params">error</span>)</span> &#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;出现异常了：&quot;</span> + error);</span><br>        &#125;,<br>      &#125;);<br>    &#125;,<br><span class="javascript">    <span class="hljs-function"><span class="hljs-title">error</span>(<span class="hljs-params">error</span>)</span> &#123;</span><br><span class="javascript">      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;出现异常了：&quot;</span> + error);</span><br>    &#125;,<br>  &#125;);<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>Promise方法</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-number">1.</span>primise可以封装异步操作<br><span class="hljs-keyword">let</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">//1.异步操作</span><br>  $.ajax(&#123;<br>    url: <span class="hljs-string">&quot;user.json&quot;</span>,<br>    success: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>&#123;<br>      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;查询用户成功：&quot;</span>, data);<br>      resolve(data); <span class="hljs-comment">//成功了</span><br>    &#125;,<br>    error: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>&#123;<br>      reject(err); <span class="hljs-comment">//失败了</span><br>    &#125;,<br>  &#125;);<br>&#125;);<br><span class="hljs-comment">//then 方法接收两个函数作为参数，第一个参数是 Promise 执行成功时的回调，</span><br><span class="hljs-comment">//第二个参数是 Promise 执行失败时的回调，两个函数只会有一个被调用。</span><br><span class="hljs-comment">// obj对象是上一步传下来的对象</span><br>p.then(<span class="hljs-function">(<span class="hljs-params">obj</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">//p.then调用完以后还会返回一个promise对象</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    $.ajax(&#123;<br>      url: <span class="hljs-string">`usr_corse_<span class="hljs-subst">$&#123;obj.id&#125;</span>.json`</span>,<br>      success: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;查询用户课程成功：&quot;</span>, data);<br>        resolve(data);<br>      &#125;,<br>      error: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>&#123;<br>        reject(err);<br>      &#125;,<br>    &#125;);<br>  &#125;);<br>&#125;).then(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// data是上一步的data</span><br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;上一步的结果&quot;</span>, data);<br>  $.ajax(&#123;<br>    url: <span class="hljs-string">`corse_score_<span class="hljs-subst">$&#123;data.id&#125;</span>.json`</span>,<br>    success: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>&#123;<br>      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;查询课程得分成功：&quot;</span>, data);<br>    &#125;,<br>    error: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>&#123;&#125;,<br>  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure><ol start="3"><li>简化Promise,抽取方法</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params">url, data</span>) </span>&#123;<br>  <span class="hljs-comment">// new  Promise封装一个异步操作</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    $.ajax(&#123;<br>      url: url,<br>      data: data,<br>      success: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>&#123;<br>        resolve(data);<br>      &#125;,<br>      error: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>&#123;<br>        reject(err);<br>      &#125;,<br>    &#125;);<br>  &#125;);<br>&#125;<br><span class="hljs-comment">// 发送一个get请求，由于get封装的是Promise方法所以可以调用.then方法</span><br>get(<span class="hljs-string">&quot;user.json&quot;</span>)<br>  .then(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;用户查询成功:&quot;</span>, data);<br>    <span class="hljs-keyword">return</span> get(<span class="hljs-string">`usr_corse_<span class="hljs-subst">$&#123;data.id&#125;</span>.json`</span>);<br>  &#125;)<br>  .then(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;课程查询成功:&quot;</span>, data);<br>    <span class="hljs-keyword">return</span> get(<span class="hljs-string">`corse_score_<span class="hljs-subst">$&#123;data.id&#125;</span>.json`</span>);<br>  &#125;)<br>  .then(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;课程成绩查询成功:&quot;</span>, data);<br>  &#125;)<br>  .catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;数据异常&quot;</span>, err);<br>  &#125;);<br></code></pre></td></tr></table></figure><h4 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all"></a>Promise.all</h4><p>Promise.all()方法用于将多个 Promise 实例，包装成一个新的 Promise 实例。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Promise</span>.<span class="hljs-literal">all</span>([promise<span class="hljs-number">1</span>, promise<span class="hljs-number">2</span>]).then(success<span class="hljs-number">1</span>, fail<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p>promise1和promise2都成功才会调用success1</p><h4 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race"></a>Promise.race</h4><p>Promise.race()方法同样是将多个 Promise 实例，包装成一个新的 Promise 实例。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Promise</span>.race([promise<span class="hljs-number">1</span>, promise<span class="hljs-number">2</span>]).then(success<span class="hljs-number">1</span>, fail<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p>promise1和promise2只要有一个成功就会调用success1</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>1.Promise的作用<br>主要用于异步计算<br>可以将异步操作队列化，按照期望的顺序执行，返回符合预期的结果<br>可以在对象之间传递和操作promise，帮助我们处理队列  </p><p>2.理解<br>promise是一个对象，对象和函数的区别就是对象可以保存状态，函数不可以（闭包除外）<br>并未剥夺函数return的能力，因此无需层层传递callback，进行回调获取数据<br>代码风格，容易理解，便于维护<br>多个异步等待合并便于解决</p><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a href="https://juejin.cn/post/6844903541543288840">理解 JavaScript 异步操作</a><br><a href="https://www.runoob.com/w3cnote/es6-promise.html">菜鸟教程</a></p>]]></content>
    
    
    <categories>
      
      <category>ES6</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>ES6</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ES6-模块化</title>
    <link href="/2021/04/17/ES6%E6%A8%A1%E5%9D%97%E5%8C%96/"/>
    <url>/2021/04/17/ES6%E6%A8%A1%E5%9D%97%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<p>模块化就是把代码进行拆分，方便重复利用，类似java中的导包，需要使用一个包，必须先导包，而js中没有包的概念，换来的是<strong>模块</strong></p><p>ES6 的模块化分为导出（export） @与导入（import）两个模块。</p><hr><h3 id="一个页面需要引入多个js文件引发的问题："><a href="#一个页面需要引入多个js文件引发的问题：" class="headerlink" title="一个页面需要引入多个js文件引发的问题："></a>一个页面需要引入多个js文件引发的问题：</h3><ol><li>请求过多</li><li>依赖模糊</li><li>难以维护 这些问题可以通过现代模块化编码和项目构建来解决<h2 id="模块化优点"><a href="#模块化优点" class="headerlink" title="模块化优点"></a>模块化优点</h2></li><li>避免命名冲突（减少命名空间污染）</li><li>更好的分类，按需加载</li><li>更高的复用性</li><li>高可维护性</li></ol><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ol><li><p>ES6 的模块自动开启严格模式，不管你有没有在模块头部加上 use strict;。        </p></li><li><p>模块中可以导入和导出各种类型的变量，如函数，对象，字符串，数字，布尔值，类等。      </p></li><li><p>每个模块都有自己的上下文，每一个模块内声明的变量都是局部变量，不会污染全局作用域。       </p></li><li><p>每一个模块只加载一次（是单例的）， 若再去加载同目录下同文件，直接从内存中读取。 </p></li></ol><h3 id="export-与-import"><a href="#export-与-import" class="headerlink" title="export 与 import"></a>export 与 import</h3><p>模块导入导出各种类型的变量，如字符串，数值，函数，类。</p><ol><li>导出的函数声明与类声明必须要有名称（export default 导出了一个对象，没给这个对象起名字，导入的时候可以随意起名字）。     </li><li>不仅能导出声明还能导出引用（例如函数）。</li><li>export 命令可以出现在模块的任何位置，但必需处于模块顶层。(如果处于块级作用域内，就会报错)<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&#x27;bar&#x27;</span> <span class="hljs-comment">// SyntaxError</span><br>&#125;<br>foo()<br></code></pre></td></tr></table></figure></li><li>import 命令会提升到整个模块的头部，首先执行。</li></ol><p>代码示例<br>hello.js</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>  export   const  util=&#123;<br><span class="hljs-regexp">//</span>     sum(a,b)&#123;<br><span class="hljs-regexp">//</span>         return  a+b;<br><span class="hljs-regexp">//</span>     &#125;<br><span class="hljs-regexp">//</span> &#125;<br><br><span class="hljs-regexp">//</span> 这两个等效<br><span class="hljs-regexp">//</span> 导出了一个对象，没给这个对象起名字，导入的时候可以随意起名字<br>export  default&#123;<br>        sum(a,b)&#123;<br>            return  a+b;<br>        &#125;<br>    &#125;<br><br></code></pre></td></tr></table></figure><p>user.js</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros">var  <span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;jack&quot;</span><br>var  <span class="hljs-attribute">age</span>=21<br><br>function  <span class="hljs-builtin-name">add</span>(a,b)&#123;<br>    return  a+b;<br>&#125;<br><br><span class="hljs-builtin-name">export</span>  &#123;name,age,add&#125;<br></code></pre></td></tr></table></figure><p>main.js</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">import</span> abc  <span class="hljs-keyword">from</span>  &quot;./hello.js&quot;<br><span class="hljs-keyword">import</span>  &#123;<span class="hljs-type">name</span>,<span class="hljs-keyword">add</span>&#125;  <span class="hljs-keyword">from</span>  &quot;./user.js&quot;<br><br>abc.sum(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>);<br>console.log(<span class="hljs-type">name</span>);<br><span class="hljs-keyword">add</span>(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>);<br></code></pre></td></tr></table></figure><p>标签导入</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;script <span class="hljs-attribute">type</span>=<span class="hljs-string">&quot;module&quot;</span> <span class="hljs-attribute">src</span>=<span class="hljs-string">&quot;./main.js&quot;</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h3><p>Babel是一个Javascript编译器，有些浏览器 (如 IE) 尚未支持 ES6 模块化部分语法，因此我们需要使用 babel 对其进行转化，变为浏览器可以识别的语法（ES5）。提升其兼容性。</p><h4 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h4><p><a href="https://www.runoob.com/w3cnote/es6-module.html">菜鸟教程</a></p>]]></content>
    
    
    <categories>
      
      <category>ES6</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>ES6</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue&amp; axios的基本使用</title>
    <link href="/2021/04/17/Vue&amp;axios(%E4%B8%80)/"/>
    <url>/2021/04/17/Vue&amp;axios(%E4%B8%80)/</url>
    
    <content type="html"><![CDATA[<h3 id="Vue-js-Ajax-axios"><a href="#Vue-js-Ajax-axios" class="headerlink" title="Vue.js Ajax(axios)"></a>Vue.js Ajax(axios)</h3><p>Vue.js 2.0 版本推荐使用 axios 来完成 ajax 请求。</p><p>Axios 是一个基于 Promise 的 HTTP 库，可以用在浏览器和 node.js 中。</p><p>Github开源地址： <a href="https://github.com/axios/axios">https://github.com/axios/axios</a></p><h4 id="安装方法"><a href="#安装方法" class="headerlink" title="安装方法"></a>安装方法</h4><ol><li>使用 cdn:<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>使用 npm:<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">npm <span class="hljs-keyword">install</span> axios<br></code></pre></td></tr></table></figure></li><li>其他</li></ol><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><ol><li>axios必须先导入才可以使用</li><li>使用get或post方法即可发送对应的请求</li><li>then方法中的回调函数会在请求成功或失败时触发</li><li>通过回调函数的形参可以获取响应内容，或错误信息</li></ol><p>示例：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;get请求&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;get&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;post请求&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;post&quot;</span> /&gt;</span><br>  <span class="hljs-comment">&lt;!-- 官网提供的axios在线地址 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br>    /*<br>        接口1：随机笑话<br><span class="javascript">        请求地址：https:<span class="hljs-comment">//autumnfish.cn/api/joke/list</span></span><br>        请求方法：get<br>        请求参数：num(笑话条数，数字)<br>        响应内容：随机笑话<br>        */<br><span class="javascript">    <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;.get&quot;</span>).onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br>      axios<br><span class="javascript">        .get(<span class="hljs-string">&quot;https://autumnfish.cn/api/joke/list?num=6&quot;</span>)</span><br><span class="javascript">        .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(response);</span><br>        &#125;),<br><span class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(err);</span><br>        &#125;;<br>    &#125;;<br>    /*<br>        接口2：用户注册<br><span class="javascript">        请求地址：https:<span class="hljs-comment">//autumnfish.cn/api/user/reg</span></span><br>        请求方法：post<br>        请求参数：username(用户名，字符串)<br>        响应内容：注册成功失败<br>        */<br><span class="javascript">    <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;.post&quot;</span>).onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br>      axios<br><span class="javascript">        .post(<span class="hljs-string">&quot;https://autumnfish.cn/api/user/reg&quot;</span>, &#123; <span class="hljs-attr">username</span>: <span class="hljs-string">&quot;jack&quot;</span> &#125;)</span><br><span class="javascript">        .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(response);</span><br>        &#125;),<br><span class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(err);</span><br>        &#125;;<br>    &#125;;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><p>querySelector() 方法返回文档中匹配指定 CSS 选择器的一个元素。</p><p>注意： querySelector() 方法仅仅返回匹配指定选择器的第一个元素。如果你需要返回所有的元素，请使用 querySelectorAll() 方法替代。</p><h3 id="axios-vue"><a href="#axios-vue" class="headerlink" title="axios+vue"></a>axios+vue</h3><p>例子：</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;获取笑话&quot;</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;getJoke&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">joke</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- 开发环境版本，包含了有帮助的命令行警告 --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- 官网提供的axios在线地址 --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    /*</span><br><span class="xml">        接口1：随机笑话</span><br><span class="xml">        请求地址：https://autumnfish.cn/api/joke/list</span><br><span class="xml">        请求方法：get</span><br><span class="xml">        请求参数：num(笑话条数，数字)</span><br><span class="xml">        响应内容：随机笑话</span><br><span class="xml">        */</span><br><span class="xml">    var app = new Vue(&#123;</span><br><span class="xml">      el: &quot;#app&quot;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        joke: &quot;很好笑的笑话&quot;,</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;</span><br><span class="xml">        getJoke: function () &#123;</span><br><span class="xml">          console.log(this.joke);</span><br><span class="xml">          var that = this;</span><br><span class="xml">          axios</span><br><span class="xml">            .get(&quot;https://autumnfish.cn/api/joke&quot;)</span><br><span class="xml">            .then(function (response) &#123;</span><br><span class="xml">              // console.log(response);</span><br><span class="xml">              console.log(response.data);</span><br><span class="xml">              // console.log(this.joke);</span><br><span class="xml">              that.joke = response.data;</span><br><span class="xml">            &#125;),</span><br><span class="xml">            function (err) &#123;&#125;;</span><br><span class="xml">        &#125;,</span><br><span class="xml">      &#125;,</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue&amp;v-on&amp;v-show&amp;v-if&amp;v-bind&amp;v-for&amp;v-model</title>
    <link href="/2021/04/16/Vue%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0(%E4%BA%8C)/"/>
    <url>/2021/04/16/Vue%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0(%E4%BA%8C)/</url>
    
    <content type="html"><![CDATA[<h3 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h3><p>Vue.js 使用了基于 HTML 的模板语法，允许开发者声明式地将 DOM 绑定至底层 Vue 实例的数据。所有 Vue.js 的模板都是合法的 HTML，所以能被遵循规范的浏览器和 HTML 解析器解析。</p><p>在底层的实现上，Vue 将模板编译成虚拟 DOM 渲染函数。结合响应系统，Vue 能够智能地计算出最少需要重新渲染多少组件，并把 DOM 操作次数减到最少。</p><hr><h3 id="v-on"><a href="#v-on" class="headerlink" title="v-on"></a>v-on</h3><ol><li>该指令的作用是：为元素绑定事件</li><li>事件名不需要写on</li><li>指令可以简写为@</li><li>绑定的方法定义在methods属性中</li><li>方法内部通过this关键字可以访问定义在data中的数据</li></ol><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;v-on指令&quot;</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;doIt&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;v-on简写&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;doIt&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;双击事件&quot;</span> @<span class="hljs-attr">dblclick</span>=<span class="hljs-string">&quot;doIt&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeFood&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">food</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./node_modules/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    var app = new Vue(&#123;</span><br><span class="xml">      el: &quot;#app&quot;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        food: &quot;西兰花炒蛋&quot;,</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;</span><br><span class="xml">        doIt: function () &#123;</span><br><span class="xml">          alert(&quot;学Vue&quot;);</span><br><span class="xml">        &#125;,</span><br><span class="xml">        changeFood: function () &#123;</span><br><span class="xml">          // console.log(this.food);</span><br><span class="xml">          this.food += &quot;好好吃！&quot;;</span><br><span class="xml">        &#125;,</span><br><span class="xml">      &#125;,</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p><img src="/image/11.6.PNG" alt="效果图"></p><h4 id="v-on例子"><a href="#v-on例子" class="headerlink" title="v-on例子"></a>v-on例子</h4><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- html结构 --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;input-num&quot;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">num</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;sub&quot;</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./node_modules/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  <span class="hljs-comment">&lt;!-- 编码 --&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    // 创建Vue实例</span><br><span class="xml">    var app = new Vue(&#123;</span><br><span class="xml">      el: &quot;#app&quot;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        num: 1,</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;</span><br><span class="xml">        add: function () &#123;</span><br><span class="xml">          // console.log(&quot;add&quot;);</span><br><span class="xml">          if (this.num &lt; 10) &#123;</span><br><span class="xml">            this.num++;</span><br><span class="xml">          &#125; else &#123;</span><br><span class="xml">            alert(&quot;别点了，最大了！&quot;);</span><br><span class="xml">          &#125;</span><br><span class="xml">        &#125;,</span><br><span class="xml">        sub: function () &#123;</span><br><span class="xml">          // console.log(&quot;sub&quot;);</span><br><span class="xml">          if (this.num &gt; 0) &#123;</span><br><span class="xml">            this.num--;</span><br><span class="xml">          &#125; else &#123;</span><br><span class="xml">            alert(&quot;别点了，最小了&quot;);</span><br><span class="xml">          &#125;</span><br><span class="xml">        &#125;,</span><br><span class="xml">      &#125;,</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a>v-show</h3><ol><li>该指令的作用是根据真假切换元素的显示状态</li><li>原理是修改元素的display，实现显示隐藏</li><li>指令后面的内容，最终都会解析为<strong>布尔值</strong></li><li>值为<strong>true</strong>元素显示，值为<strong>false</strong>元素隐藏</li><li>数据改变之后，对应元素的显示状态会<strong>同步更新</strong></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;切换显示状态&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeIsShow&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;累加年龄&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addAge&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;isshow&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;.//node_modules/vue/img/1.jpg&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;age&gt;=18&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;.//node_modules/vue/img/1.jpg&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./node_modules/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&quot;#app&quot;</span>,</span><br>      data: &#123;<br><span class="javascript">        isshow: <span class="hljs-literal">false</span>,</span><br>        age: 17,<br>      &#125;,<br>      methods: &#123;<br><span class="javascript">        changeIsShow: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-built_in">this</span>.isshow = !<span class="hljs-built_in">this</span>.isshow;</span><br>        &#125;,<br><span class="javascript">        addAge: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-built_in">this</span>.age++;</span><br>        &#125;,<br>      &#125;,<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="v-if"><a href="#v-if" class="headerlink" title="v-if"></a>v-if</h3><ol><li>该指令的作用是根据表达式的真假来切换元素的显示状态</li><li>本质是通过操作<strong>dom</strong>元素来切换显示状态</li><li>表达式的值为<strong>true</strong>,元素存在于<strong>dom</strong>中；为<strong>false</strong>，从<strong>dom</strong>树中移除</li><li>频繁的切换使用<strong>v-show</strong>,反之使用<strong>v-if</strong>,前者的切换消耗小</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;切换显示&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;toggleIsShow&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;isshow&quot;</span>&gt;</span>学习Vue<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;isshow&quot;</span>&gt;</span>学习Vue---v-show修饰<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;temperature&gt;=35&quot;</span>&gt;</span>热死了<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./node_modules/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&quot;#app&quot;</span>,</span><br>      data: &#123;<br><span class="javascript">        isshow: <span class="hljs-literal">false</span>,</span><br>        temperature: 20,<br>      &#125;,<br>      methods: &#123;<br><span class="javascript">        toggleIsShow: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-built_in">this</span>.isshow = !<span class="hljs-built_in">this</span>.isshow;</span><br>        &#125;,<br>      &#125;,<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind"></a>v-bind</h3><ol><li>该指令的作用是：为元素绑定属性</li><li>完整写法是 v-bind:属性名</li><li>简写的话可以直接省略v-bind，只保留 :属性名</li><li>需要动态的增删 class 建议使用对象的方式</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br>  .active &#123;<br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">v-bind:src</span>=<span class="hljs-string">&quot;imgSrc&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;imgSrc&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;imgTitle +&#x27;!!!&#x27;&quot;</span>//</span><br><span class="hljs-tag">    <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;isActive?&#x27;active&#x27;:&#x27;&#x27;&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;toggleActive&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>    //&#123;&#125;为使用对象的方式<br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;imgSrc&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;imgTitle +&#x27;!!!&#x27;&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123;active:isActive&#125;&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;toggleActive&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./node_modules/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&quot;#app&quot;</span>,</span><br>      data: &#123;<br><span class="javascript">        imgSrc: <span class="hljs-string">&quot;https://www.itheima.com/images/logo.png&quot;</span>,</span><br><span class="javascript">        imgTitle: <span class="hljs-string">&quot;好好学习&quot;</span>,</span><br><span class="javascript">        isActive: <span class="hljs-literal">false</span>,</span><br>      &#125;,<br>      methods: &#123;<br><span class="javascript">        toggleActive: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-built_in">this</span>.isActive = !<span class="hljs-built_in">this</span>.isActive;</span><br>        &#125;,<br>      &#125;,<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h3><ol><li>该指令的作用是：根据数据生成列表结构</li><li>数组经常和v-for结合使用</li><li>语法是(item,index) in 数据(item可以自己取任意字母代表)</li><li>item 和index 可以结合其他指令一起使用</li><li>数组长度的更新会同步到页面上，是响应式的</li></ol><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;添加数据&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;移除数据&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;remove&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(it,index)  in arr&quot;</span>&gt;</span></span><br><span class="xml">        </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">index</span>+<span class="hljs-number">1</span>&#125;&#125;</span><span class="xml">我想去旅游的地方有：</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">it</span>&#125;&#125;</span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in vegetables&quot;</span> <span class="hljs-attr">v-bind:title</span>=<span class="hljs-string">&quot;item.name&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.name</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./node_modules/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    var app = new Vue(&#123;</span><br><span class="xml">      el: &quot;#app&quot;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        arr: [&quot;北京&quot;, &quot;上海&quot;, &quot;广州&quot;, &quot;深圳&quot;],</span><br><span class="xml">        vegetables: [&#123; name: &quot;西兰花炒蛋&quot; &#125;, &#123; name: &quot;蛋炒西兰花&quot; &#125;],</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;</span><br><span class="xml">        add: function () &#123;</span><br><span class="xml">          this.vegetables.push(&#123; name: &quot;花菜炒蛋&quot; &#125;);</span><br><span class="xml">        &#125;,</span><br><span class="xml">        remove: function () &#123;</span><br><span class="xml">          this.vegetables.shift();</span><br><span class="xml">        &#125;,</span><br><span class="xml">      &#125;,</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="v-on-补充"><a href="#v-on-补充" class="headerlink" title="v-on 补充"></a>v-on 补充</h3><ol><li>事件绑定的方法写成 <strong> 函数调用</strong>  的形式，可以传入自定义参数</li><li>定义方法时需要定义 <strong>形参 </strong>来接收传入的实参</li><li>事件的后面跟上<strong> .修饰符</strong>可以对事件进行限制</li><li><strong> .enter </strong>可以限制触发按键回车</li><li>事件修饰符有多种</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;点击&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;doIt(666,&#x27;老铁&#x27;)&quot;</span> /&gt;</span><br>    <span class="hljs-comment">&lt;!-- @keyup.enter --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;sayHi&quot;</span> /&gt;</span><br>    <br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./node_modules/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> Vue(&#123;</span><br><span class="javascript">      el: <span class="hljs-string">&quot;#app&quot;</span>,</span><br>      methods: &#123;<br><span class="javascript">        doIt: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">p1, p2</span>) </span>&#123;</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;做IT&quot;</span>);</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(p1);</span><br><span class="javascript">          <span class="hljs-built_in">console</span>.log(p2);</span><br>        &#125;,<br><span class="javascript">        sayHi: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">          alert(<span class="hljs-string">&quot;吃了没&quot;</span>);</span><br>        &#125;,<br>      &#125;,<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h3><ol><li>该指令的作用是便捷的设置和获取表单元素的值</li><li>绑定的数据会和表单元素的<strong>值</strong>相关联</li><li>绑定的数据<strong>&lt;—&gt;</strong>表单元素的值</li></ol><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;修改message&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;setM&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;message&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;getM&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">message</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./node_modules/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">    var app = new Vue(&#123;</span><br><span class="xml">      el: &quot;#app&quot;,</span><br><span class="xml">      data: &#123;</span><br><span class="xml">        message: &quot;学习Vue&quot;,</span><br><span class="xml">      &#125;,</span><br><span class="xml">      methods: &#123;</span><br><span class="xml">        getM: function () &#123;</span><br><span class="xml">          alert(this.message);</span><br><span class="xml">        &#125;,</span><br><span class="xml">        setM: function () &#123;</span><br><span class="xml">          this.message = &quot;好好学习&quot;;</span><br><span class="xml">        &#125;,</span><br><span class="xml">      &#125;,</span><br><span class="xml">    &#125;);</span><br><span class="xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue&amp;MVVM思想&amp;安装&amp;Vue.js目录结构&amp;v-text</title>
    <link href="/2021/04/16/Vue%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0(%E4%B8%80)/"/>
    <url>/2021/04/16/Vue%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0(%E4%B8%80)/</url>
    
    <content type="html"><![CDATA[<p>以下是对Vue入门的学习(安装Vue,v-text,v-html  )</p><hr><h3 id="MVVM思想-重要"><a href="#MVVM思想-重要" class="headerlink" title="MVVM思想(重要)"></a>MVVM思想(重要)</h3><ol><li>M：即Model模型，包括数据和一些基本操作</li><li>V：即View，视图，页面渲染结果</li><li>VM： 即View-Model，模型于视图间的双向操作(无需开发人员干涉)</li></ol><p>在MVVM之前，开发人员从后端获取需要的数据模型，然后要通过DOM操作Model渲染到View中。而后当用户操作视图，我们还需要通过DOM获取View中的数据，然后同步到Model中。</p><p>而MVVM中的VM要做的事情就是把DOM操作完全封装起来，开发人员不再关心Model和View之间的如何相互影响的</p><h3 id="安装Vue"><a href="#安装Vue" class="headerlink" title="安装Vue"></a>安装Vue</h3><ol><li>方法一 直接<code>&lt;script&gt;</code>引入</li></ol><p>CDN<br>对于制作原型或学习，你可以这样使用最新版本：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><ol><li>方法二  NPM</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">npm  init -y  <span class="hljs-regexp">//</span>初始化项目，项目路径多了一个package.json文件，代表是一个npm来管理的项目<br>npm install vue  <span class="hljs-regexp">//</span>安装Vue   <br></code></pre></td></tr></table></figure><p>由于 npm 安装速度慢，本教程使用了淘宝的镜像及其命令 cnpm，安装使用介绍参照：使用<a href="https://www.runoob.com/nodejs/nodejs-npm.html#taobaonpm">淘宝 NPM 镜像</a>。</p><p>npm 版本需要大于 3.0，如果低于此版本需要升级它：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment"># 查看版本</span><br>$ npm -v<br><span class="hljs-number">2</span>.<span class="hljs-number">3</span>.<span class="hljs-number">0</span><br><br><span class="hljs-comment">#升级 npm</span><br>cnpm <span class="hljs-keyword">install </span>npm -g<br><br><br><span class="hljs-comment"># 升级或安装 cnpm</span><br>npm <span class="hljs-keyword">install </span>cnpm -g<br><br>在用 Vue.<span class="hljs-keyword">js </span>构建大型应用时推荐使用 cnpm 安装：<br><span class="hljs-comment"># 最新稳定版</span><br>$ cnpm <span class="hljs-keyword">install </span>vue<br></code></pre></td></tr></table></figure><ol start="3"><li>命令行工具<br>Vue.js 提供一个官方命令行工具，可用于快速搭建大型单页应用。</li></ol><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-comment"># 全局安装 vue-cli</span><br>$ cnpm install <span class="hljs-comment">--global vue-cli  //这里是vue cli2.x版本命令</span><br>$ npm install -g @vue/cli@<span class="hljs-number">3.11</span><span class="hljs-number">.0</span>  <span class="hljs-comment"> //这里是vue cli3.x版本命令(使用这个)</span><br><span class="hljs-comment"># 创建一个基于 webpack 模板的新项目</span><br>$ vue init webpack my-project <span class="hljs-comment"> //注：这里是vue cli2.x版本命令</span><br>$ vue  <span class="hljs-built_in">create</span>  my-project <span class="hljs-comment"> //这里是vue cli3.x版本命令</span><br><span class="hljs-comment"># 这里需要进行一些配置，默认回车即可</span><br>This will install Vue <span class="hljs-number">2.</span>x <span class="hljs-built_in">version</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> template.<br><br>For Vue <span class="hljs-number">1.</span>x use: vue init webpack<span class="hljs-comment">#1.0 my-project</span><br><br>? Project name my-project<br>? Project description A Vue.js project<br>? Author runoob &lt;test@runoob.com&gt;<br>? Vue build standalone<br>? Use ESLint <span class="hljs-built_in">to</span> lint your code? Yes<br>? Pick <span class="hljs-keyword">an</span> ESLint preset Standard<br>? Setup unit tests <span class="hljs-keyword">with</span> Karma + Mocha? Yes<br>? Setup e2e tests <span class="hljs-keyword">with</span> Nightwatch? Yes<br><br>   vue-cli · Generated <span class="hljs-string">&quot;my-project&quot;</span>.<br><br>   To <span class="hljs-built_in">get</span> started:<br>   <br>     cd my-project<br>     npm install<br>     npm run dev<br>   <br>   Documentation can be found <span class="hljs-keyword">at</span> <span class="hljs-keyword">https</span>://vuejs-templates.github.io/webpack<br></code></pre></td></tr></table></figure><p>进入项目，安装并运行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">cd</span> my-project</span><br><span class="hljs-meta">$</span><span class="bash"> cnpm install</span><br><span class="hljs-meta">$</span><span class="bash"> cnpm run dev</span><br> DONE  Compiled successfully in 4388ms<br><br><span class="hljs-meta">&gt;</span><span class="bash"> Listening at http://localhost:8080</span><br></code></pre></td></tr></table></figure><p>成功执行以上命令后访问 <a href="http://localhost:8080/">http://localhost:8080/</a>，</p><p><img src="/image/11.1.PNG" alt="运行效果"></p><p>注意：Vue.js 不支持 IE8 及其以下 IE 版本。</p><h3 id="Vue-js-目录结构"><a href="#Vue-js-目录结构" class="headerlink" title="Vue.js 目录结构"></a>Vue.js 目录结构</h3><p>我们使用了 npm安装项目，我们在 IDE(visual code) 中打开该目录，结构如下所示:<br><img src="/image/11.2.png" alt="Vue项目目录结构"></p><h3 id="VUE简介"><a href="#VUE简介" class="headerlink" title="VUE简介"></a>VUE简介</h3><ol><li>JavaScript框架</li><li>简化Dom操作</li><li>响应式数据驱动</li></ol><h3 id="Vue基础-el-挂载点，data-数据对象"><a href="#Vue基础-el-挂载点，data-数据对象" class="headerlink" title="Vue基础(el:挂载点，data:数据对象)"></a>Vue基础(el:挂载点，data:数据对象)</h3><h4 id="el-挂载点—用来设置Vue实例挂载-管理-的元素"><a href="#el-挂载点—用来设置Vue实例挂载-管理-的元素" class="headerlink" title="el:挂载点—用来设置Vue实例挂载(管理)的元素"></a>el:挂载点—用来设置Vue实例挂载(管理)的元素</h4><ol><li>Vue实例的作用范围是什么呢？<br>Vue会管理el选项<strong>命中的元素</strong>及其内部的<strong>后代元素</strong></li><li>是否可以使用其他的选择器？<br>可以使用其他的选择器，但是建议使用<strong>id选择器</strong>(一般建议使用id选择器(唯一)，因为类选择器和标签选择器都可以命中多个元素)</li><li>是否可以设置其他dom元素呢？<br>可以使用其他的双标签，不能使用<strong>HTML</strong>和<strong>Body</strong><br><img src="/image/11.3.png" alt="不能使用body"></li></ol><h4 id="data-数据对象"><a href="#data-数据对象" class="headerlink" title="data:数据对象"></a>data:数据对象</h4><ol><li>Vue中用到的数据定义在data中</li><li>data中可以写复杂类型的数据</li><li>渲染复杂数据类型时，遵守js的语法即可</li></ol><h3 id="v-text"><a href="#v-text" class="headerlink" title="v-text"></a>v-text</h3><ol><li>该指令的作用的：设置标签的内容(textContent)</li><li>默认写法会<strong>替换全部内容</strong>，使用<strong>差值表达式<code>&#123;&#123;&#125;&#125;</code></strong>可以替换指定内容</li><li>内部支持写表达式</li></ol><p><img src="/image/11.4.PNG" alt="效果"></p><h3 id="v-html"><a href="#v-html" class="headerlink" title="v-html"></a>v-html</h3><ol><li>该指令的作用是：设置元素的innerHTML</li><li>内容中有html结构会被解析为标签</li><li>v-text指令无论内容是什么，只会被解析为文本</li><li>解析文本使用v-text,需要解析html结构使用v-html</li></ol><p><img src="/image/11.5.PNG" alt="如图"></p><h4 id="为什么要用指令和插值表达式"><a href="#为什么要用指令和插值表达式" class="headerlink" title="为什么要用指令和插值表达式"></a>为什么要用指令和插值表达式</h4><p>前面我们已经说到过，在Vue中不直接对DOM进行操作，而是通过数据的改变来改变页面的显示状态。但是如果在HTML中直接像这样设置页面内容，那么改变数据时将无法用到Vue提供的便捷方法</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hello&quot;</span> &gt;</span>hello world<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><p>为了能通过变量来决定显示的内容，用原生JS我们可以这样写</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">var <span class="hljs-attribute">str</span>=<span class="hljs-string">&quot;hello world&quot;</span>;<br>document.getEleMentById(<span class="hljs-string">&#x27;hello&#x27;</span>).<span class="hljs-attribute">innerText</span>=str;<br></code></pre></td></tr></table></figure><p>但此时在控制台中改变str的值，页面并不会改变，因为在页面不刷新的情况下，变量改变页面不会重新渲染。</p><p>因此，我们需要使用Vue提供的方法，来做到在不刷新页面的情况下重新渲染页面。</p><p>Vue实例的数据，要定义在实例中的data内，当某个数据改变时，就会重新渲染页面中用到了该数据的地方。而要达到这个目的，要解决的问题就是：如何使用在Vue实例中定义的数据，这也就用到了标题中的两种方法，指令和插值表达式。</p>]]></content>
    
    
    <categories>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ES6-map&amp;reduce</title>
    <link href="/2021/04/14/ES6(%E4%BA%94)/"/>
    <url>/2021/04/14/ES6(%E4%BA%94)/</url>
    
    <content type="html"><![CDATA[<p>以下是对 map&amp;reduce  的学习</p><hr><h3 id="map-接受一个函数，将原数组中的所有元素用这个函数处理后放入新数组返回"><a href="#map-接受一个函数，将原数组中的所有元素用这个函数处理后放入新数组返回" class="headerlink" title="map() 接受一个函数，将原数组中的所有元素用这个函数处理后放入新数组返回"></a>map() 接受一个函数，将原数组中的所有元素用这个函数处理后放入新数组返回</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">let arr = [<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>, <span class="hljs-string">&#x27;5&#x27;</span>];<br><span class="hljs-regexp">//</span> 方法一<br><span class="hljs-regexp">//</span>  arr   =arr.map((item)=&gt;&#123;<br><span class="hljs-regexp">//</span>        return  item*<span class="hljs-number">2</span><br><span class="hljs-regexp">//</span>  &#125;);<br><span class="hljs-regexp">//</span>方法二<br>arr = arr.map((item) =&gt; item * <span class="hljs-number">2</span>);<br>console.log(arr); <span class="hljs-regexp">//</span>Array(<span class="hljs-number">4</span>)<span class="hljs-number">0</span>: <span class="hljs-number">2</span> <span class="hljs-number">1</span>: <span class="hljs-number">4</span> <span class="hljs-number">2</span>: <span class="hljs-number">6</span> <span class="hljs-number">3</span>: <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><ol><li> =&gt; 则是一种简写方法。   <figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs llvm"><span class="hljs-keyword">x</span> <span class="hljs-operator">=</span>&gt; <span class="hljs-keyword">x</span> * <span class="hljs-keyword">x</span> <br>相当于：<br>function(<span class="hljs-keyword">x</span>)&#123;return <span class="hljs-keyword">x</span>*<span class="hljs-keyword">x</span>&#125;<br></code></pre></td></tr></table></figure><h3 id="reduce-方法接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终计算为一个值。"><a href="#reduce-方法接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终计算为一个值。" class="headerlink" title="reduce() 方法接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终计算为一个值。"></a>reduce() 方法接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终计算为一个值。</h3></li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>reduce()为数组中的每一个元素一次执行回调函数，不包括数组中被删除或从未被赋值的元素<br><span class="hljs-regexp">//</span>[<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;2&#x27;</span>,<span class="hljs-string">&#x27;3&#x27;</span>,<span class="hljs-string">&#x27;5&#x27;</span>]<br><span class="hljs-regexp">//</span>arr.reduce(callback,[initialValue])<br>/**四个参数<br>    <span class="hljs-number">1</span>.previousValue(上一次调用回调返回的值，或者是提供的初始值(initialValue))<br>    <span class="hljs-number">2</span>.currenValue(数组中当前被处理的元素)<br>    <span class="hljs-number">3</span>.index  (当前元素在数组中的元素)<br>    <span class="hljs-number">4</span>.array  (调用reduce的数组)   */<br>let result = arr.reduce((a, b) =&gt; &#123;<br>  console.log(<span class="hljs-string">&#x27;上一次处理后：&#x27;</span> + a);<br>  console.log(<span class="hljs-string">&#x27;当前正在处理：&#x27;</span> + b);<br>  return a + b;<br>&#125;, <span class="hljs-number">100</span>); <span class="hljs-regexp">//</span>初始值<span class="hljs-number">100</span><br>console.log(result);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ES6</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>ES6</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CSS3--flex布局</title>
    <link href="/2021/04/14/CSS3flex%E5%B8%83%E5%B1%80/"/>
    <url>/2021/04/14/CSS3flex%E5%B8%83%E5%B1%80/</url>
    
    <content type="html"><![CDATA[<p>以下是对flex布局的学习(重点)</p><hr><h3 id="flex布局体验"><a href="#flex布局体验" class="headerlink" title="flex布局体验"></a>flex布局体验</h3><p><img src="/image/10.png" alt="flex布局"></p><h3 id="布局原理"><a href="#布局原理" class="headerlink" title="布局原理"></a>布局原理</h3><p>flex  是flexible  Box的缩写，意为“弹性布局”，用来为盒状模型提供最大的灵活性，任何一个容器都可以指定为flex布局。</p><ul><li>当我们为父盒子设为flex布局以后，子元素的float,clear和vertical-align属性将无效</li><li>伸缩布局=弹性布局=伸缩盒布局=弹性盒布局=flex布局            <h4 id="flex布局布局原理：就是通过给父盒子添加flex属性，来控制子盒子的位置和排列方式"><a href="#flex布局布局原理：就是通过给父盒子添加flex属性，来控制子盒子的位置和排列方式" class="headerlink" title="flex布局布局原理：就是通过给父盒子添加flex属性，来控制子盒子的位置和排列方式"></a>flex布局布局原理：就是通过给父盒子添加flex属性，来控制子盒子的位置和排列方式</h4></li></ul><h3 id="常见父项属性"><a href="#常见父项属性" class="headerlink" title="常见父项属性"></a>常见父项属性</h3><p>以下由6个属性是对父元素设置的</p><ul><li>flex-direction:  设置主轴的方向</li><li>justify-content:  设置主轴上的子元素排列方式</li><li>flex-warp: 设置子元素是否换行</li><li>align-content:设置侧轴上的子元素排列方式(多行)</li><li>align-items:设置侧轴上的子元素排列方式(单行)</li><li>flex-flow: 符合属性，相当于同时设置了flex-direction和flex-warp</li></ul><h4 id="flex-direction-设置主轴的方向"><a href="#flex-direction-设置主轴的方向" class="headerlink" title="flex-direction:  设置主轴的方向"></a>flex-direction:  设置主轴的方向</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">  <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="css">    <span class="hljs-comment">/* 给父级添加flex属性 */</span></span><br><span class="css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">80%</span>;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: pink;</span><br><span class="css">    <span class="hljs-comment">/* 默认的主轴是x轴，行 row  那么y轴就是侧轴 */</span></span><br><span class="css">    <span class="hljs-comment">/* 我们的元素是跟着主轴来排列的 */</span></span><br><span class="css">    <span class="hljs-comment">/* flex-direction: row; 默认从左到右*/</span></span><br><span class="css">    <span class="hljs-comment">/* flex-direction: row-reverse; 简单了解  翻转从右到左 */</span></span><br><span class="css">    <span class="hljs-comment">/* flex-direction: column; 从上到下 */</span></span><br><span class="css">    <span class="hljs-comment">/* flex-direction: column-reverse;  从下到上 */</span></span><br>  &#125;<br><span class="css">  <span class="hljs-selector-tag">div</span> <span class="hljs-selector-tag">span</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">150px</span>;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: red;</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="justify-content-设置主轴上的子元素排列方式"><a href="#justify-content-设置主轴上的子元素排列方式" class="headerlink" title="justify-content 设置主轴上的子元素排列方式"></a>justify-content 设置<strong>主轴</strong>上的子元素排列方式</h4><h4 id="注意：使用这个属性之前一定要确定好主轴是哪个"><a href="#注意：使用这个属性之前一定要确定好主轴是哪个" class="headerlink" title="注意：使用这个属性之前一定要确定好主轴是哪个"></a>注意：使用这个属性之前一定要确定好主轴是哪个</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs awk">div &#123;<br>  display: flex;<br>  width: <span class="hljs-number">800</span>px;<br>  height: <span class="hljs-number">300</span>px;<br>  background-color: pink;<br>  <span class="hljs-regexp">/* 默认的主轴是x轴row */</span><br>  flex-direction: row;<br>  <span class="hljs-regexp">/*默认值，从头部开始，如果主轴是x轴，则从左到右  */</span><br>  <span class="hljs-regexp">/* justify-content: flex-start; */</span><br><br>  <span class="hljs-regexp">/* 从尾部开始 */</span><br>  <span class="hljs-regexp">/* justify-content: flex-end; */</span><br><br>  <span class="hljs-regexp">/* 让我们子元素居中对齐 */</span><br>  <span class="hljs-regexp">/* justify-content: center; */</span><br><br>  <span class="hljs-regexp">/* 平分剩余空间 */</span><br>  <span class="hljs-regexp">/* justify-content: space-around; */</span><br><br>  <span class="hljs-regexp">/* 先两边贴边，在分配剩余的空间 */</span><br>  <span class="hljs-regexp">/* justify-content: space-between; */</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="flex-wrap-wrap-设置子元素是否换行"><a href="#flex-wrap-wrap-设置子元素是否换行" class="headerlink" title="flex-wrap: wrap  设置子元素是否换行"></a>flex-wrap: wrap  设置子元素是否换行</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">600px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">background-color</span>: pink;<br>  <span class="hljs-comment">/* flex布局中，默认的子元素是不换行的，如果装不开，会缩小子元素的宽度，放到父元素里面 */</span><br><br>  <span class="hljs-comment">/* flex-wrap: nowrap; nowrap默认值,不换行*/</span><br><br>  <span class="hljs-comment">/* flex-wrap: wrap; 换行 */</span><br>&#125;<br><span class="hljs-selector-tag">div</span> <span class="hljs-selector-tag">span</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">150px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;<br>  <span class="hljs-attribute">background-color</span>: purple;<br>  <span class="hljs-attribute">color</span>: white;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="align-items-设置侧轴上的子元素排列方式-单行"><a href="#align-items-设置侧轴上的子元素排列方式-单行" class="headerlink" title="align-items 设置侧轴上的子元素排列方式(单行)"></a>align-items 设置侧轴上的子元素排列方式(单行)</h3><p>该属性是控制子项在侧轴(默认是y轴)上的排列方式，在子项为单项的时候使用</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk">display: flex;<br><br><span class="hljs-regexp">/* 我们是需要一个侧轴居中 */</span><br>align-items: center;<br><br><span class="hljs-regexp">/* 从上到下 */</span><br><span class="hljs-regexp">/* align-items: flex-start; */</span><br><br><span class="hljs-regexp">/* 从下到上 */</span><br><span class="hljs-regexp">/* align-items: flex-end; */</span><br><br><span class="hljs-regexp">/*拉伸，但是子盒子不要给高度  */</span><br><span class="hljs-regexp">/* align-items: stretch; */</span><br></code></pre></td></tr></table></figure><h3 id="align-content-设置侧轴上的子元素的排列方式-多行"><a href="#align-content-设置侧轴上的子元素的排列方式-多行" class="headerlink" title="align-content 设置侧轴上的子元素的排列方式(多行)"></a>align-content 设置侧轴上的子元素的排列方式(多行)</h3><p><img src="/image/10.1.png" alt="换行"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">background-color</span>: pink;<br>  <span class="hljs-attribute">flex-wrap</span>: wrap;<br><br>  <span class="hljs-comment">/* 因为有了换行，此时我们侧轴上控制子元素的对齐方式我们用align-content */</span><br><br>  <span class="hljs-comment">/* align-content: flex-start; */</span><br>  <span class="hljs-attribute">align-content</span>: center;<br>  <span class="hljs-comment">/* align-content: space-between; */</span><br>  <span class="hljs-comment">/* align-content: space-around; */</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="align-content-和align-items区别"><a href="#align-content-和align-items区别" class="headerlink" title="align-content 和align-items区别"></a>align-content 和align-items区别</h3><p><img src="/image/10.2.png" alt="区别"></p><h3 id="flex-flow"><a href="#flex-flow" class="headerlink" title="flex-flow"></a>flex-flow</h3><p>flex-flow 属性是flex-direction和flex-wrap 属性的复合属性</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* flex-direction: column;</span><br><span class="hljs-comment">flex-wrap: wrap; */</span><br><span class="hljs-comment">/* 把设置主轴方向和 是否换行(换列)简写*/</span><br><span class="hljs-attribute">flex-flow</span>: column wrap;<br></code></pre></td></tr></table></figure><h3 id="flex布局子项常见属性"><a href="#flex布局子项常见属性" class="headerlink" title="flex布局子项常见属性"></a>flex布局子项常见属性</h3><ol><li>flex子项目占的分数</li></ol><p>flex属性定义子项目<strong>分配剩余空间</strong>，用flex来表示占多少<strong>份数</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">  <span class="hljs-selector-tag">section</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">60%</span>;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">150px</span>;</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: pink;</span><br><span class="css">    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;</span><br>  &#125;<br><span class="css">  <span class="hljs-selector-tag">section</span> <span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">1</span>) &#123;</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">150px</span>;</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: red;</span><br>  &#125;<br><span class="css">  <span class="hljs-selector-tag">section</span> <span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>) &#123;</span><br><span class="css">    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="css">    <span class="hljs-comment">/* flex:&lt;number&gt; 表示多少份 */</span></span><br><span class="css">    <span class="hljs-attribute">background-color</span>: green;</span><br>  &#125;<br><span class="css">  <span class="hljs-selector-tag">section</span> <span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">3</span>) &#123;</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">150px</span>;</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: blue;</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><ol start="2"><li>align-self 控制子项自己在侧轴上的排列方式(了解)<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">  <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">80%</span>;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: pink;</span><br><span class="css">    <span class="hljs-comment">/* 让三个子盒子沿着侧轴底侧对齐 */</span></span><br><span class="css">    <span class="hljs-comment">/* align-items: flex-end; */</span></span><br>  &#125;<br><span class="css">  <span class="hljs-selector-tag">div</span> <span class="hljs-selector-tag">span</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">150px</span>;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: purple;</span><br><span class="css">    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">5px</span>;</span><br>  &#125;<br><span class="css">  <span class="hljs-comment">/* 我们想只让3号盒子下来底侧 */</span></span><br><span class="css">  <span class="hljs-selector-tag">div</span> <span class="hljs-selector-tag">span</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">3</span>) &#123;</span><br><span class="css">    <span class="hljs-attribute">align-self</span>: flex-end;</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>order 属性定义项目的排列顺序(了解)</li></ol><p>数值越小，排列越靠前，默认为0<br>注意：和z-index不一样</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> <span class="hljs-selector-tag">span</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>) &#123;<br>  <span class="hljs-attribute">order</span>: -<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>CSS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ES6-新增的API&amp;声明对象的简写&amp;对象函数的简写</title>
    <link href="/2021/04/13/ES6(%E5%9B%9B)/"/>
    <url>/2021/04/13/ES6(%E5%9B%9B)/</url>
    
    <content type="html"><![CDATA[<p>以下是对新增的API,声明对象的简写,对象函数的简写,对象拓展运算符的学习</p><hr><h3 id="新增的API"><a href="#新增的API" class="headerlink" title="新增的API"></a>新增的API</h3><p>ES6给Object扩展了许多新的方法，如：</p><ul><li>-keys(obj)，获取对象的所有key形成的数组</li><li>-values(obj),获取对象的所有value形成的数组</li><li>-entries(obj)，获取对象的所有key和value形成的二维数组<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">const person = &#123;<br>   <span class="hljs-type">name</span>: <span class="hljs-string">&#x27;jack&#x27;</span>,<br>   age: <span class="hljs-number">21</span>,<br>   <span class="hljs-keyword">language</span>: [<span class="hljs-string">&#x27;java&#x27;</span>, <span class="hljs-string">&#x27;js&#x27;</span>, <span class="hljs-string">&#x27;css&#x27;</span>],<br> &#125;;<br> console.log(<span class="hljs-keyword">Object</span>.keys(person)); //<span class="hljs-number">0</span>: &quot;name&quot;<span class="hljs-number">1</span>: &quot;age&quot;<span class="hljs-number">2</span>: &quot;language&quot;<br> console.log(<span class="hljs-keyword">Object</span>.<span class="hljs-keyword">values</span>(person)); //<span class="hljs-number">0</span>: &quot;jack&quot;<span class="hljs-number">1</span>: <span class="hljs-number">212</span>: (<span class="hljs-number">3</span>) [&quot;java&quot;, &quot;js&quot;, &quot;css&quot;]<br> console.log(<span class="hljs-keyword">Object</span>.entries(person)); // [<span class="hljs-keyword">Array</span>(<span class="hljs-number">2</span>), <span class="hljs-keyword">Array</span>(<span class="hljs-number">2</span>), <span class="hljs-keyword">Array</span>(<span class="hljs-number">2</span>)]<br><br></code></pre></td></tr></table></figure>对象的新方法</li><li>Object.assign(dest,  ···src) ,将多个src对象的值拷贝到dest中(第一层为深拷贝，第二层为浅拷贝)</li></ul><p>用于将源对象的所有可枚举属性复制到目标对象中。</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">const</span> <span class="hljs-keyword">target</span> = &#123; a: 1 &#125;;<br><span class="hljs-keyword">const</span> source1 = &#123; b: 2 &#125;;<br><span class="hljs-keyword">const</span> source2 = &#123; c: 3 &#125;;<br><span class="hljs-comment">// Object.assign方法的第一个参数是目标对象，后面的参数都是源对象</span><br>Object.assign(<span class="hljs-keyword">target</span>, source1, source2);<br>console.log(<span class="hljs-keyword">target</span>); <span class="hljs-comment">//&#123;a: 1, b: 2, c: 3&#125;</span><br></code></pre></td></tr></table></figure><h3 id="声明对象的简写"><a href="#声明对象的简写" class="headerlink" title="声明对象的简写"></a>声明对象的简写</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-keyword">const</span> age = <span class="hljs-number">23</span><span class="hljs-comment">;</span><br><span class="hljs-keyword">const</span> name = <span class="hljs-string">&#x27;张三&#x27;</span><span class="hljs-comment">;</span><br><span class="hljs-keyword">const</span> person1 = &#123; age: age, name: name &#125;<span class="hljs-comment">;</span><br><br><span class="hljs-keyword">const</span> person2 = &#123; age, name &#125;<span class="hljs-comment">;</span><br>console.<span class="hljs-built_in">log</span>(person2)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h3 id="对象函数的简写"><a href="#对象函数的简写" class="headerlink" title="对象函数的简写"></a>对象函数的简写</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> person3 = &#123;<br>  name: <span class="hljs-string">&#x27;jack&#x27;</span>,<br>  <span class="hljs-comment">//以前</span><br>  eat: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">food</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name + <span class="hljs-string">&#x27;在吃&#x27;</span> + food);<br>  &#125;,<br>  <span class="hljs-comment">//箭头函数this不能使用，对象，属性</span><br>  eat2: <span class="hljs-function">(<span class="hljs-params">food</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(person3.name + <span class="hljs-string">&#x27;在吃&#x27;</span> + food),<br>  <span class="hljs-comment">//方法三  使用较多</span><br>  <span class="hljs-function"><span class="hljs-title">eat3</span>(<span class="hljs-params">food</span>)</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name + <span class="hljs-string">&#x27;在吃&#x27;</span> + food);<br>  &#125;,<br>&#125;;<br>person3.eat(<span class="hljs-string">&#x27;香蕉&#x27;</span>);<br>person3.eat2(<span class="hljs-string">&#x27;苹果&#x27;</span>);<br>person3.eat3(<span class="hljs-string">&#x27;橘子&#x27;</span>);<br></code></pre></td></tr></table></figure><h3 id="对象拓展运算符"><a href="#对象拓展运算符" class="headerlink" title="对象拓展运算符"></a>对象拓展运算符</h3><ol><li>拷贝对象（深拷贝）<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-keyword">let</span> p1 = &#123; name: <span class="hljs-string">&#x27;Amy&#x27;</span>, age: <span class="hljs-number">15</span> &#125;;<br><span class="hljs-keyword">let</span> someone = &#123; <span class="hljs-params">...</span>p1 &#125;;<br>console.<span class="hljs-keyword">log</span>(someone); <span class="hljs-comment">//age: 15 name: &quot;Amy&quot;</span><br></code></pre></td></tr></table></figure></li><li>合并对象<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-keyword">let</span> age1 = &#123; age: <span class="hljs-number">15</span> &#125;;<br><span class="hljs-keyword">let</span> name1 = &#123; name: <span class="hljs-string">&#x27;Amy&#x27;</span> &#125;;<br><span class="hljs-comment">//假设之前已经有一个值，但是打印时最后的值还是会覆盖原来的值</span><br><span class="hljs-keyword">let</span> p2 = &#123; name: <span class="hljs-string">&#x27;zhangsan&#x27;</span> &#125;;<br>p2 = &#123; <span class="hljs-params">...</span>age1, <span class="hljs-params">...</span>name1 &#125;;<br>console.<span class="hljs-keyword">log</span>(p2); <span class="hljs-comment">//age: 15 name: &quot;Amy&quot;</span><br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>ES6</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>ES6</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ES6-函数优化&amp;箭头函数(使用较多)</title>
    <link href="/2021/04/13/ES6(%E4%B8%89)/"/>
    <url>/2021/04/13/ES6(%E4%B8%89)/</url>
    
    <content type="html"><![CDATA[<p>以下是对函数,不定参数,箭头函数的学习</p><hr><h3 id="函数参数的默认值"><a href="#函数参数的默认值" class="headerlink" title="函数参数的默认值"></a>函数参数的默认值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//在ES6以前，我们无法给一个函数参数设置默认值，只能采用变通写法；</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">a, b</span>) </span>&#123;<br>  <span class="hljs-comment">//判断是否为空，为空就给默认值；</span><br>  b = b || <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><span class="hljs-comment">//传一个参数</span><br><span class="hljs-built_in">console</span>.log(add(<span class="hljs-number">10</span>));<br><span class="hljs-comment">//现在可以这么写，直接给参数写上默认值，没传给会自动使用默认值</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add2</span>(<span class="hljs-params">a, b = <span class="hljs-number">1</span></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><span class="hljs-built_in">console</span>.log(add2(<span class="hljs-number">20</span>));<br></code></pre></td></tr></table></figure><p>注意点：使用函数默认参数时，不允许有同名参数。</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs fortran">// 不报错<br><span class="hljs-function"><span class="hljs-keyword">function</span></span> fn(<span class="hljs-keyword">name</span>,<span class="hljs-keyword">name</span>)&#123;<br> console.<span class="hljs-built_in">log</span>(<span class="hljs-keyword">name</span>);<br>&#125;<br> <br>// 报错<br>//SyntaxError: Duplicate <span class="hljs-keyword">parameter</span> <span class="hljs-keyword">name</span> not allowed <span class="hljs-keyword">in</span> this context<br><span class="hljs-function"><span class="hljs-keyword">function</span></span> fn(<span class="hljs-keyword">name</span>,<span class="hljs-keyword">name</span>,age=<span class="hljs-number">17</span>)&#123;<br> console.<span class="hljs-built_in">log</span>(<span class="hljs-keyword">name</span>+<span class="hljs-string">&quot;,&quot;</span>+age);<br>&#125;<br></code></pre></td></tr></table></figure><p>只有在未传递参数，或者参数为 undefined 时，才会使用默认参数，null 值被认为是有效的值传递。</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">function</span> fn(<span class="hljs-type">name</span>,age=<span class="hljs-number">17</span>)&#123;<br>    console.log(<span class="hljs-type">name</span>+&quot;,&quot;+age);<br>&#125;<br>fn(&quot;Amy&quot;,<span class="hljs-keyword">null</span>); // Amy,<span class="hljs-keyword">null</span><br></code></pre></td></tr></table></figure><h3 id="不定参数"><a href="#不定参数" class="headerlink" title="不定参数"></a>不定参数</h3><p>不定参数用来表示不确定参数个数，形如，…变量名，由…加上一个具名参数标识符组成。具名参数只能放在参数组的最后，并且有且只有一个不定参数。</p><p>基本用法</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-rest_arg">...values</span>)</span></span>&#123;<br>    console.log(values.length);<br>&#125;<br>f(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>);      <span class="hljs-comment">//2</span><br>f(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>);  <span class="hljs-comment">//4</span><br></code></pre></td></tr></table></figure><h3 id="箭头函数-使用较多"><a href="#箭头函数-使用较多" class="headerlink" title="箭头函数(使用较多)"></a>箭头函数(使用较多)</h3><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs arcade">      <span class="hljs-comment">//以前声明一个方法</span><br>      <span class="hljs-comment">// var  print=function(obj)&#123;</span><br>      <span class="hljs-comment">//     console.log(obj);</span><br>      <span class="hljs-comment">// &#125;</span><br>      <span class="hljs-keyword">var</span> print = <span class="hljs-function">(<span class="hljs-params">obj</span>) =&gt;</span> console.log(obj);<br>      print(<span class="hljs-string">&#x27;hello&#x27;</span>);<span class="hljs-comment">//hello</span><br>或<br><span class="hljs-keyword">var</span> f = <span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v;<br><span class="hljs-comment">//等价于</span><br><span class="hljs-keyword">var</span> f = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a</span>)</span>&#123;<br> <span class="hljs-keyword">return</span> a;<br>&#125;<br>f(<span class="hljs-number">1</span>);  <span class="hljs-comment">//1</span><br></code></pre></td></tr></table></figure><p>当箭头函数没有参数或者有多个参数，要用 () 括起来。</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">var</span> f = <span class="hljs-function">(<span class="hljs-params">a,b</span>) =&gt;</span> a+b;<br>f(<span class="hljs-number">6</span>,<span class="hljs-number">2</span>);  <span class="hljs-comment">//8</span><br></code></pre></td></tr></table></figure><p>当箭头函数函数体有多行语句，用 {} 包裹起来，表示代码块，当只有一行语句，并且需要返回结果时，可以省略 {} , 结果会自动返回。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> f = <span class="hljs-function">(<span class="hljs-params">a,b</span>) =&gt;</span> &#123;<br> <span class="hljs-keyword">let</span> result = a+b;<br> <span class="hljs-keyword">return</span> result;<br>&#125;<br>f(<span class="hljs-number">6</span>,<span class="hljs-number">2</span>);  <span class="hljs-comment">// 8</span><br></code></pre></td></tr></table></figure><p>当箭头函数要返回对象的时候，为了区分于代码块，要用 () 将对象包裹起来</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xquery">// 报错<br>var f = <span class="hljs-built_in">(id</span><span class="hljs-built_in">,name</span>) =&gt; <span class="hljs-built_in">&#123;id</span>:<span class="hljs-built_in"> id</span>,<span class="hljs-built_in"> name</span>:<span class="hljs-built_in"> name</span>&#125;;<br>f(<span class="hljs-number">6</span>,<span class="hljs-number">2</span>);  // SyntaxError: Unexpected token :<br> <br>// 不报错<br>var f = <span class="hljs-built_in">(id</span><span class="hljs-built_in">,name</span>) =&gt; (<span class="hljs-built_in">&#123;id</span>:<span class="hljs-built_in"> id</span>,<span class="hljs-built_in"> name</span>:<span class="hljs-built_in"> name</span>&#125;);<br>f(<span class="hljs-number">6</span>,<span class="hljs-number">2</span>);  // <span class="hljs-built_in">&#123;id</span>: <span class="hljs-number">6</span>,<span class="hljs-built_in"> name</span>: <span class="hljs-number">2</span>&#125;<br></code></pre></td></tr></table></figure><p>注意点：没有 this、super、arguments 和 new.target 绑定。<br>箭头函数体中的 this 对象，是定义函数时的对象，而不是使用函数时的对象。<br>不可以作为构造函数，也就是不能使用 new 命令，否则会报错</p><ul><li>箭头函数+解构<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> person = &#123;<br>  name: <span class="hljs-string">&#x27;jack&#x27;</span>,<br>  age: <span class="hljs-number">21</span>,<br>  language: [<span class="hljs-string">&#x27;java&#x27;</span>, <span class="hljs-string">&#x27;js&#x27;</span>, <span class="hljs-string">&#x27;css&#x27;</span>],<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hello</span>(<span class="hljs-params">person</span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;hello&#x27;</span>, person.name);<br>&#125;<br><span class="hljs-comment">//箭头函数+解构</span><br><span class="hljs-keyword">var</span> hello2 = <span class="hljs-function">(<span class="hljs-params">&#123; name &#125;</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;hello&#x27;</span>, name);<br>hello2(person);<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>ES6</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>ES6</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ES6-解构&amp;字符串</title>
    <link href="/2021/04/12/ES6(%E4%BA%8C)/"/>
    <url>/2021/04/12/ES6(%E4%BA%8C)/</url>
    
    <content type="html"><![CDATA[<p>以下是对解构&amp;字符串的学习</p><hr><p>解构赋值是对赋值运算符的扩展。<br>他是一种针对数组或者对象进行模式匹配，然后对其中的变量进行赋值。在代码书写上简洁且易读，语义更加清晰明了；也方便了复杂对象中数据字段获取。</p><p>解构的源，解构赋值表达式的右边部分。<br>解构的目标，解构赋值表达式的左边部分。</p><h3 id="数组模型的解构（Array）"><a href="#数组模型的解构（Array）" class="headerlink" title="数组模型的解构（Array）"></a>数组模型的解构（Array）</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">let arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><span class="hljs-regexp">//</span>以前我们想获取其中的值，只能通过角标。ES6可以这样。<br><span class="hljs-regexp">//</span>   let a = arr[<span class="hljs-number">0</span>];<br><span class="hljs-regexp">//</span>   let b = arr[<span class="hljs-number">1</span>];<br><span class="hljs-regexp">//</span>   let c = arr[<span class="hljs-number">2</span>];<br>let [a, b, c] = arr; <span class="hljs-regexp">//</span>x,y,z将与arr中的每个位置对应来取值<br>console.log(a, b, c);<br></code></pre></td></tr></table></figure><h3 id="对象模型的解构（Object）"><a href="#对象模型的解构（Object）" class="headerlink" title="对象模型的解构（Object）"></a>对象模型的解构（Object）</h3><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sqf">const person = &#123;<br>  <span class="hljs-built_in">name</span>: <span class="hljs-string">&#x27;jack&#x27;</span>,<br>  age: <span class="hljs-number">21</span>,<br>  <span class="hljs-built_in">language</span>: [<span class="hljs-string">&#x27;java&#x27;</span>, <span class="hljs-string">&#x27;js&#x27;</span>, <span class="hljs-string">&#x27;css&#x27;</span>],<br>&#125;;<br><span class="hljs-comment">// const  name=person.name;</span><br><span class="hljs-comment">// const  age=person.age;</span><br><span class="hljs-comment">// const  language=person.language;</span><br><span class="hljs-comment">//对象结构</span><br>const &#123; <span class="hljs-built_in">name</span>, age, <span class="hljs-built_in">language</span> &#125; = person; <span class="hljs-comment">//方法一</span><br>const &#123; <span class="hljs-built_in">name</span>: abc, age, <span class="hljs-built_in">language</span> &#125; = person; <span class="hljs-comment">//方法二</span><br>console.<span class="hljs-built_in">log</span>(abc, age, <span class="hljs-built_in">language</span>);<br></code></pre></td></tr></table></figure><h3 id="字符串扩展"><a href="#字符串扩展" class="headerlink" title="字符串扩展"></a>字符串扩展</h3><ol><li>扩展的方法，子串的识别<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs processing">let <span class="hljs-built_in">str</span> = <span class="hljs-string">&#x27;hello.vue&#x27;</span>;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-built_in">str</span>.startsWith(<span class="hljs-string">&#x27;hello&#x27;</span>)); <span class="hljs-comment">//true</span><br>console.<span class="hljs-built_in">log</span>(<span class="hljs-built_in">str</span>.endsWith(<span class="hljs-string">&#x27;.vue&#x27;</span>)); <span class="hljs-comment">//true</span><br>console.<span class="hljs-built_in">log</span>(<span class="hljs-built_in">str</span>.includes(<span class="hljs-string">&#x27;e&#x27;</span>)); <span class="hljs-comment">//true</span><br>console.<span class="hljs-built_in">log</span>(<span class="hljs-built_in">str</span>.includes(<span class="hljs-string">&#x27;hello&#x27;</span>)); <span class="hljs-comment">//true</span><br><br></code></pre></td></tr></table></figure></li><li>字符串模板<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dts">let ss = `<span class="hljs-params">&lt;div&gt;</span><br>                  <span class="hljs-params">&lt;span&gt;</span>hello world<span class="hljs-params">&lt;span&gt;</span><br>                  <span class="hljs-params">&lt;/div&gt;</span>`;<br>      console.log(ss);<span class="hljs-comment">//空格也能打印</span><br></code></pre></td></tr></table></figure></li></ol><p>控制台效果：</p><p><img src="/image/9.1.png" alt="运行效果"></p><ol><li>符串插入变量和表达式。变量名写在${}中，${}中可以放入javascript表达式。<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">function <span class="hljs-function"><span class="hljs-title">fun</span><span class="hljs-params">()</span></span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;这是一个函数&#x27;</span>;<br>&#125;<br><br>let info = `我是$&#123;abc&#125;，今年$&#123;age + <span class="hljs-number">10</span>&#125;了，我想说： $&#123;<span class="hljs-function"><span class="hljs-title">fun</span><span class="hljs-params">()</span></span>&#125;`;<br>console.log(info);<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>ES6</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>ES6</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ES6-let&amp;const</title>
    <link href="/2021/04/12/ES6(%E4%B8%80)/"/>
    <url>/2021/04/12/ES6(%E4%B8%80)/</url>
    
    <content type="html"><![CDATA[<p>以下是对 ES6-let&amp;const的学习</p><hr><p>ECMAScript是浏览器脚本语言的规范，而我们熟知的JS语言，如<strong>JavaScript则是规范的具体实现。</strong></p><h3 id="let与var对比-做项目中习惯用let声明变量"><a href="#let与var对比-做项目中习惯用let声明变量" class="headerlink" title="let与var对比(做项目中习惯用let声明变量)"></a>let与var对比(做项目中习惯用let声明变量)</h3><ul><li>var声明的变量往往会越狱 (let 是在代码块内有效，var 是在全局范围内有效:)</li><li>let声明的变量有严格局部作用域</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br>   <span class="hljs-keyword">var</span>  a=<span class="hljs-number">1</span>;<br>   <span class="hljs-keyword">let</span>  b=<span class="hljs-number">2</span>;<br> &#125;<br> <span class="hljs-built_in">console</span>.log(a);  <span class="hljs-comment">//1</span><br> <span class="hljs-built_in">console</span>.log(b);  <span class="hljs-comment">//ReferenceError:b  is  not  defined</span><br></code></pre></td></tr></table></figure><ul><li>var可以声明多次</li><li>let只能声明一次<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span>  m=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span>  m=<span class="hljs-number">2</span>;<br><span class="hljs-keyword">let</span>  n=<span class="hljs-number">3</span>;<br><span class="hljs-keyword">let</span>  n=<span class="hljs-number">4</span>;<br><span class="hljs-built_in">console</span>.log(m);  <span class="hljs-comment">//2</span><br><span class="hljs-built_in">console</span>.log(n);  <span class="hljs-comment">//Identifier &#x27;n&#x27; has already been declared</span><br></code></pre></td></tr></table></figure></li><li> var 会变量提升</li><li> let 不存在变量提升<br>变量 b 用 var 声明存在变量提升，所以当脚本开始运行的时候，b 已经存在了，但是还没有赋值，所以会输出 undefined。<br>变量 a 用 let 声明不存在变量提升，在声明变量 a 之前，a 不存在，所以会报错。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">console</span>.log(x); <span class="hljs-comment">//  undefined</span><br><span class="hljs-keyword">var</span> x = <span class="hljs-number">10</span>;<br><span class="hljs-built_in">console</span>.log(y); <span class="hljs-comment">//Cannot access &#x27;y&#x27; before initialization</span><br><span class="hljs-keyword">let</span> y = <span class="hljs-number">20</span>;<br></code></pre></td></tr></table></figure><h3 id="const声明变量-只读变量"><a href="#const声明变量-只读变量" class="headerlink" title="const声明变量 (只读变量)"></a>const声明变量 (只读变量)</h3></li><li>声明之后不允许改变</li><li>一旦声明必须初始化，否者会报错</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const a = <span class="hljs-number">1</span><span class="hljs-comment">;</span><br><span class="hljs-attribute">a</span> = <span class="hljs-number">3</span><span class="hljs-comment">; //Uncaught TypeError: Assignment to constant variable.</span><br></code></pre></td></tr></table></figure><p>const 如何做到变量在声明初始化之后不允许改变的？其实 const 其实保证的不是变量的值不变，而是保证变量指向的内存地址所保存的数据不允许改动</p>]]></content>
    
    
    <categories>
      
      <category>ES6</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>ES6</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JQuery</title>
    <link href="/2021/04/08/Javascript%E5%85%A5%E9%97%A8(%E4%B8%83)/"/>
    <url>/2021/04/08/Javascript%E5%85%A5%E9%97%A8(%E4%B8%83)/</url>
    
    <content type="html"><![CDATA[<p>以下是对JQuery的学习</p><hr><p>Javascript<br>JQuery库(小型且功能丰富的JavaScript库)，里面存在大量的Javascript函数(通过易于使用的API（可在多种浏览器中使用），它使HTML文档的遍历和操作，事件处理，动画和Ajax等事情变得更加简单。)<br>能够避免重复造轮子。</p><h3 id="获取JQuery"><a href="#获取JQuery" class="headerlink" title="获取JQuery"></a>获取JQuery</h3><p>(CDN jQuery)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  //两种导入方式，一种本地，一种在线方式导入<br>    <span class="hljs-comment">&lt;!-- CDN引入 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;http://libs.baidu.com/jquery/2.0.0/jquery.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;lib/jquery-3.6.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;test-jquery&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">      <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;id&#x27;</span>);</span><br><span class="javascript">      <span class="hljs-comment">//选择器就是css的选择器</span></span><br><span class="javascript">      $(<span class="hljs-string">&#x27;test-jquery&#x27;</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">        alert(<span class="hljs-string">&#x27;hello,jQuery&#x27;</span>);</span><br>      &#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>选择器</p></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>原生js,选择器少，麻烦不好记<br><span class="hljs-regexp">//</span>标签<br>document.getElementsByTagName();<br><span class="hljs-regexp">//i</span>d<br>document.getElementById();<br><span class="hljs-regexp">//</span>类<br>document.getElementById();<br><span class="hljs-regexp">//</span>jQuery  css种的选择器都能用<br>$(<span class="hljs-string">&#x27;p&#x27;</span>).click(); <span class="hljs-regexp">//</span>标签选择器<br>$(<span class="hljs-string">&#x27;#id1&#x27;</span>).click(); <span class="hljs-regexp">//i</span>d选择器<br>$(<span class="hljs-string">&#x27;.class1&#x27;</span>).click(); <span class="hljs-regexp">//</span>class选择器<br></code></pre></td></tr></table></figure><p>文档工具站：(<a href="https://jquery.cuishifeng.cn/">https://jquery.cuishifeng.cn/</a>)<br><img src="/image/7.1.PNG" alt="文档工具"></p><blockquote><p>事件</p></blockquote><p>鼠标事件，键盘事件，其他事件<br><img src="/image/7.3.png" alt="鼠标点击"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;lib/jquery-3.6.0.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>//导入JQuery<br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br>  #divMove &#123;<br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;</span><br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 事件：获取鼠标当前的一个坐标 --&gt;</span><br>  mouse:<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;mouseMove&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;divMove&quot;</span>&gt;</span>在这里移动鼠标试试<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-comment">//当网页元素加载完毕之后，响应事件</span></span><br><span class="javascript">    <span class="hljs-comment">// $(document).ready(function () &#123;&#125;);</span></span><br><span class="javascript">    <span class="hljs-comment">//简写</span></span><br><span class="javascript">    $(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">      $(<span class="hljs-string">&#x27;#divMove&#x27;</span>).mousemove(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;</span><br><span class="javascript">        <span class="hljs-comment">//e代表获取的参数</span></span><br><span class="javascript">        $(<span class="hljs-string">&#x27;#mouseMove&#x27;</span>).text(<span class="hljs-string">&#x27;x:&#x27;</span> + e.pageX + <span class="hljs-string">&#x27;y&#x27;</span> + e.pageY);</span><br>      &#125;);<br>    &#125;);<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>操作DOM</p></blockquote><p>节点文本操作</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">$(&#x27;#<span class="hljs-params">test</span>-<span class="hljs-params">ul</span>  <span class="hljs-params">li</span>[<span class="hljs-params">name</span>=<span class="hljs-params">python</span>]&#x27;)</span>.text<span class="hljs-literal">()</span>; <span class="hljs-comment">//获得值</span><br><span class="hljs-constructor">$(&#x27;#<span class="hljs-params">test</span>-<span class="hljs-params">ul</span>  <span class="hljs-params">li</span>[<span class="hljs-params">name</span>=<span class="hljs-params">python</span>]&#x27;)</span>.text(&#x27;设置值&#x27;); <span class="hljs-comment">//设置值</span><br><span class="hljs-constructor">$(&#x27;#<span class="hljs-params">test</span>-<span class="hljs-params">ul</span>&#x27;)</span>.html<span class="hljs-literal">()</span>; <span class="hljs-comment">//获得值</span><br><span class="hljs-constructor">$(&#x27;#<span class="hljs-params">test</span>-<span class="hljs-params">ul</span>&#x27;)</span>.html(&#x27;&lt;strong&gt;<span class="hljs-number">123</span>&lt;/strong&gt;&#x27;); <span class="hljs-comment">//设置值</span><br></code></pre></td></tr></table></figure><p>css的操作</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">$(&#x27;#<span class="hljs-params">test</span>-<span class="hljs-params">ul</span>  <span class="hljs-params">li</span>[<span class="hljs-params">name</span>=<span class="hljs-params">python</span>]&#x27;)</span>.css(&#x27;color&#x27;, &#x27;red&#x27;);<br></code></pre></td></tr></table></figure><p>元素的显示和隐藏，本质<code>display:none</code></p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">$(&#x27;#<span class="hljs-params">test</span>-<span class="hljs-params">ul</span>  <span class="hljs-params">li</span>[<span class="hljs-params">name</span>=<span class="hljs-params">python</span>]&#x27;)</span>.show<span class="hljs-literal">()</span><br><span class="hljs-constructor">$(&#x27;#<span class="hljs-params">test</span>-<span class="hljs-params">ul</span>  <span class="hljs-params">li</span>[<span class="hljs-params">name</span>=<span class="hljs-params">python</span>]&#x27;)</span>.hide<span class="hljs-literal">()</span><br></code></pre></td></tr></table></figure><h4 id="基于B站视频学习-特别感谢up主-遇见狂神说"><a href="#基于B站视频学习-特别感谢up主-遇见狂神说" class="headerlink" title="基于B站视频学习 特别感谢up主 遇见狂神说"></a>基于<a href="https://www.bilibili.com/video/BV1JJ41177di?p=1">B站视频</a>学习 特别感谢up主 <a href="https://space.bilibili.com/95256449?spm_id_from=333.788.b_765f7570696e666f.1">遇见狂神说</a></h4>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>JS</tag>
      
      <tag>JQuery</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javascript操作表单(验证)(六)</title>
    <link href="/2021/04/08/Javascript%E5%85%A5%E9%97%A8(%E5%85%AD)/"/>
    <url>/2021/04/08/Javascript%E5%85%A5%E9%97%A8(%E5%85%AD)/</url>
    
    <content type="html"><![CDATA[<p>以下是对Javascript操作表单(验证)的学习</p><hr><h2 id="操作表单-验证"><a href="#操作表单-验证" class="headerlink" title="操作表单(验证)"></a>操作表单(验证)</h2><blockquote><p>表单是什么 form 本身也是DOM树</p></blockquote><ul><li>文本框 text</li><li>下拉框 select</li><li>单选框 radio</li><li>多选框 checkbox</li><li>隐藏域 hidden</li><li>密码框 password</li><li>….</li></ul><blockquote><p>获得要提交的信息</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>用户名：<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;username&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 单，多选框的值，就是定义好的value --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>性别：<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;man&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;boy&quot;</span> /&gt;</span>男<br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;woman&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;girl&quot;</span> /&gt;</span>女<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-keyword">var</span> input_text = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;username&#x27;</span>);</span><br><span class="javascript">  <span class="hljs-keyword">var</span> boy_radio = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;boy&#x27;</span>);</span><br><span class="javascript">  <span class="hljs-keyword">var</span> girl_radio = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;girl&#x27;</span>);</span><br><span class="javascript">  <span class="hljs-comment">//得到输入框的值</span></span><br>  input_text.value;<br><span class="javascript">  <span class="hljs-comment">//修改输入框的值</span></span><br><span class="javascript">  <span class="hljs-comment">//对于单，多选框等等固定的值，boy_radio，value只能取到当前的值</span></span><br><span class="javascript">  boy_radio.checked; <span class="hljs-comment">//查看返回的结果，是否为true,如果为true,则被选中~</span></span><br><span class="javascript">  girl_radio.checked = <span class="hljs-literal">true</span>; <span class="hljs-comment">//赋值</span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>提交表单。md5加密密码，表单优化</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>   <span class="hljs-comment">&lt;!-- 表单绑定提交事件</span><br><span class="hljs-comment">   onsubmit= 绑定一个提交检测的函数：true,fale</span><br><span class="hljs-comment">   将这个结果返回给表单，使用onsubmit接受！</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">   --&gt;</span><br>   &lt;form<br>     action=&quot;https://wwww.baidu.com/&quot;<br>     method=&quot;post&quot;<br>     onsubmit=&quot;return  aaa()&quot;<br>   &gt;<br>     <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>用户名：<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> /&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>密码 ：<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;input-password&quot;</span> /&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;md5-password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> /&gt;</span>//隐藏密码<br>     <span class="hljs-comment">&lt;!--绑定事件onclick 被点击   onclick=&quot;aaa()&quot; --&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>提交<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">     <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">aaa</span>(<span class="hljs-params"></span>) </span>&#123;</span><br>       alert(1);<br><span class="javascript">       <span class="hljs-keyword">var</span> uname = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;username&#x27;</span>);</span><br><span class="javascript">       <span class="hljs-keyword">var</span> pwd = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;input-password&#x27;</span>);</span><br><span class="javascript">       <span class="hljs-keyword">var</span> md5pwd = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;md5-password&#x27;</span>);</span><br>       md5pwd.value = md5(pwd.value);<br><span class="javascript">       <span class="hljs-comment">//可以校验判断表单内容，true就是通过提交，false,阻止提交</span></span><br><span class="javascript">       <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</span><br><span class="javascript">       <span class="hljs-comment">// console.log(uname.value);</span></span><br><span class="javascript">       <span class="hljs-comment">// //MD5  算法</span></span><br><span class="javascript">       <span class="hljs-comment">// pwd.value = md5(pwd);//密码隐藏</span></span><br><span class="javascript">       <span class="hljs-comment">// console.log(pwd.value);</span></span><br>     &#125;<br>   <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="基于B站视频学习-特别感谢up主-遇见狂神说"><a href="#基于B站视频学习-特别感谢up主-遇见狂神说" class="headerlink" title="基于B站视频学习 特别感谢up主 遇见狂神说"></a>基于<a href="https://www.bilibili.com/video/BV1JJ41177di?p=1">B站视频</a>学习 特别感谢up主 <a href="https://space.bilibili.com/95256449?spm_id_from=333.788.b_765f7570696e666f.1">遇见狂神说</a></h4>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>JS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javascript操作BOM对象与DOM(五)</title>
    <link href="/2021/04/06/Javascript%E5%85%A5%E9%97%A8(%E4%BA%94)/"/>
    <url>/2021/04/06/Javascript%E5%85%A5%E9%97%A8(%E4%BA%94)/</url>
    
    <content type="html"><![CDATA[<p>以下是对Javascript操作BOM对象与DOM的学习</p><hr><h2 id="操作BOM对象-重点"><a href="#操作BOM对象-重点" class="headerlink" title="操作BOM对象(重点)"></a>操作BOM对象(重点)</h2><blockquote><p>浏览器介绍<br>JavaScript 和浏览器关系？<br>JavaScript诞生就是伪类能够让他在浏览器中运行！<br><strong>BOM：浏览器对象模型</strong>      </p></blockquote><p>内核</p><ul><li>IE 6-11</li><li>Chrome</li><li>Safari</li><li>FireFox</li><li>Opera</li></ul><blockquote><p>window(重要)</p></blockquote><p>window代表浏览器窗口</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">window</span>.alert(<span class="hljs-number">1</span>)<br><span class="hljs-literal">undefined</span><br><span class="hljs-built_in">window</span>.innerHeight<br><span class="hljs-number">271</span><br><span class="hljs-built_in">window</span>.innerWidth<br><span class="hljs-number">1088</span><br><span class="hljs-built_in">window</span>.outerHeight<br><span class="hljs-number">805</span><br><span class="hljs-built_in">window</span>.outerWidth<br><span class="hljs-number">1104</span><br></code></pre></td></tr></table></figure><blockquote><p>Navigator(不建议使用)</p></blockquote><p>navigator,封装了浏览器的信息</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">navigator.appVersion<br><span class="hljs-string">&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.105 Safari/537.36&quot;</span><br>navigator.userAgent<br><span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.105 Safari/537.36&quot;</span><br>navigator.platform<br><span class="hljs-string">&quot;Win32&quot;</span><br></code></pre></td></tr></table></figure><p>大多数时候，我们不会使用navigator对象，因为会被人为修改！<br>不建议使用这些属性来判断和编写代码</p><blockquote><p>screen<br>代表屏幕尺寸</p></blockquote><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arduino">screen.width<br><span class="hljs-number">1536</span><br>screen.height<br><span class="hljs-number">864</span><br></code></pre></td></tr></table></figure><blockquote><p>location  (重要)</p></blockquote><p>location代表当前页面的URL信息</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">host:<span class="hljs-string">&quot;www.baidu.com&quot;</span><br>href: <span class="hljs-string">&quot; https://www.baidu.com/&quot;</span><br>protocol: <span class="hljs-string">&quot;https:&quot;</span><br>reload: ƒ reload()  <span class="hljs-regexp">//</span>刷新网页<br>location.assign(<span class="hljs-string">&#x27;https://pengzhenglong.github.io/&#x27;</span>)<span class="hljs-regexp">//</span>设置新的地址<br></code></pre></td></tr></table></figure><blockquote><p>document(内容)</p></blockquote><p>document代表当前的页面，HTML DOM文档树</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">document</span>.title<br><span class="hljs-string">&quot;百度一下，你就知道&quot;</span><br><span class="hljs-built_in">document</span>.title=<span class="hljs-string">&#x27;DragonPeng&#x27;</span><br><span class="hljs-string">&quot;DragonPeng&quot;</span><br></code></pre></td></tr></table></figure><p>获取具体的文档树节点</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dl</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>java<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>javase<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>javaEE<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-keyword">var</span> dl = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;app&#x27;</span>);</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>获取cookie</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">document</span>.cookie<br></code></pre></td></tr></table></figure><p>劫持cookie原理</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>  <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;aa.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 恶意人员；获取你的cookie上传到他的服务器 --&gt;</span><br></code></pre></td></tr></table></figure><p>服务端可以设置cookie:httpOnly</p><blockquote><p>history(不建议使用)</p></blockquote><p>history代表浏览器的历史记录</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">history.back() <span class="hljs-regexp">//</span>后退<br>history.forward()<span class="hljs-regexp">//</span>前进<br></code></pre></td></tr></table></figure><h2 id="操作DOM对象-重点"><a href="#操作DOM对象-重点" class="headerlink" title="操作DOM对象(重点)"></a>操作DOM对象(重点)</h2><blockquote><p>核心</p></blockquote><p>浏览器网页就是一个Dom树形结构！    </p><ul><li>更新：更新Dom节点</li><li>遍历Dom节点：得到Dom节点</li><li>删除：删除一个Dom节点</li><li>添加：添加一个新的节点<br>要操作一个Dom节点，就必须要先获得这个Dom节点</li></ul><blockquote><p>获取dom节点</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// 对应css选择器</span><br><span class="hljs-keyword">var</span> h1 = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&#x27;h1&#x27;</span>);<br><span class="hljs-keyword">var</span> h1 = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;p1&#x27;</span>);<br><span class="hljs-keyword">var</span> p2 = <span class="hljs-built_in">document</span>.getElementsByClassName(<span class="hljs-string">&#x27;p2&#x27;</span>);<br><span class="hljs-keyword">var</span> father = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;father&#x27;</span>);<br><span class="hljs-keyword">var</span> childrens = father.children[index]; <span class="hljs-comment">//获取父节点下的所有子节点</span><br><span class="hljs-comment">//   father.firstChild;</span><br><span class="hljs-comment">//   father.lastChild;</span><br></code></pre></td></tr></table></figure><p>这是原生代码，之后我们尽量都使用JQuery();</p><blockquote><p>更新节点</p></blockquote><p>操作文本</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">id1.innerText=<span class="hljs-string">&#x27;456&#x27;</span>  <span class="hljs-regexp">//</span>修改文本的值<br>id1.innerHTML=<span class="hljs-string">&#x27;&lt;strong&gt;123&lt;/strong&gt;&#x27;</span><span class="hljs-regexp">//</span>可以解析HTML文本标签<br></code></pre></td></tr></table></figure><p>操作css</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">id1.style.color</span>=<span class="hljs-string">&#x27;red&#x27;</span><span class="hljs-comment">;  //属性使用  字符串</span><br><span class="hljs-attr">id1.style.fontSize</span>=<span class="hljs-string">&#x27;20px&#x27;</span><span class="hljs-comment">; //_转驼峰命名问题</span><br><span class="hljs-attr">id1.style.padding</span>  =<span class="hljs-string">&#x27;2em&#x27;</span>  <br><br></code></pre></td></tr></table></figure><blockquote><p>删除节点</p></blockquote><p>删除节点的步骤：先获取父节点，再通过父节点删除自己</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;father&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>标题1<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;p1&quot;</span>&gt;</span>p1<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;p2&quot;</span>&gt;</span>p2<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br> <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript"><span class="hljs-keyword">var</span> self = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;p1&#x27;</span>);</span><br><span class="javascript"><span class="hljs-keyword">var</span>  father = p1.parentElement;</span><br>father.removeChild(self);<br><br><span class="javascript"><span class="hljs-comment">//删除是一个动态的过程</span></span><br>father.removeChild(father.children[0])<br>father.removeChild(father.children[1])<br>father.removeChild(father.children[2])<br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>注意：</strong>删除多个节点的时候，children是再时刻变化的，删除节点的时候一定要注意！</p><blockquote><p>插入节点</p></blockquote><p>我们获得了某个Dom节点，假设这个dom节点是空的，我们通过innerHTML就可以增加一个元素了，但是这个DOM节点已经存在元素了，我们就不能这么干了！会产生覆盖</p><p>追加</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;js&quot;</span>&gt;</span>JavaScript<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;se&quot;</span>&gt;</span>JavaSE<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;ee&quot;</span>&gt;</span>JavaEE<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;me&quot;</span>&gt;</span>JavaMe<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-keyword">var</span> js = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;js&#x27;</span>);</span><br><span class="javascript">  <span class="hljs-keyword">var</span> list = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;list&#x27;</span>);</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>效果:<br><img src="/image/6.2.png" alt="追加到后面了"></p><blockquote><p>创建一个新的标签，实现插入</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-keyword">var</span> js = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;js&#x27;</span>); <span class="hljs-comment">//已经存在的节点</span></span><br><span class="javascript">  <span class="hljs-keyword">var</span> list = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;list&#x27;</span>);</span><br><span class="javascript">  <span class="hljs-comment">//通过JS创建一个新的节点</span></span><br><span class="javascript">  <span class="hljs-keyword">var</span> newP = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&#x27;p&#x27;</span>); <span class="hljs-comment">//创建一个P标签</span></span><br><span class="javascript">  newP.id = <span class="hljs-string">&#x27;newP&#x27;</span>;</span><br><br><span class="javascript">  newP.innerText = <span class="hljs-string">&#x27;hello.DragonPeng&#x27;</span>;</span><br><span class="javascript">  <span class="hljs-comment">//创建一个标签节点</span></span><br><span class="javascript">  <span class="hljs-keyword">var</span> myScript = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&#x27;script&#x27;</span>);</span><br><span class="javascript">  myScript.setAttribute(<span class="hljs-string">&#x27;type&#x27;</span>, <span class="hljs-string">&#x27;text/javascript&#x27;</span>);</span><br><br><span class="javascript">  <span class="hljs-comment">//可以创建一个Style标签</span></span><br><span class="javascript">  <span class="hljs-keyword">var</span> myStyle = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&#x27;style&#x27;</span>); <span class="hljs-comment">//创建了一个空style标签</span></span><br><span class="javascript">  myStyle.setAttribute(<span class="hljs-string">&#x27;type&#x27;</span>, <span class="hljs-string">&#x27;text/css&#x27;</span>);</span><br><span class="javascript">  myStyle.innerHTML = <span class="hljs-string">&#x27;body&#123;background-color: blue;&#125;&#x27;</span>; <span class="hljs-comment">//设置标签内容</span></span><br><span class="javascript">  <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&#x27;head&#x27;</span>)[<span class="hljs-number">0</span>].appendChild(myStyle);</span><br><span class="javascript">  <span class="hljs-comment">//   list.appendChild(js);</span></span><br><span class="javascript">  <span class="hljs-comment">//   list.append(newP);</span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>insert</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">var</span> ee = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;ee&#x27;</span>);<br><span class="hljs-keyword">var</span> js = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;js&#x27;</span>);<br><span class="hljs-keyword">var</span> list = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;list&#x27;</span>);<br><span class="hljs-comment">// 要包含的节点，insertBefore(newNode, targetNode);</span><br>list.insertBefore(js, ee);<br></code></pre></td></tr></table></figure><h4 id="基于B站视频学习-特别感谢up主-遇见狂神说"><a href="#基于B站视频学习-特别感谢up主-遇见狂神说" class="headerlink" title="基于B站视频学习 特别感谢up主 遇见狂神说"></a>基于<a href="https://www.bilibili.com/video/BV1JJ41177di?p=1">B站视频</a>学习 特别感谢up主 <a href="https://space.bilibili.com/95256449?spm_id_from=333.788.b_765f7570696e666f.1">遇见狂神说</a></h4>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>JS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javascript面向对象&amp;json(四)</title>
    <link href="/2021/04/05/Javascript%E5%85%A5%E9%97%A8(%E5%9B%9B)/"/>
    <url>/2021/04/05/Javascript%E5%85%A5%E9%97%A8(%E5%9B%9B)/</url>
    
    <content type="html"><![CDATA[<p>以下是对JavaScript函数与面向对象的学习</p><hr><h2 id="内部对象"><a href="#内部对象" class="headerlink" title="内部对象"></a>内部对象</h2><p>标准对象</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-keyword">typeof</span> <span class="hljs-number">123</span>o<br><span class="hljs-string">&quot;number&quot;</span><br><span class="hljs-keyword">typeof</span> <span class="hljs-string">&#x27;123&#x27;</span><br><span class="hljs-string">&quot;string&quot;</span><br><span class="hljs-keyword">typeof</span> <span class="hljs-literal">true</span><br><span class="hljs-string">&quot;boolean&quot;</span><br><span class="hljs-keyword">typeof</span>  <span class="hljs-literal">NaN</span><br><span class="hljs-string">&quot;number&quot;</span><br><span class="hljs-keyword">typeof</span> []<br><span class="hljs-string">&quot;object&quot;</span><br><span class="hljs-keyword">typeof</span> &#123;&#125;<br><span class="hljs-string">&quot;object&quot;</span><br><span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Math</span>.abs<br><span class="hljs-string">&quot;function&quot;</span><br><span class="hljs-keyword">typeof</span> <span class="hljs-literal">undefined</span><br><span class="hljs-string">&quot;undefined&quot;</span><br></code></pre></td></tr></table></figure><ol><li>Date<br>基本使用<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">var now = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Date()</span>; <span class="hljs-comment">//Mon Apr 12 2021 18:27:49 GMT+0800 (中国标准时间)</span><br>now.get<span class="hljs-constructor">FullYear()</span>; <span class="hljs-comment">//年</span><br>now.get<span class="hljs-constructor">Month()</span>; <span class="hljs-comment">//月  0~11月</span><br>now.get<span class="hljs-constructor">Date()</span>; <span class="hljs-comment">//日</span><br>now.get<span class="hljs-constructor">Day()</span>; <span class="hljs-comment">//星期几</span><br>now.get<span class="hljs-constructor">Hours()</span>; <span class="hljs-comment">//时</span><br>now.get<span class="hljs-constructor">Minutes()</span>; <span class="hljs-comment">//分</span><br>now.get<span class="hljs-constructor">Seconds()</span>; <span class="hljs-comment">//秒</span><br>now.get<span class="hljs-constructor">Time()</span>; <span class="hljs-comment">//时间戳  全世界统一 1970  1.1 0：00：00</span><br>console.log(<span class="hljs-keyword">new</span> <span class="hljs-constructor">Date(1618223269100)</span>); <span class="hljs-comment">//时间戳转为时间</span><br></code></pre></td></tr></table></figure>转换<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">now = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Date(1618223269100)</span><br>Mon Apr <span class="hljs-number">12</span> <span class="hljs-number">2021</span> <span class="hljs-number">18</span>:<span class="hljs-number">27</span>:<span class="hljs-number">49</span> GMT+<span class="hljs-number">0800</span> (中国标准时间)<br>now.toLocaleDateString <span class="hljs-comment">//注意，调用的是一个方式，不是一个属性;</span><br>ƒ <span class="hljs-keyword">to</span><span class="hljs-constructor">LocaleDateString()</span> &#123; <span class="hljs-literal">[<span class="hljs-identifier">native</span> <span class="hljs-identifier">code</span>]</span> &#125;<br>now.toLocaleString<br>ƒ <span class="hljs-keyword">to</span><span class="hljs-constructor">LocaleString()</span> &#123; <span class="hljs-literal">[<span class="hljs-identifier">native</span> <span class="hljs-identifier">code</span>]</span> &#125;<br>now.<span class="hljs-keyword">to</span><span class="hljs-constructor">LocaleString()</span><br><span class="hljs-string">&quot;2021/4/12 下午6:27:49&quot;</span><br>now.<span class="hljs-keyword">to</span><span class="hljs-constructor">GMTString()</span><br><span class="hljs-string">&quot;Mon, 12 Apr 2021 10:27:49 GMT&quot;</span><br></code></pre></td></tr></table></figure></li><li>json是什么<br>早期，所有数据传输习惯使用XML文件</li></ol><ul><li> JSON是一种轻量级的数据交互格式。</li><li> 简洁和清晰的<strong>层次结构</strong>使得JSON成为理想的数据交互语言。</li><li> 易于人阅读和编写，同时也易于机器解析和生成，并有效地提升网络传输效率。<br>在JavaScript一切皆为对象，任何js支持的类型都可以用JSON来表示; number, string…     </li></ul><p>格式：</p><ul><li>对象都用{}</li><li>数组都用[]</li><li>所有的键值对都是用key:value</li></ul><ol start="3"><li>JSON字符串和JS对象的转化<figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs excel"><span class="hljs-built_in">var</span> student = &#123;<br>  <span class="hljs-built_in">na</span><span class="hljs-symbol">me:</span> &#x27;zhansan&#x27;,<br>  a<span class="hljs-symbol">ge:</span> <span class="hljs-number">3</span>,<br>  s<span class="hljs-symbol">ex:</span> &#x27;男&#x27;,<br>&#125;; //&#123;<span class="hljs-built_in">na</span><span class="hljs-symbol">me:</span> <span class="hljs-string">&quot;zhansan&quot;</span>, a<span class="hljs-symbol">ge:</span> <span class="hljs-number">3</span>, s<span class="hljs-symbol">ex:</span> <span class="hljs-string">&quot;男&quot;</span>&#125;<br>//对象转化为JSON字符串 &#123;<span class="hljs-string">&quot;name&quot;</span><span class="hljs-symbol">:</span><span class="hljs-string">&quot;zhansan&quot;</span>,<span class="hljs-string">&quot;age&quot;</span><span class="hljs-symbol">:3</span>,<span class="hljs-string">&quot;sex&quot;</span><span class="hljs-symbol">:</span><span class="hljs-string">&quot;男&quot;</span>&#125;<br><span class="hljs-built_in">var</span> jasonStudent = JSON.stringify(student);<br><br>//json字符串转化为对象，参数为json字符串<br><span class="hljs-built_in">var</span> obj = JSON.parse(&#x27;&#123;<span class="hljs-string">&quot;name&quot;</span><span class="hljs-symbol">:</span><span class="hljs-string">&quot;zhansan&quot;</span>,<span class="hljs-string">&quot;age&quot;</span><span class="hljs-symbol">:3</span>,<span class="hljs-string">&quot;sex&quot;</span><span class="hljs-symbol">:</span><span class="hljs-string">&quot;男&quot;</span>&#125;&#x27;);<br></code></pre></td></tr></table></figure>JSON和js对象的区别<br>JSON是一种格式化的字符串，而对象是键值对形式的<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-keyword">var</span> obj = &#123; a: <span class="hljs-symbol">&#x27;hell</span>o&#x27;, b: <span class="hljs-symbol">&#x27;hello</span>b&#x27; &#125;;<br><span class="hljs-keyword">var</span> json = &#x27;&#123;<span class="hljs-string">&quot;a&quot;</span>:<span class="hljs-string">&quot;hello&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>:<span class="hljs-string">&quot;hellob&quot;</span>&#125;&#x27;;<br></code></pre></td></tr></table></figure><h2 id="面向对象编程"><a href="#面向对象编程" class="headerlink" title="面向对象编程"></a>面向对象编程</h2><h3 id="原型对象"><a href="#原型对象" class="headerlink" title="原型对象"></a>原型对象</h3></li><li>什么是面向对象<br>JavaScript，java,c#….面向对象;JavaScript有些区别！</li></ol><ul><li>类：模板</li><li>对象；具体的实例<br>在JavaScript中这个需要大家换一下思维方式！<br>原型：<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> student = &#123;<br>  name: <span class="hljs-string">&#x27;zhansan&#x27;</span>,<br>  age: <span class="hljs-number">3</span>,<br>  sex: <span class="hljs-string">&#x27;男&#x27;</span>,<br>  run: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name + <span class="hljs-string">&#x27;run...&#x27;</span>);<br>  &#125;,<br>&#125;;<br><span class="hljs-keyword">var</span> xiaoming = &#123;<br>  name: <span class="hljs-string">&#x27;xiaoming&#x27;</span>,<br>&#125;;<br><span class="hljs-comment">//原型对象</span><br>xiaoming.__proto__ = student;<br><span class="hljs-keyword">var</span> Bird = &#123;<br>  fly: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name + <span class="hljs-string">&#x27;fly....&#x27;</span>);<br>  &#125;,<br>&#125;;<br><span class="hljs-comment">//小明的原型是Student</span><br>xiaoming.__proto__ = Bird;<br></code></pre></td></tr></table></figure><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Student</span><span class="hljs-params">(name)</span> </span>&#123;<br>  <span class="hljs-keyword">this</span>.name = name;<br>&#125;<br><span class="hljs-comment">//给student新增一个方法</span><br>Student.prototype.hello = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>&#123;<br>  alert(<span class="hljs-string">&#x27;Hello&#x27;</span>);<br>&#125;;<br></code></pre></td></tr></table></figure></li></ul><ol start="2"><li>class继承<br>class关键字，是在ES6引入的</li><li>定义一个类，属性，方法<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//定义一个学生类</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">name</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.name = name;<br>  &#125;<br>  <span class="hljs-function"><span class="hljs-title">hello</span>(<span class="hljs-params"></span>)</span> &#123;<br>    alert(<span class="hljs-built_in">this</span>.name + <span class="hljs-string">&#x27;hello&#x27;</span>);<br>  &#125;<br>&#125;<br><span class="hljs-keyword">var</span> xiaoming = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&#x27;小明&#x27;</span>);<br><span class="hljs-keyword">var</span> xioahong = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&#x27;小红&#x27;</span>);<br>xiaoming.hello();<br></code></pre></td></tr></table></figure></li><li>继承<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">name</span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.name = name;<br>  &#125;<br>  <span class="hljs-function"><span class="hljs-title">hello</span>(<span class="hljs-params"></span>)</span> &#123;<br>    alert(<span class="hljs-string">&#x27;hello&#x27;</span>);<br>  &#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XiaoStudent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Student</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">name, grade</span>)</span> &#123;<br>    <span class="hljs-built_in">super</span>(name); <span class="hljs-comment">//记得用super调用父类的构造方法!</span><br>    <span class="hljs-built_in">this</span>.grade = grade;<br>  &#125;<br>  <span class="hljs-function"><span class="hljs-title">myGrade</span>(<span class="hljs-params"></span>)</span> &#123;<br>    alert(<span class="hljs-string">&#x27;我是一名小学生&#x27;</span>);<br>  &#125;<br>&#125;<br><span class="hljs-keyword">var</span> xiaoming = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&#x27;小明&#x27;</span>);<br><span class="hljs-keyword">var</span> xiaohong = <span class="hljs-keyword">new</span> XiaoStudent(<span class="hljs-string">&#x27;小红&#x27;</span>, <span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure>本质：查看对象原型         </li></ol><p><img src="/image/6.png" alt="查看对象原型"></p><ol start="3"><li>原型链         </li></ol><p><img src="/image/6.1.png" alt="原型链"></p><h4 id="基于B站视频学习-特别感谢up主-遇见狂神说"><a href="#基于B站视频学习-特别感谢up主-遇见狂神说" class="headerlink" title="基于B站视频学习 特别感谢up主 遇见狂神说"></a>基于<a href="https://www.bilibili.com/video/BV1JJ41177di?p=1">B站视频</a>学习 特别感谢up主 <a href="https://space.bilibili.com/95256449?spm_id_from=333.788.b_765f7570696e666f.1">遇见狂神说</a></h4>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>JS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javascript函数&amp;变量的作用域&amp;&amp;方法(三)</title>
    <link href="/2021/04/04/Javascript%E5%85%A5%E9%97%A8(%E4%B8%89)/"/>
    <url>/2021/04/04/Javascript%E5%85%A5%E9%97%A8(%E4%B8%89)/</url>
    
    <content type="html"><![CDATA[<p>以下是对JavaScript函数的学习</p><hr><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="定义函数"><a href="#定义函数" class="headerlink" title="定义函数"></a>定义函数</h3><ol><li>定义方式一</li></ol><p>绝对值函数</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sas">function<span class="hljs-meta"> abs(</span><span class="hljs-meta">x</span>) &#123;<br>  <span class="hljs-meta">if</span> (<span class="hljs-meta">x</span> &gt;= 0) &#123;<br>    <span class="hljs-meta">return</span> <span class="hljs-meta">x</span>;<br>  &#125; <span class="hljs-meta">else</span> &#123;<br>    <span class="hljs-meta">return</span> -<span class="hljs-meta">x</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>一旦执行到return代表函数结束，返回结果！<br>如果没有执行return，函数执行完也会返回结果，结果就是undefined</p><ol start="2"><li><p>定义方式二</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ada">var <span class="hljs-keyword">abs</span> = <span class="hljs-keyword">function</span> <span class="hljs-title"></span>(x) &#123;<br>  if (x &gt;= 0) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-type">x</span>;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">return</span> -x;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>function(x){….}这是一个匿名函数，但是可以把结果赋值给abs，通过abs就可以调用函数！<br>方式一和方式二等价！</p></li><li><p>调用函数</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">abs</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>  <span class="hljs-comment">//10</span><br><span class="hljs-function"><span class="hljs-title">abs</span><span class="hljs-params">(-<span class="hljs-number">10</span>)</span></span>  <span class="hljs-comment">//10</span><br></code></pre></td></tr></table></figure><p>参数问题： JavaScript可以传任意个参数，也可以不传递参数~<br>参数尽量是否存在的问题？<br>假设不存在参数，如何规避？</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">var</span> abs = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span> </span>&#123;<br>  <span class="hljs-comment">//   手动抛出异常来判断</span><br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> x !== <span class="hljs-string">&#x27;number&#x27;</span>) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-string">&#x27;Not  a Number&#x27;</span>;<br>  &#125;<br>  <span class="hljs-keyword">if</span> (x &gt;= <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-keyword">return</span> x;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">return</span> -x;          <br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure></li><li><p>arguments<br>arguments是一个JS免费赠送的关键字：<br>代表，传递进来的所有的参数，是一个数组！</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> abs = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;x=&gt;&#x27;</span> + x);<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">arguments</span>.length; i++) &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">arguments</span>[i]);<br>  &#125;<br>  <span class="hljs-keyword">if</span> (x &gt;= <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-keyword">return</span> x;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">return</span> -x;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>问题： arguments包含所有的参数，我们有时候使用多余的参数来进行附加操作。需要排除已有参数~     </p></li><li><p>rest<br>ES6引入的新特性，获取除了已经定义的参数之外的所有参数~<br>以前  </p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs matlab"><span class="hljs-keyword">if</span>(<span class="hljs-keyword">arguments</span>.<span class="hljs-built_in">length</span>&gt;<span class="hljs-number">2</span>)&#123;<br>        <span class="hljs-keyword">for</span>(var  <span class="hljs-built_in">i</span>=<span class="hljs-number">2</span>;<span class="hljs-built_in">i</span>&lt;<span class="hljs-keyword">arguments</span>.<span class="hljs-built_in">length</span>;<span class="hljs-built_in">i</span>++)&#123;<br>            <br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><p>ES6引入的新特性，获取除了已经定义的参数之外的所有参数~    </p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">aaa</span><span class="hljs-params">(a, b, <span class="hljs-rest_arg">...rest</span>)</span> </span>&#123;<br>  console.log(<span class="hljs-string">&#x27;a=&gt;&#x27;</span> + a);<br>  console.log(<span class="hljs-string">&#x27;b=&gt;&#x27;</span> + b);<br>  console.log(rest);<br>&#125;<br></code></pre></td></tr></table></figure><p>rest 参数只能写在最后面，必须用…标识。</p></li></ol><h3 id="变量的作用域"><a href="#变量的作用域" class="headerlink" title="变量的作用域"></a>变量的作用域</h3><ol><li><p>在JavaScript中，var定义的变量实际是有作用域的。<br>假设在函数体中声明，则在函数体外不可以使用~(非要想实现的话后面可以研究以下闭包)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-meta">&#x27;use strict&#x27;</span>;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">qj</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>;<br>  x = x + <span class="hljs-number">1</span>;<br>&#125;<br>x = x + <span class="hljs-number">2</span>; <span class="hljs-comment">//Uncaught ReferenceError: x is not defined</span><br></code></pre></td></tr></table></figure></li><li><p>如果两个函数使用了相同的变量名，只要在函数内部，就不冲突</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-meta">&#x27;use strict&#x27;</span>;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">qj</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>;<br>  x = x + <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">qj2</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> x = <span class="hljs-string">&#x27;a&#x27;</span>;<br>  X = X + <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>假设，内部函数变量和外部函数的变量，重名！</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">qj</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> x = <span class="hljs-number">1</span>;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">qj2</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">var</span> x = <span class="hljs-string">&#x27;A&#x27;</span>;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;inner&#x27;</span> + x); <span class="hljs-comment">//innerA</span><br>  &#125;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;outer&#x27;</span> + x); <span class="hljs-comment">//outer1</span><br>  qj2();<br>&#125;<br>  qj();<br></code></pre></td></tr></table></figure><p>假设在JavaScript中函数查找变量从自身函数开始~，由“内”向“外”查找，假设外部存在这个同名的函数变量，则内部函数会屏蔽外部函数的变量。</p></li><li><p>提升变量的作用域</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">qj</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> x = <span class="hljs-string">&#x27;x&#x27;</span> + y;<br>  <span class="hljs-built_in">console</span>.log(x);<br>  <span class="hljs-keyword">var</span> y = <span class="hljs-string">&#x27;y&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>结果： xundefined<br>说明：js执行引擎，自动提升了y的声明，但是不会提升变量y的赋值；</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">qj2</span>(<span class="hljs-params"></span>) </span>&#123;<br> <span class="hljs-keyword">var</span>  y;<br> <span class="hljs-keyword">var</span> x = <span class="hljs-string">&#x27;x&#x27;</span> + y;<br>  <span class="hljs-built_in">console</span>.log(x);<br>  y = <span class="hljs-string">&#x27;y&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>这个是在JavaScript建立之初就存在的特性。养成规范：所有的变量定义都放在函数的头部，不要乱放，便于代码维护。</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">qj2</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-keyword">var</span> x = <span class="hljs-number">1</span>;<br>  y = x + <span class="hljs-number">1</span>;<br>  z, i, a; <span class="hljs-comment">//undefined</span><br><br>  <span class="hljs-comment">//之后随意用</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>全局函数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//全局变量</span><br> <span class="hljs-keyword">var</span>  x=<span class="hljs-number">1</span>;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span>  <span class="hljs-title">f</span>(<span class="hljs-params"></span>)</span>&#123;<br>      <span class="hljs-built_in">console</span>.log(x);<br>  &#125;<br>  f();<br>  <span class="hljs-built_in">console</span>.log(x);<br></code></pre></td></tr></table></figure></li><li><p><strong>全局对象window</strong></p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sas">var <span class="hljs-meta">x</span> = <span class="hljs-string">&#x27;xxx&#x27;</span>;<br><span class="hljs-meta">window</span>.alert(<span class="hljs-meta">x</span>);<br><span class="hljs-meta">window</span>.alert(<span class="hljs-meta">window</span>.<span class="hljs-meta">x</span>); //默认所有的全局变量，都会自动绑定在<span class="hljs-meta">window</span>对象下<br></code></pre></td></tr></table></figure></li></ol><p>alter()这个函数本身也是一个window变量</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> x = <span class="hljs-string">&#x27;xxx&#x27;</span>;<br><span class="hljs-built_in">window</span>.alert(x);<br><span class="hljs-comment">//   window.alert(window.x); //默认所有的全局变量，都会自动绑定在window对象下</span><br><span class="hljs-keyword">var</span> old_alter = <span class="hljs-built_in">window</span>.alert;<br><span class="hljs-comment">//   old_alter(x);</span><br><span class="hljs-built_in">window</span>.alert = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;&#125;;<br><span class="hljs-comment">//发现alter()失效了</span><br><span class="hljs-built_in">window</span>.alert(<span class="hljs-number">123</span>);<br><span class="hljs-comment">//恢复</span><br><span class="hljs-built_in">window</span>.alert = old_alter;<br><span class="hljs-built_in">window</span>.alert(<span class="hljs-number">456</span>);<br></code></pre></td></tr></table></figure><p>JavaScript实际上只有一个全局作用域，任何变量(函数也可以视为变量)，假如没有在函数作用范围内找到，就会向外查找。如果在全局作用域都没有找到，报错ReferenceError.<br>7. 规范<br>由于我们所有的全局变量都会绑定在我们的window上，如果不同的js文件，使用了相同的全局变量，冲突-&gt;如何能够减少冲突？</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ada">//唯一全局变量<br>var <span class="hljs-keyword">all</span> = &#123;&#125;;<br>//定义全局变量<br><span class="hljs-keyword">all</span>.name = <span class="hljs-symbol">&#x27;DragonPeng</span>&#x27;;<br><span class="hljs-keyword">all</span>.add = <span class="hljs-keyword">function</span> <span class="hljs-title"></span>(a, b) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-type">a</span> + b;<br>&#125;;<br></code></pre></td></tr></table></figure><p>把自己的代码全部放入自己定义的唯一空间命名中，降低全局命名冲突的问题~</p><ol start="8"><li><p><strong>局部作用域let</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">aaa</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>    <span class="hljs-built_in">console</span>.log(i);<br>  &#125;<br>  <span class="hljs-built_in">console</span>.log(i + <span class="hljs-number">1</span>); <span class="hljs-comment">//问题？i出了这个作用域还可以使用</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ES6  let关键字，解决局部作用域冲突问题！</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">aaa</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>    <span class="hljs-built_in">console</span>.log(i);<br>  &#125;<br>  <span class="hljs-built_in">console</span>.log(i + <span class="hljs-number">1</span>); <span class="hljs-comment">//Uncaught ReferenceError: i is not defined</span><br>&#125;<br></code></pre></td></tr></table></figure><p>建议大家都用let去定义局部作用域的变量</p></li><li><p>常量const<br>在ES6之前，怎么定义常量，只有用全部大写字母命名的变量就是常量；建议不要修改这样的值</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gams">var <span class="hljs-built_in">PI</span> = <span class="hljs-string">&#x27;3.14&#x27;</span>;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-built_in">PI</span>);<br><span class="hljs-built_in">PI</span> = <span class="hljs-string">&#x27;214&#x27;</span>;<span class="hljs-comment">//可以改变这个值</span><br>console.<span class="hljs-built_in">log</span>(<span class="hljs-built_in">PI</span>);<br></code></pre></td></tr></table></figure><p>在ES6引入了常量关键字 const</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">const</span> <span class="hljs-literal">PI</span> = <span class="hljs-string">&#x27;3.14&#x27;</span>;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-literal">PI</span>);<br><span class="hljs-literal">PI</span> = <span class="hljs-string">&#x27;123&#x27;</span>;<span class="hljs-comment">//Uncaught TypeError: Assignment to constant variable.</span><br>console.<span class="hljs-built_in">log</span>(<span class="hljs-literal">PI</span>); <br></code></pre></td></tr></table></figure><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><p>定义方法：<br>方法就是把函数放在对象的里面，对象只有两个东西:属性和方法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript">      <span class="hljs-keyword">var</span> student = &#123;<br>        name: <span class="hljs-string">&#x27;haha&#x27;</span>,<br>        birth: <span class="hljs-number">2000</span>,<br>        <span class="hljs-comment">//方法</span><br>        age: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>          <span class="hljs-comment">//今年-出生的年</span><br>          <span class="hljs-keyword">var</span> now = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear();<br>          <span class="hljs-keyword">return</span> now - <span class="hljs-built_in">this</span>.birth;<br>        &#125;,<br>      &#125;;<br><span class="hljs-comment">//属性</span><br>student.name<br><span class="hljs-comment">//方法，一定要带()</span><br>student.age()<br></code></pre></td></tr></table></figure><p>this代表什么？拆开上面的代码看看~</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAge</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-comment">//今年-出生的年</span><br>  <span class="hljs-keyword">var</span> now = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear();<br>  <span class="hljs-keyword">return</span> now - <span class="hljs-built_in">this</span>.birth;<br>&#125;<br><span class="hljs-keyword">var</span> student = &#123;<br>  name: <span class="hljs-string">&#x27;haha&#x27;</span>,<br>  birth: <span class="hljs-number">2000</span>,<br>  age: getAge,<br>&#125;;<br><span class="hljs-comment">//student.age() //ok</span><br><span class="hljs-comment">//   getAge()   NaN  window</span><br></code></pre></td></tr></table></figure><p>this是无法指向的，是默认指向调用它的那个对象；      </p></li></ol><blockquote><p>applay</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAge</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-comment">//今年-出生的年</span><br>  <span class="hljs-keyword">var</span> now = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear();<br>  <span class="hljs-keyword">return</span> now - <span class="hljs-built_in">this</span>.birth;<br>&#125;<br><span class="hljs-keyword">var</span> student = &#123;<br>  name: <span class="hljs-string">&#x27;haha&#x27;</span>,<br>  birth: <span class="hljs-number">2000</span>,<br>  age: getAge,<br>&#125;;<br><span class="hljs-comment">//student.age() //ok</span><br><span class="hljs-comment">//   getAge()   NaN</span><br>getAge.apply(student, []); <span class="hljs-comment">//this,指向了student，参数为空</span><br></code></pre></td></tr></table></figure><h4 id="基于B站视频学习-特别感谢up主-遇见狂神说"><a href="#基于B站视频学习-特别感谢up主-遇见狂神说" class="headerlink" title="基于B站视频学习 特别感谢up主 遇见狂神说"></a>基于<a href="https://www.bilibili.com/video/BV1JJ41177di?p=1">B站视频</a>学习 特别感谢up主 <a href="https://space.bilibili.com/95256449?spm_id_from=333.788.b_765f7570696e666f.1">遇见狂神说</a></h4>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>JS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javascript&amp;字符串类型&amp;数组类型&amp;对象类型(二)</title>
    <link href="/2021/04/02/Javascript%E5%85%A5%E9%97%A8(%E4%BA%8C)/"/>
    <url>/2021/04/02/Javascript%E5%85%A5%E9%97%A8(%E4%BA%8C)/</url>
    
    <content type="html"><![CDATA[<h2 id="字符串类型，数组类型，对象类型-详讲"><a href="#字符串类型，数组类型，对象类型-详讲" class="headerlink" title="字符串类型，数组类型，对象类型(详讲)"></a>字符串类型，数组类型，对象类型(详讲)</h2><hr><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><ol><li>正常字符串我们使用 单引号，或者双引号包裹</li><li>注意转义字符\<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-string">\&#x27;</span>   代表字符串<br><span class="hljs-string">\n</span>   换行<br><span class="hljs-string">\t</span>   tab<br><span class="hljs-string">\u4e2d</span>  <span class="hljs-string">\u###</span>  Unicode字符<br><span class="hljs-string">\x41</span>  Ascll字符<br></code></pre></td></tr></table></figure></li><li>多行字符串编写<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-comment">//  tab上面esc下面</span><br><span class="hljs-keyword">var</span>  msg= <br>    <span class="hljs-string">&#x27;hello </span><br><span class="hljs-string">    world</span><br><span class="hljs-string">    你好ya</span><br><span class="hljs-string">    你好&#x27;</span><br></code></pre></td></tr></table></figure></li><li><strong>模板字符串</strong> (掌握es6的新特性)<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//tab上面esc下面</span><br><span class="hljs-keyword">let</span>  name = <span class="hljs-string">&quot;xm&quot;</span>;<br><span class="hljs-keyword">let</span>  age=<span class="hljs-number">3</span>;<br><span class="hljs-keyword">let</span>  msg= <span class="hljs-string">&#x27;你好呀，$&#123;name&#125;&#x27;</span><br><span class="hljs-built_in">console</span>.log(msg)<br>你好呀，$&#123;name&#125;<br><br></code></pre></td></tr></table></figure></li><li>字符串长度<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">str.<span class="hljs-built_in">length</span><br></code></pre></td></tr></table></figure></li><li><strong>字符串的不可变性</strong>(掌握)<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql">console.<span class="hljs-built_in">log</span>(student[<span class="hljs-number">0</span>])<br>s<br>student[<span class="hljs-number">0</span>]<span class="hljs-operator">=</span><span class="hljs-number">1</span><br><span class="hljs-number">1</span><br>console.<span class="hljs-built_in">log</span>(student)<br>student<br></code></pre></td></tr></table></figure></li><li>大小写转换<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//注意，这里是方法，不是属性</span><br>student.<span class="hljs-keyword">to</span><span class="hljs-constructor">UpperCase()</span>  <span class="hljs-comment">//大写</span><br><span class="hljs-string">&quot;STUDENT&quot;</span><br>student.<span class="hljs-keyword">to</span><span class="hljs-constructor">LowerCase()</span>  <span class="hljs-comment">//小写</span><br><span class="hljs-string">&quot;student&quot;</span><br></code></pre></td></tr></table></figure></li><li>获取指定的下标<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql">console.<span class="hljs-built_in">log</span>(student.indexOf(<span class="hljs-string">&#x27;t&#x27;</span>))<br> <span class="hljs-number">1</span><br>console.<span class="hljs-built_in">log</span>(student.indexOf(<span class="hljs-string">&#x27;s&#x27;</span>))<br> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure></li><li><strong>substring</strong>(掌握)<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">[)<br>student.substring(<span class="hljs-number">1</span>)  <span class="hljs-regexp">//</span>从第一个字符串截取到最后一个字符串<br><span class="hljs-string">&quot;tudent&quot;</span><br>student.substring(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>) <span class="hljs-regexp">//</span>[<span class="hljs-number">1</span>,<span class="hljs-number">3</span>)<br><span class="hljs-string">&quot;tu&quot;</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>Array 可以包含任意的数据类型</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">var</span>  arr =<span class="hljs-meta"> [1,2,3,4,5,6]  //通过下标取值和赋值</span><br><span class="hljs-meta">arr[0]</span><br><span class="hljs-attribute">arr</span>[<span class="hljs-number">0</span>] =<span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><ol><li>长度</li></ol><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">arr.<span class="hljs-built_in">length</span><br></code></pre></td></tr></table></figure><p><strong>注意：假如给arr.length，数组大小就会发生变化。如果赋值过小，元素就会丢失。</strong>     </p><ol start="2"><li><p>indexOf,通过元素获得下标索引</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">arr</span>.indexOf(<span class="hljs-number">2</span>)<br><span class="hljs-attribute">1</span><br></code></pre></td></tr></table></figure><p>字符串的”1”和数字1是不同的</p></li><li><p>slice()  截取Array的一部分，返回一个新数组，类似于String中的substring</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs"><span class="hljs-attribute">arr</span>.slice(<span class="hljs-number">3</span>)<br>[4, 5, 6]<br></code></pre></td></tr></table></figure></li><li><p>push,pop  尾部(掌握)</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">push</span>:  压入到尾部<br><span class="hljs-keyword">pop</span>:  弹出尾部的一个元素<br>arr.<span class="hljs-keyword">push</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-string">&quot;a&quot;</span>)<br>arr.<span class="hljs-keyword">pop</span>()<br></code></pre></td></tr></table></figure></li><li><p>unshift(),shift()头部  (掌握)</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-keyword">unshift</span>  压入到头部<br><span class="hljs-keyword">shift</span>    弹出头部的一个元素 <br></code></pre></td></tr></table></figure></li><li><p> 排序  sort()</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">arr</span><br>(<span class="hljs-number">3</span>) <span class="hljs-selector-attr">[<span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>, <span class="hljs-string">&quot;A&quot;</span>]</span><br><span class="hljs-selector-tag">arr</span><span class="hljs-selector-class">.sort</span>()<br>(<span class="hljs-number">3</span>) <span class="hljs-selector-attr">[<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>]</span><br></code></pre></td></tr></table></figure></li><li><p>元素反转  reverse()</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scss">(<span class="hljs-number">3</span>) <span class="hljs-selector-attr">[<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>]</span><br>arr<span class="hljs-selector-class">.reverse</span>()<br>(<span class="hljs-number">3</span>) <span class="hljs-selector-attr">[<span class="hljs-string">&quot;C&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;A&quot;</span>]</span><br></code></pre></td></tr></table></figure></li><li><p>concat()     (掌握)</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs scss">(<span class="hljs-number">3</span>) <span class="hljs-selector-attr">[<span class="hljs-string">&quot;C&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;A&quot;</span>]</span><br>arr<span class="hljs-selector-class">.concat</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>])<br>(<span class="hljs-number">6</span>) <span class="hljs-selector-attr">[<span class="hljs-string">&quot;C&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;A&quot;</span>, 1, 2, 3]</span><br>arr<br>(<span class="hljs-number">3</span>) <span class="hljs-selector-attr">[<span class="hljs-string">&quot;C&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;A&quot;</span>]</span><br></code></pre></td></tr></table></figure><p><strong>注意： concat()并没有修改数组，只是会返回一个新的数组</strong></p></li><li><p> 连接符join<br>打印拼接数组，使用特定的字符串连接 </p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">(<span class="hljs-number">3</span>) <span class="hljs-selector-attr">[<span class="hljs-string">&quot;C&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;A&quot;</span>]</span><br>arr<span class="hljs-selector-class">.join</span>(<span class="hljs-string">&#x27;-&#x27;</span>)<br><span class="hljs-string">&quot;C-B-A&quot;</span><br></code></pre></td></tr></table></figure></li><li><p>多维数组</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs prolog">arr= [[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">4</span>],[<span class="hljs-string">&quot;5&quot;</span>,<span class="hljs-string">&quot;6&quot;</span>]];<br>arr[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]<br><span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>总结： 数组:存储数据(如何存，如何取，方法都可以自己实现！)</p><h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2></li></ol><p>是若干个键值对<br><strong>Js中所有的键都是字符串，值是任意对象！</strong></p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs dts">var 对象名=&#123;<br>    属性名: 属性值;<br>    属性名: 属性值;<br>    属性名: 属性值;<br>&#125;<br><span class="hljs-comment">//定义了一个student对象，它有四个属性！</span><br>var student=&#123;<br>    name :<span class="hljs-string">&quot;zhangsan&quot;</span>,<br><span class="hljs-symbol">    age:</span><span class="hljs-number">10</span>,<br><span class="hljs-symbol">    email:</span>  <span class="hljs-string">&quot;24132413241@qq.com&quot;</span>,<br><span class="hljs-symbol">    score:</span> <span class="hljs-number">0</span><br>&#125;<br></code></pre></td></tr></table></figure><p>Js中对象，{…}表示一个对象，键值对描述属性xxxx:xxxx,多个属性之间使用逗号隔开，最后一个属性不加逗号！</p><ol><li>对象赋值<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs applescript">student.<span class="hljs-built_in">name</span><br><span class="hljs-string">&quot;zhangsan&quot;</span><br>student.<span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;lishi&quot;</span><br><span class="hljs-string">&quot;lishi&quot;</span><br>student.<span class="hljs-built_in">name</span><br><span class="hljs-string">&quot;lishi&quot;</span><br></code></pre></td></tr></table></figure></li><li>使用一个不存在的对象属性，不会报错！ undefined<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">student.hahah<br><span class="hljs-literal">undefined</span><br></code></pre></td></tr></table></figure></li><li>动态的删减属性，通过delete删除对象的属性<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">delete</span> student.name<br><span class="hljs-keyword">true</span><br></code></pre></td></tr></table></figure></li><li>动态添加,直接给新属性添加值即可<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nix">student.<span class="hljs-attr">haha=</span> <span class="hljs-string">&quot;haha&quot;</span><br><span class="hljs-string">&quot;haha&quot;</span><br></code></pre></td></tr></table></figure></li><li>判断属性值是否在这个对象中！ xx in xxx!<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-string">&#x27;age&#x27;</span> <span class="hljs-keyword">in</span> student<br><span class="hljs-literal">true</span>   <br><span class="hljs-comment">//继承</span><br><span class="hljs-string">&#x27;toString&#x27;</span>  <span class="hljs-keyword">in</span> student<br><span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure></li><li>判断一个属性是否是这个对象自身拥有的hasOwnProperty()<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">student.has<span class="hljs-constructor">OwnProperty(&#x27;<span class="hljs-params">toString</span>&#x27;)</span><br><span class="hljs-literal">false</span><br>student.has<span class="hljs-constructor">OwnProperty(&#x27;<span class="hljs-params">age</span>&#x27;)</span><br><span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2></li><li>if判断 else</li><li>while循环 ，避免程序死循环</li><li>for循环</li><li><strong>forEach循环</strong>(5.1引入的)<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span>  age=[<span class="hljs-number">12</span>,<span class="hljs-number">3</span>,<span class="hljs-number">12</span>,<span class="hljs-number">3</span>,<span class="hljs-number">12</span>,<span class="hljs-number">3</span>,<span class="hljs-number">31</span>,<span class="hljs-number">23</span>,<span class="hljs-number">123</span>]<br><span class="hljs-comment">//函数</span><br>age.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>)</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(value)<br>&#125;)<br></code></pre></td></tr></table></figure></li><li>for…in(age 不知道是数组大小的情况用)<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs maxima">//<span class="hljs-keyword">for</span>(<span class="hljs-built_in">var</span>  index  <span class="hljs-keyword">in</span> object)&#123;&#125;<br>   <span class="hljs-keyword">for</span> (<span class="hljs-built_in">var</span> <span class="hljs-built_in">num</span> <span class="hljs-keyword">in</span> age) &#123;<br>        <span class="hljs-keyword">if</span> (age.hasOwnProperty(<span class="hljs-built_in">num</span>)) &#123;<br>          console.<span class="hljs-built_in">log</span>(&#x27;存在&#x27;);<br>          console.<span class="hljs-built_in">log</span>(age[<span class="hljs-built_in">num</span>]);<br>        &#125;<br>      &#125;<br></code></pre></td></tr></table></figure><h2 id="Map和Set-ES6的新特性"><a href="#Map和Set-ES6的新特性" class="headerlink" title="Map和Set (ES6的新特性)"></a>Map和Set (ES6的新特性)</h2>Map：<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>ES6   Map<br><span class="hljs-regexp">//</span>学生的成绩，学生的名字<br><span class="hljs-regexp">//</span> var  names  =[<span class="hljs-string">&quot;tom&quot;</span>,<span class="hljs-string">&quot;jack&quot;</span>,<span class="hljs-string">&quot;haha&quot;</span>] ;<br><span class="hljs-regexp">//</span> var  scores= [<span class="hljs-number">100</span>,<span class="hljs-number">90</span>,<span class="hljs-number">80</span>];<br>var map = new Map([<br>  [<span class="hljs-string">&#x27;tom&#x27;</span>, <span class="hljs-number">100</span>],<br>  [<span class="hljs-string">&#x27;jack&#x27;</span>, <span class="hljs-number">90</span>],<br>  [<span class="hljs-string">&#x27;haha&#x27;</span>, <span class="hljs-number">80</span>],<br>]);<br>var name = map.get(<span class="hljs-string">&#x27;tom&#x27;</span>);<br>map.set(<span class="hljs-string">&#x27;admin&#x27;</span>, <span class="hljs-number">1223456</span>); <span class="hljs-regexp">//</span>添加<br>console.log(name); <span class="hljs-regexp">//</span>通过Key获得value<br>map.<span class="hljs-keyword">delete</span>(<span class="hljs-string">&#x27;tom&#x27;</span>);<span class="hljs-regexp">//</span>删除<br></code></pre></td></tr></table></figure>Set:无序不重复的集合<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">var <span class="hljs-built_in">set</span> = <span class="hljs-built_in">new</span> Set([<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>]);<span class="hljs-comment"> //Set可以去重</span><br>     <span class="hljs-built_in">set</span>.<span class="hljs-built_in">add</span>(<span class="hljs-number">2</span>); <span class="hljs-comment"> //添加</span><br>     <span class="hljs-built_in">set</span>.<span class="hljs-built_in">delete</span>(<span class="hljs-number">1</span>);<span class="hljs-comment"> // 删除</span><br>     console.<span class="hljs-built_in">log</span>(<span class="hljs-built_in">set</span>.has(<span class="hljs-number">3</span>)); <span class="hljs-comment"> //是否包含某个元素</span><br></code></pre></td></tr></table></figure><h2 id="iterator-es6新特性"><a href="#iterator-es6新特性" class="headerlink" title="iterator(es6新特性)"></a>iterator(es6新特性)</h2>遍历数组<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> x <span class="hljs-keyword">of</span> arr) &#123;<br>  <span class="hljs-built_in">console</span>.log(x);<br>&#125;<br></code></pre></td></tr></table></figure>遍历map<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-keyword">var</span> <span class="hljs-keyword">map</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([<br>  [<span class="hljs-string">&#x27;tom&#x27;</span>, <span class="hljs-number">100</span>],<br>  [<span class="hljs-string">&#x27;jack&#x27;</span>, <span class="hljs-number">90</span>],<br>  [<span class="hljs-string">&#x27;haha&#x27;</span>, <span class="hljs-number">70</span>],<br>]);<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> x <span class="hljs-keyword">of</span> <span class="hljs-keyword">map</span>) &#123;<br>  <span class="hljs-built_in">console</span>.log(x);<br>&#125;<br></code></pre></td></tr></table></figure>遍历set<figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sas">var <span class="hljs-meta">set</span> = new <span class="hljs-meta">Set</span>([5, 6, 7]);<br>for (let <span class="hljs-meta">x</span> of <span class="hljs-meta">set</span>) &#123;<br>  console<span class="hljs-meta">.log(</span><span class="hljs-meta">x</span>);<br>&#125;<br></code></pre></td></tr></table></figure><a href="https://www.liaoxuefeng.com/wiki/1022910821149312/1023024358748480">参考链接</a><h4 id="基于B站视频学习-特别感谢up主-遇见狂神说"><a href="#基于B站视频学习-特别感谢up主-遇见狂神说" class="headerlink" title="基于B站视频学习 特别感谢up主 遇见狂神说"></a>基于<a href="https://www.bilibili.com/video/BV1JJ41177di?p=1">B站视频</a>学习 特别感谢up主 <a href="https://space.bilibili.com/95256449?spm_id_from=333.788.b_765f7570696e666f.1">遇见狂神说</a></h4></li></ol>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>JS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javascript入门&amp;数据类型(一)</title>
    <link href="/2021/04/02/Javascript%E5%85%A5%E9%97%A8(%E4%B8%80)/"/>
    <url>/2021/04/02/Javascript%E5%85%A5%E9%97%A8(%E4%B8%80)/</url>
    
    <content type="html"><![CDATA[<p>有句话叫，假设能够重新来过，我就只愿意学Javascript。为什么：因为它足够的简单，而且应用量极其强大，不仅在前端用的多，而且在后端用的也足够的多，整个nodejs不需要java也能够搭建起来服务器。但是支撑不了高并发，还是有个弊端。以下是对JavaScript基础学习总结。</p><hr><h3 id="入门-Javascript代码放置"><a href="#入门-Javascript代码放置" class="headerlink" title="入门(Javascript代码放置)"></a>入门(Javascript代码放置)</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- script标签内，写Javascript代码 --&gt;</span><br>  <span class="hljs-comment">&lt;!-- &lt;script&gt;</span><br><span class="hljs-comment">    alert(&#x27;hello,world&#x27;)</span><br><span class="hljs-comment">  &lt;/script&gt; --&gt;</span><br>  <span class="hljs-comment">&lt;!-- 外部引入 --&gt;</span><br>  <span class="hljs-comment">&lt;!-- 注意：script:必须成对出现 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/p1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 不用显示定义type,也默认就是javascript --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 这里也可以存放 --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span> <br></code></pre></td></tr></table></figure><h3 id="历史"><a href="#历史" class="headerlink" title="历史"></a>历史</h3><p>ECMAScript它可以理解是JavaScript的一个标准，最新版本已经到了es6版本~。但是大部分浏览器还只停留在支持es5代码上！开发环境–线上环境，版本不一致。<br><strong>javascript更简单了，只要你按照java的语法写javascript就一定不会出错。javascript可以不写分号结尾，但是有个问题，它编译打包会把多行变成一行。有个东西是eslink专门检查JavaScript语法的。有很多强语法的检查工具。</strong></p><h3 id="浏览器的使用-5个常用功能"><a href="#浏览器的使用-5个常用功能" class="headerlink" title="浏览器的使用(5个常用功能)"></a>浏览器的使用(5个常用功能)</h3><p>Elements  元素（爬网站用，把网站复刻一遍）<br>Console      调试js<br>Source   打断点<br>Network   抓包<br>Application   查看网站的cookie<br><img src="/image/4.1.png" alt="浏览器控制台"></p><h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- Javascript严格区分大小写 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-comment">//1.定义变量  变量类型  变量名= 变量值</span></span><br><span class="javascript">  <span class="hljs-keyword">var</span> score = <span class="hljs-number">71</span>;</span><br><span class="javascript">  <span class="hljs-comment">// var num = 1;</span></span><br><span class="javascript">  <span class="hljs-comment">//   alert(num);</span></span><br><span class="javascript">  <span class="hljs-comment">//2.条件控制</span></span><br>  if (1 &lt; 2) &#123;<br><span class="javascript">    alert(<span class="hljs-string">&quot;true&quot;</span>);</span><br>  &#125;<br><span class="javascript">  <span class="hljs-comment">// console.log(score) //在浏览器的控制台打印变量！</span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="数据类型略讲"><a href="#数据类型略讲" class="headerlink" title="数据类型略讲"></a>数据类型略讲</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">var</span>  王者荣耀=<span class="hljs-string">&#x27;永恒砖石&#x27;</span>(可以使用中文定义，但最好不要使用)<br></code></pre></td></tr></table></figure><h3 id="number"><a href="#number" class="headerlink" title="number"></a>number</h3><p>js不区分小数和整数，Number</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">123</span>    <span class="hljs-regexp">//</span>整数<span class="hljs-number">123</span><br><span class="hljs-number">123.1</span>   <span class="hljs-regexp">//</span>浮点数<span class="hljs-number">123.1</span><br><span class="hljs-number">1.123</span>e3   <span class="hljs-regexp">//</span>科学计数法<br>-<span class="hljs-number">99</span>   <span class="hljs-regexp">//</span>复数<br>NaN   <span class="hljs-regexp">//</span>not  a number<br>Infinity   <span class="hljs-regexp">//</span>表示无限大<br></code></pre></td></tr></table></figure><h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scheme"><span class="hljs-symbol">&#x27;abc</span>&#x27;  <span class="hljs-string">&quot;abc&quot;</span><br></code></pre></td></tr></table></figure><h3 id="布尔值"><a href="#布尔值" class="headerlink" title="布尔值"></a>布尔值</h3><p>true,   false</p><h3 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta">&amp;&amp;  两个都为真，结果为真</span><br><span class="hljs-string">||  一个为真，一个为假</span><br>！  真即假，假即真<br></code></pre></td></tr></table></figure><h3 id="比较运算符！！！重要！"><a href="#比较运算符！！！重要！" class="headerlink" title="比较运算符！！！重要！"></a>比较运算符！！！<strong>重要！</strong></h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-section">=  </span><br><span class="hljs-section">==   等于(类型不一样，值一样，也会判断为true)</span><br><span class="hljs-section">===   绝对等于 (类型一样，值一样，结果为true)</span><br></code></pre></td></tr></table></figure><p><strong>这是JS的缺陷，坚持不要使用 == 比较</strong><br>须知：</p><ul><li>NaN === NaN,这个与所有的数值都不相等，包括自己</li><li>只能通过isNaN(NaN)来判断这个数是否是NaN</li></ul><p>浮点数问题:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">console</span>.log((<span class="hljs-number">1</span>/<span class="hljs-number">3</span>)   ==== (<span class="hljs-number">1</span>-<span class="hljs-number">1</span>/<span class="hljs-number">3</span>))  (false)<br></code></pre></td></tr></table></figure><p>尽量避免使用浮点数进行运算，存在精度问题！</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Math</span>.abs(<span class="hljs-number">1</span>/<span class="hljs-number">3</span>-(<span class="hljs-number">1</span>-<span class="hljs-number">2</span>/<span class="hljs-number">3</span>))&lt;<span class="hljs-number">0</span>.<span class="hljs-number">00000001</span>  (true)<br></code></pre></td></tr></table></figure><h3 id="null-和undefined"><a href="#null-和undefined" class="headerlink" title="null 和undefined"></a>null 和undefined</h3><ul><li>null  空</li><li>undefined  未定义</li></ul><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>Java的数值必须是相同类型的对象~，JS中不需要这样！</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-comment">//  保证代码的可读性，尽量使用[]</span><br><span class="hljs-keyword">var</span>  arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-string">&#x27;Hello&#x27;</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">true</span>];<br><br><span class="hljs-keyword">new</span>  <span class="hljs-type">Array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">12</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;Hello&#x27;</span>)<br></code></pre></td></tr></table></figure><p>去数组下标：如果越界了，就会</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-literal">undefined</span><br></code></pre></td></tr></table></figure><h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><p>对象的大括号，数组是中括号</p><blockquote><p>每个属性之间使用都好隔开，最好一个不需要添加</p></blockquote><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">var</span> person= &#123;<br>    name:<span class="hljs-string">&quot;hh&quot;</span>,<br>    age: <span class="hljs-number">3</span>,<br>    tags:<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;js&#x27;</span>,<span class="hljs-string">&#x27;java&#x27;</span>,<span class="hljs-string">&#x27;web&#x27;</span>,<span class="hljs-string">&#x27;...&#x27;</span>]</span><br>&#125;<br></code></pre></td></tr></table></figure><p>取对象的值</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">person.age<br>&gt;<span class="hljs-number">3</span><br>person.tags<br>&gt;<span class="hljs-selector-attr">[<span class="hljs-string">&quot;js&quot;</span>, <span class="hljs-string">&quot;java&quot;</span>, <span class="hljs-string">&quot;web&quot;</span>, <span class="hljs-string">&quot;...&quot;</span>]</span><br></code></pre></td></tr></table></figure><h2 id="严格检查模式strict"><a href="#严格检查模式strict" class="headerlink" title="严格检查模式strict"></a>严格检查模式strict</h2><p>前提：IDEA 需要设置支持ES6语法’use  strict’;严格检查模式，预防Javascript的随意性导致产生的一些问题,必须写在Javascript的第一行,局部变量建议使用let去定义~</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">  <span class="hljs-string">&#x27;use  strict&#x27;</span>;</span><br><span class="javascript">  <span class="hljs-comment">// 全局变量</span></span><br>    i = 1;<br><span class="javascript">  <span class="hljs-comment">//   ES6 let</span></span><br><span class="javascript">  <span class="hljs-comment">//   let i = 1;</span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="基于B站视频学习-特别感谢up主-遇见狂神说"><a href="#基于B站视频学习-特别感谢up主-遇见狂神说" class="headerlink" title="基于B站视频学习 特别感谢up主 遇见狂神说"></a>基于<a href="https://www.bilibili.com/video/BV1JJ41177di?p=1">B站视频</a>学习 特别感谢up主 <a href="https://space.bilibili.com/95256449?spm_id_from=333.788.b_765f7570696e666f.1">遇见狂神说</a></h4>]]></content>
    
    
    <categories>
      
      <category>JS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>JS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CSS浮动&amp;父级边框塌陷问题&amp;定位</title>
    <link href="/2021/04/02/CSS%E5%AD%A6%E4%B9%A0(%E4%B8%89)/"/>
    <url>/2021/04/02/CSS%E5%AD%A6%E4%B9%A0(%E4%B8%89)/</url>
    
    <content type="html"><![CDATA[<p>以下是对CSS(浮动，父级边框塌陷问题，定位)的学习(重点)</p><hr><h2 id="边框"><a href="#边框" class="headerlink" title="边框"></a>边框</h2><p>边框的粗细，样式，颜色( border: 1px solid red;)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">  <span class="hljs-comment">/* body 总有以一个默认的外边距margin:0 常见操作 */</span></span><br><span class="css"><span class="hljs-selector-tag">h1</span>, <span class="hljs-selector-tag">ul</span>, <span class="hljs-selector-tag">li</span>, <span class="hljs-selector-tag">a</span>,<span class="hljs-selector-tag">body</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;</span><br><span class="css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;</span><br><span class="css">    <span class="hljs-attribute">text-decoration</span>: none;</span><br>  &#125;<br><span class="css">  <span class="hljs-comment">/* border: 粗细，样式，颜色 */</span></span><br>  #box &#123;<br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;</span><br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;</span><br>  &#125;<br><span class="css">  <span class="hljs-selector-tag">h2</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#3cbda6</span>;</span><br><span class="css">    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">30px</span>;</span><br><span class="css">    <span class="hljs-attribute">color</span>: white;</span><br>  &#125;<br><span class="css">  <span class="hljs-selector-tag">form</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">background</span>: <span class="hljs-number">#3cbda6</span>;</span><br>  &#125;<br><span class="css">  <span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">:nth-of-type</span>(<span class="hljs-number">1</span>) <span class="hljs-selector-tag">input</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> solid black;</span><br>  &#125;<br><span class="css">  <span class="hljs-selector-tag">div</span>:<span class="hljs-built_in">neh-of-type</span>(<span class="hljs-number">2</span>) iniput &#123;</span><br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> dashed <span class="hljs-number">#4d0b8c</span>;</span><br>  &#125;<br><span class="css">  <span class="hljs-selector-tag">div</span>:<span class="hljs-built_in">neh-of-type</span>(<span class="hljs-number">3</span>) iniput &#123;</span><br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> dashed <span class="hljs-number">#008c27</span>;</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="内外边距及边框居中"><a href="#内外边距及边框居中" class="headerlink" title="内外边距及边框居中"></a>内外边距及边框居中</h2>  <figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;外边距的妙用，居中元素<br><span class="hljs-attribute">margin</span>:<span class="hljs-number">10</span>px <span class="hljs-number">5</span>px <span class="hljs-number">15</span>px <span class="hljs-number">20</span>px;(上右下左)--顺时针<br><span class="hljs-attribute">margin</span>:<span class="hljs-number">10</span>px <span class="hljs-number">5</span>px;上下<span class="hljs-number">10</span>px,左右 <span class="hljs-number">5</span>px <br><span class="hljs-attribute">margin</span>:<span class="hljs-number">10</span>px <span class="hljs-number">5</span>px <span class="hljs-number">15</span>px;上外边距是<span class="hljs-number">10</span>px，左右<span class="hljs-number">5</span>px，下外边距是<span class="hljs-number">15</span>px<br><span class="hljs-attribute">margin</span>:<span class="hljs-number">10</span>px;所有 <span class="hljs-number">4</span> 个外边距都是 <span class="hljs-number">10</span>px<br></code></pre></td></tr></table></figure><p>盒子大小计算方式<br><img src="/image/5.1.PNG" alt="盒子大小"></p><h2 id="圆角边框"><a href="#圆角边框" class="headerlink" title="圆角边框"></a>圆角边框</h2><p>4个角</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--  border-radius  左上  右上  右下  左下 ，顺时针方向 --&gt;</span><br><span class="hljs-comment">&lt;!-- </span><br><span class="hljs-comment">  圆圈  = 半径+边距!</span><br><span class="hljs-comment"> --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">  <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">10px</span> solid red;</span><br><span class="css">    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">100px</span>;</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="盒子阴影-box-shadow"><a href="#盒子阴影-box-shadow" class="headerlink" title="盒子阴影(box-shadow)"></a>盒子阴影(box-shadow)</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml">  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">    <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="css">      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;</span><br><span class="css">      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50px</span>;</span><br><span class="css">      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">10px</span> <span class="hljs-number">10px</span> <span class="hljs-number">1px</span> yellow;</span><br>    &#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>box-shadow: h-shadow v-shadow blur spread color inset;<br>h-shadow必需。水平阴影的位置。允许负值。<br>v-shadow必需。垂直阴影的位置。允许负值。<br>blur    可选。模糊距离。<br>spread    可选。阴影的尺寸。<br>color    可选。阴影的颜色。请参阅 CSS 颜色值。<br>inset    可选。将外部阴影 (outset) 改为内部阴影。<br></code></pre></td></tr></table></figure><h2 id="模仿网站思路"><a href="#模仿网站思路" class="headerlink" title="模仿网站思路"></a>模仿网站思路</h2><p><a href="https://www.bilibili.com/video/BV1YJ411a7dy?p=16">网页链接</a><br>视频后半部分讲解</p><h2 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h2><h3 id="标准文档流"><a href="#标准文档流" class="headerlink" title="标准文档流"></a>标准文档流</h3><p>块级元素: 独占一行</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">h1</span>~<span class="hljs-selector-tag">h6</span>   <span class="hljs-selector-tag">p</span>  <span class="hljs-selector-tag">div</span>  列表...<br></code></pre></td></tr></table></figure><p>行内元素: 不占一行</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">span</span>  <span class="hljs-selector-tag">a</span>  <span class="hljs-selector-tag">img</span>  <span class="hljs-selector-tag">strong</span>....<br></code></pre></td></tr></table></figure><h3 id="display"><a href="#display" class="headerlink" title="display"></a>display</h3><p>这个也是一种实现行内元素排列的方式，但是我们很多情况都是float</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- </span><br><span class="hljs-comment">    block 块元素</span><br><span class="hljs-comment">    inline  行内元素</span><br><span class="hljs-comment">    inline-block 是块元素，但是可以内联在一行！</span><br><span class="hljs-comment">    none</span><br><span class="hljs-comment"> --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">  <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;</span><br><span class="css">    <span class="hljs-attribute">display</span>: none;</span><br>  &#125;<br><span class="css">  <span class="hljs-selector-tag">span</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;</span><br><span class="css">    <span class="hljs-attribute">display</span>: inline-block;</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="float"><a href="#float" class="headerlink" title="float"></a>float</h3><p>左右浮动 float </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;<br>&#125;<br><span class="hljs-selector-id">#father</span> &#123;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> <span class="hljs-number">#000</span> solid;<br>  <span class="hljs-attribute">overflow</span>: auto;<br>&#125;<br><span class="hljs-selector-id">#father</span><span class="hljs-selector-pseudo">::after</span> &#123;<br>  <span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;&#x27;</span>;<br>  <span class="hljs-attribute">display</span>: block;<br>  <span class="hljs-attribute">clear</span>: both;<br>&#125;<br><span class="hljs-selector-class">.layer01</span> &#123;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> <span class="hljs-number">#00f</span> dashed;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">float</span>: left;<br>&#125;<br><span class="hljs-selector-class">.layer02</span> &#123;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> <span class="hljs-number">#00f</span> dashed;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">float</span>: left;<br>&#125;<br><br><span class="hljs-selector-class">.layer03</span> &#123;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> <span class="hljs-number">#00f</span> dashed;<br>  <span class="hljs-attribute">display</span>: inline-block;<br>  <span class="hljs-attribute">float</span>: right;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h3><ul><li>display 方向不可以控制</li><li>float    浮动起来的话会脱离标准文档流，所以要解决父级边框塌陷的问题<h2 id="父级边框塌陷问题"><a href="#父级边框塌陷问题" class="headerlink" title="父级边框塌陷问题"></a>父级边框塌陷问题</h2>clear<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs coq">/*  <span class="hljs-built_in">clear</span>: <span class="hljs-built_in">right</span>;  右侧不允许有浮动元素<br>    <span class="hljs-built_in">clear</span>: <span class="hljs-built_in">left</span>;  左侧不允许有浮动元素<br>    <span class="hljs-built_in">clear</span>: both;  两侧不允许有浮动元素<br>     <span class="hljs-built_in">clear</span>: none默认值。允许浮动元素出现在两侧。<br>*/<br></code></pre></td></tr></table></figure>解决方案：</li></ul><ol><li>增加父级元素的高度~<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-id">#father</span> &#123;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> <span class="hljs-number">#000</span> solid;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">800px</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li>增加一个空的div标签，清除浮动<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-params">&lt;div class=&quot;clear&quot;&gt;</span><span class="hljs-params">&lt;/div&gt;</span><br>.<span class="hljs-class">clear </span>&#123;<br><span class="hljs-symbol">  clear:</span> both;<br><span class="hljs-symbol">  margin:</span> <span class="hljs-number">0</span>;<br><span class="hljs-symbol">  padding:</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li>overflow<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">在父级元素中添加一个  <span class="hljs-attribute">overflow</span>:hidden;<br></code></pre></td></tr></table></figure></li><li>父类添加一个伪元素  ::after<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-id">#father</span><span class="hljs-selector-pseudo">::after</span> &#123;<br>  <span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;&#x27;</span>;<br>  <span class="hljs-attribute">display</span>: block;<br>  <span class="hljs-attribute">clear</span>: both;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h2 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h2><h3 id="1-相对定位-position-relative"><a href="#1-相对定位-position-relative" class="headerlink" title="1.相对定位 position: relative;"></a>1.相对定位 position: relative;</h3><p> 相对原来自己的位置，进行指定的偏移，相对定位的话，它仍然在标准文档流中，原来的位置会被保留。<br> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-attribute">top</span>: -<span class="hljs-number">20px</span>;上<br><span class="hljs-attribute">left</span>:<span class="hljs-number">20px</span>;左<br><span class="hljs-attribute">bottom</span>:-<span class="hljs-number">10px</span>;下<br><span class="hljs-attribute">right</span>: <span class="hljs-number">20px</span>;右<br></code></pre></td></tr></table></figure></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 相对定位</span><br><span class="hljs-comment">相对自己原来的位置进行偏移 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">  <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span>;</span><br><span class="css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;</span><br><span class="css">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;</span><br><span class="css">    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">25px</span>;</span><br>  &#125;<br>  #father &#123;<br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#666</span>;</span><br><span class="css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;</span><br>  &#125;<br>  #first &#123;<br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-built_in">rgb</span>(<span class="hljs-number">35</span>, <span class="hljs-number">204</span>, <span class="hljs-number">50</span>);</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: cyan;</span><br><span class="css">    <span class="hljs-attribute">position</span>: relative; <span class="hljs-comment">/* 相对定位，上下左右  */</span></span><br><span class="css">    <span class="hljs-attribute">top</span>: -<span class="hljs-number">20px</span>;</span><br><span class="css">    <span class="hljs-attribute">left</span>: <span class="hljs-number">20px</span>;</span><br>  &#125;<br>  #second &#123;<br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-built_in">rgb</span>(<span class="hljs-number">16</span>, <span class="hljs-number">58</span>, <span class="hljs-number">194</span>);</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: blue;</span><br><span class="css">    <span class="hljs-attribute">position</span>: relative;</span><br><span class="css">    <span class="hljs-attribute">bottom</span>: -<span class="hljs-number">10px</span>; <span class="hljs-comment">/* 向下 */</span></span><br>  &#125;<br>  #third &#123;<br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-built_in">rgb</span>(<span class="hljs-number">167</span>, <span class="hljs-number">46</span>, <span class="hljs-number">92</span>);</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: chartreuse;</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-绝对定位-position-absolute"><a href="#2-绝对定位-position-absolute" class="headerlink" title="2. 绝对定位 position: absolute;"></a>2. 绝对定位 position: absolute;</h3><p>定位: 基于xxx定位，上下左右~</p><ol><li>没有父级元素定位的前提下，相对于浏览器定位</li><li>假如父级元素存在定位，我们通常会相对于父级元素进行偏移</li><li>在父级元素范围内移动</li></ol><p>相对于父级或浏览器的位置，进行指定的偏移，绝对定位的话，它不在标准文档流中，原来的位置不会被保留。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">  <span class="hljs-selector-tag">div</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span>;</span><br><span class="css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;</span><br><span class="css">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;</span><br><span class="css">    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">25px</span>;</span><br>  &#125;<br>  #father &#123;<br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#666</span>;</span><br><span class="css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;</span><br><span class="css">    <span class="hljs-attribute">position</span>: relative;</span><br>  &#125;<br>  #first &#123;<br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-built_in">rgb</span>(<span class="hljs-number">35</span>, <span class="hljs-number">204</span>, <span class="hljs-number">50</span>);</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: cyan;</span><br>  &#125;<br>  #second &#123;<br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-built_in">rgb</span>(<span class="hljs-number">16</span>, <span class="hljs-number">58</span>, <span class="hljs-number">194</span>);</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: blue;</span><br><span class="css">    <span class="hljs-attribute">position</span>: absolute;</span><br><span class="css">    <span class="hljs-attribute">right</span>: <span class="hljs-number">30px</span>;</span><br>  &#125;<br>  #third &#123;<br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-built_in">rgb</span>(<span class="hljs-number">167</span>, <span class="hljs-number">46</span>, <span class="hljs-number">92</span>);</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: chartreuse;</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;father&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;first&quot;</span>&gt;</span>第一个盒子<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;second&quot;</span>&gt;</span>第二个盒子<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;third&quot;</span>&gt;</span>第三个盒子<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-固定定位-position-fixed"><a href="#3-固定定位-position-fixed" class="headerlink" title="3.固定定位      position: fixed;"></a>3.固定定位      position: fixed;</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">  <span class="hljs-selector-tag">body</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">1000px</span>;</span><br>  &#125;<br><span class="css">  <span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">:nth-of-type</span>(<span class="hljs-number">1</span>) &#123;</span><br><span class="css">    <span class="hljs-comment">/*绝对定位，相对于浏览器*/</span></span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br><span class="css">    <span class="hljs-attribute">background</span>: red;</span><br><span class="css">    <span class="hljs-attribute">position</span>: absolute;</span><br><span class="css">    <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><br><span class="css">    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;</span><br>  &#125;<br><span class="css">  <span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">:nth-of-type</span>(<span class="hljs-number">2</span>) &#123;</span><br><span class="css">    <span class="hljs-comment">/*fixed  固定定位*/</span></span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</span><br><span class="css">    <span class="hljs-attribute">background</span>: yellow;</span><br><span class="css">    <span class="hljs-attribute">position</span>: fixed;</span><br><span class="css">    <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><br><span class="css">    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="4-z-index"><a href="#4-z-index" class="headerlink" title="4. z-index"></a>4. z-index</h3><p>图层~<br>z-index:  默认是0，最高~999(z-index 属性设置元素的堆叠顺序。拥有更高堆叠顺序的元素总是会处于堆叠顺序较低的元素的前面。)<br>注释：元素可拥有负的 z-index 属性值。<br>注释：Z-index 仅能在定位元素上奏效（例如 position:absolute;）！</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;style/style.css&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;images/1.png&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tipText&quot;</span>&gt;</span>学习CSS<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tipBg&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>时间:2021-1-23<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>地点：月球一号基地<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><p>opacity: 0.5;背景透明度</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-id">#content</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">304px</span>;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0px</span>;<br>  <span class="hljs-attribute">overflow</span>: hidden;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;<br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">25px</span>;<br>  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> black solid;<br>&#125;<br><span class="hljs-selector-tag">ul</span>,<br><span class="hljs-selector-tag">li</span> &#123;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0px</span>;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0px</span>;<br>  <span class="hljs-attribute">list-style</span>: none;<br>&#125;<br><span class="hljs-comment">/* 父级元素相对定位 */</span><br><span class="hljs-selector-id">#content</span> <span class="hljs-selector-tag">ul</span> &#123;<br>  <span class="hljs-attribute">position</span>: relative;<br>&#125;<br><span class="hljs-selector-class">.tipText</span>,<br><span class="hljs-selector-class">.tipBg</span> &#123;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">304px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">25px</span>;<br>  <span class="hljs-attribute">top</span>: <span class="hljs-number">164px</span>;<br>&#125;<br><span class="hljs-selector-class">.tipText</span> &#123;<br>  <span class="hljs-attribute">color</span>: white;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">999</span>;<br>&#125;<br><span class="hljs-selector-class">.tipBg</span> &#123;<br>  <span class="hljs-attribute">background</span>: black;<br>  <span class="hljs-comment">/* 背景透明度  */</span><br>  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="动画及视野拓展"><a href="#动画及视野拓展" class="headerlink" title="动画及视野拓展"></a>动画及视野拓展</h2><p><a href="https://www.bilibili.com/video/BV1YJ411a7dy?p=23">学习视频地址</a></p><h4 id="基于B站视频学习-特别感谢up主-遇见狂神说"><a href="#基于B站视频学习-特别感谢up主-遇见狂神说" class="headerlink" title="基于B站视频学习 特别感谢up主 遇见狂神说"></a>基于<a href="https://www.bilibili.com/video/BV1YJ411a7dy?p=1">B站视频</a>学习 特别感谢up主 <a href="https://space.bilibili.com/95256449?spm_id_from=333.788.b_765f7570696e666f.1">遇见狂神说</a></h4>]]></content>
    
    
    <categories>
      
      <category>CSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>CSS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CSS&amp;结构伪类选择器&amp;属性选择器(重要)&amp;美化网页元素</title>
    <link href="/2021/04/01/CSS%E5%AD%A6%E4%B9%A0(%E4%BA%8C)/"/>
    <url>/2021/04/01/CSS%E5%AD%A6%E4%B9%A0(%E4%BA%8C)/</url>
    
    <content type="html"><![CDATA[<p>以下是对CSS(结构伪类选择器(避免使用，class,id选择器),属性选择器(重要)等)的学习</p><hr><h2 id="结构伪类选择器-避免使用，class-id选择器"><a href="#结构伪类选择器-避免使用，class-id选择器" class="headerlink" title="结构伪类选择器(避免使用，class,id选择器)"></a>结构伪类选择器(避免使用，class,id选择器)</h2><p>带冒号都是伪类选择器<br>1 ul li:first-child</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* ul的第一个子元素 */</span><br><span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:first</span>-child &#123;<br>  <span class="hljs-attribute">background</span>: tomato;<br>&#125;<br><span class="hljs-comment">/* ul的最后一个元素 */</span><br><span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:last-child</span> &#123;<br>  <span class="hljs-attribute">background</span>: turquoise;<br>&#125;<br></code></pre></td></tr></table></figure><p>2  p:nth-child(1) (nth父元素)</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">    <span class="hljs-comment">/* 选中p1: 定位到父元素，选择当前的第一个元素 </span><br><span class="hljs-comment">选择当前p元素的父级元素，选择父级元素的第一个,并且是当前元素才生效</span><br><span class="hljs-comment">*/</span><br>    <span class="hljs-comment">/* p:nth-child(1)&#123;</span><br><span class="hljs-comment">      background: violet;</span><br><span class="hljs-comment">  &#125; */</span><br></code></pre></td></tr></table></figure><p>3 p:nth-of-type(1) </p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-comment">/*  选中父元素，下的p元素的第一个，按类型选类型  */</span><br><span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:nth-of-type</span>(<span class="hljs-number">1</span>) &#123;<br>  <span class="hljs-attribute">background</span>: yellow;<br>&#125;<br></code></pre></td></tr></table></figure><p>4 a:hover(鼠标悬浮的颜色 (重要))</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">background</span>: yellow;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="属性选择器-重要"><a href="#属性选择器-重要" class="headerlink" title="属性选择器(重要)"></a>属性选择器(重要)</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs xml">  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">    <span class="hljs-selector-class">.demo</span> <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="css">      <span class="hljs-attribute">float</span>: left;</span><br><span class="css">      <span class="hljs-attribute">display</span>: block;</span><br><span class="css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</span><br><span class="css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;</span><br><span class="css">      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;</span><br><span class="css">      <span class="hljs-attribute">background</span>: lightgreen;</span><br><span class="css">      <span class="hljs-attribute">text-align</span>: center;</span><br><span class="css">      <span class="hljs-attribute">color</span>: gainsboro;</span><br><span class="css">      <span class="hljs-attribute">text-decoration</span>: none;</span><br><span class="css">      <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">5px</span>;</span><br><span class="css">      <span class="hljs-attribute">font</span>: bold <span class="hljs-number">20px</span>/<span class="hljs-number">50px</span> Arial;</span><br><span class="css">      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">50px</span>;</span><br>    &#125;<br>    /* 属性名， 属性名= 属性值（正则）<br>=绝对等于<br>*=包含这个元素<br>^= 以这个开头<br>$= 以这个结尾<br> */<br><br><span class="css">    <span class="hljs-comment">/* 存在id属性的元素   a[]&#123;&#125; */</span></span><br><span class="css">    <span class="hljs-comment">/* a[id]&#123;</span></span><br><span class="css">    <span class="hljs-attribute">background</span>: yellow;</span><br>&#125; */<br><span class="css">    <span class="hljs-comment">/*id=first的元素  */</span></span><br><span class="css">    <span class="hljs-comment">/* a[id=first]&#123;</span></span><br><span class="css">    <span class="hljs-attribute">background</span>: violet;</span><br>&#125; */<br><span class="css">    <span class="hljs-comment">/* class 中有links的元素 */</span></span><br><span class="css">    <span class="hljs-comment">/* a[class*=&quot;links&quot;]&#123;</span></span><br><span class="css">    <span class="hljs-attribute">background</span>: yellow;</span><br>&#125; */<br><br><span class="css">    <span class="hljs-comment">/* 选中href中以http开头的元素 */</span></span><br><span class="css">    <span class="hljs-comment">/* a[href^=http]&#123;</span></span><br><span class="css"><span class="hljs-attribute">background</span>: yellow;</span><br>    &#125; */<br><span class="css">    <span class="hljs-comment">/* 选中href中以doc结尾的元素 */</span></span><br><span class="css">    <span class="hljs-selector-tag">a</span><span class="hljs-selector-attr">[href$=<span class="hljs-string">&#x27;doc&#x27;</span>]</span> &#123;</span><br><span class="css">      <span class="hljs-attribute">background</span>: yellow;</span><br>    &#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;http://www.baidu.com&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;links item first&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;first&quot;</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;http://www.baidu.com&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;links item active&quot;</span><span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;test&quot;</span> &gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;images/123.png&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;links item&quot;</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;images/123.png&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;links item&quot;</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;images/123.jpg&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;links item&quot;</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;abc&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;links item&quot;</span>&gt;</span>6<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/a.pdf&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;links item&quot;</span>&gt;</span>7<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/a.pdf&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;links item&quot;</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;abc.doc&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;links item&quot;</span>&gt;</span>9<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;abcd.doc&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;links item&quot;</span>&gt;</span>10<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="美化网页元素"><a href="#美化网页元素" class="headerlink" title="美化网页元素"></a>美化网页元素</h2><ol><li>有效的传递页面信息</li><li>美化页面，页面漂亮，才能吸引用户</li><li>凸显页面的主题</li><li>提高用户的体验</li></ol><h3 id="span标签：重点要突出的字，使用span套起来"><a href="#span标签：重点要突出的字，使用span套起来" class="headerlink" title="span标签：重点要突出的字，使用span套起来"></a>span标签：重点要突出的字，使用span套起来</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"> <span class="hljs-comment">&lt;!-- font-family:字体</span><br><span class="hljs-comment">   font-size:字体大小</span><br><span class="hljs-comment">   font-weight:字体粗细</span><br><span class="hljs-comment">   color:字体颜色</span><br><span class="hljs-comment">--&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">   <span class="hljs-selector-tag">body</span> &#123;</span><br><span class="css">     <span class="hljs-attribute">font-family</span>: Impact, Haettenschweiler, <span class="hljs-string">&#x27;Arial Narrow Bold&#x27;</span>, sans-serif;</span><br><span class="css">     <span class="hljs-attribute">color</span>: blue;</span><br>   &#125;<br><span class="css">   <span class="hljs-selector-tag">h1</span> &#123;</span><br><span class="css">     <span class="hljs-attribute">font-size</span>: <span class="hljs-number">50px</span>;</span><br>   &#125;<br>   .p1 &#123;<br><span class="css">     <span class="hljs-attribute">font-weight</span>: lighter;</span><br>   &#125;<br> <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="文本样式"><a href="#文本样式" class="headerlink" title="文本样式"></a>文本样式</h3><ol><li>颜色 color rgb rgba</li><li>文本对齐的方式  text-align(重要)</li><li>首行缩进  text-indent: 2em; (重要)</li><li>行高    line-height(单行文字上下居中)(重要)</li><li>装饰   text-decoration</li><li>文本图片水平对齐  vertical-align: middle;<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br> <span class="hljs-comment">&lt;!-- </span><br><span class="hljs-comment">   颜色：</span><br><span class="hljs-comment">           单词</span><br><span class="hljs-comment">           RGB  0~F</span><br><span class="hljs-comment">           RGBA  A :0~1</span><br><span class="hljs-comment">           text-align:  排版，居中</span><br><span class="hljs-comment">           text-indent: 2em;  段落首行缩进</span><br><span class="hljs-comment">       line-height: 300px;  </span><br><span class="hljs-comment">       行高，和块的高度一致，就可以上下居中  </span><br><span class="hljs-comment">--&gt;</span><br><br> <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">   <span class="hljs-selector-tag">h1</span> &#123;</span><br><span class="css">     <span class="hljs-attribute">color</span>: red;</span><br><span class="css">     <span class="hljs-attribute">text-align</span>: center;</span><br>   &#125;<br>   .p1 &#123;<br><span class="css">     <span class="hljs-attribute">text-indent</span>: <span class="hljs-number">2em</span>;</span><br>   &#125;<br><br>   .p3 &#123;<br><span class="css">     <span class="hljs-attribute">background</span>: chartreuse;</span><br><span class="css">     <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;</span><br><span class="css">     <span class="hljs-attribute">line-height</span>: <span class="hljs-number">300px</span>;</span><br>   &#125;<br><span class="css">   <span class="hljs-comment">/* 下划线 */</span></span><br>   .l1 &#123;<br><span class="css">     <span class="hljs-attribute">text-decoration</span>: underline;</span><br>   &#125;<br><span class="css">   <span class="hljs-comment">/* 中划线 */</span></span><br>   .l2 &#123;<br><span class="css">     <span class="hljs-attribute">text-decoration</span>: line-through;</span><br>   &#125;<br><span class="css">   <span class="hljs-comment">/*上划线  */</span></span><br>   .l3 &#123;<br><span class="css">     <span class="hljs-attribute">text-decoration</span>: overline;</span><br>   &#125;<br><span class="css">   <span class="hljs-selector-tag">img</span>,</span><br><span class="css">   <span class="hljs-selector-tag">span</span> &#123;</span><br><span class="css">     <span class="hljs-attribute">vertical-align</span>: middle;</span><br>   &#125;<br> <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br> <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;l1&quot;</span>&gt;</span>123123<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;l2&quot;</span>&gt;</span>123123<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;l3&quot;</span>&gt;</span>123123<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><br>   <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>故事介绍<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;p1&quot;</span>&gt;</span><br>     平静安详的元泱境界，每隔333年，总会有一个神秘而恐怖的异常生物重生，它就是魁拔！魁拔的每一次出现，都会给元泱境界带来巨大的灾难！<br>   <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>     在偏远的兽国窝窝乡，蛮大人和蛮吉每天为取得象征成功和光荣的妖侠纹耀而刻苦修炼，却把他们生活的村庄搅得鸡犬不宁。村民们绞尽脑汁把他们赶走。<br>   <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;p3&quot;</span>&gt;</span><br>     I have searched a thousand years,And I have cried a thousand tears.<br>   <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br> <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="超链接伪类"><a href="#超链接伪类" class="headerlink" title="超链接伪类"></a>超链接伪类</h3>正常情况下， a:hover<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs css">    <span class="hljs-comment">/* 默认的颜色 */</span><br>  <span class="hljs-selector-tag">a</span> &#123;<br>    <span class="hljs-attribute">text-decoration</span>: none;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#000</span>;<br>  &#125;<br>  <span class="hljs-comment">/* 鼠标悬浮的颜色 (重要)*/</span><br>  <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>    <span class="hljs-attribute">color</span>: orange;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">50px</span>;<br>  &#125;<br>  <span class="hljs-comment">/* 鼠标按住未释放的状态 */</span><br>  <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:active</span> &#123;<br>    <span class="hljs-attribute">color</span>: green;<br>  &#125;<br><br>  <span class="hljs-comment">/*  text-shadow   阴影颜色，水平偏移，垂直偏移，阴影半径*/</span><br>  <span class="hljs-selector-id">#price</span> &#123;<br>    <span class="hljs-attribute">text-shadow</span>: blue <span class="hljs-number">10px</span> <span class="hljs-number">10px</span> <span class="hljs-number">2px</span>;<br>  &#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><h3 id="列表样式"><a href="#列表样式" class="headerlink" title="列表样式"></a>列表样式</h3><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig">/* <span class="hljs-string">ul</span>  <span class="hljs-string">li</span> */<br>/* <br><span class="hljs-built_in">list-style::</span><br><span class="hljs-built_in">none</span>  去掉原点<br><span class="hljs-string">circle</span>  空心圆<br><span class="hljs-string">decimal</span>  数字<br><span class="hljs-string">square</span>  正方形<br>*/<br><span class="hljs-string">ul</span>  <span class="hljs-string">li</span>&#123;<br>    <span class="hljs-string">height</span>: <span class="hljs-string">30px</span>;<br>    <span class="hljs-built_in">list-style:</span> <span class="hljs-string">none</span>;<br>    <span class="hljs-string">text-indent</span>: <span class="hljs-string">1em</span>;<br>      &#125;<br></code></pre></td></tr></table></figure><h3 id="图片平铺方式渐变-background-repeat"><a href="#图片平铺方式渐变-background-repeat" class="headerlink" title="图片平铺方式渐变(background-repeat)"></a>图片平铺方式渐变(background-repeat)</h3><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span></span><br><span class="xml">  div </span><span class="xquery">&#123;</span><br><span class="xquery">    width: <span class="hljs-number">1000</span>px;</span><br><span class="xquery">    height: <span class="hljs-number">700</span>px;</span><br><span class="xquery">    border: <span class="hljs-number">1</span>px solid red;</span><br><span class="xquery">    background-image: url(<span class="hljs-string">&#x27;image/1.jpg&#x27;</span>);</span><br><span class="xquery">    /* 默认是全部平铺的 */</span><br><span class="xquery">  &#125;</span><br><span class="xml">  <span class="hljs-comment">&lt;!-- 沿x轴平铺 --&gt;</span></span><br><span class="xml">  .div1 </span><span class="xquery">&#123;</span><br><span class="xquery">    background-repeat: repeat-x;</span><br><span class="xquery">  &#125;</span><br><span class="xml">      <span class="hljs-comment">&lt;!-- 沿y轴平铺 --&gt;</span></span><br><span class="xml">  .div2 </span><span class="xquery">&#123;</span><br><span class="xquery">    background-repeat: repeat-y;</span><br><span class="xquery">  &#125;</span><br><span class="xml">  .div3 </span><span class="xquery">&#123;</span><br><span class="xquery">    background-repeat: no-repeat;</span><br><span class="xquery">  &#125;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="背景渐变"><a href="#背景渐变" class="headerlink" title="背景渐变"></a>背景渐变</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--径向渐变，圆形渐变  --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">  <span class="hljs-selector-tag">body</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#00dbde</span>;</span><br><span class="css">    <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#00dbde</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#fc00ff</span> <span class="hljs-number">100%</span>);</span><br>  &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><a href="https://www.grabient.com/">开源项目网址</a></li></ol><h4 id="基于B站视频学习-特别感谢up主-遇见狂神说"><a href="#基于B站视频学习-特别感谢up主-遇见狂神说" class="headerlink" title="基于B站视频学习 特别感谢up主 遇见狂神说"></a>基于<a href="https://www.bilibili.com/video/BV1YJ411a7dy?p=1">B站视频</a>学习 特别感谢up主 <a href="https://space.bilibili.com/95256449?spm_id_from=333.788.b_765f7570696e666f.1">遇见狂神说</a></h4>]]></content>
    
    
    <categories>
      
      <category>CSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>CSS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CSS导入方式&amp;三种基本选择器&amp;层次选择器</title>
    <link href="/2021/04/01/Css%E5%AD%A6%E4%B9%A0(%E4%B8%80)/"/>
    <url>/2021/04/01/Css%E5%AD%A6%E4%B9%A0(%E4%B8%80)/</url>
    
    <content type="html"><![CDATA[<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css">css的优势：<br><span class="hljs-number">1</span>.内容和表现分离<br><span class="hljs-number">2</span>.网页结构表现统一，可以实现复用。<br><span class="hljs-number">3</span>.样式十分丰富。<br><span class="hljs-number">4</span>.建议使用独立于<span class="hljs-selector-tag">html</span>的css文件。<br><span class="hljs-number">5</span>.利用SEO,容易被搜索引擎收录。<br></code></pre></td></tr></table></figure><p>以下是对CSS(CSS导入方式(三种),三种基本选择器,层次选择器)的学习</p><hr><h2 id="CSS导入方式-三种"><a href="#CSS导入方式-三种" class="headerlink" title="CSS导入方式(三种)"></a>CSS导入方式(三种)</h2><ol><li>行内样式<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 行内样式：在标签元素中，编写一个style属性，编写样式即可 --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: red;&quot;</span>&gt;</span>我是标题<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>内部样式<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 内部样式 --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">        <span class="hljs-selector-tag">h1</span>&#123;</span><br><span class="css">            <span class="hljs-attribute">color</span>:green;</span><br>        &#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>外部样式–1.链接式<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 外部样式 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/css/style.css&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>外部样式–2.导入式(不常用，以前网页先加载框架Html，后渲染出页面)<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml">@import是CSS2.1特有的<br><span class="hljs-comment">&lt;!-- 导入式 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css"><span class="hljs-keyword">@import</span> url(css/style.css);</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h3><strong>优先级:就近原则</strong><br><strong>优先级:行内样式&gt;内部样式&gt;外部样式</strong></li></ol><h2 id="三种基本选择器"><a href="#三种基本选择器" class="headerlink" title="三种基本选择器"></a>三种基本选择器</h2><ol><li>标签选择器<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><span class="css">    <span class="hljs-comment">/* 标签选择器，会选择到页面所有的这个标签的元素 */</span></span><br><span class="css">    <span class="hljs-selector-tag">h1</span> &#123;</span><br><span class="css">        <span class="hljs-attribute">background</span>: blue;</span><br><span class="css">        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">24px</span>;</span><br><span class="css">        <span class="hljs-attribute">color</span>: hotpink;</span><br>    &#125;<br><span class="css">    <span class="hljs-selector-tag">p</span>&#123;</span><br><span class="css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">80px</span>;</span><br>    &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>类选择器<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br>    /*  类选择器的格式，.class的名称&#123;&#125;<br>    好处，可以多个标签归类，是同一个class,可以复用<br>      */<br>    .aa.cc&#123;<br><span class="css">        <span class="hljs-attribute">color</span>:hotpink;</span><br>    &#125;<br>    .bb&#123;<br><span class="css">        <span class="hljs-attribute">color</span>: indianred;</span><br>    &#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>id选择器(全局唯一)<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br>/*   id选择器  ：id必须保证全局唯一<br>  #id名称&#123;&#125;*/<br>#aa&#123;<br><span class="css">   <span class="hljs-attribute">color</span>: lawngreen; </span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="对比-1"><a href="#对比-1" class="headerlink" title="对比"></a>对比</h3>优先级:不遵循就近原则，固定的<br><strong>id选择器&gt;class选择器&gt;标签选择器</strong></li></ol><h2 id="层次选择器"><a href="#层次选择器" class="headerlink" title="层次选择器"></a>层次选择器</h2><ol><li>后代选择器：在某个元素的后面(都会作用)<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">    <span class="hljs-comment">/* body  p&#123;</span><br><span class="hljs-comment">        background: red;</span><br><span class="hljs-comment">    &#125; */</span><br>例：<span class="hljs-selector-tag">body</span>后的所有<span class="hljs-selector-tag">p</span>标签背景都会变为红色<br></code></pre></td></tr></table></figure></li><li>子选择器：(就作用一代)<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">   <span class="hljs-comment">/* body&gt;p&#123;</span><br><span class="hljs-comment">       background:blue;</span><br><span class="hljs-comment">   &#125; */</span><br>例：<span class="hljs-selector-tag">body</span>后面的第一代<span class="hljs-selector-tag">p</span>标签才有效果，其他嵌套的没有<br></code></pre></td></tr></table></figure></li><li>相邻兄弟选择器：只有一个，相邻(向下)<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">    <span class="hljs-comment">/* .active+p&#123;</span><br><span class="hljs-comment">        background:blue;</span><br><span class="hljs-comment">    &#125; */</span><br>例：类active标签的向下的一个<span class="hljs-selector-tag">P</span>标签才会作用<br></code></pre></td></tr></table></figure></li><li>通用兄弟选择器<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css">当前选中元素的向下的所有兄弟元素 */<br>    <span class="hljs-selector-class">.active</span> ~ <span class="hljs-selector-tag">p</span> &#123;<br>      <span class="hljs-attribute">background</span>: tomato;<br>    &#125;<br>例：类active后面向下的所有<span class="hljs-selector-tag">P</span>标签都会作用<br></code></pre></td></tr></table></figure></li></ol><h4 id="基于B站视频学习-特别感谢up主-遇见狂神说"><a href="#基于B站视频学习-特别感谢up主-遇见狂神说" class="headerlink" title="基于B站视频学习 特别感谢up主 遇见狂神说"></a>基于<a href="https://www.bilibili.com/video/BV1YJ411a7dy?p=1">B站视频</a>学习 特别感谢up主 <a href="https://space.bilibili.com/95256449?spm_id_from=333.788.b_765f7570696e666f.1">遇见狂神说</a></h4>]]></content>
    
    
    <categories>
      
      <category>CSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端基础</tag>
      
      <tag>CSS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git的使用--如何将本地项目上传到Github&amp;Git创建新分支</title>
    <link href="/2021/03/31/Git%E7%9A%84%E4%BD%BF%E7%94%A8--%E5%A6%82%E4%BD%95%E5%B0%86%E6%9C%AC%E5%9C%B0%E9%A1%B9%E7%9B%AE%E4%B8%8A%E4%BC%A0%E5%88%B0Github&amp;Git%E5%88%9B%E5%BB%BA%E6%96%B0%E5%88%86%E6%94%AF/"/>
    <url>/2021/03/31/Git%E7%9A%84%E4%BD%BF%E7%94%A8--%E5%A6%82%E4%BD%95%E5%B0%86%E6%9C%AC%E5%9C%B0%E9%A1%B9%E7%9B%AE%E4%B8%8A%E4%BC%A0%E5%88%B0Github&amp;Git%E5%88%9B%E5%BB%BA%E6%96%B0%E5%88%86%E6%94%AF/</url>
    
    <content type="html"><![CDATA[<p>如何将本地项目上传到Github（两种简单、方便的方法）</p><hr><h3 id="第一种-已尝试"><a href="#第一种-已尝试" class="headerlink" title="第一种(已尝试)"></a>第一种(已尝试)</h3><ol><li><p>Github上新建一个仓库<br><img src="/image/8.png" alt="新建一个仓库">          </p></li><li><p>复制仓库地址先(两个都行)<br><img src="/image/8.1.png" alt="仓库地址">        </p></li></ol><ol start="3"><li><p>桌面右键Git进入文件夹目录<br><img src="/image/8.2.png" alt="Git">       </p></li><li><p>接下来输入如下代码（关键步骤），把github上面的仓库克隆到本地 </p><pre><code>git  clone  git@github.com:Pengzhenglong/html-css-js.git(git@github.com:Pengzhenglong/html-css-js.git换成你第二步复制的地址链接)</code></pre><p><img src="/image/8.3.png" alt="克隆仓库"><br>这个步骤以后你的本地项目文件夹下面就会多出个文件夹，该文件夹名即为你github上面的项目名，如图我多出了个html-css-js文件夹，我们把本地项目文件夹下的所有文件（除了新多出的那个文件夹不用），其余都复制到那个新多出的文件夹下。</p></li></ol><p><img src="/image/8.4.png" alt="文件图片">   </p><ol start="5"><li>接着继续输入命令 cd html-css-js，进入html-css-js文件夹              </li></ol><ol start="6"><li>接下来依次输入以下代码即可完成其他剩余操作</li></ol><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs maxima">git add . （注：别忘记后面的.，此操作是把html-css-js文件夹下面的文件都添加进来）           <br><br>git commit  -m  ”提交信息”  （注：“提交信息”里面换成你需要，如“<span class="hljs-built_in">first</span> commit”）       <br><br>git <span class="hljs-built_in">push</span> -u <span class="hljs-built_in">origin</span> master   （注：此操作目的是把本地仓库<span class="hljs-built_in">push</span>到github上面，此步骤需要你输入帐号和密码）(由于我之前设置了免密操作所以我这台电脑不需要输入账号密码)<br></code></pre></td></tr></table></figure><p><img src="/image/8.5.png" alt="Git操作">   </p><p><img src="/image/8.6.png" alt="上传成功">   </p><h3 id="第二种-未尝试"><a href="#第二种-未尝试" class="headerlink" title="第二种(未尝试)"></a>第二种(未尝试)</h3><blockquote><p>参考链接:<br><code>https://blog.csdn.net/u014135752/article/details/79951802</code></p></blockquote><h3 id="Git创建新分支并提交到github"><a href="#Git创建新分支并提交到github" class="headerlink" title="Git创建新分支并提交到github"></a>Git创建新分支并提交到github</h3><p>因为需求的变更，需要把原来的代码做一下备份，再进行下一步的开发，所以 这是就将原来的代码创建一个新的分支来保存原来的代码，以防后面需要回滚，这里记录一下操作的步骤             </p><ol><li> 可以先查看一下当前所在分支</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">git branch</span><br></code></pre></td></tr></table></figure><ol start="2"><li>创建本地分支并切换到新创建的分支</li></ol><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">git</span> <span class="hljs-variable">checkout</span> -<span class="hljs-variable">b</span> <span class="hljs-function"><span class="hljs-title">dev</span>(<span class="hljs-variable">dev</span> 可以命名为自己想取的名字)</span><br></code></pre></td></tr></table></figure><ol start="3"><li>已经创建成功了，可以看一下</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">git branch</span><br></code></pre></td></tr></table></figure><ol start="4"><li><p>将新创建的分支信息推送到github</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">git <span class="hljs-built_in">push</span> <span class="hljs-built_in">origin</span> HEAD -u<br></code></pre></td></tr></table></figure></li><li><p>可以到github看一下<br><img src="/image/8.8.png" alt="Github">   </p></li><li><p>git checkout branchname   //切换分支  branchname为你的分支名字</p></li></ol><ol start="7"><li>分支操作</li></ol><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">然后切换到主分支<br>$ git checkout <span class="hljs-keyword">master</span> <span class="hljs-title"></span><br><span class="hljs-title"></span><br><span class="hljs-title">然后将新分支提交的改动合并到主分支上</span><br><span class="hljs-title">$</span> git merge newbranch  <br><br>然后就可以push代码了<br>$ git push -u origin <span class="hljs-literal">master</span><br><br>最后还可以删除这个分支<br>$ git branch -D newbranch<br></code></pre></td></tr></table></figure><h3 id="Git的基本操作指令"><a href="#Git的基本操作指令" class="headerlink" title="Git的基本操作指令"></a>Git的基本操作指令</h3><p><img src="/image/8.9.png" alt="Git">   </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">切换分支命令:<br><br>git checkout (branchname)   <span class="hljs-regexp">//</span>切换分支<br>$ git init    <span class="hljs-regexp">//</span> 初始化仓库。<br>$ git add .    <span class="hljs-regexp">//</span>添加文件到暂存区。<br>$ git commit  <span class="hljs-regexp">//</span>将暂存区内容添加到仓库中。<br>$ git push  <span class="hljs-regexp">//</span>上传远程代码并合并<br>$ git pull  <span class="hljs-regexp">//</span>下载远程代码并合并<br></code></pre></td></tr></table></figure><h3 id="开发项目码云与Git分支的使用"><a href="#开发项目码云与Git分支的使用" class="headerlink" title="开发项目码云与Git分支的使用"></a>开发项目码云与Git分支的使用</h3><ol><li>在码云上你的项目中新建分支</li></ol><p><img src="/image/4.2.png" alt="创建分支">  </p><ol start="2"><li>本地项目文件右键Git  Bash Here</li></ol><p>命令：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk">git  pull  <span class="hljs-regexp">//</span>将线上的分支拉到本地<br><br>git  checkout  index <span class="hljs-regexp">//i</span>ndex为你自己建的分支名字，现在你所在的分支就在index分支上，本地开发的代码都在这个分支上<br><br><span class="hljs-regexp">//</span>开发完成后<br><br>git  add .  <span class="hljs-regexp">//</span>添加文件到暂存区<br>git  commit -m <span class="hljs-string">&#x27;name&#x27;</span>  <span class="hljs-regexp">//</span>name可以你自己起<br>git  push <span class="hljs-regexp">//</span>本地分支的内容提交到线上了<br>git  checkout  master  <span class="hljs-regexp">//</span>切换为主分支<br>git  merge  index  <span class="hljs-regexp">//</span>将新增的内容合并到主分支上<br>git  push  <span class="hljs-regexp">//</span>将master分支代码提交到线上<br><br></code></pre></td></tr></table></figure><blockquote><p>参考链接<br><a href="https://www.runoob.com/git/git-basic-operations.html">菜鸟教程</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
      <tag>Github</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git(SSH本地免密)+Github迁移到Gitee</title>
    <link href="/2021/03/31/Git(SSH%E6%9C%AC%E5%9C%B0%E5%85%8D%E5%AF%86)+Github%E8%BF%81%E7%A7%BB%E5%88%B0Gitee/"/>
    <url>/2021/03/31/Git(SSH%E6%9C%AC%E5%9C%B0%E5%85%8D%E5%AF%86)+Github%E8%BF%81%E7%A7%BB%E5%88%B0Gitee/</url>
    
    <content type="html"><![CDATA[<p>Git上传到Github每次都要密码验证，很麻烦，想一下可以使用SSH免密操作，同时上传到Github和Gitee,也可以将项目迁移至Gitee.</p><hr><h2 id="Github配置-SSH-key"><a href="#Github配置-SSH-key" class="headerlink" title="Github配置 SSH key"></a>Github配置 SSH key</h2><p>window10系统桌面右键<code>Git Bash Here</code></p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>ssh-keygen -t rsa -C <span class="hljs-string">&quot;youremail@example.com&quot;</span><br></code></pre></td></tr></table></figure><p>注：<strong>后面的 <code>your_email@youremail.com</code> 改为你在 Github 上注册的邮箱</strong>，之后会要求确认路径和输入密码，我们这使用默认的一路回车就行。<br>成功的话会在C:\Users\ASUS下生成 .ssh 文件夹，进去，打开 id_rsa.pub，复制里面的 key。<br>之后进入Github中自己的设置中，左边选择 SSH and GPG keys，然后点击 New SSH key 按钮,title 设置标题，可以随便填，粘贴在你电脑上生成的 key。<br>验证：为了验证是否成功，输入以下命令：</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">$ ssh -T git@github.com<br>The authenticity <span class="hljs-keyword">of</span> host <span class="hljs-symbol">&#x27;github</span>.com (<span class="hljs-number">52.74</span>.<span class="hljs-number">223.119</span>)&#x27; can<span class="hljs-symbol">&#x27;t</span> be established.<br>RSA key fingerprint <span class="hljs-keyword">is</span> SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.<br>Are you sure you want <span class="hljs-keyword">to</span> continue connecting (yes/no/[fingerprint])? yes                   # 输入 yes<br><span class="hljs-literal">Warning</span>: Permanently added <span class="hljs-symbol">&#x27;github</span>.com,<span class="hljs-number">52.74</span>.<span class="hljs-number">223.119</span>&#x27; (RSA) <span class="hljs-keyword">to</span> the list <span class="hljs-keyword">of</span> known hosts.<br>Hi tianqixin! You<span class="hljs-symbol">&#x27;ve</span> successfully authenticated, but GitHub does <span class="hljs-keyword">not</span> provide shell <span class="hljs-keyword">access</span>. # 成功信息<br></code></pre></td></tr></table></figure><h2 id="Gitee-配置-SSH-key"><a href="#Gitee-配置-SSH-key" class="headerlink" title="Gitee 配置 SSH key"></a>Gitee 配置 SSH key</h2><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs clean">登陆Gitee的账号：<br>点击用户头像-&gt;进入个人设置<br>选择安全设置-&gt;SSH公钥<br>选择新增公钥<br>填写标题：公钥标题key<br>填写公钥：把我们刚刚复制的公钥粘贴到这里(刚刚Github生成的密钥)<br>添加后输入输入账号密码进行确认<br></code></pre></td></tr></table></figure><p>验证：</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">使用Git Bash输入：<br>ssh -T git@github.com<br>第一次连接时会问你是否继续连接，输入 <span class="hljs-literal">yes</span> 即可；<br>接下来验证Gitee的ssh连接：<br>ssh -T git@gitee.com<br>同样输入 <span class="hljs-literal">yes</span> 即可。<br></code></pre></td></tr></table></figure><p>参考链接：</p><blockquote><p><a href="https://www.runoob.com/git/git-remote-repo.html">https://www.runoob.com/git/git-remote-repo.html</a><br><a href="https://blog.csdn.net/pilihaotian/article/details/103337959">https://blog.csdn.net/pilihaotian/article/details/103337959</a></p></blockquote><h2 id="Github迁移到Gitee"><a href="#Github迁移到Gitee" class="headerlink" title="Github迁移到Gitee"></a>Github迁移到Gitee</h2><h3 id="1-直接从Github中导入到Gitee"><a href="#1-直接从Github中导入到Gitee" class="headerlink" title="1.直接从Github中导入到Gitee"></a>1.直接从Github中导入到Gitee</h3><p><img src="/image/3.png" alt="Gitee迁移"></p><h3 id="2-Gitee上新建一个项目将本地项目上传。"><a href="#2-Gitee上新建一个项目将本地项目上传。" class="headerlink" title="2.Gitee上新建一个项目将本地项目上传。"></a>2.Gitee上新建一个项目将本地项目上传。</h3><p>修改配置文件：<br>在站点根目录下找到_config.yml文件，将里边的deploy节点修改成下边的形式，其中repository等于username ，即</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">deploy:<br>  type: git<br>  repo: <br>    github: git@github<span class="hljs-selector-class">.com</span>:<span class="hljs-selector-attr">[username]</span>/<span class="hljs-selector-attr">[username]</span><span class="hljs-selector-class">.github</span><span class="hljs-selector-class">.io</span><span class="hljs-selector-class">.git</span>,master<br>    gitee: git@gitee<span class="hljs-selector-class">.com</span>:<span class="hljs-selector-attr">[username]</span>/<span class="hljs-selector-attr">[username]</span><span class="hljs-selector-class">.git</span>,master<br></code></pre></td></tr></table></figure><p>配置了这后免密了能同时上传到Github和Gitee</p><h3 id="1-注：配置文件的缩进很重要"><a href="#1-注：配置文件的缩进很重要" class="headerlink" title="1.注：配置文件的缩进很重要"></a>1.注：配置文件的缩进很重要</h3><p><img src="/image/3.1.png" alt="配置文件">  </p><h3 id="2-名字一样很重要！！！不然页面渲染加载不出来。"><a href="#2-名字一样很重要！！！不然页面渲染加载不出来。" class="headerlink" title="2.名字一样很重要！！！不然页面渲染加载不出来。"></a>2.名字一样很重要！！！不然页面渲染加载不出来。</h3><p>对于 Gitee，你可以选择建立一个私人仓库来部署自己的Hexo博客，不过和 Github 不同的地方在于：<br>Github 的仓库名要命名为： {username}.github.io<br>而 Coding.net 的仓库名要命名为：{username}<br>这里的 username 指的是你在这两个网站上的用户名，只有以这种命名形式的仓库，才能够不通过子域名的形式来访问我们的博客。<br>比如说，我的 Github 和Gitee 的账号都是jack，那么在部署博客成功后，我就可以通过下边的url来访问我的Hexo博客：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>jack.github.io/<br>https:<span class="hljs-regexp">//</span>jack.gitee.io<br></code></pre></td></tr></table></figure><ol><li>一开始我的个人空间地址与username不一样，导致网页加载不出来  </li></ol><p><img src="/image/3.2.png" alt="网站加载页面"><br>2. 最终将Gitee个人中心修改和username一致才成功加载页面 </p><p><img src="/image/3.3.png" alt="修改地址"></p><ol start="3"><li>Git上传更新到Gitee和Github上发现Github博客更新了，但是Gitee页面没有更新。<br>解决方法：<br>打开博客的仓库 -&gt; 服务 -&gt; 点击 Gitee Pages-&gt; 点击【更新】即可    </li></ol><p><img src="/image/3.5.png" alt="修改地址"></p><h3 id="总结：配置文件格式很重要，缩进及编码要注意，否者项目启动不了。博客命名和Github-Gitee的命名一致很重要，不然也会报错。"><a href="#总结：配置文件格式很重要，缩进及编码要注意，否者项目启动不了。博客命名和Github-Gitee的命名一致很重要，不然也会报错。" class="headerlink" title="总结：配置文件格式很重要，缩进及编码要注意，否者项目启动不了。博客命名和Github,Gitee的命名一致很重要，不然也会报错。"></a>总结：配置文件格式很重要，缩进及编码要注意，否者项目启动不了。博客命名和Github,Gitee的命名一致很重要，不然也会报错。</h3>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Html&amp;表格&amp;表单(重点)</title>
    <link href="/2021/03/30/%E9%87%8D%E5%AD%A6Html(%E4%BA%8C)/"/>
    <url>/2021/03/30/%E9%87%8D%E5%AD%A6Html(%E4%BA%8C)/</url>
    
    <content type="html"><![CDATA[<hr><h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><ol><li>表格table    行  tr  rows( rowspan  跨行) </li><li>列  td(colspan  跨列)  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">border</span>=<span class="hljs-string">&quot;1px&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- colspan  跨列 --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">colspan</span>=<span class="hljs-string">&quot;4&quot;</span>&gt;</span>1-4<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- rowspan  跨行 --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">rowspan</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span>2-1<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2-2<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2-3<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2-4<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="媒体元素"><a href="#媒体元素" class="headerlink" title="媒体元素"></a>媒体元素</h2>音频和视频(src :资源路径,constrols: 控制条,autuplay: 自动播放)<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">audio</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../html/audio/FN=告白气球_周杰伦_128K.mp3&quot;</span>  <span class="hljs-attr">controls</span>  <span class="hljs-attr">autoplay</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">audio</span>&gt;</span>    <br><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../html/audio/BLACKPINK - &#x27;Lovesick Girls&#x27; M_V MAKING FILM.mp4&quot;</span>  <span class="hljs-attr">controls</span>  <span class="hljs-attr">autoplay</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="页面结构"><a href="#页面结构" class="headerlink" title="页面结构"></a>页面结构</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>页面头部<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>网页主体<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>网页脚部<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="内联框架"><a href="#内联框架" class="headerlink" title="内联框架"></a>内联框架</h2>iframe:内联框架，src :地址,w- h :宽度高度   <figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;iframe <span class="hljs-attribute">src</span>=<span class="hljs-string">&quot;http:www.baidu.com&quot;</span>  <span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;hello&quot;</span> <span class="hljs-attribute">frameborder</span>=<span class="hljs-string">&quot;0&quot;</span>  <span class="hljs-attribute">width</span>=<span class="hljs-string">&quot;800px&quot;</span>  <span class="hljs-attribute">height</span>=<span class="hljs-string">&quot;800px&quot;</span>&gt;&lt;/iframe&gt;<br></code></pre></td></tr></table></figure><h2 id="学习表单-重点"><a href="#学习表单-重点" class="headerlink" title="学习表单(重点)"></a>学习表单(重点)</h2></li></ol><ol><li><p>表单form(post和get提交)<br> action:表单提交的位置，可以是网站，也可以是一个请求处理地址<br> method: post,get提交方式<br> get方式提交：我们可以在url中看到我们的提交信息，不安全，高效<br> post: 比较安全，传输大文件.<br> <img src="/image/2.2.PNG" alt="表单语法"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;1.我的第一个网页.html&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;GET&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>名字：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> , <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span>   <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;请输入用户名&quot;</span> <span class="hljs-attr">required</span>  <span class="hljs-attr">maxlength</span>=<span class="hljs-string">&quot;8&quot;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;20&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 密码值：input  type=&quot;password&quot; --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>密码：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;pwd&quot;</span> <span class="hljs-attr">hidden</span>  <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span> <br></code></pre></td></tr></table></figure></li><li><p>文本框和单选框<br>文本输入框:</p><pre><code>     input  type = &quot;text&quot;         value =&quot;我好帅&quot;  默认初始值        maxlength=&quot;8 &quot;   最长能写几个字符            size = &quot;30&quot;      文本框的长度    </code></pre><blockquote><p>单选标签: input  type= “radio”</p></blockquote></li><li><p>按钮和多选框<br>按钮: </p><pre><code>     input type=&quot;button&quot;  普通按钮      input type=&quot;image&quot;   图像按钮         input type=&quot;submit&quot;  提示按钮        input type=&quot;reset&quot;   重置按钮    </code></pre><blockquote><p>多选框:   input type=”checkbox”</p></blockquote></li><li><p> 列表框文本域和文件域</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--文本域 cols=&quot;30&quot; rows=&quot;10&quot;--&gt;</span> <br>         <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>反馈<br>            <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;textarea&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">cols</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;10&quot;</span>&gt;</span>文本内容<span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><br>         <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 文件域 input type=&quot;file&quot; name=&quot;files&quot;--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span>  <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;files&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span>  <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;上传&quot;</span>  <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;upload&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>              <br></code></pre></td></tr></table></figure></li><li><p>搜索框和滑块验证</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"> <span class="hljs-comment">&lt;!--滑块input type=&quot;range&quot; --&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>滑块；<br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;range&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;voice&quot;</span> <span class="hljs-attr">min</span>=<span class="hljs-string">&quot;0&quot;</span>  <span class="hljs-attr">max</span>=<span class="hljs-string">&quot;100&quot;</span>  <span class="hljs-attr">step</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span><br> <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 搜索框 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>搜索：<br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;search&quot;</span>  <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;search&quot;</span>  <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;mark&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>  <br></code></pre></td></tr></table></figure></li><li><p>表单的应用和元素<br>readonly只读<br>disabled 禁用<br>hidden   隐藏<br><img src="/image/2.1.PNG" alt="表单元素"></p></li><li><p>表单的初级验证<br>优点：数据安全，减轻压力</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">常用方式<br>placeeholder 提示信息(文本框中有提示信息)<br><span class="hljs-built_in">require</span> 非空判断<br>pattern  正则表达式<br></code></pre></td></tr></table></figure></li><li><p>其他</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- 增强鼠标可用性   了解--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;mark&quot;</span>&gt;</span>你点我试试<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>  &gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>//正则验证<br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>自定义邮箱：<br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>  <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;diymail&quot;</span>  <span class="hljs-attr">pattern</span>=<span class="hljs-string">&quot;^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="基于B站视频学习-特别感谢up主-遇见狂神说"><a href="#基于B站视频学习-特别感谢up主-遇见狂神说" class="headerlink" title="基于B站视频学习 特别感谢up主 遇见狂神说"></a>基于<a href="https://www.bilibili.com/video/BV1x4411V75C">B站视频</a>学习 特别感谢up主 <a href="https://space.bilibili.com/95256449?spm_id_from=333.788.b_765f7570696e666f.1">遇见狂神说</a></h4></li></ol>]]></content>
    
    
    <categories>
      
      <category>Html</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Html</tag>
      
      <tag>前端基础</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Html&amp;基本标签&amp;列表</title>
    <link href="/2021/03/30/%E9%87%8D%E5%AD%A6Html(%E4%B8%80)/"/>
    <url>/2021/03/30/%E9%87%8D%E5%AD%A6Html(%E4%B8%80)/</url>
    
    <content type="html"><![CDATA[<p>之前对Html有过学习和了解，但没有系统学习，基础还是很重要的所以现在重新学习，一起共勉。</p><hr><h2 id="Html基础"><a href="#Html基础" class="headerlink" title="Html基础"></a>Html基础</h2><h3 id="1-基本信息"><a href="#1-基本信息" class="headerlink" title="1.基本信息"></a>1.基本信息</h3><ol><li>DOCTYPE 告诉浏览器，我们要使用什么规范</li><li>head标签代表网页头部</li><li>meta描述性标签，它用来描述我们网站的一些信息</li><li>meta一般用来做SEO</li><li>title标签代表网页的主体<h3 id="2-基本标签"><a href="#2-基本标签" class="headerlink" title="2.基本标签"></a>2.基本标签</h3></li><li>h1-h6 一级-六级标签</li><li>p 段落标签</li><li>hr 水平标签</li><li>br 换行标签</li><li>strong 粗体标签</li><li>em 斜体</li><li>&amp;nbsp(空格)  @copy(版权所)有 &amp;gt(大于号) &amp;lt(小于号)—-特殊标签<h3 id="3-图像标签"><a href="#3-图像标签" class="headerlink" title="3.图像标签"></a>3.图像标签</h3></li><li> <code>&lt;img  src=&quot;../html/img/1.png&quot;  alt=&quot;女孩&quot;  title=&quot;悬停文字&quot; width=&quot;500px&quot; height=&quot;500px&quot;  &gt;  </code> (src:图片地址(必填)相对地址（推荐使用）;绝对地址../  –上一级目录 alt:  图片名字（必填）)<h3 id="4-链接标签"><a href="#4-链接标签" class="headerlink" title="4.链接标签"></a>4.链接标签</h3></li><li><code>&lt;a href=&quot;https://www.baidu.com&quot; target=&quot;_self&quot;&gt;点击我跳转到百度&lt;/a&gt;</code>a 标签,href : 必填，表示要跳转到那个页面,_blank  在新标签中打开,_self  在自己的的网页打开.</li><li>锚链接1.需要一个锚标记2.跳转到标记<br><code> &lt;a  href=&quot;#top&quot;&gt;回到顶部&lt;/a&gt;  &lt;a  name=&quot;down&quot;&gt;down&lt;/a&gt;</code>   </li><li>功能性链接 邮箱链接：mailto<br><code>&lt;a  href=&quot;mailto:232324265@qq.com&quot;&gt;点击联系我&lt;/a&gt;</code> <h3 id="5-列表学习"><a href="#5-列表学习" class="headerlink" title="5.列表学习"></a>5.列表学习</h3></li><li>有序列表<br>应用范围:  试卷，问答…. <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>java<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>python<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>运维<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>前端<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>c<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>无序列表<br>应用范围：导航，侧边栏….     <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>java<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>python<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>运维<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>前端<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>c<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li>自定义列表<br>dl:列表 dt: 列表名称 dd: 列表内容<br>运用在 公司网页底部  <pre><code>&lt;dl&gt;&lt;dt&gt;学科&lt;/dt&gt;&lt;dd&gt;java&lt;/dd&gt;&lt;dd&gt;python&lt;/dd&gt;&lt;dd&gt;位置&lt;/dd&gt;   &lt;dd&gt;西安&lt;/dd&gt;&lt;/dl&gt;</code></pre></li></ol><h4 id="基于B站视频学习-特别感谢up主-遇见狂神说"><a href="#基于B站视频学习-特别感谢up主-遇见狂神说" class="headerlink" title="基于B站视频学习 特别感谢up主 遇见狂神说"></a>基于<a href="https://www.bilibili.com/video/BV1x4411V75C">B站视频</a>学习 特别感谢up主 <a href="https://space.bilibili.com/95256449?spm_id_from=333.788.b_765f7570696e666f.1">遇见狂神说</a></h4>]]></content>
    
    
    <categories>
      
      <category>Html</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Html</tag>
      
      <tag>前端基础</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo+fluid搭建博客个人总结</title>
    <link href="/2021/03/30/hexo+fluid%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/"/>
    <url>/2021/03/30/hexo+fluid%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<p>大一大二学习了前端和后端的知识，在B站和各种网站上一通乱学，都没学精，现在发现学习了什么都记不得了。最近看了一位老师的视频学习到了你学进去的知识更重要的是输出，因为你输出了才真正是你学到的。今天开始用博客记录我学习的知识，一起共勉。</p><hr><h2 id="1-安装node-js"><a href="#1-安装node-js" class="headerlink" title="1.安装node.js"></a>1.安装node.js</h2><p><a href="https://nodejs.org/en/">官方网站</a>安装即可,安装步骤非常简单，一直next，下一步就可以了，默认安装就行。</p><h2 id="验证安装-命令"><a href="#验证安装-命令" class="headerlink" title="验证安装  命令:"></a>验证安装  命令:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">node -v <span class="hljs-comment">#查看node版本  </span><br>npm -v <span class="hljs-comment">#查看npm版本</span><br></code></pre></td></tr></table></figure><h2 id="安装淘宝cnpm"><a href="#安装淘宝cnpm" class="headerlink" title="安装淘宝cnpm"></a>安装淘宝cnpm</h2><p>为了速度更快些，使用淘宝cnpm管理器  </p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tcl">命令：npm install -g cnpm --<span class="hljs-keyword">registry</span>=<span class="hljs-keyword">http</span>://<span class="hljs-keyword">registry</span>.npm.taobao.org  <br>安装完成查看cnpm是否成功，查看版本信息 cnpm -v<br></code></pre></td></tr></table></figure><h2 id="2-安装hexo框架"><a href="#2-安装hexo框架" class="headerlink" title="2.安装hexo框架"></a>2.安装hexo框架</h2><p>命令：<code>cnpm install -g hexo-cli</code></p><p>安装完成查看版本: <code>hexo -v</code></p><h2 id="使用Hexo创建博客"><a href="#使用Hexo创建博客" class="headerlink" title="使用Hexo创建博客"></a>使用Hexo创建博客</h2><h3 id="Linux系统命令"><a href="#Linux系统命令" class="headerlink" title="Linux系统命令"></a>Linux系统命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">mkdir blog <span class="hljs-comment">#创建blog目录  </span><br><span class="hljs-built_in">cd</span> blog  <span class="hljs-comment">#进入blog目录  </span><br>sudo hexo init  <span class="hljs-comment">#生成博客 初始化博客  </span><br>hexo s <span class="hljs-comment">#启动本地博客服务  </span><br>http://localhost:4000/ <span class="hljs-comment">#本地访问地址  </span><br>hexo n <span class="hljs-string">&quot;我的第一篇文章&quot;</span> <span class="hljs-comment">#创建新的文章</span><br></code></pre></td></tr></table></figure><h3 id="Window系统"><a href="#Window系统" class="headerlink" title="Window系统"></a>Window系统</h3><p>博客目录下/source/_posts下直接新建.md文件</p><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><blockquote><p>官方文档地址  <a href="https://hexo.io/zh-cn/docs/">https://hexo.io/zh-cn/docs/</a></p></blockquote><h2 id="3-主题Fluid的更换"><a href="#3-主题Fluid的更换" class="headerlink" title="3.主题Fluid的更换"></a>3.主题Fluid的更换</h2><h3 id="获取主题最新版本"><a href="#获取主题最新版本" class="headerlink" title="获取主题最新版本"></a>获取主题最新版本</h3><h3 id="方式一："><a href="#方式一：" class="headerlink" title="方式一："></a>方式一：</h3><p>Hexo 5.0.0 版本以上，推荐通过 npm 直接安装，进入博客目录执行命令：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm install <span class="hljs-comment">--save hexo-theme-fluid  </span><br></code></pre></td></tr></table></figure><p>然后在博客目录下创建 _config.fluid.yml，将主题的 _config.yml 内容复制进去。</p><h3 id="方式二："><a href="#方式二：" class="headerlink" title="方式二："></a>方式二：</h3><p>下载最新release版本解压到 themes 目录，并将解压出的文件夹重命名为 fluid。<br>指定主题<br>如下修改 Hexo 博客目录中的 _config.yml：</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">theme:</span> fluid  <span class="hljs-meta"># 指定主题   </span><br><span class="hljs-symbol">language:</span> <span class="hljs-built_in">zh</span>-CN  <span class="hljs-meta"># 指定语言，会影响主题显示的语言，按需修改</span><br></code></pre></td></tr></table></figure><h3 id="创建「关于页」"><a href="#创建「关于页」" class="headerlink" title="创建「关于页」"></a>创建「关于页」</h3><p>首次使用主题的「关于页」需要手动创建：(注：此处必须创建，否则about页面无)</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe">hexo <span class="hljs-keyword">new</span> <span class="hljs-type">page</span> about   <br></code></pre></td></tr></table></figure><p>创建成功后，编辑博客目录下 /source/about/index.md，添加 layout 属性。<br>修改后的文件示例如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-meta">---</span><br><span class="hljs-attr">title:</span> <span class="hljs-string">about</span>   <br><span class="hljs-attr">date:</span> <span class="hljs-number">2021-03-23 19:20:33</span>   <br><span class="hljs-attr">layout:</span> <span class="hljs-string">about</span>   <br><span class="hljs-string">这里写关于页的正文，支持</span> <span class="hljs-string">Markdown,</span> <span class="hljs-string">HTML</span><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><h3 id="更新主题"><a href="#更新主题" class="headerlink" title="更新主题"></a>更新主题</h3><p>修改hexo根目录下的 _config.yml 文件 ： theme: fluid<br>百度了很多更改Fluid背景图片和文字的方法没有找到，官方文档一开始看的有点看不懂，没有静下心看，导致耽误了很久。   </p><h3 id="官方文档-https-hexo-fluid-dev-com-docs-start"><a href="#官方文档-https-hexo-fluid-dev-com-docs-start" class="headerlink" title="官方文档  https://hexo.fluid-dev.com/docs/start/"></a>官方文档  <code>https://hexo.fluid-dev.com/docs/start/</code></h3><p>更改地址在theme/fluid/_config.yml 或者 _config.fluid.yml中修改全局配置。</p><h2 id="4-使用Git上传至Github"><a href="#4-使用Git上传至Github" class="headerlink" title="4. 使用Git上传至Github"></a>4. 使用Git上传至Github</h2><p><a href="https://git-scm.com/">Git官网</a>  下载直接安装，一直点下一步<br>使用教程 参考链接<code>https://www.runoob.com/git/git-tutorial.html</code>(推荐使用免密SSH公钥)</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">hexo</span> c<span class="hljs-comment">#清理一下</span><br>hexo g<span class="hljs-comment">#生成</span><br>hexo d<span class="hljs-comment">#部署到远程Github仓库</span><br></code></pre></td></tr></table></figure><h2 id="5-部署到Github上"><a href="#5-部署到Github上" class="headerlink" title="5.部署到Github上"></a>5.部署到Github上</h2><p>Github创建一个新的仓库 <code>YourGithubName.github.io</code><br>#在blog目录下安装git部署插件<code>cnpm install --save hexo-deployer-git</code><br>#配置_config.yml   </p><pre><code># Deployment   ## Docs: https://hexo.io/docs/deployment.html    deploy:         type: git         repo: https://github.com/YourGithubName/   YourGithubName.github.io.git      branch: master   </code></pre><p>#部署到Github仓库里<code>hexo d</code><br>#访问这个地址可以查看博客<code>https://YourGithubName.github.io/</code></p><h3 id="注-YourGithubName必须与你的Github名字一模一样，否者页面打不开。"><a href="#注-YourGithubName必须与你的Github名字一模一样，否者页面打不开。" class="headerlink" title="注:YourGithubName必须与你的Github名字一模一样，否者页面打不开。"></a>注:YourGithubName必须与你的Github名字一模一样，否者页面打不开。</h3><h2 id="总结：看官方文档是学习最快最好的方式，一开始看不懂没关系，一个字慢慢看，一定会有收获的。切勿囫囵吞枣。"><a href="#总结：看官方文档是学习最快最好的方式，一开始看不懂没关系，一个字慢慢看，一定会有收获的。切勿囫囵吞枣。" class="headerlink" title="总结：看官方文档是学习最快最好的方式，一开始看不懂没关系，一个字慢慢看，一定会有收获的。切勿囫囵吞枣。"></a>总结：看官方文档是学习最快最好的方式，一开始看不懂没关系，一个字慢慢看，一定会有收获的。切勿囫囵吞枣。</h2><h4 id="基于B站视频搭建-特别感谢up主-CodeSheep"><a href="#基于B站视频搭建-特别感谢up主-CodeSheep" class="headerlink" title="基于B站视频搭建 特别感谢up主 CodeSheep"></a>基于<a href="https://www.bilibili.com/video/BV1Yb411a7ty/?spm_id_from=333.788.recommend_more_video.-1">B站视频</a>搭建 特别感谢up主 <a href="https://space.bilibili.com/384068749?spm_id_from=333.788.b_765f7570696e666f.1">CodeSheep</a></h4>]]></content>
    
    
    <categories>
      
      <category>Myblog</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Myblog</tag>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
